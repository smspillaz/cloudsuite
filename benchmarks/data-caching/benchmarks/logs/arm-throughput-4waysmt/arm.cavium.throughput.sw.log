+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 6 threads, 150000 rps'
==> Bench: 16384 keys, 512 conns, 6 threads, 150000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 150000 -k 16384 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
caching_network
+ docker network create caching_network
8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 150000 -k 16384 -c 512 -f 512 -w 6'
Starting client with -r 150000 -k 16384 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 150000 -k 16384 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 150000 -k 16384 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 150000 cpus 6
meanInterarrival 40
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1762914816
starting receive base loop
num_worker_connections 85
Creating worker on tid 992539136
starting receive base loop
num_worker_connections 85
Creating worker on tid 227537408
starting receive base loop
num_worker_connections 85
Creating worker on tid 3760124416
starting receive base loop
num_worker_connections 85
Creating worker on tid 2995122688
starting receive base loop
Created 512 connections total
Creating worker on tid 2232742400
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575390366.388791,       0.0,      443176,     398747,      44429,     270511,     128236,   5.625438,  13.200000,  16.000000,  22.500000,   5.637075,   0.000000,  67.169003, 495.003373
Outstanding requests per worker:
201 187 209 191 178 206 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150012.6,      750064,     675297,      74767,     515570,     159727,   7.695263,  14.200000,  16.500000,  20.000000,   4.399070,   0.240000,  26.428999, 588.355983
Outstanding requests per worker:
197 195 197 183 185 211 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150005.2,      750027,     675106,      74921,     540333,     134773,   7.956612,  14.700000,  17.200000,  20.600000,   4.552857,   0.299000,  27.969999, 629.151249
Outstanding requests per worker:
203 192 215 206 217 187 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150020.0,      750101,     675224,      74877,     554889,     120335,   8.086246,  14.900000,  17.300000,  21.200000,   4.647911,   0.265000,  29.767999, 653.089702
Outstanding requests per worker:
198 211 232 183 200 190 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150010.0,      750051,     674801,      75250,     565618,     109183,   8.193722,  15.100000,  17.600000,  21.500000,   4.712042,   0.317000,  29.943001, 670.095163
Outstanding requests per worker:
212 201 199 179 206 218 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150004.2,      750022,     675001,      75021,     572529,     102472,   8.289928,  15.300000,  17.900000,  21.900000,   4.779872,   0.305000,  30.436000, 681.835738
Outstanding requests per worker:
183 201 206 229 222 214 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150014.2,      750072,     675275,      74797,     579038,      96237,   8.350353,  15.400000,  18.100000,  21.900000,   4.803551,   0.246000,  28.922001, 692.005987
Outstanding requests per worker:
221 226 211 176 198 232 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:59   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   15:59   0:00 /usr/lib/linux
memcache      7  316  0.0 444096 142784 pts/0   Sl+  15:59   2:12 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:00   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       18756820059      instructions:u            #    0.71  insn per cycle         
       26520807984      cycles:u                                                    
         112839017      armv8_pmuv3_0/br_mis_pred/:u                                   
        2944830053      armv8_pmuv3_0/br_pred/:u                                    

      42.531182428 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 6 threads, 152000 rps'
==> Bench: 16384 keys, 512 conns, 6 threads, 152000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 152000 -k 16384 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 152000 -k 16384 -c 512 -f 512 -w 6'
Starting client with -r 152000 -k 16384 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 152000 -k 16384 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 152000 -k 16384 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 152000 cpus 6
meanInterarrival 39
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1883566592
starting receive base loop
num_worker_connections 85
Creating worker on tid 1108013568
starting receive base loop
num_worker_connections 85
Creating worker on tid 345633280
starting receive base loop
num_worker_connections 85
Creating worker on tid 3875598848
starting receive base loop
num_worker_connections 85
Creating worker on tid 3113218560
starting receive base loop
Created 512 connections total
Creating worker on tid 2350838272
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575390411.388836,       0.0,      352974,     317502,      35472,     212134,     105368,  11.340299,  24.100000,  31.500000,  55.200000,  10.838630,   0.000000, 138.725996, 483.427169
Outstanding requests per worker:
269 265 223 216 234 253 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153852.4,      769263,     692459,      76804,     524765,     167694,   9.561241,  17.400000,  20.800000,  25.500000,   5.489845,   0.329000,  34.947000, 582.019252
Outstanding requests per worker:
239 280 233 255 230 260 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153861.8,      769310,     692616,      76694,     553707,     138909,   9.789025,  17.700000,  21.300000,  26.500000,   5.646053,   0.405000,  39.632998, 628.505690
Outstanding requests per worker:
246 236 237 234 297 249 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153869.6,      769349,     692407,      76942,     568704,     123703,   9.942216,  18.000000,  21.700000,  26.800000,   5.724529,   0.260000,  44.206999, 652.213913
Outstanding requests per worker:
261 243 251 246 248 238 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153835.0,      769176,     692116,      77060,     579155,     112961,  10.102908,  18.200000,  22.100000,  27.100000,   5.796595,   0.299000,  38.596999, 669.614143
Outstanding requests per worker:
259 279 256 296 234 275 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153865.2,      769327,     692347,      76980,     587917,     104430,  10.185652,  18.500000,  22.300000,  27.200000,   5.855850,   0.364000,  39.530002, 682.300814
Outstanding requests per worker:
290 263 250 247 237 287 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153850.6,      769254,     692030,      77224,     592809,      99221,  10.337737,  18.600000,  22.700000,  27.900000,   5.950541,   0.298000,  48.734002, 691.559250
Outstanding requests per worker:
278 254 274 265 285 274 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:00   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   16:00   0:00 /usr/lib/linux
memcache      7  316  0.0 445120 151936 pts/0   Sl+  16:00   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:01   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       18856919379      instructions:u            #    0.73  insn per cycle         
       25997935620      cycles:u                                                    
         111465445      armv8_pmuv3_0/br_mis_pred/:u                                   
        2946137491      armv8_pmuv3_0/br_pred/:u                                    

      41.440550196 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 6 threads, 154000 rps'
==> Bench: 16384 keys, 512 conns, 6 threads, 154000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 154000 -k 16384 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 154000 -k 16384 -c 512 -f 512 -w 6'
Starting client with -r 154000 -k 16384 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 154000 -k 16384 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 154000 -k 16384 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 154000 cpus 6
meanInterarrival 38
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1777791488
starting receive base loop
num_worker_connections 85
Creating worker on tid 1008660992
starting receive base loop
num_worker_connections 85
Creating worker on tid 243659264
starting receive base loop
num_worker_connections 85
Creating worker on tid 3776246272
starting receive base loop
num_worker_connections 85
Creating worker on tid 3013865984
starting receive base loop
Created 512 connections total
Creating worker on tid 2248864256
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575390456.388881,       0.0,      364757,     328040,      36717,     219193,     108847,  15.761321,  34.000000,  48.100000,  83.200000,  16.941377,   0.000000, 250.542015, 484.013038
Outstanding requests per worker:
288 317 299 270 313 278 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157903.0,      789516,     711126,      78390,     539211,     171915,  11.572562,  20.200000,  25.200000,  31.500000,   6.586436,   0.372000,  61.682001, 582.695685
Outstanding requests per worker:
307 309 289 309 316 294 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157882.8,      789415,     710718,      78697,     568412,     142306,  12.020743,  21.100000,  26.100000,  33.100000,   6.894985,   0.349000,  66.597998, 629.024765
Outstanding requests per worker:
328 346 293 323 319 327 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157902.0,      789511,     709965,      79546,     583396,     126569,  12.448726,  21.600000,  27.000000,  34.500000,   7.124300,   0.366000,  67.178003, 653.142825
Outstanding requests per worker:
350 350 338 338 300 289 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157898.2,      789492,     710693,      78799,     595379,     115314,  12.602774,  21.800000,  27.400000,  34.700000,   7.213592,   0.322000,  64.303003, 670.410439
Outstanding requests per worker:
350 351 359 345 300 325 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157916.8,      789585,     710686,      78899,     603434,     107252,  12.855110,  22.300000,  27.700000,  36.100000,   7.415440,   0.354000,  71.865998, 683.504422
Outstanding requests per worker:
365 334 352 352 320 292 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157895.2,      789477,     710497,      78980,     609429,     101068,  12.991327,  22.200000,  28.300000,  36.100000,   7.439592,   0.325000,  67.868002, 692.406045
Outstanding requests per worker:
358 342 338 345 324 356 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:01   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   16:01   0:00 /usr/lib/linux
memcache      7  316  0.0 448192 148096 pts/0   Sl+  16:01   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:01   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19450993478      instructions:u            #    0.73  insn per cycle         
       26605323917      cycles:u                                                    
         113631404      armv8_pmuv3_0/br_mis_pred/:u                                   
        3031353041      armv8_pmuv3_0/br_pred/:u                                    

      41.470711173 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 6 threads, 156000 rps'
==> Bench: 16384 keys, 512 conns, 6 threads, 156000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 156000 -k 16384 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 156000 -k 16384 -c 512 -f 512 -w 6'
Starting client with -r 156000 -k 16384 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 156000 -k 16384 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 156000 -k 16384 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 156000 cpus 6
meanInterarrival 38
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2433544704
starting receive base loop
num_worker_connections 85
Creating worker on tid 1663627776
starting receive base loop
num_worker_connections 85
Creating worker on tid 898626048
starting receive base loop
num_worker_connections 85
Creating worker on tid 136245760
starting receive base loop
num_worker_connections 85
Creating worker on tid 3666211328
starting receive base loop
Created 512 connections total
Creating worker on tid 2903831040
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575390501.388926,       0.0,      359276,     323299,      35977,     215622,     107677,  14.327452,  30.700000,  42.000000,  77.500000,  14.995628,   0.000000, 207.047001, 483.066746
Outstanding requests per worker:
275 299 290 286 269 264 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157902.6,      789514,     710861,      78653,     538817,     172044,  10.698933,  19.000000,  23.300000,  28.900000,   6.087962,   0.368000,  54.574002, 582.241600
Outstanding requests per worker:
274 305 260 280 311 264 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157897.8,      789490,     710695,      78795,     567760,     142935,  11.065392,  19.500000,  24.100000,  30.400000,   6.339538,   0.327000,  56.109000, 628.567374
Outstanding requests per worker:
299 304 272 310 277 284 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157904.2,      789522,     710526,      78996,     584085,     126441,  11.329346,  19.900000,  24.700000,  30.900000,   6.485202,   0.320000,  58.237001, 653.629180
Outstanding requests per worker:
312 295 285 287 286 312 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157910.0,      789551,     710722,      78829,     595305,     115417,  11.467337,  20.000000,  25.100000,  31.300000,   6.556835,   0.330000,  59.771001, 670.804628
Outstanding requests per worker:
289 320 314 297 285 295 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157898.8,      789495,     710486,      79009,     603234,     107252,  11.636209,  20.400000,  25.300000,  32.400000,   6.720863,   0.364000,  65.338001, 682.721979
Outstanding requests per worker:
303 312 317 291 295 308 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157900.4,      789503,     710631,      78872,     609659,     100972,  11.756039,  20.600000,  25.600000,  32.300000,   6.759959,   0.373000,  61.693002, 692.803013
Outstanding requests per worker:
337 324 314 297 301 289 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:01   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:01   0:00 /usr/lib/linux
memcache      7  316  0.0 448192 151616 pts/0   Sl+  16:01   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:02   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19339852287      instructions:u            #    0.72  insn per cycle         
       26916560990      cycles:u                                                    
         114101676      armv8_pmuv3_0/br_mis_pred/:u                                   
        3018118394      armv8_pmuv3_0/br_pred/:u                                    

      41.291304534 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 6 threads, 158000 rps'
==> Bench: 16384 keys, 512 conns, 6 threads, 158000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 158000 -k 16384 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 158000 -k 16384 -c 512 -f 512 -w 6'
Starting client with -r 158000 -k 16384 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 158000 -k 16384 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 158000 -k 16384 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 158000 cpus 6
meanInterarrival 37
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1430057472
starting receive base loop
num_worker_connections 85
Creating worker on tid 656994816
starting receive base loop
num_worker_connections 85
Creating worker on tid 4186960384
starting receive base loop
num_worker_connections 85
Creating worker on tid 3424580096
starting receive base loop
num_worker_connections 85
Creating worker on tid 2659578368
starting receive base loop
Created 512 connections total
Creating worker on tid 1897198080
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575390546.388971,       0.0,      373948,     336344,      37604,     225514,     110830,  20.750591,  46.200000,  66.800000, 100.700000,  22.492355,   0.000000, 347.072989, 487.107970
Outstanding requests per worker:
380 345 359 370 353 362 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162148.8,      810745,     730144,      80601,     554040,     176104,  13.784275,  23.500000,  29.400000,  39.100000,   7.898344,   0.476000,  77.670000, 583.394115
Outstanding requests per worker:
384 384 355 359 431 378 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162163.0,      810816,     729825,      80991,     584733,     145092,  14.322669,  24.300000,  30.600000,  40.600000,   8.197510,   0.455000,  77.840999, 629.527750
Outstanding requests per worker:
396 397 408 388 389 381 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162146.6,      810734,     729947,      80787,     600833,     129114,  14.810695,  24.700000,  31.600000,  42.100000,   8.464908,   0.527000,  84.215999, 654.837846
Outstanding requests per worker:
426 447 396 419 431 366 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162176.6,      810884,     729504,      81380,     612433,     117071,  15.170343,  25.600000,  32.300000,  43.100000,   8.686791,   0.549000,  88.597998, 672.433778
Outstanding requests per worker:
401 406 450 378 386 447 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162173.8,      810870,     729769,      81101,     620269,     109500,  15.350327,  25.600000,  32.800000,  43.600000,   8.786386,   0.493000,  85.680000, 684.516461
Outstanding requests per worker:
390 425 458 396 397 394 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161568.2,      807842,     726953,      80889,     625122,     101831,  16.106672,  27.000000,  35.500000,  48.500000,   9.794797,   0.462000, 119.910002, 694.152500
Outstanding requests per worker:
977 872 918 895 866 971 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:02   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:02   0:00 /usr/lib/linux
memcache      7  316  0.0 516224 154688 pts/0   Sl+  16:02   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20056032752      instructions:u            #    0.73  insn per cycle         
       27503596098      cycles:u                                                    
         122900700      armv8_pmuv3_0/br_mis_pred/:u                                   
        3106041004      armv8_pmuv3_0/br_pred/:u                                    

      41.490697169 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 6 threads, 160000 rps'
==> Bench: 16384 keys, 512 conns, 6 threads, 160000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 160000 -k 16384 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 160000 -k 16384 -c 512 -f 512 -w 6'
Starting client with -r 160000 -k 16384 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 160000 -k 16384 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 160000 -k 16384 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 160000 cpus 6
meanInterarrival 37
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2314269184
starting receive base loop
num_worker_connections 85
Creating worker on tid 1545531904
starting receive base loop
num_worker_connections 85
Creating worker on tid 780530176
starting receive base loop
num_worker_connections 85
Creating worker on tid 18149888
starting receive base loop
num_worker_connections 85
Creating worker on tid 3550736896
starting receive base loop
Created 512 connections total
Creating worker on tid 2785735168
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575390590.389015,       0.0,      371927,     334823,      37104,     224223,     110600,  19.110218,  42.200000,  61.600000,  94.800000,  20.573001,   0.000000, 282.974988, 485.569307
Outstanding requests per worker:
354 347 355 344 321 342 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162164.4,      810823,     729698,      81125,     554014,     175684,  13.067946,  22.400000,  28.000000,  36.800000,   7.457543,   0.487000,  74.720003, 583.868548
Outstanding requests per worker:
332 359 374 377 342 355 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162163.0,      810816,     729767,      81049,     584463,     145304,  13.567991,  23.000000,  29.100000,  38.000000,   7.715127,   0.452000,  73.462002, 629.772045
Outstanding requests per worker:
378 368 371 356 386 372 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162145.2,      810727,     729685,      81042,     600863,     128822,  14.043222,  23.900000,  30.000000,  40.000000,   8.044654,   0.529000,  78.529000, 654.904782
Outstanding requests per worker:
377 393 399 369 421 405 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162180.6,      810904,     729924,      80980,     612747,     117177,  14.365435,  24.000000,  30.900000,  40.800000,   8.212987,   0.506000,  76.771997, 672.112688
Outstanding requests per worker:
438 359 367 415 388 365 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162173.0,      810866,     729903,      80963,     621141,     108762,  14.597402,  24.400000,  31.200000,  41.500000,   8.356505,   0.516000,  81.056997, 685.289844
Outstanding requests per worker:
400 417 428 365 380 367 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161620.4,      808103,     727574,      80529,     625747,     101827,  15.043661,  25.500000,  32.900000,  44.300000,   8.977533,   0.478000, 102.006003, 695.152648
Outstanding requests per worker:
797 811 922 883 805 946 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:03   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   16:03   0:00 /usr/lib/linux
memcache      7  316  0.0 515200 156544 pts/0   Sl+  16:03   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:04   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19967157305      instructions:u            #    0.73  insn per cycle         
       27322706432      cycles:u                                                    
         113997435      armv8_pmuv3_0/br_mis_pred/:u                                   
        3107738785      armv8_pmuv3_0/br_pred/:u                                    

      41.310233815 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 6 threads, 162000 rps'
==> Bench: 16384 keys, 512 conns, 6 threads, 162000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 162000 -k 16384 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 162000 -k 16384 -c 512 -f 512 -w 6'
Starting client with -r 162000 -k 16384 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 162000 -k 16384 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 162000 -k 16384 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 162000 cpus 6
meanInterarrival 37
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1425928704
starting receive base loop
num_worker_connections 85
Creating worker on tid 656994816
starting receive base loop
num_worker_connections 85
Creating worker on tid 4186960384
starting receive base loop
num_worker_connections 85
Creating worker on tid 3424580096
starting receive base loop
num_worker_connections 85
Creating worker on tid 2659578368
starting receive base loop
Created 512 connections total
Creating worker on tid 1897198080
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575390635.389060,       0.0,      369882,     332890,      36992,     222788,     110102,  19.231275,  43.600000,  63.900000,  95.300000,  20.853913,   0.000000, 286.103010, 484.955898
Outstanding requests per worker:
315 367 367 309 361 337 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162166.4,      810833,     729763,      81070,     553717,     176046,  12.652284,  22.000000,  27.100000,  35.500000,   7.251519,   0.432000,  69.510996, 583.363045
Outstanding requests per worker:
323 395 354 346 331 326 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162154.8,      810775,     729228,      81547,     584033,     145195,  13.137805,  22.900000,  27.900000,  37.500000,   7.609954,   0.400000,  77.586003, 630.367415
Outstanding requests per worker:
384 348 346 328 355 397 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162157.6,      810789,     729975,      80814,     601866,     128109,  13.496249,  23.300000,  28.700000,  38.100000,   7.742104,   0.420000,  76.337002, 656.127337
Outstanding requests per worker:
377 411 363 368 356 354 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162169.2,      810847,     730112,      80735,     612691,     117421,  13.772737,  23.700000,  29.400000,  39.200000,   7.926100,   0.434000,  75.608999, 672.066086
Outstanding requests per worker:
409 387 378 331 333 400 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162170.4,      810853,     729628,      81225,     620418,     109210,  13.933903,  23.800000,  29.800000,  39.500000,   7.992207,   0.472000,  74.694999, 684.265638
Outstanding requests per worker:
409 356 342 409 340 379 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161851.6,      809259,     728425,      80834,     625900,     102525,  14.747110,  25.400000,  32.400000,  45.200000,   9.165367,   0.463000, 115.244001, 693.972377
Outstanding requests per worker:
604 646 731 544 594 716 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:04   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:04   0:00 /usr/lib/linux
memcache      7  316  0.0 515200 151616 pts/0   Sl+  16:04   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:04   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19943933334      instructions:u            #    0.73  insn per cycle         
       27244248185      cycles:u                                                    
         114617159      armv8_pmuv3_0/br_mis_pred/:u                                   
        3110478500      armv8_pmuv3_0/br_pred/:u                                    

      41.169991050 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 6 threads, 164000 rps'
==> Bench: 16384 keys, 512 conns, 6 threads, 164000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 164000 -k 16384 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 164000 -k 16384 -c 512 -f 512 -w 6'
Starting client with -r 164000 -k 16384 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 164000 -k 16384 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 164000 -k 16384 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 164000 cpus 6
meanInterarrival 36
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1639576064
starting receive base loop
num_worker_connections 85
Creating worker on tid 866382336
starting receive base loop
num_worker_connections 85
Creating worker on tid 101380608
starting receive base loop
num_worker_connections 85
Creating worker on tid 3633967616
starting receive base loop
num_worker_connections 85
Creating worker on tid 2868965888
starting receive base loop
Created 512 connections total
Creating worker on tid 2106585600
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575390680.389105,       0.0,      378901,     341102,      37799,     228856,     112246,  39.563803,  84.300000,  98.600000, 144.900000,  35.141915,   0.000000, 374.186993, 487.445131
Outstanding requests per worker:
858 796 852 859 960 823 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166874.8,      834375,     751334,      83041,     571693,     179641,  26.419167,  63.300000,  77.100000,  92.500000,  22.209167,   0.743000, 176.743001, 585.649007
Outstanding requests per worker:
601 740 643 727 698 741 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166889.0,      834446,     751752,      82694,     603267,     148485,  21.930073,  43.400000,  57.700000,  79.600000,  15.992323,   0.547000, 134.075001, 631.752875
Outstanding requests per worker:
502 554 597 471 480 482 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166643.6,      833219,     749938,      83281,     619656,     130282,  18.626809,  30.100000,  40.000000,  53.600000,  10.563255,   0.700000,  97.506002, 657.428887
Outstanding requests per worker:
518 563 608 533 522 522 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166711.4,      833558,     749849,      83709,     629981,     119868,  19.028850,  31.000000,  41.100000,  55.600000,  10.961340,   0.708000, 110.368997, 672.967746
Outstanding requests per worker:
526 476 513 521 521 528 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166644.2,      833222,     750054,      83168,     639126,     110928,  19.046477,  30.500000,  41.000000,  54.900000,  10.820300,   0.699000,  98.811999, 685.700056
Outstanding requests per worker:
499 581 529 530 542 560 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166135.2,      830677,     747609,      83068,     644143,     103466,  22.228746,  42.000000,  54.600000,  78.300000,  15.163395,   0.616000, 144.920006, 696.170306
Outstanding requests per worker:
963 1066 981 963 1023 962 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:04   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:04   0:00 /usr/lib/linux
memcache      7  308  0.0 516224 153792 pts/0   Sl+  16:04   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:05   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20733844793      instructions:u            #    0.73  insn per cycle         
       28407437979      cycles:u                                                    
         115635922      armv8_pmuv3_0/br_mis_pred/:u                                   
        3210653249      armv8_pmuv3_0/br_pred/:u                                    

      41.321336623 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 6 threads, 166000 rps'
==> Bench: 16384 keys, 512 conns, 6 threads, 166000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 166000 -k 16384 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 166000 -k 16384 -c 512 -f 512 -w 6'
Starting client with -r 166000 -k 16384 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 166000 -k 16384 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 166000 -k 16384 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 166000 cpus 6
meanInterarrival 36
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2000941568
starting receive base loop
num_worker_connections 85
Creating worker on tid 1226109440
starting receive base loop
num_worker_connections 85
Creating worker on tid 463729152
starting receive base loop
num_worker_connections 85
Creating worker on tid 3993694720
starting receive base loop
num_worker_connections 85
Creating worker on tid 3231314432
starting receive base loop
Created 512 connections total
Creating worker on tid 2466312704
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575390725.389150,       0.0,      389971,     350998,      38973,     236734,     114264,  28.499137,  68.400000,  83.100000, 125.200000,  29.992884,   0.000000, 402.220011, 489.885689
Outstanding requests per worker:
570 616 602 634 672 660 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166873.0,      834366,     751148,      83218,     572973,     178175,  18.061779,  31.800000,  40.600000,  64.300000,  11.729134,   0.593000, 127.781004, 587.493796
Outstanding requests per worker:
471 512 482 448 417 447 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166653.6,      833269,     750420,      82849,     602958,     147462,  17.374763,  28.300000,  36.800000,  49.400000,   9.782211,   0.437000,  95.958002, 632.907325
Outstanding requests per worker:
494 474 482 517 477 470 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166656.2,      833282,     749981,      83301,     618764,     131217,  17.922736,  29.400000,  38.000000,  52.100000,  10.179320,   0.563000,  93.593001, 656.861774
Outstanding requests per worker:
501 568 493 450 552 487 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166678.6,      833394,     749946,      83448,     630704,     119242,  18.317746,  30.300000,  39.200000,  53.600000,  10.522631,   0.711000, 104.698002, 673.741460
Outstanding requests per worker:
512 511 520 493 527 528 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166679.6,      833399,     749483,      83916,     638266,     111217,  18.707937,  31.300000,  40.200000,  56.100000,  10.885775,   0.428000, 102.990001, 685.664495
Outstanding requests per worker:
538 551 547 459 481 497 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166554.4,      832773,     749364,      83409,     645366,     103998,  20.835083,  36.900000,  48.500000,  69.600000,  13.338624,   0.672000, 118.139997, 695.731931
Outstanding requests per worker:
592 614 590 610 672 627 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:05   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:05   0:00 /usr/lib/linux
memcache      7  309  0.0 518272 157632 pts/0   Sl+  16:05   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:06   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20662977443      instructions:u            #    0.74  insn per cycle         
       28042086118      cycles:u                                                    
         116303367      armv8_pmuv3_0/br_mis_pred/:u                                   
        3208718203      armv8_pmuv3_0/br_pred/:u                                    

      41.550524583 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 6 threads, 168000 rps'
==> Bench: 16384 keys, 512 conns, 6 threads, 168000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 168000 -k 16384 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 168000 -k 16384 -c 512 -f 512 -w 6'
Starting client with -r 168000 -k 16384 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 168000 -k 16384 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 168000 -k 16384 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 168000 cpus 6
meanInterarrival 35
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1624371712
starting receive base loop
num_worker_connections 85
Creating worker on tid 847639040
starting receive base loop
num_worker_connections 85
Creating worker on tid 85258752
starting receive base loop
num_worker_connections 85
Creating worker on tid 3617845760
starting receive base loop
num_worker_connections 85
Creating worker on tid 2852844032
starting receive base loop
Created 512 connections total
Creating worker on tid 2090463744
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575390770.389195,       0.0,      383456,     344810,      38646,     231412,     113398,  52.555166,  99.400000, 118.800000, 173.600000,  39.922775,   0.000000, 393.528998, 487.387048
Outstanding requests per worker:
1644 1660 1813 1723 1649 1806 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171846.4,      859233,     773709,      85524,     589448,     184261,  47.139977, 127.100000, 149.100000, 192.400000,  47.893446,   0.682000, 344.864994, 587.119029
Outstanding requests per worker:
1414 1339 1408 1399 1330 1372 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171322.2,      856612,     771095,      85517,     620258,     150837,  49.165229, 146.800000, 173.300000, 212.600000,  56.260382,   0.822000, 329.475999, 634.106392
Outstanding requests per worker:
1482 1400 1531 1594 1328 1513 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171240.0,      856201,     770771,      85430,     637631,     133140,  54.218743, 165.200000, 196.900000, 251.300000,  64.963685,   0.772000, 372.492999, 658.872870
Outstanding requests per worker:
1651 1459 1579 1785 1747 1628 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171406.4,      857033,     770977,      86056,     648848,     122129,  57.874846, 178.700000, 207.600000, 260.800000,  69.501459,   0.826000, 413.782001, 675.111800
Outstanding requests per worker:
1605 1521 1703 1650 1756 1768 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171150.8,      855755,     770315,      85440,     656992,     113323,  61.746225, 194.400000, 229.200000, 290.800000,  76.796462,   0.984000, 451.355994, 686.847680
Outstanding requests per worker:
1868 1754 1950 2033 1943 1902 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169593.8,      847970,     763136,      84834,     658274,     104862,  83.333752, 217.900000, 255.800000, 329.500000,  84.614737,   0.875000, 569.786012, 697.756058
Outstanding requests per worker:
3488 3257 3483 3543 3544 3363 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:06   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:06   0:00 /usr/lib/linux
memcache      7  316  0.0 521344 161792 pts/0   Sl+  16:06   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:07   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21318088584      instructions:u            #    0.73  insn per cycle         
       29098187607      cycles:u                                                    
         125861162      armv8_pmuv3_0/br_mis_pred/:u                                   
        3315796594      armv8_pmuv3_0/br_pred/:u                                    

      41.550694151 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 6 threads, 170000 rps'
==> Bench: 16384 keys, 512 conns, 6 threads, 170000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 170000 -k 16384 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 170000 -k 16384 -c 512 -f 512 -w 6'
Starting client with -r 170000 -k 16384 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 170000 -k 16384 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 170000 -k 16384 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 170000 cpus 6
meanInterarrival 35
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2200957440
starting receive base loop
num_worker_connections 85
Creating worker on tid 1427436032
starting receive base loop
num_worker_connections 85
Creating worker on tid 665055744
starting receive base loop
num_worker_connections 85
Creating worker on tid 4195021312
starting receive base loop
num_worker_connections 85
Creating worker on tid 3432641024
starting receive base loop
Created 512 connections total
Creating worker on tid 2667639296
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575390815.389240,       0.0,      392581,     353539,      39042,     237817,     115722,  43.760735,  87.500000, 104.100000, 168.400000,  37.942460,   0.000000, 406.379998, 488.805574
Outstanding requests per worker:
1233 1141 1320 1161 1258 1272 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171536.2,      857682,     771648,      86034,     588948,     182700,  39.107533,  98.500000, 121.300000, 151.700000,  37.184071,   0.727000, 248.108998, 588.701867
Outstanding requests per worker:
1094 1196 1164 1218 1128 1133 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171235.0,      856176,     770734,      85442,     620309,     150425,  44.430350, 127.100000, 147.800000, 192.800000,  48.298972,   0.942000, 319.364011, 634.321953
Outstanding requests per worker:
1326 1273 1350 1377 1263 1423 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171298.2,      856492,     770968,      85524,     637969,     132999,  48.441767, 140.700000, 167.300000, 212.800000,  54.330355,   0.683000, 354.256988, 659.462718
Outstanding requests per worker:
1480 1361 1464 1434 1399 1592 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171341.4,      856708,     770796,      85912,     649524,     121272,  54.145277, 161.000000, 192.800000, 245.900000,  63.132248,   0.963000, 388.354987, 676.331780
Outstanding requests per worker:
1457 1404 1570 1509 1659 1636 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171374.8,      856875,     771267,      85608,     658547,     112720,  54.690412, 162.300000, 193.500000, 247.700000,  63.647794,   1.113000, 417.326003, 688.515867
Outstanding requests per worker:
1512 1672 1614 1566 1607 1620 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170135.4,      850678,     765283,      85395,     660366,     104917,  69.386673, 178.600000, 207.900000, 263.600000,  67.138364,   0.780000, 402.372986, 698.088048
Outstanding requests per worker:
2566 2515 2735 2874 2781 2688 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:07   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   16:07   0:00 /usr/lib/linux
memcache      7  316  0.0 521344 161664 pts/0   Sl+  16:07   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:07   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21338054867      instructions:u            #    0.74  insn per cycle         
       28721815222      cycles:u                                                    
         121410205      armv8_pmuv3_0/br_mis_pred/:u                                   
        3322249752      armv8_pmuv3_0/br_pred/:u                                    

      41.331144602 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 6 threads, 172000 rps'
==> Bench: 16384 keys, 512 conns, 6 threads, 172000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 172000 -k 16384 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 172000 -k 16384 -c 512 -f 512 -w 6'
Starting client with -r 172000 -k 16384 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 172000 -k 16384 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 172000 -k 16384 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 172000 cpus 6
meanInterarrival 34
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1951527424
starting receive base loop
num_worker_connections 85
Creating worker on tid 1175122432
starting receive base loop
num_worker_connections 85
Creating worker on tid 412742144
starting receive base loop
num_worker_connections 85
Creating worker on tid 3942707712
starting receive base loop
num_worker_connections 85
Creating worker on tid 3180327424
starting receive base loop
Created 512 connections total
Creating worker on tid 2417947136
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575390861.389286,       0.0,      505955,     455438,      50517,     312578,     142860,  41.860532,  96.700000, 115.800000, 146.300000,  40.578209,   0.000000, 292.288005, 503.810229
Outstanding requests per worker:
2656 2705 2826 2728 2740 2683 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173824.6,      869124,     782026,      87098,     602609,     179417, 137.880962, 202.400000, 227.700000, 275.400000,  49.551387,   1.816000, 439.256012, 596.765221
Outstanding requests per worker:
4707 4766 4967 4970 5037 5243 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174908.0,      874541,     786902,      87639,     636596,     150306, 190.096707, 274.300000, 309.000000, 387.800000,  64.856207,  11.335000, 551.432014, 638.734099
Outstanding requests per worker:
5841 5792 6475 6465 6657 6331 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175071.4,      875358,     788459,      86899,     654215,     134244, 232.239213, 345.300000, 395.600000, 502.800000,  85.489266,  19.166000, 771.550000, 661.664108
Outstanding requests per worker:
6923 6870 7664 7640 7596 7940 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175145.4,      875728,     788187,      87541,     665364,     122823, 270.639949, 422.200000, 493.800000, 634.800000, 110.430310,  29.383000, 868.340015, 677.534761
Outstanding requests per worker:
7905 7502 8939 8878 8985 9145 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174975.8,      874880,     787704,      87176,     673295,     114409, 312.555143, 511.500000, 610.300000, 778.000000, 143.043053,  21.343000, 1293.359995, 689.692174
Outstanding requests per worker:
8778 8333 10370 10349 10354 10765 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174250.8,      871255,     784076,      87179,     677162,     106914, 367.806705, 606.900000, 719.800000, 977.400000, 179.988178,  30.423000, 1614.974022, 698.958373
Outstanding requests per worker:
10096 9470 12637 12468 12446 12989 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:07   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   16:07   0:00 /usr/lib/linux
memcache      7  317  0.0 524416 178112 pts/0   Sl+  16:07   2:13 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       22434954474      instructions:u            #    0.74  insn per cycle         
       30458485716      cycles:u                                                    
         126282633      armv8_pmuv3_0/br_mis_pred/:u                                   
        3507177616      armv8_pmuv3_0/br_pred/:u                                    

      42.401149262 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 6 threads, 174000 rps'
==> Bench: 16384 keys, 512 conns, 6 threads, 174000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 174000 -k 16384 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 174000 -k 16384 -c 512 -f 512 -w 6'
Starting client with -r 174000 -k 16384 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 174000 -k 16384 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 174000 -k 16384 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 174000 cpus 6
meanInterarrival 34
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2096755200
starting receive base loop
num_worker_connections 85
Creating worker on tid 1325462016
starting receive base loop
num_worker_connections 85
Creating worker on tid 563081728
starting receive base loop
num_worker_connections 85
Creating worker on tid 4095668736
starting receive base loop
num_worker_connections 85
Creating worker on tid 3330667008
starting receive base loop
Created 512 connections total
Creating worker on tid 2568286720
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575390905.389330,       0.0,      387789,     348995,      38794,     234672,     114323,  76.412648, 136.500000, 160.800000, 295.400000,  58.579092,   0.000000, 543.533981, 488.912580
Outstanding requests per worker:
3155 3124 3289 3308 3372 4038 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174348.8,      871745,     784488,      87257,     598511,     185977, 149.368375, 218.900000, 247.200000, 315.100000,  54.276179,   2.231000, 474.615008, 588.497963
Outstanding requests per worker:
4818 4903 5186 5356 5356 5333 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175125.0,      875626,     788329,      87297,     634324,     154005, 194.383662, 291.200000, 331.600000, 422.500000,  72.413141,   6.319000, 608.965993, 634.643314
Outstanding requests per worker:
5862 5878 6678 6532 6543 6238 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175152.0,      875761,     787961,      87800,     651762,     136199, 231.706507, 362.200000, 428.700000, 577.600000,  99.507401,  13.527000, 801.980972, 658.701711
Outstanding requests per worker:
6702 6797 7829 7740 8001 7325 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175109.2,      875547,     787997,      87550,     663768,     124229, 270.715110, 444.700000, 539.700000, 753.500000, 129.643669,  25.511000, 1180.096984, 675.355435
Outstanding requests per worker:
7418 7601 8930 9201 9085 9020 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175174.2,      875872,     788704,      87168,     673657,     115047, 306.931883, 513.400000, 642.400000, 908.800000, 161.033230,  16.140999, 1271.651030, 688.076136
Outstanding requests per worker:
8073 8347 10181 10693 10409 10085 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174493.4,      872468,     785114,      87354,     677627,     107487, 353.687649, 600.300000, 771.600000, 1092.600000, 194.787722,  30.833000, 1405.442953, 698.413614
Outstanding requests per worker:
9392 9574 12135 12474 12340 11815 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:08   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   16:08   0:00 /usr/lib/linux
memcache      8  309  0.0 522368 177984 pts/0   Sl+  16:08   2:09 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  16:09   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21973942038      instructions:u            #    0.75  insn per cycle         
       29452489117      cycles:u                                                    
         124659947      armv8_pmuv3_0/br_mis_pred/:u                                   
        3430184105      armv8_pmuv3_0/br_pred/:u                                    

      41.401882294 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 6 threads, 176000 rps'
==> Bench: 16384 keys, 512 conns, 6 threads, 176000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 176000 -k 16384 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 176000 -k 16384 -c 512 -f 512 -w 6'
Starting client with -r 176000 -k 16384 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 176000 -k 16384 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 176000 -k 16384 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 176000 cpus 6
meanInterarrival 34
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2302669312
starting receive base loop
num_worker_connections 85
Creating worker on tid 1529410048
starting receive base loop
num_worker_connections 85
Creating worker on tid 764408320
starting receive base loop
num_worker_connections 85
Creating worker on tid 2028032
starting receive base loop
num_worker_connections 85
Creating worker on tid 3531993600
starting receive base loop
Created 512 connections total
Creating worker on tid 2769613312
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575390950.389375,       0.0,      381884,     343590,      38294,     230912,     112678,  83.507024, 147.200000, 180.800000, 350.100000,  69.268986,   0.000000, 720.386028, 487.803641
Outstanding requests per worker:
3543 3473 3595 3654 3799 4952 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173565.2,      867827,     781547,      86280,     595437,     186110, 175.797754, 262.100000, 301.400000, 389.400000,  67.061703,   3.593000, 557.116985, 586.772456
Outstanding requests per worker:
5754 5888 6245 6628 6397 6678 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174132.2,      870662,     783721,      86941,     631003,     152718, 244.820482, 377.100000, 443.900000, 590.600000, 101.391137,  16.434001, 858.120024, 634.637306
Outstanding requests per worker:
7576 7541 8392 8546 8567 8757 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174309.6,      871549,     785115,      86434,     649060,     136055, 309.451037, 513.900000, 600.100000, 744.300000, 140.842485,  12.806000, 990.516007, 658.888393
Outstanding requests per worker:
9108 9185 10401 10351 10609 10645 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174109.4,      870548,     783473,      87075,     660017,     123456, 372.008872, 642.500000, 750.800000, 934.600000, 184.051515,  39.262000, 1242.076039, 675.661146
Outstanding requests per worker:
10758 10513 12853 12707 12895 12449 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173883.0,      869416,     782240,      87176,     667648,     114592, 441.815921, 800.900000, 940.600000, 1137.900000, 235.263764,  56.913000, 1481.536031, 687.869678
Outstanding requests per worker:
12479 11834 14934 15388 15406 15148 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172956.8,      864785,     778351,      86434,     671201,     107150, 530.894658, 958.900000, 1103.400000, 1330.700000, 284.151117,  50.266001, 1867.236972, 697.450319
Outstanding requests per worker:
14391 13709 18686 18623 19187 18273 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  16:09   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   16:09   0:00 /usr/lib/linux
memcache      7  316  0.0 522368 170688 pts/0   Sl+  16:09   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  16:10   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21839103022      instructions:u            #    0.73  insn per cycle         
       30019873206      cycles:u                                                    
         124843301      armv8_pmuv3_0/br_mis_pred/:u                                   
        3403633191      armv8_pmuv3_0/br_pred/:u                                    

      41.251464425 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 8 threads, 150000 rps'
==> Bench: 16384 keys, 512 conns, 8 threads, 150000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 150000 -k 16384 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 150000 -k 16384 -c 512 -f 512 -w 8'
Starting client with -r 150000 -k 16384 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 150000 -k 16384 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 150000 -k 16384 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 150000 cpus 8
meanInterarrival 53
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2417947136
starting receive base loop
num_worker_connections 64
Creating worker on tid 1822224896
starting receive base loop
num_worker_connections 64
Creating worker on tid 1226306048
starting receive base loop
num_worker_connections 64
Creating worker on tid 633008640
starting receive base loop
num_worker_connections 64
Creating worker on tid 37089792
starting receive base loop
num_worker_connections 64
Creating worker on tid 3736138240
starting receive base loop
num_worker_connections 64
Creating worker on tid 3140219392
starting receive base loop
Created 512 connections total
Creating worker on tid 2544300544
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575390995.389420,       0.0,      361755,     325714,      36041,     218280,     107434,  12.169417,  26.100000,  34.100000,  68.000000,  13.649746,   0.000000, 256.545991, 486.641228
Outstanding requests per worker:
183 188 183 177 196 187 207 177 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150931.2,      754657,     679277,      75380,     514414,     164863,  10.223860,  19.300000,  23.100000,  30.400000,   6.618303,   0.197000,  65.595999, 581.963632
Outstanding requests per worker:
216 226 215 175 207 193 197 216 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150976.0,      754881,     679442,      75439,     542146,     137296,  10.523723,  19.600000,  23.700000,  31.200000,   6.773365,   0.185000,  61.942998, 626.847681
Outstanding requests per worker:
196 202 198 198 196 181 199 209 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150934.4,      754673,     678887,      75786,     557579,     121308,  10.881191,  20.600000,  24.500000,  33.200000,   7.116536,   0.193000,  68.076998, 652.822343
Outstanding requests per worker:
206 216 189 220 199 214 220 214 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150957.6,      754789,     679282,      75507,     568782,     110500,  10.991526,  20.600000,  24.800000,  33.200000,   7.128592,   0.188000,  68.080999, 669.770995
Outstanding requests per worker:
208 211 185 206 234 216 182 222 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150946.0,      754731,     679208,      75523,     575735,     103473,  11.090199,  20.600000,  25.100000,  33.000000,   7.165497,   0.181000,  73.109999, 681.370599
Outstanding requests per worker:
216 213 210 227 206 221 177 261 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150962.8,      754815,     679495,      75320,     581993,      97502,  11.181744,  20.900000,  25.200000,  33.600000,   7.256915,   0.236000,  66.587999, 690.551401
Outstanding requests per worker:
253 234 205 203 198 201 199 235 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:10   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:10   0:00 /usr/lib/linux
memcache      7  317  0.0 444096 148544 pts/0   Sl+  16:10   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  16:10   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       18591950193      instructions:u            #    0.73  insn per cycle         
       25641708795      cycles:u                                                    
         111892236      armv8_pmuv3_0/br_mis_pred/:u                                   
        2900205542      armv8_pmuv3_0/br_pred/:u                                    

      41.510862678 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 8 threads, 152000 rps'
==> Bench: 16384 keys, 512 conns, 8 threads, 152000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 152000 -k 16384 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 152000 -k 16384 -c 512 -f 512 -w 8'
Starting client with -r 152000 -k 16384 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 152000 -k 16384 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 152000 -k 16384 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 152000 cpus 8
meanInterarrival 52
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2172973568
starting receive base loop
num_worker_connections 64
Creating worker on tid 1580593664
starting receive base loop
num_worker_connections 64
Creating worker on tid 984674816
starting receive base loop
num_worker_connections 64
Creating worker on tid 388755968
starting receive base loop
num_worker_connections 64
Creating worker on tid 4087804416
starting receive base loop
num_worker_connections 64
Creating worker on tid 3491885568
starting receive base loop
num_worker_connections 64
Creating worker on tid 2895966720
starting receive base loop
Created 512 connections total
Creating worker on tid 2300047872
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575391040.389465,       0.0,      369975,     333013,      36962,     222674,     110339,  13.607563,  29.000000,  37.800000,  76.300000,  15.991485,   0.000000, 268.644005, 485.393399
Outstanding requests per worker:
222 216 188 204 200 244 208 206 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153855.8,      769280,     692586,      76694,     524518,     168068,  11.272044,  20.900000,  25.300000,  33.900000,   7.279521,   0.224000,  65.036997, 581.927595
Outstanding requests per worker:
217 214 189 243 227 223 213 208 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153821.4,      769108,     692468,      76640,     553387,     139081,  11.878683,  22.000000,  26.500000,  36.200000,   7.697671,   0.217000,  74.537002, 627.637173
Outstanding requests per worker:
216 244 250 255 231 243 223 235 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153850.4,      769253,     692325,      76928,     568387,     123938,  12.505678,  22.900000,  28.000000,  38.000000,   8.083696,   0.226000,  74.179001, 651.806884
Outstanding requests per worker:
251 264 263 264 234 214 233 220 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153851.8,      769260,     692321,      76939,     579301,     113020,  12.900444,  23.600000,  28.600000,  40.000000,   8.401266,   0.239000,  80.491997, 669.315879
Outstanding requests per worker:
220 252 243 308 246 207 242 268 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153831.4,      769158,     692042,      77116,     587222,     104820,  13.151631,  23.600000,  29.400000,  40.100000,   8.456603,   0.233000,  79.847999, 682.276425
Outstanding requests per worker:
253 269 278 291 267 278 275 240 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153866.8,      769335,     692234,      77101,     592938,      99296,  13.297578,  24.000000,  29.900000,  40.400000,   8.584921,   0.197000,  79.272002, 691.184760
Outstanding requests per worker:
245 234 355 237 230 256 250 286 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:10   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   16:10   0:00 /usr/lib/linux
memcache      7  317  0.0 445120 146240 pts/0   Sl+  16:10   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:11   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       18972064676      instructions:u            #    0.72  insn per cycle         
       26208560811      cycles:u                                                    
         111192914      armv8_pmuv3_0/br_mis_pred/:u                                   
        2955313504      armv8_pmuv3_0/br_pred/:u                                    

      41.530855265 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 8 threads, 154000 rps'
==> Bench: 16384 keys, 512 conns, 8 threads, 154000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 154000 -k 16384 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 154000 -k 16384 -c 512 -f 512 -w 8'
Starting client with -r 154000 -k 16384 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 154000 -k 16384 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 154000 -k 16384 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 154000 cpus 8
meanInterarrival 51
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2157113856
starting receive base loop
num_worker_connections 64
Creating worker on tid 1561850368
starting receive base loop
num_worker_connections 64
Creating worker on tid 968552960
starting receive base loop
num_worker_connections 64
Creating worker on tid 372634112
starting receive base loop
num_worker_connections 64
Creating worker on tid 4071682560
starting receive base loop
num_worker_connections 64
Creating worker on tid 3475763712
starting receive base loop
num_worker_connections 64
Creating worker on tid 2879844864
starting receive base loop
Created 512 connections total
Creating worker on tid 2283926016
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575391086.389511,       0.0,      469188,     422127,      47061,     288269,     133858,  10.396897,  24.700000,  31.200000,  52.500000,  12.017079,   0.000000, 188.069999, 499.608286
Outstanding requests per worker:
284 290 256 247 269 262 282 287 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156876.0,      784381,     705788,      78593,     541083,     164705,  13.626701,  24.200000,  30.200000,  41.800000,   8.743469,   0.219000,  78.178003, 591.990783
Outstanding requests per worker:
279 250 267 254 254 273 282 292 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156852.8,      784265,     706340,      77925,     568011,     138329,  14.259405,  25.400000,  31.400000,  43.900000,   9.211974,   0.229000,  84.532000, 633.542942
Outstanding requests per worker:
256 284 265 253 250 302 316 316 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156864.6,      784324,     706138,      78186,     582602,     123536,  14.838360,  26.100000,  32.800000,  45.900000,   9.579419,   0.228000,  91.224000, 656.658660
Outstanding requests per worker:
290 291 284 286 269 306 254 289 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156838.8,      784195,     705656,      78539,     592385,     113271,  15.315924,  26.900000,  33.700000,  47.200000,   9.833006,   0.293000,  91.631003, 672.739041
Outstanding requests per worker:
324 287 311 353 267 280 293 316 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156874.2,      784372,     706007,      78365,     600549,     105458,  15.593962,  27.100000,  34.400000,  48.200000,  10.019308,   0.232000,  90.609998, 684.285438
Outstanding requests per worker:
269 299 303 325 307 299 291 312 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156857.4,      784288,     705751,      78537,     606326,      99425,  15.986383,  27.800000,  35.500000,  49.700000,  10.331688,   0.284000,  92.478000, 693.842827
Outstanding requests per worker:
265 325 293 323 312 298 337 322 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:11   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:11   0:00 /usr/lib/linux
memcache      7  317  0.0 449216 154880 pts/0   Sl+  16:11   2:13 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  16:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19782828798      instructions:u            #    0.71  insn per cycle         
       27676281355      cycles:u                                                    
         116664743      armv8_pmuv3_0/br_mis_pred/:u                                   
        3076627629      armv8_pmuv3_0/br_pred/:u                                    

      42.250644261 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 8 threads, 156000 rps'
==> Bench: 16384 keys, 512 conns, 8 threads, 156000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 156000 -k 16384 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 156000 -k 16384 -c 512 -f 512 -w 8'
Starting client with -r 156000 -k 16384 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 156000 -k 16384 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 156000 -k 16384 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 156000 cpus 8
meanInterarrival 51
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1948840448
starting receive base loop
num_worker_connections 64
Creating worker on tid 1352462848
starting receive base loop
num_worker_connections 64
Creating worker on tid 756544000
starting receive base loop
num_worker_connections 64
Creating worker on tid 163246592
starting receive base loop
num_worker_connections 64
Creating worker on tid 3862295040
starting receive base loop
num_worker_connections 64
Creating worker on tid 3266376192
starting receive base loop
num_worker_connections 64
Creating worker on tid 2670457344
starting receive base loop
Created 512 connections total
Creating worker on tid 2074538496
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575391131.389556,       0.0,      470789,     423407,      47382,     288076,     135331,  11.244812,  26.100000,  33.500000,  64.700000,  15.738700,   0.000000, 342.034996, 497.793225
Outstanding requests per worker:
264 255 279 260 297 228 298 269 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156837.4,      784188,     706179,      78009,     540677,     165502,  14.237111,  25.300000,  31.800000,  43.500000,   9.152996,   0.244000,  84.835000, 591.102624
Outstanding requests per worker:
284 294 280 318 315 278 291 295 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156873.8,      784370,     706127,      78243,     567543,     138584,  15.085746,  26.400000,  33.400000,  46.200000,   9.668063,   0.195000,  87.246001, 632.662898
Outstanding requests per worker:
227 260 297 344 293 328 325 318 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156862.8,      784315,     706004,      78311,     582429,     123575,  15.884988,  28.200000,  35.500000,  49.600000,  10.353274,   0.278000, 100.498997, 656.362703
Outstanding requests per worker:
342 314 309 287 293 283 330 277 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156805.2,      784027,     705816,      78211,     592130,     113686,  16.050067,  28.000000,  35.600000,  49.300000,  10.323670,   0.280000,  93.005002, 671.630357
Outstanding requests per worker:
377 299 361 375 310 370 355 333 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156934.0,      784671,     706261,      78410,     600304,     105957,  16.496232,  28.600000,  36.700000,  51.200000,  10.650251,   0.241000, 103.317998, 684.036795
Outstanding requests per worker:
320 290 326 367 273 293 299 338 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156863.6,      784319,     706077,      78242,     605696,     100381,  16.436827,  28.400000,  36.500000,  50.400000,  10.570806,   0.318000,  97.290002, 692.986085
Outstanding requests per worker:
311 291 315 320 321 329 328 371 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:12   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:12   0:00 /usr/lib/linux
memcache      7  317  0.0 449216 149888 pts/0   Sl+  16:12   2:13 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:13   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19739733332      instructions:u            #    0.73  insn per cycle         
       27057614512      cycles:u                                                    
         114967308      armv8_pmuv3_0/br_mis_pred/:u                                   
        3078957616      armv8_pmuv3_0/br_pred/:u                                    

      42.300822522 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 8 threads, 158000 rps'
==> Bench: 16384 keys, 512 conns, 8 threads, 158000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 158000 -k 16384 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 158000 -k 16384 -c 512 -f 512 -w 8'
Starting client with -r 158000 -k 16384 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 158000 -k 16384 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 158000 -k 16384 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 158000 cpus 8
meanInterarrival 50
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1746596352
starting receive base loop
num_worker_connections 64
Creating worker on tid 1151136256
starting receive base loop
num_worker_connections 64
Creating worker on tid 555217408
starting receive base loop
num_worker_connections 64
Creating worker on tid 4256887296
starting receive base loop
num_worker_connections 64
Creating worker on tid 3660968448
starting receive base loop
num_worker_connections 64
Creating worker on tid 3065049600
starting receive base loop
num_worker_connections 64
Creating worker on tid 2469130752
starting receive base loop
Created 512 connections total
Creating worker on tid 1873211904
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575391177.389602,       0.0,      477126,     428985,      48141,     293191,     135794,  16.247371,  38.400000,  55.800000,  93.700000,  22.321654,   0.000000, 423.626006, 501.155078
Outstanding requests per worker:
384 430 391 360 331 396 376 459 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160083.2,      800417,     720929,      79488,     553302,     167627,  18.027449,  33.100000,  42.700000,  65.500000,  12.788587,   0.231000, 123.170003, 593.128862
Outstanding requests per worker:
300 312 356 350 368 338 390 353 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159731.6,      798659,     718838,      79821,     578944,     139894,  19.279279,  35.600000,  47.300000,  76.400000,  14.557826,   0.294000, 143.891007, 634.609034
Outstanding requests per worker:
495 543 559 493 550 515 461 568 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159566.4,      797833,     718536,      79297,     592904,     125632,  35.186176,  94.800000, 119.800000, 156.600000,  37.201355,   0.384000, 278.645992, 657.150787
Outstanding requests per worker:
854 734 809 896 778 736 805 828 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159916.2,      799582,     719401,      80181,     605033,     114368,  42.394453, 124.300000, 148.400000, 192.800000,  47.928333,   0.321000, 319.029987, 673.925809
Outstanding requests per worker:
880 838 884 814 908 831 923 882 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159850.4,      799253,     718857,      80396,     612221,     106636,  45.712500, 136.700000, 159.600000, 207.500000,  53.118388,   0.335000, 355.989009, 685.346806
Outstanding requests per worker:
998 968 876 992 969 984 1013 960 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  158913.6,      794569,     714810,      79759,     614522,     100288,  51.096696, 152.300000, 180.100000, 231.300000,  59.872589,   0.363000, 377.680987, 694.883754
Outstanding requests per worker:
1722 1573 1698 1666 1739 1587 1613 1659 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:13   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   16:13   0:00 /usr/lib/linux
memcache      7  317  0.0 516224 152256 pts/0   Sl+  16:13   2:13 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:13   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20234626398      instructions:u            #    0.73  insn per cycle         
       27900246245      cycles:u                                                    
         120296306      armv8_pmuv3_0/br_mis_pred/:u                                   
        3154342213      armv8_pmuv3_0/br_pred/:u                                    

      42.331092266 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 8 threads, 160000 rps'
==> Bench: 16384 keys, 512 conns, 8 threads, 160000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 160000 -k 16384 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 160000 -k 16384 -c 512 -f 512 -w 8'
Starting client with -r 160000 -k 16384 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 160000 -k 16384 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 160000 -k 16384 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 160000 cpus 8
meanInterarrival 50
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2151412224
starting receive base loop
num_worker_connections 64
Creating worker on tid 1553789440
starting receive base loop
num_worker_connections 64
Creating worker on tid 957870592
starting receive base loop
num_worker_connections 64
Creating worker on tid 364573184
starting receive base loop
num_worker_connections 64
Creating worker on tid 4063621632
starting receive base loop
num_worker_connections 64
Creating worker on tid 3467702784
starting receive base loop
num_worker_connections 64
Creating worker on tid 2871783936
starting receive base loop
Created 512 connections total
Creating worker on tid 2275865088
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575391222.389647,       0.0,      379050,     340999,      38051,     228527,     112472,  30.489116,  73.700000,  87.200000, 123.700000,  30.596324,   0.000000, 334.645987, 486.654360
Outstanding requests per worker:
564 635 549 645 585 592 590 692 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159770.0,      798851,     719016,      79835,     546475,     172541,  33.649822,  91.000000, 112.300000, 151.300000,  35.820008,   0.324000, 280.887008, 585.087310
Outstanding requests per worker:
712 816 769 756 713 718 757 819 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159831.0,      799156,     719465,      79691,     576167,     143298,  41.002770, 120.300000, 144.900000, 189.000000,  46.694717,   0.255000, 283.537000, 630.049688
Outstanding requests per worker:
860 840 878 1011 824 853 841 867 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159960.2,      799802,     719693,      80109,     592750,     126943,  45.601651, 137.300000, 161.800000, 207.100000,  53.149400,   0.373000, 326.941997, 655.343351
Outstanding requests per worker:
909 911 905 945 829 959 906 884 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159857.8,      799290,     719412,      79878,     603732,     115680,  48.687467, 148.100000, 175.000000, 224.700000,  58.104343,   0.343000, 380.980015, 672.170139
Outstanding requests per worker:
936 971 963 1039 1073 1043 1001 1029 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159729.8,      798650,     718557,      80093,     610768,     107789,  54.943174, 174.100000, 208.700000, 261.100000,  68.990363,   0.276000, 379.193008, 684.032568
Outstanding requests per worker:
1156 1211 1051 1323 1210 1173 1150 1182 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160057.4,      800288,     720154,      80134,     618463,     101691,  59.052661, 188.500000, 220.600000, 279.100000,  74.709859,   0.312000, 425.722986, 694.143186
Outstanding requests per worker:
1134 1219 1270 1213 1135 1069 1163 1033 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  16:13   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:13   0:00 /usr/lib/linux
memcache      7  317  0.0 449216 157568 pts/0   Sl+  16:13   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:14   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19886218826      instructions:u            #    0.74  insn per cycle         
       27009720946      cycles:u                                                    
         113558853      armv8_pmuv3_0/br_mis_pred/:u                                   
        3092702897      armv8_pmuv3_0/br_pred/:u                                    

      41.081112868 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 8 threads, 162000 rps'
==> Bench: 16384 keys, 512 conns, 8 threads, 162000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 162000 -k 16384 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 162000 -k 16384 -c 512 -f 512 -w 8'
Starting client with -r 162000 -k 16384 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 162000 -k 16384 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 162000 -k 16384 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 162000 cpus 8
meanInterarrival 49
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1616769536
starting receive base loop
num_worker_connections 64
Creating worker on tid 1024979456
starting receive base loop
num_worker_connections 64
Creating worker on tid 431682048
starting receive base loop
num_worker_connections 64
Creating worker on tid 4130730496
starting receive base loop
num_worker_connections 64
Creating worker on tid 3534811648
starting receive base loop
num_worker_connections 64
Creating worker on tid 2938892800
starting receive base loop
num_worker_connections 64
Creating worker on tid 2342973952
starting receive base loop
Created 512 connections total
Creating worker on tid 1747055104
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575391266.389691,       0.0,      382624,     344456,      38168,     230837,     113619,  41.388868,  86.600000,  99.800000, 142.800000,  35.988875,   0.000000, 377.815992, 486.486370
Outstanding requests per worker:
1067 1086 1068 1057 1129 1097 1158 1215 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162756.8,      813785,     733096,      80689,     557319,     175777,  60.505231, 134.400000, 157.600000, 208.800000,  50.268912,   0.423000, 328.287989, 584.785815
Outstanding requests per worker:
1381 1446 1497 1425 1515 1405 1356 1458 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162637.8,      813190,     731857,      81333,     586685,     145172,  79.558464, 189.800000, 221.300000, 284.700000,  73.982162,   0.364000, 516.095996, 630.944378
Outstanding requests per worker:
1787 1858 1923 1705 1863 1722 1926 1882 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162673.0,      813366,     731795,      81571,     603082,     128713,  96.799904, 229.200000, 272.500000, 347.300000,  89.964852,   0.423000, 627.759993, 655.156117
Outstanding requests per worker:
2048 2237 2252 2337 2213 2144 2231 2236 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161569.6,      807849,     726796,      81053,     610068,     116728, 135.457251, 258.800000, 303.400000, 398.300000,  87.177099,   0.757000, 672.738016, 672.350201
Outstanding requests per worker:
3328 3325 3277 3229 3416 3118 3314 3218 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162600.0,      813001,     731564,      81437,     622102,     109462, 171.406692, 274.000000, 311.900000, 398.900000,  76.344070,   0.870000, 668.352008, 684.848652
Outstanding requests per worker:
3709 3654 3929 3795 3740 3625 3724 3432 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161734.2,      808672,     727611,      81061,     625904,     101707, 193.613453, 315.100000, 359.200000, 449.200000,  86.484302,   1.523000, 632.517993, 695.497796
Outstanding requests per worker:
4692 4552 4796 4675 4572 4630 4804 4581 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:14   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   16:14   0:00 /usr/lib/linux
memcache      7  309  0.0 515200 161024 pts/0   Sl+  16:14   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:15   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20399995555      instructions:u            #    0.73  insn per cycle         
       28105725985      cycles:u                                                    
         119617789      armv8_pmuv3_0/br_mis_pred/:u                                   
        3181210673      armv8_pmuv3_0/br_pred/:u                                    

      41.469910365 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 8 threads, 164000 rps'
==> Bench: 16384 keys, 512 conns, 8 threads, 164000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 164000 -k 16384 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 164000 -k 16384 -c 512 -f 512 -w 8'
Starting client with -r 164000 -k 16384 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 164000 -k 16384 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 164000 -k 16384 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 164000 cpus 8
meanInterarrival 48
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2119627264
starting receive base loop
num_worker_connections 64
Creating worker on tid 1521545728
starting receive base loop
num_worker_connections 64
Creating worker on tid 925626880
starting receive base loop
num_worker_connections 64
Creating worker on tid 329708032
starting receive base loop
num_worker_connections 64
Creating worker on tid 4028756480
starting receive base loop
num_worker_connections 64
Creating worker on tid 3432837632
starting receive base loop
num_worker_connections 64
Creating worker on tid 2836918784
starting receive base loop
Created 512 connections total
Creating worker on tid 2243621376
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575391311.389736,       0.0,      377389,     339555,      37834,     228037,     111518,  67.907951, 134.100000, 155.100000, 262.200000,  57.700924,   0.000000, 591.965020, 487.069170
Outstanding requests per worker:
2284 2273 2416 2321 2283 2296 2240 2783 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163540.0,      817701,     735888,      81813,     559001,     176887, 164.618879, 249.900000, 282.900000, 361.800000,  64.365121,   0.991000, 572.812021, 584.845684
Outstanding requests per worker:
4260 4242 4418 4393 4232 4362 4152 4559 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164395.6,      821979,     739763,      82216,     593991,     145772, 242.309799, 361.300000, 424.500000, 573.400000,  96.517046,  13.666000, 838.248014, 631.873274
Outstanding requests per worker:
5514 5826 5794 5732 5770 5821 5649 5989 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164435.8,      822180,     740324,      81856,     609730,     130594, 309.456703, 485.600000, 574.500000, 776.100000, 132.593331,  47.223002, 1043.843031, 655.235321
Outstanding requests per worker:
6824 7091 7246 7153 7366 6991 7077 7567 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164398.4,      821993,     740156,      81837,     621134,     119022, 375.659328, 617.700000, 722.900000, 934.000000, 172.343142,  49.470998, 1235.366940, 672.174659
Outstanding requests per worker:
8572 8358 8633 8863 8832 8180 8764 8531 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164161.6,      820809,     738700,      82109,     628905,     109795, 446.875487, 758.200000, 875.600000, 1097.700000, 215.787525,  61.877001, 1472.866058, 685.414327
Outstanding requests per worker:
10142 10093 10200 10229 10292 9899 10445 10048 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163657.4,      818288,     736204,      82084,     632928,     103276, 525.348860, 931.100000, 1051.500000, 1296.400000, 268.284718,  41.556001, 1800.902963, 694.692490
Outstanding requests per worker:
12058 11825 12144 12439 12344 11736 12316 11647 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:15   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   16:15   0:00 /usr/lib/linux
memcache      7  317  0.0 517248 161152 pts/0   Sl+  16:15   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  16:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20664780116      instructions:u            #    0.74  insn per cycle         
       27967719703      cycles:u                                                    
         119807642      armv8_pmuv3_0/br_mis_pred/:u                                   
        3217025309      armv8_pmuv3_0/br_pred/:u                                    

      41.541087752 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 8 threads, 166000 rps'
==> Bench: 16384 keys, 512 conns, 8 threads, 166000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 166000 -k 16384 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 166000 -k 16384 -c 512 -f 512 -w 8'
Starting client with -r 166000 -k 16384 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 166000 -k 16384 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 166000 -k 16384 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 166000 cpus 8
meanInterarrival 48
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1967911424
starting receive base loop
num_worker_connections 64
Creating worker on tid 1371206144
starting receive base loop
num_worker_connections 64
Creating worker on tid 775287296
starting receive base loop
num_worker_connections 64
Creating worker on tid 179368448
starting receive base loop
num_worker_connections 64
Creating worker on tid 3878416896
starting receive base loop
num_worker_connections 64
Creating worker on tid 3282498048
starting receive base loop
num_worker_connections 64
Creating worker on tid 2686579200
starting receive base loop
Created 512 connections total
Creating worker on tid 2090660352
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575391356.389781,       0.0,      389044,     350128,      38916,     234982,     115146,  58.561751, 119.100000, 138.100000, 199.900000,  48.379453,   0.000000, 448.107004, 486.496607
Outstanding requests per worker:
1944 2078 2102 2023 2179 2056 2187 2196 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163968.6,      819844,     738406,      81438,     561181,     177225, 146.528511, 227.500000, 263.500000, 334.300000,  61.483507,   0.903000, 533.213973, 584.847424
Outstanding requests per worker:
3828 3744 3520 3771 3849 3758 3945 3910 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164684.2,      823422,     741262,      82160,     594307,     146955, 211.525359, 332.500000, 392.300000, 501.000000,  89.263742,   4.893000, 720.704019, 630.890386
Outstanding requests per worker:
5121 4950 5036 5234 4966 5037 5093 4850 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164764.2,      823822,     741437,      82385,     611601,     129836, 270.000061, 449.100000, 527.100000, 693.000000, 127.035442,  17.631000, 1124.068975, 656.583984
Outstanding requests per worker:
6400 6226 6230 5982 6220 6415 6386 6005 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164783.2,      823917,     741087,      82830,     622199,     118888, 326.399593, 573.900000, 679.500000, 898.100000, 167.977873,  18.880000, 1238.608003, 672.555619
Outstanding requests per worker:
7565 7420 7589 7139 7564 7514 7424 7115 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164678.0,      823391,     740751,      82640,     630393,     110358, 382.529962, 689.300000, 813.400000, 1094.500000, 210.878955,  23.892000, 1455.620050, 684.856664
Outstanding requests per worker:
8849 8589 8500 8409 8474 8918 8821 8776 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164295.0,      821476,     739564,      81912,     635941,     103623, 442.514730, 829.500000, 975.100000, 1254.800000, 254.921225,  41.556001, 1778.818011, 694.952818
Outstanding requests per worker:
10611 10145 9839 9831 10159 9913 10341 10412 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:16   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   16:16   0:00 /usr/lib/linux
memcache      8  318  0.0 516224 164672 pts/0   Sl+  16:16   2:10 memcached -t 4
memcache     19  0.0  0.0   6656  4416 pts/1    Rs+  16:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20806530997      instructions:u            #    0.74  insn per cycle         
       28132034824      cycles:u                                                    
         124234271      armv8_pmuv3_0/br_mis_pred/:u                                   
        3236207260      armv8_pmuv3_0/br_pred/:u                                    

      41.541257635 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 8 threads, 168000 rps'
==> Bench: 16384 keys, 512 conns, 8 threads, 168000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 168000 -k 16384 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 168000 -k 16384 -c 512 -f 512 -w 8'
Starting client with -r 168000 -k 16384 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 168000 -k 16384 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 168000 -k 16384 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 168000 cpus 8
meanInterarrival 47
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2256859648
starting receive base loop
num_worker_connections 64
Creating worker on tid 1663824384
starting receive base loop
num_worker_connections 64
Creating worker on tid 1067905536
starting receive base loop
num_worker_connections 64
Creating worker on tid 471986688
starting receive base loop
num_worker_connections 64
Creating worker on tid 4171035136
starting receive base loop
num_worker_connections 64
Creating worker on tid 3575116288
starting receive base loop
num_worker_connections 64
Creating worker on tid 2981818880
starting receive base loop
Created 512 connections total
Creating worker on tid 2385900032
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575391402.389827,       0.0,      495360,     445533,      49827,     304984,     140549,  48.633642, 121.100000, 144.700000, 224.200000,  55.034662,   0.000000, 467.721999, 502.180011
Outstanding requests per worker:
2492 2438 2504 2597 2411 2351 2604 2890 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165482.0,      827411,     744940,      82471,     573114,     171826, 193.946979, 295.100000, 337.900000, 439.300000,  78.181969,   1.718000, 707.374990, 594.827312
Outstanding requests per worker:
5250 5466 5556 5340 5580 5782 5547 5473 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166434.6,      832174,     749451,      82723,     604251,     145200, 313.831192, 474.000000, 547.500000, 724.700000, 123.101012,  46.975002, 1158.480048, 635.699762
Outstanding requests per worker:
7816 7706 7920 7691 8277 7927 7709 7872 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166159.2,      830797,     747497,      83300,     618518,     128979, 426.197784, 680.500000, 786.600000, 1040.100000, 187.075760,  61.370999, 1468.785048, 659.454172
Outstanding requests per worker:
10496 10102 10507 10036 10861 10452 10350 10501 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166042.0,      830211,     747284,      82927,     629552,     117732, 546.959832, 904.700000, 1048.600000, 1333.600000, 256.205315,  70.331000, 1781.736970, 675.589298
Outstanding requests per worker:
13067 12939 12813 12494 13516 12908 13114 13376 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165669.6,      828349,     745622,      82727,     635972,     109650, 671.295502, 1115.200000, 1288.500000, 1576.000000, 316.255848,  70.421003, 2122.865915, 687.077755
Outstanding requests per worker:
16035 15661 15383 15406 16663 15571 16002 16298 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164270.2,      821352,     739402,      81950,     636724,     102678, 824.379121, 1360.500000, 1535.400000, 1805.100000, 371.780756, 112.145998, 2380.872965, 696.043599
Outstanding requests per worker:
19590 19587 19057 19495 20264 19340 19583 19917 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:16   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:16   0:00 /usr/lib/linux
memcache      7  318  0.0 518272 168960 pts/0   Sl+  16:16   2:13 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:17   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21225302360      instructions:u            #    0.73  insn per cycle         
       28878474323      cycles:u                                                    
         125046548      armv8_pmuv3_0/br_mis_pred/:u                                   
        3311352821      armv8_pmuv3_0/br_pred/:u                                    

      42.581531178 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 8 threads, 170000 rps'
==> Bench: 16384 keys, 512 conns, 8 threads, 170000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 170000 -k 16384 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 170000 -k 16384 -c 512 -f 512 -w 8'
Starting client with -r 170000 -k 16384 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 170000 -k 16384 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 170000 -k 16384 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 170000 cpus 8
meanInterarrival 47
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2648633856
starting receive base loop
num_worker_connections 64
Creating worker on tid 2050355712
starting receive base loop
num_worker_connections 64
Creating worker on tid 1454436864
starting receive base loop
num_worker_connections 64
Creating worker on tid 858518016
starting receive base loop
num_worker_connections 64
Creating worker on tid 262599168
starting receive base loop
num_worker_connections 64
Creating worker on tid 3961647616
starting receive base loop
num_worker_connections 64
Creating worker on tid 3365728768
starting receive base loop
Created 512 connections total
Creating worker on tid 2769809920
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575391447.389872,       0.0,      388683,     349620,      39063,     234873,     114747,  73.495028, 143.800000, 168.600000, 274.400000,  62.499545,   0.000000, 632.745981, 488.067250
Outstanding requests per worker:
2777 2590 2713 2601 2587 2633 2713 3242 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165806.6,      829034,     746658,      82376,     569591,     177067, 196.542641, 295.700000, 333.500000, 434.300000,  76.768478,   1.857000, 637.342989, 588.192905
Outstanding requests per worker:
5444 5314 5577 5407 5489 5352 5662 5678 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166576.0,      832881,     749807,      83074,     602257,     147550, 309.026189, 473.100000, 552.200000, 685.600000, 120.582202,  19.571999, 1050.959945, 632.672822
Outstanding requests per worker:
7609 7522 7911 7829 7633 7985 7930 7810 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166373.0,      831866,     748923,      82943,     618034,     130889, 418.322706, 663.900000, 755.300000, 930.600000, 172.726214,  66.827998, 1386.003017, 656.922984
Outstanding requests per worker:
9767 10141 10339 10237 10564 10185 10020 10213 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165980.8,      829905,     746945,      82960,     628221,     118724, 536.280137, 865.800000, 965.200000, 1153.600000, 230.086539,  77.386998, 1778.702021, 674.156619
Outstanding requests per worker:
12353 12587 12878 13042 13166 12709 12979 12967 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165658.8,      828295,     745456,      82839,     634458,     110998, 665.932485, 1075.700000, 1194.400000, 1449.300000, 291.656563,  91.580003, 2052.052021, 686.071038
Outstanding requests per worker:
15263 15631 15649 15696 15654 15629 15993 16016 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164437.2,      822187,     739669,      82518,     636403,     103266, 808.790862, 1299.500000, 1457.200000, 1774.300000, 348.302078, 103.115000, 2213.778973, 695.864243
Outstanding requests per worker:
19000 18895 19088 19329 19426 19158 19911 19673 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:17   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   16:17   0:00 /usr/lib/linux
memcache      7  317  0.0 516224 161984 pts/0   Sl+  16:17   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:18   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20854818228      instructions:u            #    0.74  insn per cycle         
       28170475628      cycles:u                                                    
         121001062      armv8_pmuv3_0/br_mis_pred/:u                                   
        3247286387      armv8_pmuv3_0/br_pred/:u                                    

      41.460243256 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 8 threads, 172000 rps'
==> Bench: 16384 keys, 512 conns, 8 threads, 172000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 172000 -k 16384 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 172000 -k 16384 -c 512 -f 512 -w 8'
Starting client with -r 172000 -k 16384 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 172000 -k 16384 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 172000 -k 16384 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 172000 cpus 8
meanInterarrival 46
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1778643456
starting receive base loop
num_worker_connections 64
Creating worker on tid 1186001408
starting receive base loop
num_worker_connections 64
Creating worker on tid 590082560
starting receive base loop
num_worker_connections 64
Creating worker on tid 4289131008
starting receive base loop
num_worker_connections 64
Creating worker on tid 3693212160
starting receive base loop
num_worker_connections 64
Creating worker on tid 3097293312
starting receive base loop
num_worker_connections 64
Creating worker on tid 2501374464
starting receive base loop
Created 512 connections total
Creating worker on tid 1908077056
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575391492.389917,       0.0,      389359,     350122,      39237,     235454,     114668,  86.509519, 166.300000, 202.600000, 348.200000,  74.469131,   0.000000, 658.971012, 488.878934
Outstanding requests per worker:
3316 3292 3237 3209 3119 3266 3253 4492 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167137.8,      835690,     752175,      83515,     572791,     179384, 257.111660, 396.600000, 452.500000, 566.600000, 102.201906,   2.010000, 817.106009, 586.917098
Outstanding requests per worker:
7511 7829 7868 7291 7507 7276 7638 8229 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167904.4,      839523,     755919,      83604,     607196,     148723, 436.313160, 662.400000, 745.500000, 915.900000, 162.413038,  95.478997, 1228.603959, 633.104911
Outstanding requests per worker:
11515 11533 11471 11669 11017 10625 11368 12100 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167272.2,      836362,     752960,      83402,     621498,     131462, 615.716663, 922.100000, 1034.800000, 1244.500000, 224.751820,  97.906999, 1664.407969, 657.507729
Outstanding requests per worker:
15749 16114 15650 15471 14895 15023 15447 16215 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166392.2,      831962,     748589,      83373,     630089,     118500, 820.568275, 1220.300000, 1348.500000, 1593.600000, 288.934745,  93.416996, 2077.122927, 675.214992
Outstanding requests per worker:
20495 20542 20274 20217 19809 19836 20226 20842 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165876.2,      829382,     746172,      83210,     636523,     109649, 1042.470808, 1561.600000, 1709.300000, 1975.800000, 359.039096, 173.267007, 2340.468884, 687.121074
Outstanding requests per worker:
25008 25561 25215 25125 25090 25172 25124 26224 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164331.4,      821658,     739316,      82342,     636249,     103067, 1288.088586, 1875.600000, 2054.300000, 2368.900000, 419.777103, 296.629995, 2791.028976, 695.364565
Outstanding requests per worker:
31043 31407 31396 31112 31136 31238 30861 32351 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:18   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:18   0:00 /usr/lib/linux
memcache      7  310  0.0 517248 168512 pts/0   Sl+  16:18   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  16:19   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20920540186      instructions:u            #    0.74  insn per cycle         
       28107607558      cycles:u                                                    
         121454096      armv8_pmuv3_0/br_mis_pred/:u                                   
        3254819052      armv8_pmuv3_0/br_pred/:u                                    

      41.800100216 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 8 threads, 174000 rps'
==> Bench: 16384 keys, 512 conns, 8 threads, 174000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 174000 -k 16384 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 174000 -k 16384 -c 512 -f 512 -w 8'
Starting client with -r 174000 -k 16384 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 174000 -k 16384 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 174000 -k 16384 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 174000 cpus 8
meanInterarrival 45
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2321150464
starting receive base loop
num_worker_connections 64
Creating worker on tid 1722872320
starting receive base loop
num_worker_connections 64
Creating worker on tid 1126953472
starting receive base loop
num_worker_connections 64
Creating worker on tid 531034624
starting receive base loop
num_worker_connections 64
Creating worker on tid 4230083072
starting receive base loop
num_worker_connections 64
Creating worker on tid 3634164224
starting receive base loop
num_worker_connections 64
Creating worker on tid 3038245376
starting receive base loop
Created 512 connections total
Creating worker on tid 2444947968
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575391537.389962,       0.0,      394513,     355079,      39434,     238227,     116852, 104.013484, 201.400000, 250.700000, 479.600000,  96.228706,   0.000000, 867.726982, 486.743052
Outstanding requests per worker:
4035 4318 4173 4240 3959 4129 4085 6601 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167304.4,      836523,     752996,      83527,     574258,     178738, 347.155712, 540.000000, 623.900000, 804.400000, 144.018759,  34.090001, 1183.863044, 587.040024
Outstanding requests per worker:
10708 10922 10782 10952 10461 10630 10792 12713 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166538.6,      832694,     749923,      82771,     602255,     147668, 647.834469, 941.600000, 1049.100000, 1242.900000, 215.593459, 136.805996, 1644.611955, 632.274722
Outstanding requests per worker:
17685 18000 17649 18157 17590 17797 17795 19564 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165745.8,      828730,     745692,      83038,     615733,     129959, 975.337227, 1374.400000, 1513.300000, 1740.900000, 286.200885, 182.588995, 2124.737978, 657.755466
Outstanding requests per worker:
25372 25490 25087 25628 25220 25324 25528 26848 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165061.8,      825310,     742864,      82446,     624953,     117911, 1323.337437, 1823.600000, 1980.800000, 2259.800000, 354.056115, 388.653994, 2651.871920, 674.472179
Outstanding requests per worker:
33237 33503 33151 33499 33053 33504 33394 34847 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164890.6,      824454,     741838,      82616,     631923,     109915, 1684.103327, 2294.500000, 2481.200000, 2794.000000, 421.195905, 592.408001, 3362.477064, 685.905126
Outstanding requests per worker:
41413 41446 41420 41581 41106 41409 41481 42838 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163347.0,      816736,     734869,      81867,     632333,     102536, 2059.529346, 2773.800000, 2982.500000, 3309.500000, 483.652377, 746.520996, 3870.970011, 695.160246
Outstanding requests per worker:
50147 50464 50504 50246 50030 50645 50880 52015 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:19   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:19   0:00 /usr/lib/linux
memcache      7  318  0.0 517248 168320 pts/0   Sl+  16:19   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:19   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20814649773      instructions:u            #    0.74  insn per cycle         
       28059779265      cycles:u                                                    
         123274596      armv8_pmuv3_0/br_mis_pred/:u                                   
        3221612608      armv8_pmuv3_0/br_pred/:u                                    

      41.411542641 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 512 conns, 8 threads, 176000 rps'
==> Bench: 16384 keys, 512 conns, 8 threads, 176000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 176000 -k 16384 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 176000 -k 16384 -c 512 -f 512 -w 8'
Starting client with -r 176000 -k 16384 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 176000 -k 16384 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 176000 -k 16384 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 176000 cpus 8
meanInterarrival 45
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2552885760
starting receive base loop
num_worker_connections 64
Creating worker on tid 1956442624
starting receive base loop
num_worker_connections 64
Creating worker on tid 1360523776
starting receive base loop
num_worker_connections 64
Creating worker on tid 767226368
starting receive base loop
num_worker_connections 64
Creating worker on tid 171307520
starting receive base loop
num_worker_connections 64
Creating worker on tid 3870355968
starting receive base loop
num_worker_connections 64
Creating worker on tid 3274437120
starting receive base loop
Created 512 connections total
Creating worker on tid 2678518272
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575391583.390008,       0.0,      509723,     458670,      51053,     315064,     143606,  67.936768, 163.000000, 202.200000, 398.500000,  87.221706,   0.000000, 902.140021, 504.548955
Outstanding requests per worker:
3632 3643 3744 3543 3645 3585 3731 5697 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168570.0,      842851,     759366,      83485,     584690,     174676, 307.795644, 477.900000, 552.800000, 712.900000, 128.749687,   3.851000, 1306.591988, 595.770445
Outstanding requests per worker:
9653 9154 9618 9632 9181 9215 9523 11338 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168149.0,      840746,     756871,      83875,     610736,     146135, 567.868148, 826.400000, 917.200000, 1098.700000, 192.970886, 116.714999, 1564.411044, 636.833561
Outstanding requests per worker:
15578 15208 15662 15793 15058 15396 15655 17190 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167551.2,      837757,     754194,      83563,     624125,     130069, 847.101199, 1177.300000, 1300.300000, 1543.800000, 253.951766, 132.064998, 2015.178919, 658.988337
Outstanding requests per worker:
21911 21699 22018 22235 21506 21562 21994 23799 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166764.0,      833821,     750668,      83153,     632710,     117958, 1144.360948, 1549.700000, 1697.700000, 1934.100000, 307.466087, 255.208999, 2486.337900, 675.684223
Outstanding requests per worker:
29005 28591 29076 28874 28275 28413 28874 30738 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166299.8,      831500,     748270,      83230,     638281,     109989, 1460.010259, 1938.700000, 2088.000000, 2385.400000, 355.687959, 396.052986, 2940.804005, 687.536673
Outstanding requests per worker:
36393 35838 36360 35775 35283 35829 36005 37820 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165340.4,      826703,     744357,      82346,     641720,     102637, 1797.335946, 2350.800000, 2530.600000, 2854.000000, 406.650642, 469.897002, 3362.788916, 697.102081
Outstanding requests per worker:
44036 43719 44016 43718 43156 43432 43600 45862 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:19   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:19   0:00 /usr/lib/linux
memcache      7  319  0.0 520320 172416 pts/0   Sl+  16:19   2:14 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21440156921      instructions:u            #    0.74  insn per cycle         
       28870602154      cycles:u                                                    
         128217733      armv8_pmuv3_0/br_mis_pred/:u                                   
        3342604947      armv8_pmuv3_0/br_pred/:u                                    

      42.431634353 seconds time elapsed

+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 6 threads, 150000 rps'
==> Bench: 16384 keys, 1024 conns, 6 threads, 150000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 150000 -k 16384 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 150000 -k 16384 -c 1024 -f 512 -w 6'
Starting client with -r 150000 -k 16384 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 150000 -k 16384 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 150000 -k 16384 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 150000 cpus 6
meanInterarrival 40
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1322381824
starting receive base loop
num_worker_connections 171
Creating worker on tid 4156748288
starting receive base loop
num_worker_connections 171
Creating worker on tid 2696475136
starting receive base loop
num_worker_connections 170
Creating worker on tid 1236201984
starting receive base loop
num_worker_connections 170
Creating worker on tid 4081578496
starting receive base loop
Created 1024 connections total
Creating worker on tid 2629366272
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575391628.390053,       0.0,      324026,     291795,      32231,     193252,      98543,  30.991778,  61.200000,  79.000000, 168.900000,  59.403894,   0.000000, 1270.841956, 477.781905
Outstanding requests per worker:
365 337 336 335 329 343 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150011.0,      750056,     675195,      74861,     508272,     166923,  13.866875,  26.000000,  28.900000,  33.600000,   7.749218,   0.511000,  42.902999, 576.946974
Outstanding requests per worker:
336 319 369 360 350 343 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150008.0,      750041,     675106,      74935,     537382,     137724,  14.237876,  26.400000,  29.900000,  35.600000,   8.003556,   0.583000,  43.788001, 624.485530
Outstanding requests per worker:
359 366 380 358 334 340 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  149992.9,      749965,     675326,      74639,     553093,     122233,  14.526394,  27.000000,  30.400000,  36.700000,   8.213603,   0.537000,  49.903002, 650.154392
Outstanding requests per worker:
376 368 372 370 356 382 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150019.8,      750100,     675017,      75083,     563264,     111753,  14.548520,  27.500000,  30.600000,  35.200000,   8.138602,   0.315000,  43.708000, 667.095635
Outstanding requests per worker:
337 375 351 390 366 374 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150019.2,      750097,     675040,      75057,     571542,     103498,  14.785207,  27.500000,  31.000000,  37.700000,   8.384045,   0.514000,  50.505001, 680.995584
Outstanding requests per worker:
351 393 336 361 348 389 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  149995.3,      749977,     674918,      75059,     577210,      97708,  14.872790,  28.000000,  31.600000,  36.900000,   8.401568,   0.468000,  45.109000, 689.690559
Outstanding requests per worker:
346 359 355 370 394 413 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:20   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   16:20   0:00 /usr/lib/linux
memcache      8  314  0.0 443072 153664 pts/0   Sl+  16:20   2:08 memcached -t 4
memcache     19  0.0  0.0   6656  4416 pts/1    Rs+  16:21   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       18260013340      instructions:u            #    0.70  insn per cycle         
       25910167635      cycles:u                                                    
         113078108      armv8_pmuv3_0/br_mis_pred/:u                                   
        2857232882      armv8_pmuv3_0/br_pred/:u                                    

      41.690312728 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 6 threads, 152000 rps'
==> Bench: 16384 keys, 1024 conns, 6 threads, 152000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 152000 -k 16384 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 152000 -k 16384 -c 1024 -f 512 -w 6'
Starting client with -r 152000 -k 16384 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 152000 -k 16384 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 152000 -k 16384 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 152000 cpus 6
meanInterarrival 39
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1033499136
starting receive base loop
num_worker_connections 171
Creating worker on tid 3872190976
starting receive base loop
num_worker_connections 171
Creating worker on tid 2411917824
starting receive base loop
num_worker_connections 170
Creating worker on tid 951644672
starting receive base loop
num_worker_connections 170
Creating worker on tid 3794399744
starting receive base loop
Created 1024 connections total
Creating worker on tid 2344808960
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575391673.390098,       0.0,      334908,     301373,      33535,     199772,     101601,  39.353635,  87.800000, 122.800000, 178.600000,  38.670148,   0.000000, 342.370003, 477.889283
Outstanding requests per worker:
413 447 415 426 429 433 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153819.6,      769099,     692481,      76618,     522850,     169631,  16.744287,  30.800000,  35.600000,  44.600000,   9.569356,   0.658000,  55.783998, 579.676173
Outstanding requests per worker:
469 463 480 426 435 468 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153860.2,      769302,     692450,      76852,     552349,     140101,  17.284828,  32.000000,  37.000000,  45.600000,   9.855520,   0.628000,  67.373000, 626.448188
Outstanding requests per worker:
459 512 477 424 429 430 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153861.8,      769310,     692445,      76865,     568465,     123980,  17.765753,  32.900000,  38.500000,  46.600000,  10.151047,   0.606000,  58.368001, 651.858152
Outstanding requests per worker:
448 455 492 443 439 449 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153856.0,      769281,     692044,      77237,     578744,     113300,  18.015496,  33.100000,  38.900000,  48.000000,  10.302771,   0.718000,  59.574999, 669.155929
Outstanding requests per worker:
486 471 479 479 441 410 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153843.0,      769216,     692315,      76901,     586963,     105352,  18.234700,  33.600000,  39.600000,  48.100000,  10.430605,   0.535000,  60.274001, 681.697297
Outstanding requests per worker:
449 447 498 457 482 493 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153856.6,      769284,     692294,      76990,     593047,      99247,  18.348231,  34.000000,  39.800000,  48.600000,  10.513796,   0.570000,  80.404997, 691.110249
Outstanding requests per worker:
507 496 454 483 443 446 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:21   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:21   0:00 /usr/lib/linux
memcache      7  306  0.0 444096 157440 pts/0   Sl+  16:21   2:08 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  16:22   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       18771659371      instructions:u            #    0.71  insn per cycle         
       26397554070      cycles:u                                                    
         111943493      armv8_pmuv3_0/br_mis_pred/:u                                   
        2932402836      armv8_pmuv3_0/br_pred/:u                                    

      41.530992825 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 6 threads, 154000 rps'
==> Bench: 16384 keys, 1024 conns, 6 threads, 154000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 154000 -k 16384 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 154000 -k 16384 -c 1024 -f 512 -w 6'
Starting client with -r 154000 -k 16384 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 154000 -k 16384 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 154000 -k 16384 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 154000 cpus 6
meanInterarrival 38
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1530065408
starting receive base loop
num_worker_connections 171
Creating worker on tid 71168512
starting receive base loop
num_worker_connections 171
Creating worker on tid 2905862656
starting receive base loop
num_worker_connections 170
Creating worker on tid 1448210944
starting receive base loop
num_worker_connections 170
Creating worker on tid 4290966016
starting receive base loop
Created 1024 connections total
Creating worker on tid 2838753792
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575391719.390144,       0.0,      425029,     382611,      42418,     258620,     123991,  20.412486,  46.100000,  56.800000,  93.800000,  22.175535,   0.000000, 543.479025, 492.281547
Outstanding requests per worker:
536 554 502 504 534 526 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157901.6,      789509,     710704,      78805,     542264,     168440,  19.822885,  35.900000,  43.300000,  51.900000,  11.161515,   0.660000,  74.222997, 588.025669
Outstanding requests per worker:
531 523 554 548 539 516 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157893.4,      789468,     710591,      78877,     569847,     140744,  20.382612,  36.800000,  44.800000,  53.400000,  11.490715,   0.606000,  90.039998, 630.758021
Outstanding requests per worker:
552 535 532 560 529 553 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157913.4,      789568,     710835,      78733,     585669,     125166,  20.673911,  37.100000,  45.300000,  54.400000,  11.630242,   0.684000,  71.387000, 655.585856
Outstanding requests per worker:
573 543 529 509 542 541 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157895.6,      789479,     710340,      79139,     595996,     114344,  20.964333,  37.600000,  46.200000,  54.400000,  11.719386,   0.705000,  87.562002, 671.564386
Outstanding requests per worker:
577 541 582 533 535 519 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157910.4,      789553,     710612,      78941,     604053,     106559,  21.133009,  37.800000,  46.600000,  55.100000,  11.855700,   0.753000,  88.671997, 683.862766
Outstanding requests per worker:
524 567 581 531 564 536 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157890.6,      789454,     710457,      78997,     610784,      99673,  21.291874,  37.900000,  46.800000,  56.000000,  11.978294,   0.744000,  93.199000, 694.152451
Outstanding requests per worker:
580 603 551 534 527 571 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:22   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:22   0:00 /usr/lib/linux
memcache      7  306  0.0 449216 160768 pts/0   Sl+  16:22   2:11 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  16:22   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19612224340      instructions:u            #    0.72  insn per cycle         
       27382345256      cycles:u                                                    
         115639956      armv8_pmuv3_0/br_mis_pred/:u                                   
        3072334844      armv8_pmuv3_0/br_pred/:u                                    

      42.721059828 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 6 threads, 156000 rps'
==> Bench: 16384 keys, 1024 conns, 6 threads, 156000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 156000 -k 16384 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 156000 -k 16384 -c 1024 -f 512 -w 6'
Starting client with -r 156000 -k 16384 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 156000 -k 16384 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 156000 -k 16384 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 156000 cpus 6
meanInterarrival 38
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 986903040
starting receive base loop
num_worker_connections 171
Creating worker on tid 3821203968
starting receive base loop
num_worker_connections 171
Creating worker on tid 2360930816
starting receive base loop
num_worker_connections 170
Creating worker on tid 900657664
starting receive base loop
num_worker_connections 170
Creating worker on tid 3746034176
starting receive base loop
Created 1024 connections total
Creating worker on tid 2293821952
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575391765.390190,       0.0,      341495,     307131,      34364,     204130,     103001,  56.193698, 129.400000, 162.300000, 229.800000,  54.427423,   0.000000, 701.771021, 479.945528
Outstanding requests per worker:
682 682 677 667 645 680 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  158045.2,      790227,     710717,      79510,     538108,     172609,  20.218135,  36.900000,  44.500000,  53.200000,  11.655399,   0.764000, 186.611995, 581.676145
Outstanding requests per worker:
542 540 565 570 591 517 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157907.0,      789536,     710658,      78878,     567829,     142829,  20.574551,  37.200000,  45.500000,  54.100000,  11.655963,   0.675000,  82.736000, 627.694031
Outstanding requests per worker:
574 530 551 563 558 547 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157913.6,      789569,     710862,      78707,     584239,     126623,  20.934744,  37.500000,  46.200000,  55.000000,  11.835907,   0.630000,  69.222003, 652.778174
Outstanding requests per worker:
538 556 563 557 531 557 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157882.6,      789414,     710194,      79220,     594964,     115230,  21.135959,  37.900000,  46.900000,  55.300000,  11.957040,   0.746000,  76.095000, 670.783630
Outstanding requests per worker:
526 623 564 552 640 551 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157912.6,      789564,     710752,      78812,     603807,     106945,  21.300763,  38.100000,  47.100000,  56.100000,  12.092226,   0.553000,  89.134000, 683.286768
Outstanding requests per worker:
559 589 598 509 606 542 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157909.2,      789547,     710695,      78852,     609972,     100723,  21.391901,  38.100000,  47.600000,  56.100000,  12.123228,   0.786000,  83.307996, 692.839156
Outstanding requests per worker:
550 564 576 560 606 536 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:22   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:22   0:00 /usr/lib/linux
memcache      7  314  0.0 448192 156416 pts/0   Sl+  16:22   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:23   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19331209781      instructions:u            #    0.72  insn per cycle         
       26971629850      cycles:u                                                    
         115714043      armv8_pmuv3_0/br_mis_pred/:u                                   
        3010908489      armv8_pmuv3_0/br_pred/:u                                    

      41.951854782 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 6 threads, 158000 rps'
==> Bench: 16384 keys, 1024 conns, 6 threads, 158000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 158000 -k 16384 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 158000 -k 16384 -c 1024 -f 512 -w 6'
Starting client with -r 158000 -k 16384 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 158000 -k 16384 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 158000 -k 16384 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 158000 cpus 6
meanInterarrival 37
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1540551168
starting receive base loop
num_worker_connections 171
Creating worker on tid 79229440
starting receive base loop
num_worker_connections 171
Creating worker on tid 2913923584
starting receive base loop
num_worker_connections 170
Creating worker on tid 1456271872
starting receive base loop
num_worker_connections 170
Creating worker on tid 4059648
starting receive base loop
Created 1024 connections total
Creating worker on tid 2846814720
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575391810.390235,       0.0,      344257,     309891,      34366,     206037,     103854,  76.890844, 158.500000, 190.600000, 450.200000,  96.702973,   0.000000, 1452.417016, 480.931637
Outstanding requests per worker:
1469 1421 1387 1392 1464 2689 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163401.4,      817008,     735890,      81118,     557142,     178748,  26.692768,  47.800000,  56.600000, 116.400000,  30.018958,   0.858000, 982.560992, 581.422119
Outstanding requests per worker:
581 643 633 581 633 633 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162152.8,      810765,     730083,      80682,     584235,     145848,  22.766153,  39.200000,  49.900000,  59.600000,  12.553574,   0.769000,  95.826998, 629.681329
Outstanding requests per worker:
662 613 688 621 620 590 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162188.4,      810943,     729746,      81197,     601151,     128595,  23.104484,  39.800000,  50.600000,  60.700000,  12.734086,   0.937000, 103.478000, 654.893526
Outstanding requests per worker:
618 654 607 601 627 608 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162128.8,      810645,     729407,      81238,     611668,     117739,  23.543153,  40.800000,  51.200000,  62.000000,  13.030166,   0.798000, 121.746004, 671.862412
Outstanding requests per worker:
646 638 681 656 679 636 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162185.4,      810928,     730049,      80879,     620640,     109409,  23.613463,  40.300000,  51.600000,  62.000000,  12.996474,   0.872000, 113.103002, 683.522024
Outstanding requests per worker:
683 613 664 593 647 683 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162186.4,      810933,     729543,      81390,     626846,     102697,  23.892775,  41.000000,  51.900000,  63.100000,  13.170098,   0.798000, 125.207007, 693.850779
Outstanding requests per worker:
659 621 634 629 623 649 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  16:23   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   16:23   0:00 /usr/lib/linux
memcache      7  306  0.0 449216 164864 pts/0   Sl+  16:23   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:24   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19849506938      instructions:u            #    0.72  insn per cycle         
       27407358340      cycles:u                                                    
         117085035      armv8_pmuv3_0/br_mis_pred/:u                                   
        3096555516      armv8_pmuv3_0/br_pred/:u                                    

      41.911000119 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 6 threads, 160000 rps'
==> Bench: 16384 keys, 1024 conns, 6 threads, 160000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 160000 -k 16384 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 160000 -k 16384 -c 1024 -f 512 -w 6'
Starting client with -r 160000 -k 16384 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 160000 -k 16384 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 160000 -k 16384 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 160000 cpus 6
meanInterarrival 37
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1079505408
starting receive base loop
num_worker_connections 171
Creating worker on tid 3920556544
starting receive base loop
num_worker_connections 171
Creating worker on tid 2462904832
starting receive base loop
num_worker_connections 170
Creating worker on tid 1002631680
starting receive base loop
num_worker_connections 170
Creating worker on tid 3845386752
starting receive base loop
Created 1024 connections total
Creating worker on tid 2395795968
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575391855.390280,       0.0,      341020,     307044,      33976,     204425,     102619,  78.178739, 163.400000, 197.000000, 459.500000, 102.975534,   0.000000, 1685.228944, 481.484618
Outstanding requests per worker:
1498 1411 1504 1547 1493 3263 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163590.8,      817955,     736282,      81673,     557118,     179164,  28.544181,  50.000000,  60.500000, 126.000000,  40.151486,   0.635000, 1456.994057, 581.339102
Outstanding requests per worker:
584 606 634 622 627 585 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162158.4,      810793,     730114,      80679,     583675,     146439,  23.022757,  39.600000,  50.500000,  59.500000,  12.522350,   0.794000, 104.507998, 629.218715
Outstanding requests per worker:
624 615 611 669 640 617 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162166.8,      810835,     729963,      80872,     601396,     128567,  23.505969,  40.300000,  51.300000,  61.500000,  12.840303,   0.839000, 109.025002, 655.694019
Outstanding requests per worker:
589 635 650 653 649 625 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162153.6,      810769,     730487,      80282,     611945,     118542,  23.707833,  40.400000,  51.700000,  61.800000,  12.876724,   0.853000, 107.060999, 670.648860
Outstanding requests per worker:
668 663 666 649 659 606 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162178.2,      810892,     729634,      81258,     619839,     109795,  23.880605,  40.500000,  52.300000,  61.900000,  12.952836,   0.988000, 109.696999, 683.514224
Outstanding requests per worker:
587 645 678 680 669 649 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162174.2,      810872,     729712,      81160,     626462,     103250,  24.180041,  41.100000,  52.700000,  63.100000,  13.151876,   1.126000, 120.199002, 693.146847
Outstanding requests per worker:
675 627 693 689 623 641 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:24   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:24   0:00 /usr/lib/linux
memcache      7  306  0.0 449216 167680 pts/0   Sl+  16:24   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19833573279      instructions:u            #    0.73  insn per cycle         
       27175809210      cycles:u                                                    
         119483994      armv8_pmuv3_0/br_mis_pred/:u                                   
        3094542480      armv8_pmuv3_0/br_pred/:u                                    

      41.551826624 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 6 threads, 162000 rps'
==> Bench: 16384 keys, 1024 conns, 6 threads, 162000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 162000 -k 16384 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 162000 -k 16384 -c 1024 -f 512 -w 6'
Starting client with -r 162000 -k 16384 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 162000 -k 16384 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 162000 -k 16384 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 162000 cpus 6
meanInterarrival 37
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1602351616
starting receive base loop
num_worker_connections 171
Creating worker on tid 146338304
starting receive base loop
num_worker_connections 171
Creating worker on tid 2981032448
starting receive base loop
num_worker_connections 170
Creating worker on tid 1523380736
starting receive base loop
num_worker_connections 170
Creating worker on tid 71168512
starting receive base loop
Created 1024 connections total
Creating worker on tid 2913923584
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575391903.390328,       0.0,      488607,     439884,      48723,     301017,     138867,  24.692650,  56.700000,  70.200000, 125.300000,  36.910678,   0.000000, 981.455028, 501.229974
Outstanding requests per worker:
570 591 604 609 626 599 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162155.6,      810779,     729866,      80913,     560112,     169754,  22.585530,  39.100000,  49.500000,  58.900000,  12.435003,   0.759000,  90.971999, 592.919322
Outstanding requests per worker:
647 604 600 662 594 608 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162154.8,      810775,     729462,      81313,     587747,     141715,  23.080912,  40.000000,  50.500000,  59.900000,  12.690455,   0.919000, 106.054001, 635.183930
Outstanding requests per worker:
658 632 631 668 648 608 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162172.4,      810863,     729746,      81117,     604223,     125523,  23.546742,  40.400000,  51.300000,  62.000000,  12.940008,   0.876000, 120.058000, 659.184777
Outstanding requests per worker:
639 621 629 651 673 631 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162129.6,      810649,     729391,      81258,     613686,     115705,  23.511487,  40.000000,  51.700000,  61.400000,  12.863590,   1.026000, 100.596003, 674.438733
Outstanding requests per worker:
678 688 697 659 646 690 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162212.4,      811063,     729395,      81668,     622069,     107326,  23.806140,  40.400000,  52.200000,  62.100000,  13.018316,   0.798000, 102.178000, 686.712725
Outstanding requests per worker:
587 656 636 652 673 687 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162087.0,      810436,     729335,      81101,     627880,     101455,  25.893850,  46.900000,  56.000000,  75.700000,  15.538744,   0.761000, 181.692004, 695.865333
Outstanding requests per worker:
709 640 750 784 755 719 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  16:25   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   16:25   0:00 /usr/lib/linux
memcache      7  311  0.0 517248 166592 pts/0   Sl+  16:25   2:13 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       20495151953      instructions:u            #    0.72  insn per cycle         
       28378514450      cycles:u                                                    
         120720218      armv8_pmuv3_0/br_mis_pred/:u                                   
        3197653736      armv8_pmuv3_0/br_pred/:u                                    

      43.551703044 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 6 threads, 164000 rps'
==> Bench: 16384 keys, 1024 conns, 6 threads, 164000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 164000 -k 16384 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 164000 -k 16384 -c 1024 -f 512 -w 6'
Starting client with -r 164000 -k 16384 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 164000 -k 16384 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 164000 -k 16384 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 164000 cpus 6
meanInterarrival 36
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1749938688
starting receive base loop
num_worker_connections 171
Creating worker on tid 288616960
starting receive base loop
num_worker_connections 171
Creating worker on tid 3125932544
starting receive base loop
num_worker_connections 170
Creating worker on tid 1665659392
starting receive base loop
num_worker_connections 170
Creating worker on tid 213447168
starting receive base loop
Created 1024 connections total
Creating worker on tid 3056202240
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575391948.390373,       0.0,      349620,     314648,      34972,     209814,     104834,  90.817555, 168.100000, 208.000000, 798.900000, 128.343779,   0.000000, 1611.067057, 482.299662
Outstanding requests per worker:
2101 2050 1963 2132 2196 5833 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168961.6,      844809,     760837,      83972,     577177,     183660,  47.309558,  96.600000, 130.100000, 240.800000,  69.781231,   1.051000, 1333.938003, 583.382498
Outstanding requests per worker:
811 778 794 845 823 861 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166625.6,      833129,     750179,      82950,     601703,     148476,  30.221230,  56.700000,  63.900000, 108.500000,  19.599245,   1.139000, 207.526997, 631.151932
Outstanding requests per worker:
837 898 844 871 846 861 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166635.0,      833176,     749982,      83194,     618914,     131068,  31.666714,  59.700000,  67.800000, 119.600000,  21.497338,   1.163000, 214.089006, 657.558119
Outstanding requests per worker:
859 858 933 946 867 910 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166636.2,      833182,     749609,      83573,     629910,     119699,  32.232805,  60.600000,  68.800000, 120.600000,  21.667845,   0.825000, 220.017999, 673.733979
Outstanding requests per worker:
908 937 924 950 910 959 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166742.8,      833715,     750000,      83715,     638939,     111061,  33.154124,  62.000000,  70.700000, 124.800000,  22.418330,   1.327000, 222.747996, 685.833144
Outstanding requests per worker:
892 829 791 925 902 951 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164982.4,      824913,     743017,      81896,     639066,     103951,  42.744887,  92.600000, 126.600000, 164.900000,  35.255278,   1.042000, 269.780993, 695.313358
Outstanding requests per worker:
2289 2356 2295 2353 2231 2229 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:26   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:26   0:00 /usr/lib/linux
memcache      7  313  0.0 517248 170816 pts/0   Sl+  16:26   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  16:26   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       20530131298      instructions:u            #    0.74  insn per cycle         
       27824589224      cycles:u                                                    
         115951461      armv8_pmuv3_0/br_mis_pred/:u                                   
        3188346305      armv8_pmuv3_0/br_pred/:u                                    

      41.701744375 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 6 threads, 166000 rps'
==> Bench: 16384 keys, 1024 conns, 6 threads, 166000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 166000 -k 16384 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 166000 -k 16384 -c 1024 -f 512 -w 6'
Starting client with -r 166000 -k 16384 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 166000 -k 16384 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 166000 -k 16384 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 166000 cpus 6
meanInterarrival 36
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1203958272
starting receive base loop
num_worker_connections 171
Creating worker on tid 4038652416
starting receive base loop
num_worker_connections 171
Creating worker on tid 2578379264
starting receive base loop
num_worker_connections 170
Creating worker on tid 1120727552
starting receive base loop
num_worker_connections 170
Creating worker on tid 3963482624
starting receive base loop
Created 1024 connections total
Creating worker on tid 2511270400
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575391993.390418,       0.0,      348501,     313353,      35148,     208485,     104868,  95.692977, 183.700000, 223.000000, 646.600000, 125.292168,   0.000000, 1850.173950, 481.255925
Outstanding requests per worker:
2500 2411 2546 2508 2469 6349 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169338.6,      846694,     762011,      84683,     577745,     184266,  58.039706, 121.000000, 147.300000, 282.100000,  85.487270,   1.369000, 1810.850024, 583.232511
Outstanding requests per worker:
856 945 870 917 973 981 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166708.8,      833545,     750702,      82843,     602834,     147868,  31.532061,  58.500000,  66.200000, 111.700000,  20.152496,   0.967000, 211.255997, 632.395006
Outstanding requests per worker:
794 907 949 885 887 966 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166613.8,      833070,     750309,      82761,     619031,     131278,  33.615523,  62.500000,  72.000000, 125.000000,  22.612927,   1.075000, 233.193994, 656.118864
Outstanding requests per worker:
899 885 1015 964 976 994 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166680.6,      833404,     750268,      83136,     629750,     120518,  34.296039,  62.900000,  72.200000, 122.200000,  22.135752,   1.343000, 214.653000, 672.133567
Outstanding requests per worker:
958 965 1046 921 898 969 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166589.2,      832947,     749281,      83666,     637567,     111714,  36.790398,  65.700000,  79.100000, 126.200000,  23.291940,   1.098000, 228.008002, 684.730571
Outstanding requests per worker:
959 1076 1091 1019 1066 1044 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166178.2,      830892,     747826,      83066,     642757,     105069,  41.514615,  72.800000,  97.500000, 143.600000,  27.521207,   1.613000, 275.631994, 694.293016
Outstanding requests per worker:
1459 1505 1410 1500 1428 1463 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:26   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   16:26   0:00 /usr/lib/linux
memcache      7  314  0.0 517248 166912 pts/0   Sl+  16:26   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:27   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       20603385745      instructions:u            #    0.74  insn per cycle         
       28009399937      cycles:u                                                    
         117355554      armv8_pmuv3_0/br_mis_pred/:u                                   
        3199912603      armv8_pmuv3_0/br_pred/:u                                    

      41.160295190 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 6 threads, 168000 rps'
==> Bench: 16384 keys, 1024 conns, 6 threads, 168000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 168000 -k 16384 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 168000 -k 16384 -c 1024 -f 512 -w 6'
Starting client with -r 168000 -k 16384 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 168000 -k 16384 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 168000 -k 16384 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 168000 cpus 6
meanInterarrival 35
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1802760704
starting receive base loop
num_worker_connections 171
Creating worker on tid 347664896
starting receive base loop
num_worker_connections 171
Creating worker on tid 3182359040
starting receive base loop
num_worker_connections 170
Creating worker on tid 1724707328
starting receive base loop
num_worker_connections 170
Creating worker on tid 272495104
starting receive base loop
Created 1024 connections total
Creating worker on tid 3115250176
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575392038.390463,       0.0,      343228,     309127,      34101,     205532,     103595, 113.323567, 196.200000, 239.300000, 921.100000, 148.959595,   0.000000, 1973.189950, 479.850692
Outstanding requests per worker:
3336 3475 3470 3321 3512 11922 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172517.6,      862589,     776288,      86301,     588979,     187309, 158.109406, 217.300000, 272.700000, 1235.000000, 197.311440,   2.686000, 2529.294968, 583.395687
Outstanding requests per worker:
3539 3524 3470 3445 3733 5934 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172209.4,      861048,     774977,      86071,     621900,     153077, 126.066818, 230.900000, 278.000000, 461.800000, 125.018232,   3.557000, 1891.939044, 631.536381
Outstanding requests per worker:
3202 2972 3048 3178 3295 4099 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171527.0,      857636,     771746,      85890,     637570,     134176, 113.051217, 248.800000, 292.200000, 393.600000, 102.964417,   2.964000, 1550.865054, 657.526673
Outstanding requests per worker:
3091 3224 3059 3184 3269 3523 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171213.8,      856070,     770661,      85409,     648686,     121975, 115.346169, 273.600000, 320.400000, 408.000000, 102.338184,   2.119000, 1163.339972, 674.517503
Outstanding requests per worker:
3404 3275 3291 3367 3577 3555 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171154.2,      855772,     770120,      85652,     656805,     113315, 123.072850, 286.100000, 342.500000, 439.300000, 103.791736,   1.946000, 795.394003, 687.164150
Outstanding requests per worker:
3699 3348 3631 3661 3749 3797 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170397.4,      851988,     766389,      85599,     660264,     106125, 139.516354, 296.100000, 354.800000, 441.100000, 102.633125,   3.066000, 672.124028, 696.622168
Outstanding requests per worker:
4487 4488 4588 4511 4505 4512 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:27   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   16:27   0:00 /usr/lib/linux
memcache      7  306  0.0 521344 180224 pts/0   Sl+  16:27   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:28   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21325560425      instructions:u            #    0.73  insn per cycle         
       29278942020      cycles:u                                                    
         124291163      armv8_pmuv3_0/br_mis_pred/:u                                   
        3329271682      armv8_pmuv3_0/br_pred/:u                                    

      41.551246359 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 6 threads, 170000 rps'
==> Bench: 16384 keys, 1024 conns, 6 threads, 170000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 170000 -k 16384 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 170000 -k 16384 -c 1024 -f 512 -w 6'
Starting client with -r 170000 -k 16384 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 170000 -k 16384 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 170000 -k 16384 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 170000 cpus 6
meanInterarrival 35
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1742991872
starting receive base loop
num_worker_connections 171
Creating worker on tid 288616960
starting receive base loop
num_worker_connections 171
Creating worker on tid 3125932544
starting receive base loop
num_worker_connections 170
Creating worker on tid 1665659392
starting receive base loop
num_worker_connections 170
Creating worker on tid 213447168
starting receive base loop
Created 1024 connections total
Creating worker on tid 3056202240
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575392083.390508,       0.0,      341404,     307046,      34358,     203910,     103136, 105.281017, 193.000000, 238.000000, 957.000000, 153.523478,   0.000000, 1960.631013, 479.761062
Outstanding requests per worker:
2884 3017 2831 2845 3198 14995 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172161.0,      860806,     774536,      86270,     587930,     186606, 171.781103, 234.400000, 323.500000, 1652.700000, 256.996077,   3.460000, 2640.702009, 583.416380
Outstanding requests per worker:
3637 3615 3718 3642 3686 7896 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171931.0,      859656,     773973,      85683,     622051,     151922, 145.660410, 279.300000, 338.500000, 919.800000, 165.798732,   3.269000, 2379.641056, 632.653581
Outstanding requests per worker:
3558 3807 3646 3738 3764 5274 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171215.6,      856079,     770647,      85432,     636790,     133857, 142.120546, 307.500000, 372.300000, 551.000000, 143.288783,   2.293000, 1819.350958, 658.031759
Outstanding requests per worker:
3859 3969 4034 3842 4257 4948 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171123.4,      855618,     769691,      85927,     647711,     121980, 149.842660, 341.400000, 404.500000, 541.800000, 140.607480,   2.657000, 1693.773031, 674.536222
Outstanding requests per worker:
4472 4259 4291 4233 4423 4834 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171039.4,      855198,     769341,      85857,     656298,     113043, 162.143008, 368.900000, 429.500000, 561.400000, 142.316966,   2.790000, 1709.035993, 686.606661
Outstanding requests per worker:
4389 4894 4492 4781 4739 5245 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169160.2,      845802,     761736,      84066,     656778,     104958, 190.622874, 398.500000, 467.700000, 607.000000, 142.445621,   1.888000, 1125.542045, 697.213864
Outstanding requests per worker:
6590 6561 6315 6406 7092 7024 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:28   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   16:28   0:00 /usr/lib/linux
memcache      7  306  0.0 520320 182080 pts/0   Sl+  16:28   2:08 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  16:28   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21304800219      instructions:u            #    0.73  insn per cycle         
       29241784203      cycles:u                                                    
         128605913      armv8_pmuv3_0/br_mis_pred/:u                                   
        3317218595      armv8_pmuv3_0/br_pred/:u                                    

      41.700360071 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 6 threads, 172000 rps'
==> Bench: 16384 keys, 1024 conns, 6 threads, 172000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 172000 -k 16384 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 172000 -k 16384 -c 1024 -f 512 -w 6'
Starting client with -r 172000 -k 16384 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 172000 -k 16384 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 172000 -k 16384 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 172000 cpus 6
meanInterarrival 34
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 786493952
starting receive base loop
num_worker_connections 171
Creating worker on tid 3619877376
starting receive base loop
num_worker_connections 171
Creating worker on tid 2159604224
starting receive base loop
num_worker_connections 170
Creating worker on tid 699331072
starting receive base loop
num_worker_connections 170
Creating worker on tid 3544707584
starting receive base loop
Created 1024 connections total
Creating worker on tid 2092495360
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575392129.390554,       0.0,      349631,     314804,      34827,     209422,     105382,  99.079187, 162.800000, 216.200000, 1095.200000, 173.865349,   0.000000, 1980.674028, 481.594297
Outstanding requests per worker:
2612 2456 2618 2617 2615 26341 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172652.6,      863264,     777228,      86036,     589918,     187310, 297.969521, 380.500000, 1342.700000, 2308.700000, 423.656484,   4.138000, 3186.532974, 583.602900
Outstanding requests per worker:
7136 7218 7226 7063 7441 22381 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175242.4,      876213,     788949,      87264,     633059,     155890, 355.349462, 457.900000, 911.400000, 1978.800000, 324.637744,   5.738000, 2973.942995, 632.011375
Outstanding requests per worker:
9004 8987 8959 8906 9038 19768 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175648.0,      878241,     790380,      87861,     652992,     137388, 379.012146, 505.300000, 673.900000, 1805.500000, 271.405644,   8.020000, 2910.053015, 658.390463
Outstanding requests per worker:
9818 10116 9981 10180 10380 18349 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175173.2,      875867,     788314,      87553,     663644,     124670, 407.915116, 577.300000, 717.500000, 1713.300000, 250.843645,  24.164001, 2766.943932, 675.320829
Outstanding requests per worker:
11389 11515 11133 11285 11724 18310 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175185.6,      875929,     788279,      87650,     672908,     115371, 446.377251, 641.700000, 783.300000, 1658.200000, 246.124147,  35.107002, 2962.398052, 687.911997
Outstanding requests per worker:
12635 12539 12599 12477 13117 18466 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174491.4,      872458,     785266,      87192,     676512,     108754, 487.769202, 711.600000, 847.700000, 1667.400000, 253.849921,  52.891999, 2973.326921, 696.647796
Outstanding requests per worker:
14057 14454 14233 14348 15113 19587 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:29   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   16:29   0:00 /usr/lib/linux
memcache      7  307  0.0 522368 195584 pts/0   Sl+  16:29   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21836127290      instructions:u            #    0.73  insn per cycle         
       29825691938      cycles:u                                                    
         126776768      armv8_pmuv3_0/br_mis_pred/:u                                   
        3413149419      armv8_pmuv3_0/br_pred/:u                                    

      41.801733035 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 6 threads, 174000 rps'
==> Bench: 16384 keys, 1024 conns, 6 threads, 174000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 174000 -k 16384 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 174000 -k 16384 -c 1024 -f 512 -w 6'
Starting client with -r 174000 -k 16384 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 174000 -k 16384 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 174000 -k 16384 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 174000 cpus 6
meanInterarrival 34
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1150153216
starting receive base loop
num_worker_connections 171
Creating worker on tid 3987665408
starting receive base loop
num_worker_connections 171
Creating worker on tid 2530013696
starting receive base loop
num_worker_connections 170
Creating worker on tid 1069740544
starting receive base loop
num_worker_connections 170
Creating worker on tid 3912495616
starting receive base loop
Created 1024 connections total
Creating worker on tid 2462904832
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575392174.390599,       0.0,      350195,     314993,      35202,     210048,     104945, 105.249611, 181.800000, 237.100000, 1114.100000, 176.267871,   0.000000, 1981.259942, 483.464874
Outstanding requests per worker:
3024 2905 2951 2918 3061 22358 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173788.0,      868941,     782011,      86930,     593439,     188572, 263.359988, 338.100000, 886.600000, 2147.800000, 366.830636,   5.735000, 3371.361017, 583.845521
Outstanding requests per worker:
6625 6609 6684 6572 6579 17640 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175179.6,      875899,     788507,      87392,     633893,     154614, 311.573831, 421.300000, 536.000000, 1946.300000, 295.515237,   7.939000, 3351.114035, 632.770952
Outstanding requests per worker:
8431 8335 8354 8260 8185 15686 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175374.8,      876875,     789616,      87259,     652892,     136724, 341.384567, 489.500000, 597.000000, 1785.100000, 262.387545,   8.973000, 3406.382084, 658.183432
Outstanding requests per worker:
9299 9655 9666 9545 9613 15030 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175575.0,      877876,     789605,      88271,     664420,     125185, 368.914607, 574.100000, 710.800000, 1750.400000, 263.197930,  10.187000, 3117.994070, 674.465271
Outstanding requests per worker:
10348 10462 10394 10488 10514 15147 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175596.8,      877985,     790131,      87854,     674368,     115763, 392.660133, 633.500000, 832.500000, 1688.200000, 278.537419,  13.210000, 3020.438910, 687.977725
Outstanding requests per worker:
10841 11486 11157 11235 11510 15558 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174748.2,      873742,     786984,      86758,     678899,     108085, 429.175585, 719.800000, 939.000000, 1905.600000, 299.913890,   8.381000, 2918.916941, 698.405528
Outstanding requests per worker:
12335 12830 12397 12484 13249 17200 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:29   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:29   0:00 /usr/lib/linux
memcache      7  314  0.0 523392 193024 pts/0   Sl+  16:29   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:30   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21970671631      instructions:u            #    0.73  insn per cycle         
       29946899847      cycles:u                                                    
         126129293      armv8_pmuv3_0/br_mis_pred/:u                                   
        3428421655      armv8_pmuv3_0/br_pred/:u                                    

      41.781220069 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 6 threads, 176000 rps'
==> Bench: 16384 keys, 1024 conns, 6 threads, 176000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 176000 -k 16384 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 176000 -k 16384 -c 1024 -f 512 -w 6'
Starting client with -r 176000 -k 16384 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 176000 -k 16384 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 176000 -k 16384 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 176000 cpus 6
meanInterarrival 34
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1797583360
starting receive base loop
num_worker_connections 171
Creating worker on tid 339603968
starting receive base loop
num_worker_connections 171
Creating worker on tid 3174298112
starting receive base loop
num_worker_connections 170
Creating worker on tid 1716646400
starting receive base loop
num_worker_connections 170
Creating worker on tid 264434176
starting receive base loop
Created 1024 connections total
Creating worker on tid 3107189248
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575392219.390644,       0.0,      345846,     311504,      34342,     207784,     103720, 101.735984, 173.500000, 230.600000, 1125.200000, 178.981712,   0.000000, 1974.750042, 482.870214
Outstanding requests per worker:
2678 2652 2771 2597 2811 28286 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172027.2,      860137,     774225,      85912,     586373,     187852, 320.197128, 441.700000, 1441.900000, 2468.900000, 454.329755,   5.864000, 3193.564892, 581.808477
Outstanding requests per worker:
7783 7870 7814 7555 7989 25079 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174501.0,      872506,     785334,      87172,     630436,     154898, 398.200526, 537.900000, 1071.700000, 2246.500000, 364.928250,   5.632000, 3041.630983, 631.696783
Outstanding requests per worker:
10183 9886 10158 10105 10617 23065 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174721.2,      873607,     786368,      87239,     650078,     136290, 444.066868, 648.500000, 905.400000, 2122.800000, 326.884931,  14.165000, 3079.201937, 658.053249
Outstanding requests per worker:
11644 11987 11910 12029 12495 22757 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174429.2,      872147,     785110,      87037,     660756,     124354, 495.180573, 788.700000, 1016.900000, 2017.200000, 330.485239,  10.325000, 3374.994993, 674.861309
Outstanding requests per worker:
13653 14107 13821 13565 14705 23241 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174517.4,      872588,     785334,      87254,     670114,     115220, 553.444846, 926.500000, 1138.500000, 1977.000000, 346.607475,  41.437000, 3778.373957, 688.054177
Outstanding requests per worker:
15217 15642 15671 15472 16793 24146 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173775.8,      868880,     781832,      87048,     674241,     107591, 615.339955, 1055.500000, 1273.400000, 2078.700000, 375.670359,  36.100999, 4036.770821, 697.540259
Outstanding requests per worker:
17141 18106 17732 17799 19417 26288 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  16:30   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:30   0:00 /usr/lib/linux
memcache      7  314  0.0 521344 192128 pts/0   Sl+  16:30   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:31   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21784461851      instructions:u            #    0.73  insn per cycle         
       29732519158      cycles:u                                                    
         124117651      armv8_pmuv3_0/br_mis_pred/:u                                   
        3398700642      armv8_pmuv3_0/br_pred/:u                                    

      41.351171214 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 8 threads, 150000 rps'
==> Bench: 16384 keys, 1024 conns, 8 threads, 150000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 150000 -k 16384 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 150000 -k 16384 -c 1024 -f 512 -w 8'
Starting client with -r 150000 -k 16384 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 150000 -k 16384 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 150000 -k 16384 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 150000 cpus 8
meanInterarrival 53
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1504834048
starting receive base loop
num_worker_connections 128
Creating worker on tid 393605632
starting receive base loop
num_worker_connections 128
Creating worker on tid 3579965952
starting receive base loop
num_worker_connections 128
Creating worker on tid 2465919488
starting receive base loop
num_worker_connections 128
Creating worker on tid 1357312512
starting receive base loop
num_worker_connections 128
Creating worker on tid 248705536
starting receive base loop
num_worker_connections 128
Creating worker on tid 3429626368
starting receive base loop
Created 1024 connections total
Creating worker on tid 2321019392
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575392264.390689,       0.0,      343950,     309730,      34220,     205960,     103770,  54.627792,  63.800000, 151.900000, 1009.300000, 169.435899,   0.000000, 1975.325942, 480.982824
Outstanding requests per worker:
418 428 406 431 402 395 367 5772 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  152226.2,      761132,     685410,      75722,     517652,     167758,  24.812443,  32.500000,  38.200000, 171.400000,  98.705470,   0.295000, 2160.926104, 580.151981
Outstanding requests per worker:
301 274 311 265 250 289 302 293 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150946.4,      754733,     679167,      75566,     541553,     137614,  15.562256,  30.300000,  35.200000,  42.800000,   9.853603,   0.300000,  54.616001, 626.411139
Outstanding requests per worker:
297 322 278 261 325 322 260 299 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150934.2,      754672,     679735,      74937,     558314,     121421,  16.007803,  31.000000,  36.600000,  43.900000,  10.126605,   0.252000,  60.538001, 652.154412
Outstanding requests per worker:
307 325 269 312 297 285 330 334 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150960.4,      754803,     679335,      75468,     567805,     111530,  16.116760,  31.000000,  36.700000,  44.500000,  10.201009,   0.282000,  69.309004, 668.384965
Outstanding requests per worker:
309 328 300 316 281 285 316 295 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150942.8,      754715,     679234,      75481,     575329,     103905,  16.457891,  31.800000,  37.600000,  46.000000,  10.442176,   0.297000,  58.302999, 680.694116
Outstanding requests per worker:
307 336 334 342 292 279 333 294 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150960.6,      754804,     679580,      75224,     582286,      97294,  16.667624,  32.100000,  38.000000,  46.300000,  10.573619,   0.308000,  64.397998, 690.985395
Outstanding requests per worker:
298 347 336 299 294 334 286 332 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:31   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:31   0:00 /usr/lib/linux
memcache      7  316  0.0 443072 152256 pts/0   Sl+  16:31   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:31   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       18508657432      instructions:u            #    0.70  insn per cycle         
       26409002057      cycles:u                                                    
         112045450      armv8_pmuv3_0/br_mis_pred/:u                                   
        2892282079      armv8_pmuv3_0/br_pred/:u                                    

      41.570664436 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 8 threads, 152000 rps'
==> Bench: 16384 keys, 1024 conns, 8 threads, 152000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 152000 -k 16384 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 152000 -k 16384 -c 1024 -f 512 -w 8'
Starting client with -r 152000 -k 16384 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 152000 -k 16384 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 152000 -k 16384 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 152000 cpus 8
meanInterarrival 52
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 2146562560
starting receive base loop
num_worker_connections 128
Creating worker on tid 1037890048
starting receive base loop
num_worker_connections 128
Creating worker on tid 4218810880
starting receive base loop
num_worker_connections 128
Creating worker on tid 3110203904
starting receive base loop
num_worker_connections 128
Creating worker on tid 1996157440
starting receive base loop
num_worker_connections 128
Creating worker on tid 887550464
starting receive base loop
num_worker_connections 128
Creating worker on tid 4073910784
starting receive base loop
Created 1024 connections total
Creating worker on tid 2959864320
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575392309.390734,       0.0,      346579,     311961,      34618,     208219,     103742,  45.341241,  85.300000, 127.500000, 434.800000,  84.951464,   0.000000, 1308.002949, 483.844625
Outstanding requests per worker:
483 449 471 422 408 420 400 891 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  154099.4,      770498,     693650,      76848,     524404,     169246,  18.067860,  34.400000,  41.000000,  51.800000,  15.811732,   0.290000, 731.564999, 580.216971
Outstanding requests per worker:
359 356 352 372 332 293 362 304 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153848.8,      769245,     692465,      76780,     552767,     139698,  18.015700,  34.100000,  41.500000,  51.400000,  11.491838,   0.299000,  88.441998, 626.818570
Outstanding requests per worker:
318 355 371 322 380 312 334 394 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153855.4,      769278,     692348,      76930,     569041,     123307,  18.390246,  34.800000,  42.500000,  51.500000,  11.694984,   0.256000,  80.357999, 652.606309
Outstanding requests per worker:
377 365 359 346 354 334 360 328 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153856.4,      769283,     692221,      77062,     578725,     113496,  18.646863,  35.200000,  43.000000,  53.300000,  11.893576,   0.330000,  77.812999, 668.548451
Outstanding requests per worker:
330 342 405 375 347 337 380 355 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153855.2,      769277,     692102,      77175,     586488,     105614,  18.851573,  35.400000,  43.700000,  53.200000,  11.998567,   0.302000,  73.183000, 680.619592
Outstanding requests per worker:
369 340 367 363 340 315 386 394 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153850.6,      769254,     692191,      77063,     593441,      98750,  19.036556,  35.800000,  44.200000,  53.800000,  12.119921,   0.311000,  96.620999, 692.454895
Outstanding requests per worker:
346 344 353 401 377 364 340 370 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:32   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:32   0:00 /usr/lib/linux
memcache      7  315  0.0 446144 156352 pts/0   Sl+  16:32   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:32   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       18863197764      instructions:u            #    0.71  insn per cycle         
       26600555425      cycles:u                                                    
         110177568      armv8_pmuv3_0/br_mis_pred/:u                                   
        2946750010      armv8_pmuv3_0/br_pred/:u                                    

      41.481298324 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 8 threads, 154000 rps'
==> Bench: 16384 keys, 1024 conns, 8 threads, 154000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 154000 -k 16384 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 154000 -k 16384 -c 1024 -f 512 -w 8'
Starting client with -r 154000 -k 16384 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 154000 -k 16384 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 154000 -k 16384 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 154000 cpus 8
meanInterarrival 51
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1963061760
starting receive base loop
num_worker_connections 128
Creating worker on tid 855306752
starting receive base loop
num_worker_connections 128
Creating worker on tid 4041667072
starting receive base loop
num_worker_connections 128
Creating worker on tid 2933060096
starting receive base loop
num_worker_connections 128
Creating worker on tid 1819013632
starting receive base loop
num_worker_connections 128
Creating worker on tid 710406656
starting receive base loop
num_worker_connections 128
Creating worker on tid 3891327488
starting receive base loop
Created 1024 connections total
Creating worker on tid 2782720512
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575392354.390779,       0.0,      366626,     330139,      36487,     220806,     109333,  42.550811,  87.900000, 129.100000, 276.300000,  66.437132,   0.000000, 1257.114053, 485.450098
Outstanding requests per worker:
463 503 460 451 496 465 452 483 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157051.2,      785257,     706893,      78364,     536159,     170734,  18.637439,  35.700000,  43.400000,  52.100000,  12.125873,   0.288000, 202.304006, 582.998871
Outstanding requests per worker:
358 333 398 361 360 354 360 357 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156862.0,      784311,     706099,      78212,     564907,     141192,  18.813173,  35.400000,  43.900000,  52.600000,  11.927374,   0.327000,  79.042003, 629.506522
Outstanding requests per worker:
365 364 377 370 388 354 378 348 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156866.8,      784335,     706121,      78214,     581216,     124905,  19.091443,  35.700000,  44.700000,  53.500000,  12.111544,   0.306000,  83.927996, 653.937892
Outstanding requests per worker:
396 350 344 378 381 394 395 371 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156867.4,      784338,     705919,      78419,     592108,     113811,  19.393923,  36.100000,  45.400000,  54.400000,  12.290612,   0.299000,  83.215997, 671.419374
Outstanding requests per worker:
400 357 357 417 382 402 373 396 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156868.6,      784344,     706645,      77699,     599778,     106867,  19.635280,  36.400000,  45.900000,  55.100000,  12.442472,   0.309000,  78.337997, 682.444505
Outstanding requests per worker:
384 378 375 370 393 402 424 372 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156874.2,      784372,     706075,      78297,     605747,     100328,  19.861982,  36.900000,  46.500000,  55.600000,  12.593847,   0.339000,  93.484998, 692.918259
Outstanding requests per worker:
364 408 384 409 414 358 399 364 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:32   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:32   0:00 /usr/lib/linux
memcache      7  316  0.0 449216 161536 pts/0   Sl+  16:32   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  16:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19284809775      instructions:u            #    0.72  insn per cycle         
       26731134042      cycles:u                                                    
         113709951      armv8_pmuv3_0/br_mis_pred/:u                                   
        3009999939      armv8_pmuv3_0/br_pred/:u                                    

      41.771080476 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 8 threads, 156000 rps'
==> Bench: 16384 keys, 1024 conns, 8 threads, 156000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 156000 -k 16384 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 156000 -k 16384 -c 1024 -f 512 -w 8'
Starting client with -r 156000 -k 16384 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 156000 -k 16384 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 156000 -k 16384 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 156000 cpus 8
meanInterarrival 51
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 2008609280
starting receive base loop
num_worker_connections 128
Creating worker on tid 895611392
starting receive base loop
num_worker_connections 128
Creating worker on tid 4076532224
starting receive base loop
num_worker_connections 128
Creating worker on tid 2967925248
starting receive base loop
num_worker_connections 128
Creating worker on tid 1859318272
starting receive base loop
num_worker_connections 128
Creating worker on tid 745271808
starting receive base loop
num_worker_connections 128
Creating worker on tid 3931632128
starting receive base loop
Created 1024 connections total
Creating worker on tid 2817585664
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575392399.390824,       0.0,      362990,     326458,      36532,     219357,     107101,  50.557631, 109.600000, 151.100000, 382.500000,  76.546071,   0.000000, 1323.186040, 487.651003
Outstanding requests per worker:
564 583 605 644 701 584 600 811 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157261.8,      786310,     707400,      78910,     536823,     170577,  20.929657,  40.900000,  49.000000,  73.600000,  15.994727,   0.263000, 348.046005, 584.115040
Outstanding requests per worker:
399 374 447 400 384 438 382 356 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156876.2,      784382,     706443,      77939,     565461,     140982,  19.724649,  36.400000,  45.800000,  56.100000,  12.555786,   0.347000,  95.623001, 629.137720
Outstanding requests per worker:
405 404 400 407 412 368 402 404 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156871.0,      784356,     706019,      78337,     580934,     125085,  20.015992,  36.600000,  46.800000,  56.800000,  12.689846,   0.324000,  99.041000, 654.181038
Outstanding requests per worker:
416 373 395 410 441 380 388 399 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156871.6,      784359,     706010,      78349,     591665,     114345,  20.197598,  37.000000,  47.000000,  57.400000,  12.823734,   0.292000, 101.322003, 670.388489
Outstanding requests per worker:
408 380 404 383 433 417 418 380 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156878.6,      784394,     705753,      78641,     598877,     106876,  20.377790,  37.300000,  47.800000,  57.500000,  12.936722,   0.336000,  95.637999, 682.049522
Outstanding requests per worker:
402 392 405 385 393 392 431 417 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156883.8,      784420,     706336,      78084,     606360,      99976,  20.522033,  37.600000,  48.100000,  57.900000,  13.015234,   0.328000, 100.904003, 692.626668
Outstanding requests per worker:
415 367 403 401 414 430 351 426 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:33   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:33   0:00 /usr/lib/linux
memcache      7  316  0.0 448192 159104 pts/0   Sl+  16:33   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19287949394      instructions:u            #    0.72  insn per cycle         
       26670246536      cycles:u                                                    
         108665694      armv8_pmuv3_0/br_mis_pred/:u                                   
        3016342125      armv8_pmuv3_0/br_pred/:u                                    

      41.620727996 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 8 threads, 158000 rps'
==> Bench: 16384 keys, 1024 conns, 8 threads, 158000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 158000 -k 16384 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 158000 -k 16384 -c 1024 -f 512 -w 8'
Starting client with -r 158000 -k 16384 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 158000 -k 16384 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 158000 -k 16384 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 158000 cpus 8
meanInterarrival 50
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1671229952
starting receive base loop
num_worker_connections 128
Creating worker on tid 560067072
starting receive base loop
num_worker_connections 128
Creating worker on tid 3740987904
starting receive base loop
num_worker_connections 128
Creating worker on tid 2632380928
starting receive base loop
num_worker_connections 128
Creating worker on tid 1523773952
starting receive base loop
num_worker_connections 128
Creating worker on tid 409727488
starting receive base loop
num_worker_connections 128
Creating worker on tid 3596087808
starting receive base loop
Created 1024 connections total
Creating worker on tid 2482041344
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575392444.390869,       0.0,      372559,     335253,      37306,     224319,     110934,  55.608915, 105.500000, 145.800000, 611.000000, 109.944053,   0.000000, 1738.399982, 485.628958
Outstanding requests per worker:
807 778 811 719 646 755 742 2944 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161008.2,      805042,     724972,      80070,     550509,     174463,  26.433146,  47.300000,  55.600000, 105.700000,  50.207811,   0.337000, 1534.441948, 584.745636
Outstanding requests per worker:
434 377 429 432 406 369 381 415 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159985.2,      799927,     720076,      79851,     577975,     142101,  20.811032,  37.400000,  48.800000,  59.300000,  13.184658,   0.368000, 112.256996, 631.712786
Outstanding requests per worker:
405 483 429 422 428 395 439 417 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160021.0,      800106,     720656,      79450,     593844,     126812,  21.115754,  37.800000,  49.700000,  59.700000,  13.339802,   0.326000, 109.273002, 655.557142
Outstanding requests per worker:
401 435 431 380 433 408 420 457 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159974.8,      799875,     719961,      79914,     603687,     116274,  21.412910,  38.400000,  50.300000,  60.700000,  13.559342,   0.311000, 110.780999, 671.558812
Outstanding requests per worker:
418 401 452 466 461 497 429 439 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160023.4,      800118,     719598,      80520,     612134,     107464,  22.137813,  40.400000,  51.000000,  64.300000,  14.164337,   0.269000, 116.541997, 684.495135
Outstanding requests per worker:
464 460 442 427 443 420 449 422 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160017.0,      800086,     720065,      80021,     619077,     100988,  22.093305,  39.900000,  51.100000,  63.900000,  14.058702,   0.342000, 112.473004, 694.133863
Outstanding requests per worker:
475 453 402 442 477 425 406 463 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:34   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:34   0:00 /usr/lib/linux
memcache      7  309  0.0 449216 164800 pts/0   Sl+  16:34   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19737858551      instructions:u            #    0.72  insn per cycle         
       27457365267      cycles:u                                                    
         114237922      armv8_pmuv3_0/br_mis_pred/:u                                   
        3074164051      armv8_pmuv3_0/br_pred/:u                                    

      41.601291742 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 8 threads, 160000 rps'
==> Bench: 16384 keys, 1024 conns, 8 threads, 160000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 160000 -k 16384 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 160000 -k 16384 -c 1024 -f 512 -w 8'
Starting client with -r 160000 -k 16384 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 160000 -k 16384 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 160000 -k 16384 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 160000 cpus 8
meanInterarrival 50
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1193865728
starting receive base loop
num_worker_connections 128
Creating worker on tid 82244096
starting receive base loop
num_worker_connections 128
Creating worker on tid 3268604416
starting receive base loop
num_worker_connections 128
Creating worker on tid 2154557952
starting receive base loop
num_worker_connections 128
Creating worker on tid 1045950976
starting receive base loop
num_worker_connections 128
Creating worker on tid 4226871808
starting receive base loop
num_worker_connections 128
Creating worker on tid 3118264832
starting receive base loop
Created 1024 connections total
Creating worker on tid 2004218368
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575392489.390914,       0.0,      363111,     326428,      36683,     217973,     108455,  55.577286, 103.400000, 146.900000, 647.400000, 113.214144,   0.000000, 1686.236024, 483.059753
Outstanding requests per worker:
626 704 687 710 631 652 639 2805 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160863.6,      804319,     723970,      80349,     549058,     174912,  24.061764,  43.200000,  51.500000,  81.000000,  42.947047,   0.330000, 1452.124000, 583.078793
Outstanding requests per worker:
394 456 377 420 414 375 401 407 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159986.6,      799934,     720063,      79871,     576507,     143556,  20.510621,  37.300000,  47.900000,  58.200000,  12.996614,   0.348000,  99.214002, 629.664520
Outstanding requests per worker:
421 439 423 390 429 415 398 443 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160019.6,      800099,     720111,      79988,     592936,     127175,  20.900467,  38.100000,  48.700000,  59.400000,  13.279051,   0.334000, 104.856998, 654.950849
Outstanding requests per worker:
396 415 422 375 413 430 432 449 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159999.4,      799998,     719442,      80556,     604246,     115196,  21.125112,  38.200000,  49.500000,  60.000000,  13.390935,   0.339000, 105.060004, 672.197574
Outstanding requests per worker:
436 435 409 422 415 452 449 394 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160003.4,      800018,     720209,      79809,     612654,     107555,  21.482217,  38.900000,  50.200000,  61.400000,  13.663151,   0.328000, 116.922997, 684.409378
Outstanding requests per worker:
427 416 403 428 469 457 443 445 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160015.6,      800079,     720221,      79858,     619138,     101083,  21.538349,  38.900000,  50.100000,  62.100000,  13.702498,   0.325000, 105.498999, 693.985971
Outstanding requests per worker:
434 452 425 434 429 420 459 409 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  16:35   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   16:35   0:00 /usr/lib/linux
memcache      7  316  0.0 449216 161600 pts/0   Sl+  16:35   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:35   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19717700636      instructions:u            #    0.74  insn per cycle         
       26726257582      cycles:u                                                    
         112262844      armv8_pmuv3_0/br_mis_pred/:u                                   
        3071237614      armv8_pmuv3_0/br_pred/:u                                    

      41.551316786 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 8 threads, 162000 rps'
==> Bench: 16384 keys, 1024 conns, 8 threads, 162000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 162000 -k 16384 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 162000 -k 16384 -c 1024 -f 512 -w 8'
Starting client with -r 162000 -k 16384 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 162000 -k 16384 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 162000 -k 16384 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 162000 cpus 8
meanInterarrival 49
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1741615616
starting receive base loop
num_worker_connections 128
Creating worker on tid 627175936
starting receive base loop
num_worker_connections 128
Creating worker on tid 3808096768
starting receive base loop
num_worker_connections 128
Creating worker on tid 2699489792
starting receive base loop
num_worker_connections 128
Creating worker on tid 1590882816
starting receive base loop
num_worker_connections 128
Creating worker on tid 476836352
starting receive base loop
num_worker_connections 128
Creating worker on tid 3663196672
starting receive base loop
Created 1024 connections total
Creating worker on tid 2549150208
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575392534.390959,       0.0,      365446,     329006,      36440,     220066,     108940,  71.677158, 137.000000, 179.000000, 912.200000, 148.860448,   0.000000, 1954.445004, 484.929986
Outstanding requests per worker:
1223 1286 1363 1263 1312 1293 1350 7454 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165088.6,      825444,     743367,      82077,     563885,     179482,  64.713597, 139.800000, 172.700000, 638.200000, 114.709644,   0.411000, 1919.711947, 583.564412
Outstanding requests per worker:
864 928 881 930 931 955 897 1101 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163040.6,      815204,     733858,      81346,     588507,     145351,  48.003926, 139.700000, 169.800000, 221.200000,  54.082588,   0.370000, 642.750025, 630.855711
Outstanding requests per worker:
1096 1163 937 991 1143 1082 1102 1164 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162996.0,      814981,     733267,      81714,     604775,     128492,  56.023804, 167.100000, 198.700000, 269.800000,  65.689180,   0.322000, 424.755991, 656.548886
Outstanding requests per worker:
1356 1288 1236 1257 1298 1287 1209 1190 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163162.2,      815812,     733723,      82089,     616493,     117230,  64.527907, 200.400000, 245.400000, 304.700000,  79.824906,   0.276000, 544.277012, 672.813225
Outstanding requests per worker:
1356 1307 1259 1215 1293 1442 1460 1420 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163134.8,      815675,     734198,      81477,     625063,     109135,  68.629631, 211.000000, 259.000000, 324.100000,  83.916453,   0.420000, 547.695994, 685.390363
Outstanding requests per worker:
1377 1443 1447 1336 1383 1457 1518 1495 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161134.6,      805674,     724956,      80718,     623723,     101233,  72.594729, 227.100000, 273.200000, 350.100000,  90.433391,   0.513000, 628.977001, 695.325865
Outstanding requests per worker:
2934 2675 2657 2706 2854 2664 2864 2823 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:35   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   16:35   0:00 /usr/lib/linux
memcache      7  316  0.0 516224 174016 pts/0   Sl+  16:35   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:36   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       20251627624      instructions:u            #    0.73  insn per cycle         
       27799650985      cycles:u                                                    
         115645269      armv8_pmuv3_0/br_mis_pred/:u                                   
        3154742230      armv8_pmuv3_0/br_pred/:u                                    

      41.370841052 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 8 threads, 164000 rps'
==> Bench: 16384 keys, 1024 conns, 8 threads, 164000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 164000 -k 16384 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 164000 -k 16384 -c 1024 -f 512 -w 8'
Starting client with -r 164000 -k 16384 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 164000 -k 16384 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 164000 -k 16384 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 164000 cpus 8
meanInterarrival 48
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1987703296
starting receive base loop
num_worker_connections 128
Creating worker on tid 879489536
starting receive base loop
num_worker_connections 128
Creating worker on tid 4065849856
starting receive base loop
num_worker_connections 128
Creating worker on tid 2951803392
starting receive base loop
num_worker_connections 128
Creating worker on tid 1843196416
starting receive base loop
num_worker_connections 128
Creating worker on tid 729149952
starting receive base loop
num_worker_connections 128
Creating worker on tid 3915510272
starting receive base loop
Created 1024 connections total
Creating worker on tid 2801463808
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575392579.391004,       0.0,      368714,     331948,      36766,     221939,     110009,  79.387418, 162.000000, 214.600000, 936.400000, 154.372476,   0.000000, 1994.614005, 485.486664
Outstanding requests per worker:
1734 1737 1554 1759 1715 1755 1765 10928 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166950.4,      834753,     751422,      83331,     571495,     179927, 137.454832, 223.300000, 285.400000, 1132.000000, 180.154811,   0.902000, 2223.237038, 585.549799
Outstanding requests per worker:
2496 2818 2502 2594 2560 2504 2608 3490 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166147.0,      830736,     748087,      82649,     600604,     147483, 135.052539, 248.900000, 293.300000, 391.000000,  83.576082,   1.319000, 817.762017, 631.948550
Outstanding requests per worker:
3157 3000 2889 3142 3069 3005 2959 2998 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165408.6,      827044,     744437,      82607,     614478,     129959, 163.275190, 290.600000, 341.300000, 430.000000,  91.375146,   0.904000, 756.694019, 656.903945
Outstanding requests per worker:
3957 3807 3883 3727 3709 3858 3763 3858 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165722.4,      828613,     745828,      82785,     626972,     118856, 196.874639, 328.100000, 391.300000, 496.600000,  97.736784,   1.078000, 728.969991, 673.532387
Outstanding requests per worker:
4421 4225 4549 4534 4505 4488 4310 4295 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166158.8,      830795,     747811,      82984,     636470,     111341, 220.172185, 360.600000, 418.400000, 536.600000, 103.253992,   0.800000, 829.789996, 685.540617
Outstanding requests per worker:
4626 4794 4770 4786 4639 4993 4808 4492 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165563.4,      827818,     744990,      82828,     640603,     104387, 238.325366, 391.800000, 452.800000, 571.400000, 110.272503,   1.056000, 980.488002, 694.568691
Outstanding requests per worker:
5552 5372 5540 5364 5656 5546 5364 5077 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:36   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:36   0:00 /usr/lib/linux
memcache      7  309  0.0 516224 179456 pts/0   Sl+  16:36   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       20932559718      instructions:u            #    0.72  insn per cycle         
       29007102589      cycles:u                                                    
         125854790      armv8_pmuv3_0/br_mis_pred/:u                                   
        3263017449      armv8_pmuv3_0/br_pred/:u                                    

      41.861128438 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 8 threads, 166000 rps'
==> Bench: 16384 keys, 1024 conns, 8 threads, 166000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 166000 -k 16384 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 166000 -k 16384 -c 1024 -f 512 -w 8'
Starting client with -r 166000 -k 16384 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 166000 -k 16384 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 166000 -k 16384 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 166000 cpus 8
meanInterarrival 48
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1566175744
starting receive base loop
num_worker_connections 128
Creating worker on tid 452653568
starting receive base loop
num_worker_connections 128
Creating worker on tid 3639013888
starting receive base loop
num_worker_connections 128
Creating worker on tid 2530406912
starting receive base loop
num_worker_connections 128
Creating worker on tid 1416360448
starting receive base loop
num_worker_connections 128
Creating worker on tid 307753472
starting receive base loop
num_worker_connections 128
Creating worker on tid 3488674304
starting receive base loop
Created 1024 connections total
Creating worker on tid 2380067328
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575392625.391050,       0.0,      364140,     327740,      36400,     219101,     108639,  74.819995, 146.300000, 195.900000, 956.200000, 154.590841,   0.000000, 1963.049054, 483.882266
Outstanding requests per worker:
1337 1439 1536 1444 1392 1512 1443 13522 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167381.0,      836906,     753408,      83498,     571791,     181617, 139.204149, 203.800000, 299.100000, 1629.200000, 254.388172,   1.080000, 2787.931919, 583.450910
Outstanding requests per worker:
2097 2248 1941 2326 2045 2170 2014 5256 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167006.6,      835034,     751831,      83203,     603348,     148483, 114.108469, 263.000000, 316.700000, 699.100000, 160.087392,   0.754000, 2230.675936, 631.387386
Outstanding requests per worker:
2134 2064 2220 2167 2182 2044 2121 3518 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166322.6,      831614,     748754,      82860,     618221,     130533, 115.014307, 328.700000, 400.100000, 557.700000, 151.921764,   0.814000, 2006.946087, 657.420720
Outstanding requests per worker:
2606 2555 2608 2486 2319 2368 2248 3025 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166314.8,      831575,     748140,      83435,     628785,     119355, 126.224150, 377.800000, 440.700000, 562.400000, 152.929120,   0.840000, 1626.086950, 673.524844
Outstanding requests per worker:
2802 2814 2662 2827 2723 2517 2691 2995 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166283.8,      831420,     748443,      82977,     637758,     110685, 138.108964, 410.300000, 487.600000, 617.400000, 161.488391,   1.000000, 1324.506044, 686.324416
Outstanding requests per worker:
3024 3013 2805 3167 3057 2924 3048 2956 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163752.4,      818763,     737043,      81720,     634218,     102825, 165.459378, 453.700000, 531.300000, 667.400000, 173.035339,   1.089000, 985.212982, 695.549534
Outstanding requests per worker:
5019 4693 4688 4944 4847 4593 4960 4872 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:37   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   16:37   0:00 /usr/lib/linux
memcache      7  316  0.0 517248 180224 pts/0   Sl+  16:37   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  16:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       20675672557      instructions:u            #    0.73  insn per cycle         
       28253890079      cycles:u                                                    
         122492085      armv8_pmuv3_0/br_mis_pred/:u                                   
        3219694403      armv8_pmuv3_0/br_pred/:u                                    

      41.511481973 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 8 threads, 168000 rps'
==> Bench: 16384 keys, 1024 conns, 8 threads, 168000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 168000 -k 16384 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 168000 -k 16384 -c 1024 -f 512 -w 8'
Starting client with -r 168000 -k 16384 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 168000 -k 16384 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 168000 -k 16384 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 168000 cpus 8
meanInterarrival 47
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1716449792
starting receive base loop
num_worker_connections 128
Creating worker on tid 602993152
starting receive base loop
num_worker_connections 128
Creating worker on tid 3789353472
starting receive base loop
num_worker_connections 128
Creating worker on tid 2675307008
starting receive base loop
num_worker_connections 128
Creating worker on tid 1566700032
starting receive base loop
num_worker_connections 128
Creating worker on tid 452653568
starting receive base loop
num_worker_connections 128
Creating worker on tid 3639013888
starting receive base loop
Created 1024 connections total
Creating worker on tid 2530406912
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575392671.391096,       0.0,      414420,     373215,      41205,     252918,     120297,  68.958505, 139.100000, 181.400000, 953.400000, 152.963251,   0.000000, 1949.993968, 494.135884
Outstanding requests per worker:
1730 1835 1755 1769 1742 1735 1866 14032 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167666.2,      838332,     754865,      83467,     576281,     178584, 202.918851, 290.000000, 413.900000, 1552.500000, 243.740313,   1.515000, 2579.186916, 588.555850
Outstanding requests per worker:
4518 4368 4261 4307 4510 4145 4338 8836 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168518.8,      842595,     758631,      83964,     610172,     148459, 258.639471, 392.000000, 462.800000, 1077.700000, 159.101494,   0.911000, 1945.631981, 633.668963
Outstanding requests per worker:
5698 5767 5553 5645 5754 5723 5822 7906 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168868.0,      844341,     759773,      84568,     627802,     131971, 302.629815, 482.800000, 560.800000, 857.800000, 148.990179,   1.860000, 1515.154958, 657.817560
Outstanding requests per worker:
6795 6750 6664 6579 6945 6539 6562 7820 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169120.6,      845604,     761291,      84313,     640705,     120586, 336.633104, 540.600000, 644.000000, 896.400000, 156.895980,   1.420000, 1348.785043, 674.853274
Outstanding requests per worker:
7503 7308 7396 7698 7550 7426 7516 7788 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169277.0,      846386,     761349,      85037,     649325,     112024, 367.708640, 609.000000, 740.000000, 1047.900000, 183.640154,   2.862000, 1515.071988, 686.432426
Outstanding requests per worker:
8102 7782 8133 8147 8455 8054 7987 8291 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168194.4,      840973,     756583,      84390,     651661,     104922, 405.075566, 694.300000, 843.900000, 1172.800000, 210.566421,   4.397000, 1659.734964, 696.582289
Outstanding requests per worker:
9397 9223 9444 9778 9549 9109 9198 9451 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:38   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   16:38   0:00 /usr/lib/linux
memcache      7  313  0.0 519296 189504 pts/0   Sl+  16:38   2:11 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21440022716      instructions:u            #    0.72  insn per cycle         
       29771336735      cycles:u                                                    
         131040581      armv8_pmuv3_0/br_mis_pred/:u                                   
        3348790510      armv8_pmuv3_0/br_pred/:u                                    

      42.460488849 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 8 threads, 170000 rps'
==> Bench: 16384 keys, 1024 conns, 8 threads, 170000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 170000 -k 16384 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 170000 -k 16384 -c 1024 -f 512 -w 8'
Starting client with -r 170000 -k 16384 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 170000 -k 16384 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 170000 -k 16384 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 170000 cpus 8
meanInterarrival 47
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1703932416
starting receive base loop
num_worker_connections 128
Creating worker on tid 594932224
starting receive base loop
num_worker_connections 128
Creating worker on tid 3781292544
starting receive base loop
num_worker_connections 128
Creating worker on tid 2667246080
starting receive base loop
num_worker_connections 128
Creating worker on tid 1558639104
starting receive base loop
num_worker_connections 128
Creating worker on tid 450032128
starting receive base loop
num_worker_connections 128
Creating worker on tid 3630952960
starting receive base loop
Created 1024 connections total
Creating worker on tid 2522345984
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575392716.391141,       0.0,      366864,     330339,      36525,     221306,     109033,  79.919899, 152.500000, 202.900000, 1039.300000, 168.112920,   0.000000, 1983.772993, 485.461396
Outstanding requests per worker:
1743 1684 1710 1548 1801 1632 1615 16794 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168625.0,      843126,     759212,      83914,     575981,     183231, 202.691051, 294.100000, 581.700000, 1711.900000, 276.284009,   1.215000, 2509.854078, 583.273212
Outstanding requests per worker:
3934 4005 3965 3830 4087 4037 4096 8626 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169185.0,      845926,     761241,      84685,     611014,     150227, 230.463559, 369.700000, 439.000000, 984.900000, 163.656104,   1.766000, 2296.065092, 631.944996
Outstanding requests per worker:
5135 4920 4986 4733 5104 4980 4915 7010 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169576.2,      847882,     763192,      84690,     630871,     132321, 254.469938, 419.100000, 500.600000, 708.600000, 146.677331,   1.526000, 2090.217113, 657.460630
Outstanding requests per worker:
5718 5529 5405 5474 5481 5638 5520 6284 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169680.8,      848405,     763502,      84903,     642047,     121455, 272.539593, 462.300000, 552.000000, 751.900000, 147.341780,   1.339000, 1650.581956, 674.022365
Outstanding requests per worker:
5988 5979 5873 5680 5745 5901 5865 6778 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169381.2,      846907,     762138,      84769,     649320,     112818, 293.100003, 518.600000, 623.200000, 822.800000, 163.209213,   1.402000, 1665.199041, 685.713713
Outstanding requests per worker:
6406 6540 6607 6432 6269 6484 6428 6879 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168856.8,      844285,     759696,      84589,     654425,     105271, 320.582186, 574.400000, 683.000000, 919.800000, 179.956182,   1.349000, 1817.852974, 696.694388
Outstanding requests per worker:
7165 7552 7192 7213 7259 7425 7426 7657 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:38   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:38   0:00 /usr/lib/linux
memcache      7  316  0.0 520320 186752 pts/0   Sl+  16:38   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:39   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21326917986      instructions:u            #    0.72  insn per cycle         
       29555496127      cycles:u                                                    
         127889964      armv8_pmuv3_0/br_mis_pred/:u                                   
        3328621691      armv8_pmuv3_0/br_pred/:u                                    

      41.631003217 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 8 threads, 172000 rps'
==> Bench: 16384 keys, 1024 conns, 8 threads, 172000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 172000 -k 16384 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 172000 -k 16384 -c 1024 -f 512 -w 8'
Starting client with -r 172000 -k 16384 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 172000 -k 16384 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 172000 -k 16384 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 172000 cpus 8
meanInterarrival 46
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 2073489920
starting receive base loop
num_worker_connections 128
Creating worker on tid 962720256
starting receive base loop
num_worker_connections 128
Creating worker on tid 4143641088
starting receive base loop
num_worker_connections 128
Creating worker on tid 3035034112
starting receive base loop
num_worker_connections 128
Creating worker on tid 1926427136
starting receive base loop
num_worker_connections 128
Creating worker on tid 812380672
starting receive base loop
num_worker_connections 128
Creating worker on tid 3998740992
starting receive base loop
Created 1024 connections total
Creating worker on tid 2884694528
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575392761.391186,       0.0,      367466,     330576,      36890,     220829,     109747, 102.165260, 209.400000, 259.000000, 895.600000, 155.014783,   0.000000, 1978.296995, 483.748376
Outstanding requests per worker:
3128 2768 2955 2876 2760 2848 2992 15991 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169096.4,      845483,     761250,      84233,     578186,     183064, 288.154495, 402.100000, 567.400000, 2112.400000, 320.338177,   1.465000, 3054.832935, 583.829353
Outstanding requests per worker:
6516 6555 6669 6577 6348 6422 6390 14979 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170823.0,      854116,     768830,      85286,     617063,     151767, 394.677823, 556.800000, 677.600000, 2003.900000, 276.508919,   2.609000, 2723.901987, 631.744869
Outstanding requests per worker:
8836 8535 8566 8794 8833 8622 8459 15340 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170736.2,      853682,     768420,      85262,     634578,     133842, 480.510305, 718.000000, 891.200000, 1857.600000, 279.483616,  23.668000, 3037.373066, 657.736933
Outstanding requests per worker:
10639 10654 10780 10696 10660 10698 10770 17063 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170617.4,      853088,     767576,      85512,     645723,     121853, 572.389952, 906.600000, 1115.100000, 1876.400000, 310.798011,  33.868000, 3143.191099, 674.469607
Outstanding requests per worker:
12816 12861 12802 13174 12682 13013 12572 18567 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170288.8,      851445,     766400,      85045,     653549,     112851, 669.892008, 1102.300000, 1327.800000, 2050.000000, 351.957127,  28.989000, 3451.085091, 687.275933
Outstanding requests per worker:
15267 15102 14903 15934 14745 15264 15066 20387 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169181.8,      845910,     761127,      84783,     655562,     105565, 785.341897, 1290.100000, 1568.500000, 2263.600000, 399.571088,  55.916999, 3471.385002, 696.384588
Outstanding requests per worker:
18002 18186 17940 18897 17787 18223 17990 23349 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:39   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   16:39   0:00 /usr/lib/linux
memcache      7  308  0.0 520320 191296 pts/0   Sl+  16:39   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:40   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21412787916      instructions:u            #    0.74  insn per cycle         
       28859317364      cycles:u                                                    
         124000728      armv8_pmuv3_0/br_mis_pred/:u                                   
        3332821857      armv8_pmuv3_0/br_pred/:u                                    

      42.291374345 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 8 threads, 174000 rps'
==> Bench: 16384 keys, 1024 conns, 8 threads, 174000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 174000 -k 16384 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 174000 -k 16384 -c 1024 -f 512 -w 8'
Starting client with -r 174000 -k 16384 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 174000 -k 16384 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 174000 -k 16384 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 174000 cpus 8
meanInterarrival 45
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1286664704
starting receive base loop
num_worker_connections 128
Creating worker on tid 173535744
starting receive base loop
num_worker_connections 128
Creating worker on tid 3354456576
starting receive base loop
num_worker_connections 128
Creating worker on tid 2245849600
starting receive base loop
num_worker_connections 128
Creating worker on tid 1131803136
starting receive base loop
num_worker_connections 128
Creating worker on tid 23196160
starting receive base loop
num_worker_connections 128
Creating worker on tid 3204116992
starting receive base loop
Created 1024 connections total
Creating worker on tid 2095510016
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575392806.391231,       0.0,      368243,     331357,      36886,     222162,     109195,  95.057568, 211.300000, 274.700000, 963.400000, 165.382794,   0.000000, 1964.962006, 486.345416
Outstanding requests per worker:
2438 2232 2294 2348 2341 2422 2889 26805 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169251.0,      846256,     761374,      84882,     578626,     182748, 378.075805, 511.300000, 1509.600000, 2823.100000, 496.163870,   1.365000, 3627.554893, 585.077780
Outstanding requests per worker:
7951 8412 8137 8027 8062 8100 8163 29615 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171732.4,      858663,     773345,      85318,     621768,     151577, 572.619937, 766.300000, 1502.100000, 3000.600000, 475.101438,  24.555000, 3940.355062, 633.046543
Outstanding requests per worker:
12113 12143 12261 12135 12196 12086 12171 31687 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171770.8,      858855,     773434,      85421,     638603,     134831, 736.559888, 1047.500000, 1585.400000, 3068.200000, 485.280886,  79.167001, 4182.829857, 657.304689
Outstanding requests per worker:
16079 16208 15983 15952 16054 15872 15686 35109 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170941.2,      854707,     769285,      85422,     647594,     121691, 915.977040, 1350.500000, 1776.200000, 3353.500000, 518.966225,  74.046999, 4932.219982, 674.827773
Outstanding requests per worker:
20655 20103 20251 20166 20640 20200 20143 39026 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171109.6,      855549,     770430,      85119,     657147,     113283, 1108.524332, 1653.200000, 2063.800000, 3708.200000, 568.309124, 196.547002, 4958.625793, 687.341830
Outstanding requests per worker:
24700 24336 24447 24359 24730 24563 24126 43350 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170127.8,      850640,     765528,      85112,     659304,     106224, 1305.016588, 1967.300000, 2396.200000, 3919.800000, 617.900091, 202.950999, 5303.096771, 696.273580
Outstanding requests per worker:
29432 28947 29385 29212 29306 29065 29141 48471 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:40   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:40   0:00 /usr/lib/linux
memcache      7  316  0.0 520320 190208 pts/0   Sl+  16:40   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  16:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21426744628      instructions:u            #    0.73  insn per cycle         
       29247752130      cycles:u                                                    
         122353240      armv8_pmuv3_0/br_mis_pred/:u                                   
        3336925268      armv8_pmuv3_0/br_pred/:u                                    

      41.422191383 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 16384 keys, 1024 conns, 8 threads, 176000 rps'
==> Bench: 16384 keys, 1024 conns, 8 threads, 176000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 176000 -k 16384 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 176000 -k 16384 -c 1024 -f 512 -w 8'
Starting client with -r 176000 -k 16384 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 176000 -k 16384 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 176000 -k 16384 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 16384
rps 176000 cpus 8
meanInterarrival 45
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1098904064
starting receive base loop
num_worker_connections 128
Creating worker on tid 4285919744
starting receive base loop
num_worker_connections 128
Creating worker on tid 3177312768
starting receive base loop
num_worker_connections 128
Creating worker on tid 2063266304
starting receive base loop
num_worker_connections 128
Creating worker on tid 954659328
starting receive base loop
num_worker_connections 128
Creating worker on tid 4141019648
starting receive base loop
num_worker_connections 128
Creating worker on tid 3026973184
starting receive base loop
Created 1024 connections total
Creating worker on tid 1918366208
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575392852.391277,       0.0,      373613,     336206,      37407,     225714,     110492,  89.263358, 168.500000, 233.700000, 1067.900000, 175.043769,   0.000000, 1987.339020, 486.842793
Outstanding requests per worker:
2264 2099 2281 2127 2033 2258 2349 28594 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168935.4,      844678,     760070,      84608,     577982,     182088, 388.938527, 613.100000, 1547.200000, 2673.300000, 486.805647,   1.396000, 3370.371103, 585.543643
Outstanding requests per worker:
8455 8668 8278 8339 8574 8475 8189 29333 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171223.4,      856118,     770559,      85559,     618913,     151646, 592.200825, 898.100000, 1533.700000, 2718.000000, 454.827935,  12.885000, 3631.546974, 632.280487
Outstanding requests per worker:
12580 13002 12432 12734 12805 12976 12693 31980 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171426.4,      857133,     771603,      85530,     636713,     134890, 767.418220, 1199.200000, 1703.100000, 2843.300000, 476.593402,  54.283999, 3868.980885, 656.753649
Outstanding requests per worker:
16306 17313 16511 16838 16576 16975 16746 35764 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171072.4,      855363,     769961,      85402,     647937,     122024, 951.072397, 1524.300000, 1944.100000, 2962.000000, 514.972461, 133.534998, 4111.681938, 675.041427
Outstanding requests per worker:
20615 21318 21049 20816 20977 21031 21146 39696 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169994.6,      849974,     764453,      85521,     651952,     112501, 1153.032716, 1822.300000, 2211.800000, 3125.000000, 556.029300, 195.205003, 4603.540897, 686.845610
Outstanding requests per worker:
25598 26477 25868 25533 25738 25719 26249 44489 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168693.0,      843466,     759028,      84438,     654434,     104594, 1379.042347, 2136.900000, 2497.500000, 3394.100000, 601.460372, 206.268996, 4813.086987, 696.820044
Outstanding requests per worker:
31481 31929 31810 31251 31532 31616 31858 49749 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:41   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:41   0:00 /usr/lib/linux
memcache      7  309  0.0 521344 196160 pts/0   Sl+  16:41   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21340758170      instructions:u            #    0.73  insn per cycle         
       29259455336      cycles:u                                                    
         123858500      armv8_pmuv3_0/br_mis_pred/:u                                   
        3323031432      armv8_pmuv3_0/br_pred/:u                                    

      41.970076629 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 6 threads, 150000 rps'
==> Bench: 65536 keys, 512 conns, 6 threads, 150000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 150000 -k 65536 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 150000 -k 65536 -c 512 -f 512 -w 6'
Starting client with -r 150000 -k 65536 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 150000 -k 65536 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 150000 -k 65536 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 150000 cpus 6
meanInterarrival 40
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2081812992
starting receive base loop
num_worker_connections 85
Creating worker on tid 1309340160
starting receive base loop
num_worker_connections 85
Creating worker on tid 546959872
starting receive base loop
num_worker_connections 85
Creating worker on tid 4076925440
starting receive base loop
num_worker_connections 85
Creating worker on tid 3314545152
starting receive base loop
Created 512 connections total
Creating worker on tid 2552164864
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575392897.391322,       0.0,      346176,     311291,      34885,     208235,     103056,   8.785560,  18.300000,  23.600000,  36.100000,   7.769294,   0.000000,  92.141002, 484.531583
Outstanding requests per worker:
187 200 186 201 205 197 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  149998.5,      749993,     675121,      74872,     510383,     164738,   8.077219,  14.900000,  17.300000,  20.700000,   4.586566,   0.236000,  29.287999, 580.334423
Outstanding requests per worker:
191 218 223 210 206 185 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150005.6,      750029,     675068,      74961,     537639,     137429,   8.377841,  15.500000,  18.000000,  21.700000,   4.787118,   0.264000,  30.053999, 625.921556
Outstanding requests per worker:
216 199 205 196 229 224 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150010.6,      750054,     675234,      74820,     554415,     120819,   8.540666,  15.700000,  18.400000,  22.400000,   4.903081,   0.232000,  32.102998, 652.307559
Outstanding requests per worker:
216 199 225 213 220 223 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150014.2,      750072,     675261,      74811,     564330,     110931,   8.650617,  16.000000,  18.700000,  22.400000,   4.939582,   0.300000,  30.617001, 668.354734
Outstanding requests per worker:
206 231 203 208 207 212 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150003.6,      750019,     675116,      74903,     572228,     102888,   8.779679,  16.200000,  19.000000,  23.100000,   5.037777,   0.324000,  30.087000, 681.003216
Outstanding requests per worker:
209 233 225 209 208 216 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150014.0,      750071,     675121,      74950,     577539,      97582,   8.853746,  16.300000,  19.300000,  23.300000,   5.091431,   0.290000,  36.384001, 690.294264
Outstanding requests per worker:
218 226 209 203 222 215 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:41   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   16:41   0:00 /usr/lib/linux
memcache      7  316  0.0 443072 140224 pts/0   Sl+  16:41   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       18423513437      instructions:u            #    0.70  insn per cycle         
       26146523197      cycles:u                                                    
         107596528      armv8_pmuv3_0/br_mis_pred/:u                                   
        2879221406      armv8_pmuv3_0/br_pred/:u                                    

      41.730295550 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 6 threads, 152000 rps'
==> Bench: 65536 keys, 512 conns, 6 threads, 152000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 152000 -k 65536 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 152000 -k 65536 -c 512 -f 512 -w 6'
Starting client with -r 152000 -k 65536 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 152000 -k 65536 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 152000 -k 65536 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 152000 cpus 6
meanInterarrival 39
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2200826368
starting receive base loop
num_worker_connections 85
Creating worker on tid 1427436032
starting receive base loop
num_worker_connections 85
Creating worker on tid 665055744
starting receive base loop
num_worker_connections 85
Creating worker on tid 4195021312
starting receive base loop
num_worker_connections 85
Creating worker on tid 3432641024
starting receive base loop
Created 512 connections total
Creating worker on tid 2667639296
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575392942.391367,       0.0,      352789,     317513,      35276,     211426,     106087,  11.672478,  24.600000,  32.800000,  58.900000,  11.492485,   0.000000, 170.120001, 480.757667
Outstanding requests per worker:
248 243 246 234 231 256 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153851.4,      769258,     692877,      76381,     524037,     168840,   9.602070,  17.400000,  20.900000,  25.800000,   5.525075,   0.366000,  35.126001, 580.761948
Outstanding requests per worker:
237 254 263 231 235 277 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153856.0,      769281,     691969,      77312,     552225,     139744,   9.897240,  17.900000,  21.600000,  26.600000,   5.692855,   0.302000,  35.186000, 626.621438
Outstanding requests per worker:
276 222 270 267 240 244 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153864.6,      769324,     692505,      76819,     568678,     123827,  10.058186,  18.300000,  22.000000,  26.800000,   5.785193,   0.328000,  46.836000, 651.452719
Outstanding requests per worker:
235 245 293 246 254 247 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153844.8,      769225,     691653,      77572,     578832,     112821,  10.213816,  18.500000,  22.300000,  27.300000,   5.866458,   0.331000,  41.126002, 669.904655
Outstanding requests per worker:
295 272 249 259 247 255 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153855.6,      769279,     692256,      77023,     586830,     105426,  10.349444,  18.600000,  22.600000,  28.000000,   5.965068,   0.237000,  48.039000, 681.698396
Outstanding requests per worker:
265 286 253 247 263 270 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153852.0,      769261,     692466,      76795,     593587,      98879,  10.465968,  18.800000,  23.000000,  28.200000,   6.021699,   0.332000,  52.280001, 692.281558
Outstanding requests per worker:
274 261 282 277 264 276 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  16:42   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:42   0:00 /usr/lib/linux
memcache      7  308  0.0 447168 147968 pts/0   Sl+  16:42   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:43   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       18842163713      instructions:u            #    0.71  insn per cycle         
       26385378788      cycles:u                                                    
         108360236      armv8_pmuv3_0/br_mis_pred/:u                                   
        2943604592      armv8_pmuv3_0/br_pred/:u                                    

      41.720629010 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 6 threads, 154000 rps'
==> Bench: 65536 keys, 512 conns, 6 threads, 154000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 154000 -k 65536 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 154000 -k 65536 -c 512 -f 512 -w 6'
Starting client with -r 154000 -k 65536 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 154000 -k 65536 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 154000 -k 65536 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 154000 cpus 6
meanInterarrival 38
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1952838144
starting receive base loop
num_worker_connections 85
Creating worker on tid 1183183360
starting receive base loop
num_worker_connections 85
Creating worker on tid 420803072
starting receive base loop
num_worker_connections 85
Creating worker on tid 3953390080
starting receive base loop
num_worker_connections 85
Creating worker on tid 3188388352
starting receive base loop
Created 512 connections total
Creating worker on tid 2426008064
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575392988.391413,       0.0,      366118,     329391,      36727,     220216,     109175,  14.068328,  29.500000,  40.400000,  76.100000,  15.073098,   0.000000, 223.407999, 484.757489
Outstanding requests per worker:
269 290 278 294 280 295 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157901.4,      789508,     710906,      78602,     538461,     172445,  10.973554,  19.400000,  23.900000,  29.300000,   6.212705,   0.324000,  52.933998, 582.252281
Outstanding requests per worker:
286 329 283 296 296 275 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157880.0,      789401,     710499,      78902,     567524,     142975,  11.400955,  19.800000,  24.900000,  31.100000,   6.462090,   0.323000,  53.288002, 627.641286
Outstanding requests per worker:
320 302 308 339 309 316 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157917.4,      789588,     710495,      79093,     584562,     125933,  11.706747,  20.400000,  25.400000,  31.900000,   6.666107,   0.332000,  62.298998, 653.933090
Outstanding requests per worker:
290 316 321 288 315 303 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157899.2,      789497,     710636,      78861,     596029,     114607,  11.915304,  20.800000,  25.900000,  32.600000,   6.804923,   0.370000,  66.745996, 671.238063
Outstanding requests per worker:
357 317 306 308 269 336 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157922.4,      789613,     710510,      79103,     603907,     106603,  12.063258,  20.900000,  26.200000,  33.000000,   6.880190,   0.366000,  69.811001, 684.297485
Outstanding requests per worker:
299 325 272 326 296 328 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157892.0,      789461,     710687,      78774,     610728,      99959,  12.205115,  21.200000,  26.500000,  33.700000,   6.981636,   0.256000,  62.194999, 693.977249
Outstanding requests per worker:
332 317 316 333 318 287 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:43   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   16:43   0:00 /usr/lib/linux
memcache      7  309  0.0 449216 152320 pts/0   Sl+  16:43   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:44   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19490039082      instructions:u            #    0.72  insn per cycle         
       27170049723      cycles:u                                                    
         110578026      armv8_pmuv3_0/br_mis_pred/:u                                   
        3029729875      armv8_pmuv3_0/br_pred/:u                                    

      41.771086856 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 6 threads, 156000 rps'
==> Bench: 65536 keys, 512 conns, 6 threads, 156000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 156000 -k 65536 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 156000 -k 65536 -c 512 -f 512 -w 6'
Starting client with -r 156000 -k 65536 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 156000 -k 65536 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 156000 -k 65536 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 156000 cpus 6
meanInterarrival 38
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1839133184
starting receive base loop
num_worker_connections 85
Creating worker on tid 1067708928
starting receive base loop
num_worker_connections 85
Creating worker on tid 302707200
starting receive base loop
num_worker_connections 85
Creating worker on tid 3835294208
starting receive base loop
num_worker_connections 85
Creating worker on tid 3070292480
starting receive base loop
Created 512 connections total
Creating worker on tid 2307912192
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575393033.391458,       0.0,      363691,     327462,      36229,     219245,     108217,  13.857282,  29.300000,  40.100000,  75.100000,  14.594889,   0.000000, 224.974006, 484.356884
Outstanding requests per worker:
277 292 261 281 282 273 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157900.4,      789503,     710522,      78981,     538172,     172350,  10.755146,  19.100000,  23.200000,  29.200000,   6.126719,   0.361000,  57.013001, 581.753041
Outstanding requests per worker:
267 305 274 296 283 257 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157893.4,      789468,     710403,      79065,     567631,     142772,  11.061056,  19.600000,  23.900000,  30.300000,   6.341515,   0.282000,  60.777999, 628.309889
Outstanding requests per worker:
265 303 314 289 281 295 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157880.8,      789405,     710472,      78933,     584750,     125722,  11.311716,  20.000000,  24.500000,  31.000000,   6.485612,   0.355000,  63.372999, 654.050406
Outstanding requests per worker:
300 339 307 339 306 306 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157922.4,      789613,     710695,      78918,     595555,     115140,  11.544663,  20.400000,  25.000000,  31.900000,   6.643026,   0.362000,  63.519001, 670.710583
Outstanding requests per worker:
327 320 299 319 303 278 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157904.0,      789521,     710478,      79043,     604229,     106249,  11.655445,  20.600000,  25.100000,  32.600000,   6.724545,   0.403000,  55.151999, 684.118226
Outstanding requests per worker:
317 292 297 336 281 322 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157904.0,      789521,     710924,      78597,     609895,     101029,  11.754031,  20.700000,  25.300000,  32.600000,   6.765743,   0.313000,  61.009999, 691.998730
Outstanding requests per worker:
260 361 323 314 291 307 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:44   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   16:44   0:00 /usr/lib/linux
memcache      7  316  0.0 448192 146624 pts/0   Sl+  16:44   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:44   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19478807459      instructions:u            #    0.73  insn per cycle         
       26738509340      cycles:u                                                    
         113048865      armv8_pmuv3_0/br_mis_pred/:u                                   
        3028863536      armv8_pmuv3_0/br_pred/:u                                    

      41.470314642 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 6 threads, 158000 rps'
==> Bench: 65536 keys, 512 conns, 6 threads, 158000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 158000 -k 65536 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 158000 -k 65536 -c 512 -f 512 -w 6'
Starting client with -r 158000 -k 65536 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 158000 -k 65536 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 158000 -k 65536 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 158000 cpus 6
meanInterarrival 37
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1771172352
starting receive base loop
num_worker_connections 85
Creating worker on tid 1000600064
starting receive base loop
num_worker_connections 85
Creating worker on tid 235598336
starting receive base loop
num_worker_connections 85
Creating worker on tid 3768185344
starting receive base loop
num_worker_connections 85
Creating worker on tid 3003183616
starting receive base loop
Created 512 connections total
Creating worker on tid 2240803328
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575393078.391503,       0.0,      374610,     336767,      37843,     225686,     111081,  22.435843,  52.600000,  71.700000, 106.300000,  24.524020,   0.000000, 362.592012, 486.582780
Outstanding requests per worker:
381 419 358 365 363 380 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162177.8,      810890,     730228,      80662,     555114,     175114,  13.832947,  23.100000,  29.800000,  38.700000,   7.858922,   0.386000,  75.790003, 584.887201
Outstanding requests per worker:
370 404 353 402 352 367 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162150.0,      810751,     729526,      81225,     584750,     144776,  14.393656,  24.100000,  30.800000,  40.500000,   8.189789,   0.402000,  76.653004, 630.557543
Outstanding requests per worker:
387 359 409 404 383 433 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162182.4,      810913,     729484,      81429,     601504,     127980,  14.844936,  24.600000,  31.800000,  41.900000,   8.450734,   0.576000,  76.562002, 656.220195
Outstanding requests per worker:
440 377 403 384 369 388 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162162.0,      810811,     729564,      81247,     612738,     116826,  15.257307,  25.200000,  32.800000,  43.000000,   8.707470,   0.509000,  84.568001, 673.389176
Outstanding requests per worker:
385 413 449 409 431 377 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162161.8,      810810,     730080,      80730,     621363,     108717,  15.438321,  25.500000,  33.100000,  43.800000,   8.811991,   0.493000,  79.714999, 685.365941
Outstanding requests per worker:
399 427 431 398 437 425 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161816.2,      809082,     728229,      80853,     626306,     101923,  15.863513,  26.200000,  34.500000,  47.200000,   9.628643,   0.488000, 139.662996, 695.418039
Outstanding requests per worker:
734 789 730 645 673 743 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:44   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:44   0:00 /usr/lib/linux
memcache      7  316  0.0 515200 159104 pts/0   Sl+  16:44   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  16:45   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20008221280      instructions:u            #    0.73  insn per cycle         
       27338533040      cycles:u                                                    
         113338347      armv8_pmuv3_0/br_mis_pred/:u                                   
        3117051189      armv8_pmuv3_0/br_pred/:u                                    

      41.370853977 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 6 threads, 160000 rps'
==> Bench: 65536 keys, 512 conns, 6 threads, 160000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 160000 -k 65536 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 160000 -k 65536 -c 512 -f 512 -w 6'
Starting client with -r 160000 -k 65536 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 160000 -k 65536 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 160000 -k 65536 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 160000 cpus 6
meanInterarrival 37
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2363814400
starting receive base loop
num_worker_connections 85
Creating worker on tid 1593897472
starting receive base loop
num_worker_connections 85
Creating worker on tid 831517184
starting receive base loop
num_worker_connections 85
Creating worker on tid 69136896
starting receive base loop
num_worker_connections 85
Creating worker on tid 3599102464
starting receive base loop
Created 512 connections total
Creating worker on tid 2836722176
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575393123.391548,       0.0,      372016,     334977,      37039,     224369,     110608,  21.841938,  50.600000,  70.600000, 107.000000,  23.893120,   0.000000, 313.410997, 485.314953
Outstanding requests per worker:
372 400 363 356 319 338 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162157.6,      810789,     729613,      81176,     553954,     175659,  13.828718,  23.400000,  29.700000,  39.100000,   7.919803,   0.384000,  77.201001, 584.035235
Outstanding requests per worker:
371 378 354 366 365 399 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162142.2,      810712,     729493,      81219,     585691,     143802,  14.532144,  24.600000,  31.000000,  41.300000,   8.337801,   0.495000,  77.225998, 631.474026
Outstanding requests per worker:
403 445 384 389 388 367 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162152.4,      810763,     729553,      81210,     601813,     127740,  15.009650,  24.800000,  32.400000,  42.600000,   8.601228,   0.458000,  80.013998, 656.316527
Outstanding requests per worker:
430 417 406 425 407 393 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162160.0,      810801,     729599,      81202,     612317,     117282,  15.383247,  25.600000,  33.000000,  44.100000,   8.874520,   0.498000,  86.223997, 672.859674
Outstanding requests per worker:
442 447 405 412 428 401 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162180.2,      810902,     729775,      81127,     621012,     108763,  15.425594,  25.600000,  33.000000,  44.300000,   8.879653,   0.472000,  85.238002, 684.664358
Outstanding requests per worker:
400 409 388 409 436 469 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161603.0,      808016,     727270,      80746,     625404,     101866,  16.469688,  27.900000,  36.900000,  51.600000,  10.388405,   0.541000, 108.092003, 695.180343
Outstanding requests per worker:
887 895 885 903 867 910 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:45   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   16:45   0:00 /usr/lib/linux
memcache      7  316  0.0 515200 154816 pts/0   Sl+  16:45   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  16:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20038778549      instructions:u            #    0.73  insn per cycle         
       27320943356      cycles:u                                                    
         113717685      armv8_pmuv3_0/br_mis_pred/:u                                   
        3118199127      armv8_pmuv3_0/br_pred/:u                                    

      41.770471022 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 6 threads, 162000 rps'
==> Bench: 65536 keys, 512 conns, 6 threads, 162000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 162000 -k 65536 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 162000 -k 65536 -c 512 -f 512 -w 6'
Starting client with -r 162000 -k 65536 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 162000 -k 65536 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 162000 -k 65536 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 162000 cpus 6
meanInterarrival 37
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 85
Creating worker on tid 1309340160
starting receive base loop
num_worker_connections 85
Creating worker on tid 546959872
starting receive base loop
num_worker_connections 85
Creating worker on tid 4076925440
starting receive base loop
num_worker_connections 85
Creating worker on tid 3314545152
starting receive base loop
Created 512 connections total
Creating worker on tid 2552164864
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575393168.391593,       0.0,      371473,     334713,      36760,     224311,     110402,  21.169510,  48.200000,  69.800000, 105.400000,  23.211439,   0.000000, 306.786001, 486.093256
Outstanding requests per worker:
338 318 319 365 350 385 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162177.8,      810890,     729905,      80985,     554767,     175138,  12.949284,  22.100000,  27.800000,  36.000000,   7.363957,   0.355000,  67.775004, 585.072831
Outstanding requests per worker:
349 335 339 365 311 358 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162147.2,      810737,     729319,      81418,     584986,     144333,  13.252021,  22.800000,  28.300000,  37.600000,   7.618938,   0.337000,  73.840998, 631.437219
Outstanding requests per worker:
381 371 380 331 360 350 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162166.4,      810833,     729563,      81270,     600692,     128871,  13.699319,  23.000000,  29.400000,  38.500000,   7.802143,   0.468000,  71.989000, 654.988773
Outstanding requests per worker:
364 368 351 350 373 400 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162157.8,      810790,     729780,      81010,     612673,     117107,  13.901108,  23.300000,  29.900000,  39.100000,   7.927270,   0.379000,  75.140998, 672.515311
Outstanding requests per worker:
361 369 363 407 376 392 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162157.8,      810790,     729800,      80990,     621380,     108420,  14.168616,  24.000000,  30.300000,  40.300000,   8.165394,   0.387000,  79.497002, 685.151414
Outstanding requests per worker:
381 406 358 368 399 437 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161940.0,      809701,     728887,      80814,     625990,     102897,  14.343310,  24.200000,  30.700000,  40.800000,   8.210705,   0.420000,  80.467001, 694.035941
Outstanding requests per worker:
603 590 589 587 565 576 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:46   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   16:46   0:00 /usr/lib/linux
memcache      7  316  0.0 515200 158592 pts/0   Sl+  16:46   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:47   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20027542212      instructions:u            #    0.73  insn per cycle         
       27283078640      cycles:u                                                    
         116143840      armv8_pmuv3_0/br_mis_pred/:u                                   
        3111258748      armv8_pmuv3_0/br_pred/:u                                    

      41.912057638 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 6 threads, 164000 rps'
==> Bench: 65536 keys, 512 conns, 6 threads, 164000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 164000 -k 65536 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 164000 -k 65536 -c 512 -f 512 -w 6'
Starting client with -r 164000 -k 65536 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 164000 -k 65536 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 164000 -k 65536 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 164000 cpus 6
meanInterarrival 36
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1915613696
starting receive base loop
num_worker_connections 85
Creating worker on tid 1142878720
starting receive base loop
num_worker_connections 85
Creating worker on tid 377876992
starting receive base loop
num_worker_connections 85
Creating worker on tid 3910464000
starting receive base loop
num_worker_connections 85
Creating worker on tid 3148083712
starting receive base loop
Created 512 connections total
Creating worker on tid 2383081984
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575393213.391638,       0.0,      379850,     341670,      38180,     243994,      97676,  34.649381,  79.500000,  93.900000, 145.400000,  34.385980,   0.000000, 382.784992, 495.762411
Outstanding requests per worker:
713 712 707 793 693 731 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167002.0,      835011,     752140,      82871,     595822,     156318,  21.231625,  43.500000,  64.000000,  87.800000,  18.079968,   0.485000, 181.070998, 578.472241
Outstanding requests per worker:
428 495 443 467 427 456 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166672.8,      833365,     749910,      83455,     619678,     130232,  16.931049,  27.500000,  36.000000,  47.900000,   9.523449,   0.593000,  89.065999, 616.350953
Outstanding requests per worker:
485 436 420 480 434 492 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166654.6,      833274,     749750,      83524,     633637,     116113,  17.255857,  28.300000,  36.700000,  49.500000,   9.821272,   0.484000,  92.216000, 637.312628
Outstanding requests per worker:
463 509 499 458 487 470 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166677.4,      833388,     750126,      83262,     644472,     105654,  17.665975,  28.900000,  37.600000,  50.800000,  10.042619,   0.376000,  96.914001, 652.648411
Outstanding requests per worker:
472 465 465 504 493 527 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166659.6,      833299,     750122,      83177,     652246,      97876,  17.867117,  29.300000,  38.100000,  51.700000,  10.190880,   0.704000,  94.237998, 663.872910
Outstanding requests per worker:
495 550 543 488 445 483 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166685.0,      833426,     750214,      83212,     657476,      92738,  18.085959,  29.700000,  38.800000,  52.700000,  10.392662,   0.684000, 102.655001, 670.796954
Outstanding requests per worker:
498 540 470 470 528 469 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:47   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:47   0:00 /usr/lib/linux
memcache      7  308  0.0 434880 141504 pts/0   Sl+  16:47   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:47   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21300545379      instructions:u            #    0.76  insn per cycle         
       28038900648      cycles:u                                                    
         114376627      armv8_pmuv3_0/br_mis_pred/:u                                   
        3285313970      armv8_pmuv3_0/br_pred/:u                                    

      41.980541056 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 6 threads, 166000 rps'
==> Bench: 65536 keys, 512 conns, 6 threads, 166000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 166000 -k 65536 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 166000 -k 65536 -c 512 -f 512 -w 6'
Starting client with -r 166000 -k 65536 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 166000 -k 65536 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 166000 -k 65536 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 166000 cpus 6
meanInterarrival 36
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2053894656
starting receive base loop
num_worker_connections 85
Creating worker on tid 1285157376
starting receive base loop
num_worker_connections 85
Creating worker on tid 520155648
starting receive base loop
num_worker_connections 85
Creating worker on tid 4052742656
starting receive base loop
num_worker_connections 85
Creating worker on tid 3290362368
starting receive base loop
Created 512 connections total
Creating worker on tid 2525360640
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575393258.391683,       0.0,      380673,     342667,      38006,     229730,     112937,  31.249171,  72.800000,  86.200000, 124.400000,  30.533652,   0.000000, 356.133014, 486.173769
Outstanding requests per worker:
559 585 617 629 591 650 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166843.8,      834220,     750894,      83326,     570808,     180086,  17.024047,  27.900000,  37.600000,  51.700000,  10.310268,   0.655000, 122.281000, 584.863776
Outstanding requests per worker:
465 408 483 534 481 442 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166679.4,      833398,     749890,      83508,     601126,     148764,  17.085038,  27.500000,  36.400000,  48.500000,   9.628668,   0.485000,  88.744998, 631.279613
Outstanding requests per worker:
436 478 446 507 478 467 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166638.2,      833192,     749754,      83438,     619021,     130733,  17.516989,  28.500000,  37.400000,  50.700000,  10.005742,   0.498000,  98.020002, 656.809452
Outstanding requests per worker:
527 485 481 509 500 495 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166674.0,      833371,     750442,      82929,     630934,     119508,  17.960909,  29.300000,  38.500000,  52.300000,  10.305583,   0.462000,  94.832003, 673.385731
Outstanding requests per worker:
482 509 518 480 518 494 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166654.6,      833274,     750105,      83169,     639902,     110203,  18.262831,  29.800000,  39.000000,  53.000000,  10.444966,   0.713000,  97.570002, 687.454070
Outstanding requests per worker:
528 504 488 574 502 531 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166611.0,      833056,     749358,      83698,     644778,     104580,  20.255649,  35.500000,  47.100000,  67.500000,  13.012147,   0.638000, 128.363997, 695.648008
Outstanding requests per worker:
587 583 595 548 562 578 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:47   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:47   0:00 /usr/lib/linux
memcache      7  308  0.0 517248 153472 pts/0   Sl+  16:47   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  16:48   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20607094831      instructions:u            #    0.74  insn per cycle         
       27700527244      cycles:u                                                    
         119070881      armv8_pmuv3_0/br_mis_pred/:u                                   
        3198812129      armv8_pmuv3_0/br_pred/:u                                    

      41.421199031 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 6 threads, 168000 rps'
==> Bench: 65536 keys, 512 conns, 6 threads, 168000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 168000 -k 65536 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 168000 -k 65536 -c 512 -f 512 -w 6'
Starting client with -r 168000 -k 65536 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 168000 -k 65536 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 168000 -k 65536 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 168000 cpus 6
meanInterarrival 35
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1821176320
starting receive base loop
num_worker_connections 85
Creating worker on tid 1048965632
starting receive base loop
num_worker_connections 85
Creating worker on tid 286585344
starting receive base loop
num_worker_connections 85
Creating worker on tid 3819172352
starting receive base loop
num_worker_connections 85
Creating worker on tid 3054170624
starting receive base loop
Created 512 connections total
Creating worker on tid 2291790336
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575393303.391728,       0.0,      382211,     344169,      38042,     231163,     113006,  56.090504, 103.200000, 120.700000, 182.500000,  42.126969,   0.000000, 413.747013, 487.842935
Outstanding requests per worker:
1924 2008 1966 1984 2053 2181 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171058.0,      855291,     770063,      85228,     586466,     183597,  77.291997, 129.300000, 145.900000, 189.700000,  38.175428,   1.286000, 337.985992, 586.470451
Outstanding requests per worker:
2281 2240 2358 2409 2302 2426 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171378.8,      856895,     771432,      85463,     620625,     150807,  84.624664, 157.200000, 183.900000, 225.200000,  51.920929,   0.819000, 352.818012, 634.077057
Outstanding requests per worker:
2342 2293 2496 2413 2378 2417 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171300.0,      856501,     770599,      85902,     637267,     133332,  85.748316, 165.000000, 193.200000, 243.100000,  57.333982,   1.064000, 385.087997, 658.307814
Outstanding requests per worker:
2328 2341 2533 2763 2438 2642 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171020.6,      855104,     769491,      85613,     648029,     121462,  93.928234, 174.900000, 200.300000, 255.300000,  60.503314,   1.059000, 388.792008, 675.416814
Outstanding requests per worker:
2782 2537 2907 3079 2952 2901 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171205.4,      856028,     770340,      85688,     657435,     112905, 103.704971, 189.200000, 216.100000, 272.600000,  64.592767,   0.925000, 459.919006, 687.292891
Outstanding requests per worker:
2837 2860 3161 3234 3048 3180 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170147.6,      850739,     765652,      85087,     660218,     105434, 121.175897, 211.100000, 244.100000, 305.100000,  69.055932,   1.386000, 475.526989, 697.742464
Outstanding requests per worker:
3848 3913 4282 4235 4199 4317 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:48   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:48   0:00 /usr/lib/linux
memcache      7  308  0.0 521344 166080 pts/0   Sl+  16:48   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:49   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21560262874      instructions:u            #    0.74  insn per cycle         
       29133042605      cycles:u                                                    
         130635446      armv8_pmuv3_0/br_mis_pred/:u                                   
        3352464643      armv8_pmuv3_0/br_pred/:u                                    

      41.670949871 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 6 threads, 170000 rps'
==> Bench: 65536 keys, 512 conns, 6 threads, 170000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 170000 -k 65536 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 170000 -k 65536 -c 512 -f 512 -w 6'
Starting client with -r 170000 -k 65536 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 170000 -k 65536 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 170000 -k 65536 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 170000 cpus 6
meanInterarrival 35
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2187915776
starting receive base loop
num_worker_connections 85
Creating worker on tid 1411314176
starting receive base loop
num_worker_connections 85
Creating worker on tid 646312448
starting receive base loop
num_worker_connections 85
Creating worker on tid 4178899456
starting receive base loop
num_worker_connections 85
Creating worker on tid 3416519168
starting receive base loop
Created 512 connections total
Creating worker on tid 2651517440
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575393348.391773,       0.0,      383488,     345134,      38354,     231766,     113368,  49.624358,  98.400000, 116.600000, 178.700000,  40.445941,   0.000000, 428.074002, 487.304096
Outstanding requests per worker:
1231 1397 1425 1456 1418 1531 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171666.6,      858334,     772605,      85729,     589101,     183504,  40.525471, 108.200000, 132.000000, 176.100000,  41.317285,   0.761000, 299.708009, 587.511075
Outstanding requests per worker:
1218 1115 1197 1347 1185 1254 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171237.6,      856189,     770512,      85677,     619818,     150694,  45.125677, 130.700000, 153.500000, 196.000000,  49.757656,   0.862000, 338.584006, 633.832083
Outstanding requests per worker:
1342 1351 1378 1413 1483 1359 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171277.8,      856390,     771193,      85197,     637509,     133684,  50.120696, 148.800000, 176.300000, 216.600000,  57.106449,   0.622000, 359.782010, 658.744392
Outstanding requests per worker:
1477 1598 1576 1489 1499 1513 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171327.6,      856639,     771028,      85611,     649699,     121329,  54.633545, 163.400000, 197.000000, 253.200000,  64.776333,   0.633000, 432.049990, 675.206187
Outstanding requests per worker:
1550 1546 1558 1581 1671 1835 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171397.4,      856988,     771235,      85753,     658403,     112832,  56.382450, 170.700000, 202.000000, 257.900000,  66.800428,   0.668000, 421.454996, 687.383019
Outstanding requests per worker:
1525 1682 1584 1710 1698 1753 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169819.2,      849097,     764209,      84888,     658587,     105622,  72.037781, 185.300000, 213.400000, 272.300000,  70.606992,   0.736000, 509.135008, 696.978163
Outstanding requests per worker:
2882 2960 3107 2945 3107 3050 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:49   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:49   0:00 /usr/lib/linux
memcache      7  308  0.0 521344 164352 pts/0   Sl+  16:49   2:09 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  16:50   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21292805945      instructions:u            #    0.74  insn per cycle         
       28613733443      cycles:u                                                    
         124994053      armv8_pmuv3_0/br_mis_pred/:u                                   
        3315948361      armv8_pmuv3_0/br_pred/:u                                    

      41.661850710 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 6 threads, 172000 rps'
==> Bench: 65536 keys, 512 conns, 6 threads, 172000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 172000 -k 65536 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 172000 -k 65536 -c 512 -f 512 -w 6'
Starting client with -r 172000 -k 65536 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 172000 -k 65536 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 172000 -k 65536 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 172000 cpus 6
meanInterarrival 34
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 85
Creating worker on tid 1577775616
starting receive base loop
num_worker_connections 85
Creating worker on tid 815395328
starting receive base loop
num_worker_connections 85
Creating worker on tid 50393600
starting receive base loop
num_worker_connections 85
Creating worker on tid 3582980608
starting receive base loop
Created 512 connections total
Creating worker on tid 2820600320
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575393393.391818,       0.0,      385264,     346483,      38781,     232566,     113917,  83.832847, 148.200000, 179.400000, 304.200000,  61.336562,   0.000000, 465.420991, 487.414306
Outstanding requests per worker:
3648 3561 3594 3892 3721 4432 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173636.0,      868181,     781807,      86374,     595424,     186383, 174.019247, 260.700000, 299.000000, 386.000000,  68.249898,   2.845000, 757.583976, 586.997245
Outstanding requests per worker:
5824 5842 6368 6254 6140 6640 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174168.0,      870841,     783549,      87292,     631051,     152498, 243.232746, 367.700000, 437.500000, 606.900000, 101.760946,   5.981000, 990.162015, 635.135805
Outstanding requests per worker:
7401 7441 8657 8044 8397 8711 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174289.6,      871449,     784019,      87430,     649158,     134861, 305.241406, 508.800000, 608.100000, 826.600000, 147.336285,  23.347000, 1134.201050, 659.129044
Outstanding requests per worker:
8985 8540 10830 9803 10665 10818 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174205.8,      871030,     783986,      87044,     660747,     123239, 370.317084, 628.600000, 761.500000, 1032.500000, 188.955282,  17.770000, 1386.204958, 676.077564
Outstanding requests per worker:
10311 9721 13160 11920 12714 13259 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173995.6,      869979,     782991,      86988,     668768,     114223, 435.116123, 761.000000, 909.700000, 1246.000000, 236.881404,  43.159999, 1685.546041, 688.173900
Outstanding requests per worker:
11678 11149 15866 14021 15106 15691 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173091.4,      865458,     778300,      87158,     671690,     106610, 518.290470, 941.200000, 1085.100000, 1466.100000, 286.502453,  26.242999, 1754.995942, 697.474322
Outstanding requests per worker:
13960 12798 19256 17406 18123 18936 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:50   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   16:50   0:00 /usr/lib/linux
memcache      7  309  0.0 523392 166464 pts/0   Sl+  16:50   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:50   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21853464255      instructions:u            #    0.75  insn per cycle         
       29324793788      cycles:u                                                    
         123962807      armv8_pmuv3_0/br_mis_pred/:u                                   
        3405874310      armv8_pmuv3_0/br_pred/:u                                    

      41.581282498 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 6 threads, 174000 rps'
==> Bench: 65536 keys, 512 conns, 6 threads, 174000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 174000 -k 65536 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 174000 -k 65536 -c 512 -f 512 -w 6'
Starting client with -r 174000 -k 65536 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 174000 -k 65536 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 174000 -k 65536 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 174000 cpus 6
meanInterarrival 34
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1774121472
starting receive base loop
num_worker_connections 85
Creating worker on tid 1000600064
starting receive base loop
num_worker_connections 85
Creating worker on tid 235598336
starting receive base loop
num_worker_connections 85
Creating worker on tid 3768185344
starting receive base loop
num_worker_connections 85
Creating worker on tid 3003183616
starting receive base loop
Created 512 connections total
Creating worker on tid 2240803328
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575393438.391863,       0.0,      383203,     344854,      38349,     232133,     112721,  82.650787, 147.100000, 179.300000, 340.900000,  67.048682,   0.000000, 697.429001, 489.407929
Outstanding requests per worker:
3384 3401 3744 3615 3777 4545 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173551.2,      867757,     781251,      86506,     594836,     186415, 175.228265, 267.600000, 309.200000, 404.900000,  70.440541,   4.238000, 574.522018, 586.680575
Outstanding requests per worker:
5720 5743 6290 6318 6377 6689 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174397.6,      871989,     784724,      87265,     630805,     153919, 239.448250, 376.100000, 444.800000, 560.700000,  99.397291,  23.688000, 841.238022, 633.149060
Outstanding requests per worker:
7144 7104 8263 8283 8138 8669 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174123.0,      870616,     783454,      87162,     648563,     134891, 300.659599, 495.900000, 593.500000, 768.600000, 138.772821,  34.736998, 992.447019, 659.433249
Outstanding requests per worker:
8784 8657 10583 10362 10263 10806 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174118.4,      870593,     783421,      87172,     659640,     123781, 370.748713, 637.600000, 746.500000, 960.100000, 180.799371,  37.147999, 1336.529970, 674.896247
Outstanding requests per worker:
10484 9896 12835 12753 12235 13076 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174299.0,      871496,     784478,      87018,     669617,     114861, 433.799402, 761.500000, 911.900000, 1104.500000, 222.933198,  64.239003, 1633.870959, 687.437428
Outstanding requests per worker:
11578 11142 15127 14682 14582 15115 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173251.4,      866258,     779006,      87252,     671782,     107224, 506.686027, 925.000000, 1056.800000, 1277.800000, 267.567894,  47.892999, 1689.072967, 696.961795
Outstanding requests per worker:
14000 13318 18006 17646 17254 18191 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:50   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   16:50   0:00 /usr/lib/linux
memcache      8  308  0.0 523392 174528 pts/0   Sl+  16:50   2:09 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  16:51   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21862599884      instructions:u            #    0.73  insn per cycle         
       29820522402      cycles:u                                                    
         126391237      armv8_pmuv3_0/br_mis_pred/:u                                   
        3400306981      armv8_pmuv3_0/br_pred/:u                                    

      41.551219180 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 6 threads, 176000 rps'
==> Bench: 65536 keys, 512 conns, 6 threads, 176000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 176000 -k 65536 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 176000 -k 65536 -c 512 -f 512 -w 6'
Starting client with -r 176000 -k 65536 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 176000 -k 65536 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 176000 -k 65536 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 176000 cpus 6
meanInterarrival 34
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2023158272
starting receive base loop
num_worker_connections 85
Creating worker on tid 1250292224
starting receive base loop
num_worker_connections 85
Creating worker on tid 487911936
starting receive base loop
num_worker_connections 85
Creating worker on tid 4020498944
starting receive base loop
num_worker_connections 85
Creating worker on tid 3255497216
starting receive base loop
Created 512 connections total
Creating worker on tid 2493116928
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575393483.391908,       0.0,      386178,     347427,      38751,     233257,     114170,  77.821578, 141.200000, 174.400000, 430.000000,  75.372352,   0.000000, 793.438017, 487.125534
Outstanding requests per worker:
3227 3157 3391 3362 3340 4512 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174086.4,      870433,     783899,      86534,     598262,     185637, 157.605052, 235.300000, 267.800000, 361.700000,  61.938279,   3.138000, 632.252991, 588.106603
Outstanding requests per worker:
5103 5271 5601 5412 5693 5879 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174686.6,      873434,     785966,      87468,     631916,     154050, 211.123084, 319.400000, 378.200000, 488.700000,  83.623153,  16.338000, 685.063004, 632.997290
Outstanding requests per worker:
6397 6356 7416 7084 7369 7311 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174953.6,      874769,     786999,      87770,     651054,     135945, 258.132824, 435.300000, 520.700000, 642.600000, 119.462544,   9.201000, 960.897982, 659.074704
Outstanding requests per worker:
7411 7415 8501 8698 8874 8671 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174628.2,      873142,     785891,      87251,     662230,     123661, 306.192386, 542.700000, 639.600000, 825.900000, 156.228533,  10.523000, 1101.387978, 676.163313
Outstanding requests per worker:
8610 8320 10375 10257 10757 10520 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174793.4,      873968,     786850,      87118,     671992,     114858, 355.133682, 645.500000, 797.600000, 1015.900000, 197.174924,  27.148001, 1304.021001, 688.073037
Outstanding requests per worker:
9234 9197 12136 12100 12068 12545 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173724.8,      868625,     781747,      86878,     674124,     107623, 417.751493, 768.800000, 956.400000, 1222.300000, 240.992575,  41.529998, 1636.016011, 697.929967
Outstanding requests per worker:
11064 10745 14723 14807 14405 15326 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:51   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   16:51   0:00 /usr/lib/linux
memcache      7  316  0.0 522368 170496 pts/0   Sl+  16:51   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:52   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21972633533      instructions:u            #    0.74  insn per cycle         
       29855545241      cycles:u                                                    
         127388860      armv8_pmuv3_0/br_mis_pred/:u                                   
        3416953271      armv8_pmuv3_0/br_pred/:u                                    

      41.571382389 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 150000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 150000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 150000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 150000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 150000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 150000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 150000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 150000 cpus 8
meanInterarrival 53
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1971909120
starting receive base loop
num_worker_connections 64
Creating worker on tid 1379267072
starting receive base loop
num_worker_connections 64
Creating worker on tid 783348224
starting receive base loop
num_worker_connections 64
Creating worker on tid 187429376
starting receive base loop
num_worker_connections 64
Creating worker on tid 3886477824
starting receive base loop
num_worker_connections 64
Creating worker on tid 3290558976
starting receive base loop
num_worker_connections 64
Creating worker on tid 2694640128
starting receive base loop
Created 512 connections total
Creating worker on tid 2098721280
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575393528.391953,       0.0,      360986,     325065,      35921,     216867,     108198,  10.897218,  23.700000,  30.300000,  56.100000,  11.612391,   0.000000, 175.633997, 482.876942
Outstanding requests per worker:
164 198 153 177 170 182 188 197 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150932.8,      754665,     679441,      75224,     514067,     165374,   9.874445,  18.600000,  22.400000,  28.500000,   6.327877,   0.188000,  60.821999, 580.883482
Outstanding requests per worker:
156 196 243 196 211 180 193 198 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150954.6,      754774,     679476,      75298,     542005,     137471,  10.260212,  19.200000,  23.200000,  30.000000,   6.577131,   0.192000,  60.341001, 626.668261
Outstanding requests per worker:
204 209 182 180 176 208 199 195 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150940.0,      754701,     679205,      75496,     557607,     121598,  10.710584,  20.000000,  24.100000,  32.400000,   6.941034,   0.180000,  61.935000, 652.089993
Outstanding requests per worker:
229 194 189 206 245 183 172 199 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150950.8,      754755,     679173,      75582,     567452,     111721,  10.944541,  20.300000,  24.800000,  32.900000,   7.066655,   0.172000,  60.077999, 668.365231
Outstanding requests per worker:
206 205 209 191 214 216 201 213 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150957.6,      754789,     679009,      75780,     575172,     103837,  11.094672,  20.900000,  25.000000,  33.800000,   7.224606,   0.193000,  67.501001, 681.866033
Outstanding requests per worker:
199 196 224 189 190 202 218 240 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150943.8,      754720,     678953,      75767,     581485,      97468,  11.298302,  20.900000,  25.500000,  33.900000,   7.273737,   0.187000,  66.843003, 691.009001
Outstanding requests per worker:
195 191 221 207 215 224 218 227 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:52   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:52   0:00 /usr/lib/linux
memcache      7  309  0.0 444096 143488 pts/0   Sl+  16:52   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:53   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       18626475235      instructions:u            #    0.70  insn per cycle         
       26484741690      cycles:u                                                    
         113133391      armv8_pmuv3_0/br_mis_pred/:u                                   
        2890863212      armv8_pmuv3_0/br_pred/:u                                    

      41.891531410 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 152000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 152000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 152000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 152000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 152000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 152000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 152000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 152000 cpus 8
meanInterarrival 52
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2004218368
starting receive base loop
num_worker_connections 64
Creating worker on tid 1411510784
starting receive base loop
num_worker_connections 64
Creating worker on tid 815591936
starting receive base loop
num_worker_connections 64
Creating worker on tid 219673088
starting receive base loop
num_worker_connections 64
Creating worker on tid 3921342976
starting receive base loop
num_worker_connections 64
Creating worker on tid 3325424128
starting receive base loop
num_worker_connections 64
Creating worker on tid 2729505280
starting receive base loop
Created 512 connections total
Creating worker on tid 2133586432
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575393575.392000,       0.0,      462394,     415973,      46421,     283265,     132708,   8.755771,  21.200000,  26.300000,  45.400000,  11.051991,   0.000000, 219.586000, 497.496987
Outstanding requests per worker:
248 228 231 218 196 211 202 221 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153857.2,      769287,     693074,      76213,     529740,     163334,  11.371169,  21.200000,  25.600000,  34.500000,   7.378786,   0.184000,  69.493003, 590.170895
Outstanding requests per worker:
227 234 232 214 255 206 188 218 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153843.0,      769216,     691763,      77453,     555484,     136279,  11.958329,  22.100000,  26.800000,  36.300000,   7.718352,   0.194000,  73.981002, 631.910776
Outstanding requests per worker:
254 224 208 262 219 240 220 245 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153842.8,      769215,     692419,      76796,     570368,     122051,  12.366820,  22.900000,  27.800000,  37.600000,   8.014192,   0.229000,  76.846004, 654.359886
Outstanding requests per worker:
238 223 224 263 266 246 246 218 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153848.8,      769245,     692062,      77183,     580176,     111886,  12.745642,  23.000000,  28.700000,  38.300000,   8.192724,   0.233000,  81.770003, 670.936098
Outstanding requests per worker:
266 287 251 234 233 245 223 226 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153852.2,      769262,     692385,      76877,     588200,     104185,  13.075523,  24.100000,  29.100000,  40.600000,   8.548361,   0.190000,  85.666999, 683.493221
Outstanding requests per worker:
255 282 224 223 266 267 240 249 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153804.4,      769023,     691906,      77117,     593708,      98198,  13.315410,  23.900000,  29.800000,  40.300000,   8.546368,   0.202000,  79.566002, 693.153821
Outstanding requests per worker:
306 264 269 306 267 302 316 266 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:53   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   16:53   0:00 /usr/lib/linux
memcache      7  317  0.0 447168 154624 pts/0   Sl+  16:53   2:13 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:53   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19377032350      instructions:u            #    0.72  insn per cycle         
       26799757320      cycles:u                                                    
         112726491      armv8_pmuv3_0/br_mis_pred/:u                                   
        3018325466      armv8_pmuv3_0/br_pred/:u                                    

      42.779592633 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 154000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 154000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 154000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 154000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 154000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 154000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 154000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 154000 cpus 8
meanInterarrival 51
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2040132096
starting receive base loop
num_worker_connections 64
Creating worker on tid 1446375936
starting receive base loop
num_worker_connections 64
Creating worker on tid 850457088
starting receive base loop
num_worker_connections 64
Creating worker on tid 254538240
starting receive base loop
num_worker_connections 64
Creating worker on tid 3953586688
starting receive base loop
num_worker_connections 64
Creating worker on tid 3357667840
starting receive base loop
num_worker_connections 64
Creating worker on tid 2761748992
starting receive base loop
Created 512 connections total
Creating worker on tid 2165830144
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575393620.392045,       0.0,      374184,     336762,      37422,     225448,     111314,  30.068029,  65.400000,  84.400000, 302.100000,  53.279449,   0.000000, 809.971988, 485.467101
Outstanding requests per worker:
277 288 267 302 300 268 274 331 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156903.4,      784518,     705847,      78671,     535364,     170483,  13.970906,  25.100000,  30.900000,  43.000000,   9.037603,   0.182000,  85.649997, 583.245234
Outstanding requests per worker:
273 304 305 256 279 252 263 263 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156814.8,      784075,     705737,      78338,     564569,     141168,  15.030227,  26.400000,  33.500000,  45.800000,   9.667912,   0.237000,  96.059002, 629.103459
Outstanding requests per worker:
324 270 289 323 312 327 317 311 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156873.2,      784367,     705719,      78648,     580486,     125233,  15.401682,  27.100000,  34.300000,  47.500000,   9.974909,   0.233000,  95.812999, 653.884766
Outstanding requests per worker:
339 316 341 317 322 302 294 255 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156868.8,      784345,     705728,      78617,     591404,     114324,  16.034131,  28.500000,  35.900000,  50.200000,  10.528721,   0.283000, 109.220996, 670.605038
Outstanding requests per worker:
309 307 357 301 313 287 306 317 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156851.2,      784257,     705964,      78293,     599718,     106246,  16.305384,  28.600000,  36.300000,  50.800000,  10.602561,   0.235000, 103.321999, 683.384437
Outstanding requests per worker:
389 299 339 325 279 356 317 351 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156826.2,      784132,     705522,      78610,     605374,     100148,  16.900693,  30.100000,  38.400000,  55.000000,  11.338585,   0.201000, 117.288999, 692.748963
Outstanding requests per worker:
344 339 416 331 356 404 331 354 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:53   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   16:53   0:00 /usr/lib/linux
memcache      7  317  0.0 447168 153920 pts/0   Sl+  16:53   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:54   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19440189938      instructions:u            #    0.73  insn per cycle         
       26577956048      cycles:u                                                    
         111720124      armv8_pmuv3_0/br_mis_pred/:u                                   
        3018047326      armv8_pmuv3_0/br_pred/:u                                    

      41.601333044 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 156000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 156000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 156000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 156000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 156000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 156000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 156000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 156000 cpus 8
meanInterarrival 51
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1745285632
starting receive base loop
num_worker_connections 64
Creating worker on tid 1151136256
starting receive base loop
num_worker_connections 64
Creating worker on tid 555217408
starting receive base loop
num_worker_connections 64
Creating worker on tid 4256887296
starting receive base loop
num_worker_connections 64
Creating worker on tid 3660968448
starting receive base loop
num_worker_connections 64
Creating worker on tid 3065049600
starting receive base loop
num_worker_connections 64
Creating worker on tid 2469130752
starting receive base loop
Created 512 connections total
Creating worker on tid 1873211904
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575393665.392090,       0.0,      374747,     337287,      37460,     226496,     110791,  18.503848,  40.400000,  59.400000,  97.000000,  20.821744,   0.000000, 266.647995, 487.639417
Outstanding requests per worker:
238 303 244 240 264 272 218 291 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156851.2,      784257,     705656,      78601,     536331,     169325,  13.673145,  24.100000,  30.400000,  42.000000,   8.770574,   0.225000,  79.433002, 584.277050
Outstanding requests per worker:
271 267 294 281 253 260 288 264 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156853.8,      784270,     705573,      78697,     564175,     141398,  14.509270,  25.400000,  32.100000,  44.400000,   9.280082,   0.283000,  85.607000, 628.987200
Outstanding requests per worker:
296 255 283 294 269 311 299 288 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156855.6,      784279,     705552,      78727,     580596,     124956,  15.057818,  26.200000,  33.500000,  46.500000,   9.689135,   0.234000,  90.352997, 653.800787
Outstanding requests per worker:
285 339 310 284 254 320 301 328 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156873.4,      784368,     706382,      77986,     592072,     114310,  15.422819,  26.800000,  34.000000,  47.500000,   9.902341,   0.267000,  97.502999, 670.701395
Outstanding requests per worker:
283 303 316 288 314 314 266 317 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156850.4,      784253,     705804,      78449,     599370,     106434,  15.838381,  27.800000,  35.200000,  48.800000,  10.223012,   0.240000, 101.722002, 683.020465
Outstanding requests per worker:
304 360 319 311 353 307 310 254 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156870.4,      784353,     705565,      78788,     605392,     100173,  16.067312,  27.800000,  35.600000,  49.300000,  10.290724,   0.292000,  97.345002, 693.092751
Outstanding requests per worker:
276 334 324 303 307 343 330 327 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:54   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:54   0:00 /usr/lib/linux
memcache      7  310  0.0 448192 151360 pts/0   Sl+  16:54   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:55   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19359016927      instructions:u            #    0.72  insn per cycle         
       26826247915      cycles:u                                                    
         112074491      armv8_pmuv3_0/br_mis_pred/:u                                   
        3011517523      armv8_pmuv3_0/br_pred/:u                                    

      42.380688445 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 158000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 158000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 158000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 158000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 158000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 158000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 158000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 158000 cpus 8
meanInterarrival 50
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2587095552
starting receive base loop
num_worker_connections 64
Creating worker on tid 1991307776
starting receive base loop
num_worker_connections 64
Creating worker on tid 1395388928
starting receive base loop
num_worker_connections 64
Creating worker on tid 799470080
starting receive base loop
num_worker_connections 64
Creating worker on tid 203551232
starting receive base loop
num_worker_connections 64
Creating worker on tid 3902599680
starting receive base loop
num_worker_connections 64
Creating worker on tid 3306680832
starting receive base loop
Created 512 connections total
Creating worker on tid 2713383424
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575393711.392136,       0.0,      387556,     348925,      38631,     234775,     114150,  23.459534,  58.000000,  76.000000, 110.600000,  26.014128,   0.000000, 347.337008, 489.039349
Outstanding requests per worker:
458 462 450 392 430 441 469 474 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159648.0,      798241,     718291,      79950,     546251,     172040,  26.144893,  67.900000,  84.500000, 112.400000,  25.846800,   0.229000, 206.375003, 585.091040
Outstanding requests per worker:
655 643 705 710 679 615 702 691 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159830.8,      799155,     719610,      79545,     576994,     142616,  37.315689, 107.600000, 132.300000, 167.600000,  42.085902,   0.242000, 281.859010, 630.822245
Outstanding requests per worker:
803 796 805 800 765 738 767 830 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159769.4,      798848,     718890,      79958,     592475,     126415,  42.790196, 130.700000, 155.100000, 198.600000,  50.638698,   0.317000, 318.657011, 655.200348
Outstanding requests per worker:
843 931 870 875 927 1004 1079 977 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160008.2,      800042,     719730,      80312,     604039,     115691,  47.557509, 147.800000, 173.900000, 219.600000,  57.855040,   0.286000, 379.278988, 672.052635
Outstanding requests per worker:
903 1041 1016 950 847 938 849 975 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159899.8,      799500,     719861,      79639,     611606,     108255,  48.893689, 152.200000, 180.700000, 229.700000,  60.250682,   0.235000, 403.775990, 684.011527
Outstanding requests per worker:
877 959 858 1005 1078 1067 1044 1200 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159815.6,      799079,     719789,      79290,     618361,     101428,  53.108825, 167.400000, 201.700000, 257.300000,  67.332522,   0.288000, 399.057001, 694.066613
Outstanding requests per worker:
1024 1286 1148 1060 1060 1226 1218 1046 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:55   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:55   0:00 /usr/lib/linux
memcache      7  318  0.0 449216 155520 pts/0   Sl+  16:55   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:56   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19877048435      instructions:u            #    0.73  insn per cycle         
       27133222123      cycles:u                                                    
         115094832      armv8_pmuv3_0/br_mis_pred/:u                                   
        3093221845      armv8_pmuv3_0/br_pred/:u                                    

      41.620810339 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 160000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 160000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 160000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 160000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 160000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 160000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 160000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 160000 cpus 8
meanInterarrival 50
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1786311168
starting receive base loop
num_worker_connections 64
Creating worker on tid 1194062336
starting receive base loop
num_worker_connections 64
Creating worker on tid 598143488
starting receive base loop
num_worker_connections 64
Creating worker on tid 2224640
starting receive base loop
num_worker_connections 64
Creating worker on tid 3701273088
starting receive base loop
num_worker_connections 64
Creating worker on tid 3105354240
starting receive base loop
num_worker_connections 64
Creating worker on tid 2512056832
starting receive base loop
Created 512 connections total
Creating worker on tid 1916137984
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575393756.392181,       0.0,      376086,     338650,      37436,     242814,      95836,  36.934910,  84.200000,  99.600000, 145.400000,  35.327131,   0.000000, 361.827999, 495.792638
Outstanding requests per worker:
807 773 793 811 847 860 739 813 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159931.0,      799656,     719749,      79907,     563098,     156651,  40.206417, 117.200000, 141.900000, 183.900000,  45.435522,   0.414000, 292.374998, 578.585229
Outstanding requests per worker:
797 819 845 992 811 923 920 790 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159899.2,      799497,     719320,      80177,     589375,     129945,  44.154461, 130.100000, 154.700000, 204.400000,  50.892141,   0.317000, 345.075011, 619.002165
Outstanding requests per worker:
885 890 1067 898 883 906 960 977 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159733.6,      798669,     718693,      79976,     603055,     115638,  51.227586, 158.700000, 191.000000, 242.400000,  62.939080,   0.377000, 392.273992, 640.511547
Outstanding requests per worker:
1172 1024 1129 1074 1186 1095 1149 1035 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159772.4,      798863,     718742,      80121,     613046,     105696,  58.511078, 186.500000, 221.100000, 279.500000,  74.274565,   0.380000, 486.777991, 655.758183
Outstanding requests per worker:
1248 1209 1260 1219 1285 1174 1364 1326 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159715.2,      798577,     719191,      79386,     621393,      97798,  66.109098, 207.500000, 243.000000, 321.600000,  83.539048,   0.370000, 551.111996, 668.274119
Outstanding requests per worker:
1416 1385 1447 1351 1569 1496 1538 1404 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159407.0,      797036,     717178,      79858,     625670,      91508,  82.397944, 232.400000, 275.200000, 350.400000,  91.429349,   0.323000, 521.833003, 676.798931
Outstanding requests per worker:
1861 1740 1816 1777 1744 1971 1856 1859 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  16:56   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:56   0:00 /usr/lib/linux
memcache      7  309  0.0 436928 142080 pts/0   Sl+  16:56   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:56   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20422185385      instructions:u            #    0.76  insn per cycle         
       27048704261      cycles:u                                                    
         110956102      armv8_pmuv3_0/br_mis_pred/:u                                   
        3158662264      armv8_pmuv3_0/br_pred/:u                                    

      41.790473078 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 162000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 162000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 162000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 162000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 162000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 162000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 162000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 162000 cpus 8
meanInterarrival 49
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2566844928
starting receive base loop
num_worker_connections 64
Creating worker on tid 1975185920
starting receive base loop
num_worker_connections 64
Creating worker on tid 1379267072
starting receive base loop
num_worker_connections 64
Creating worker on tid 783348224
starting receive base loop
num_worker_connections 64
Creating worker on tid 187429376
starting receive base loop
num_worker_connections 64
Creating worker on tid 3886477824
starting receive base loop
num_worker_connections 64
Creating worker on tid 3290558976
starting receive base loop
Created 512 connections total
Creating worker on tid 2694640128
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575393803.392228,       0.0,      495633,     445983,      49650,     305745,     140238,  16.383358,  40.600000,  59.400000,  88.700000,  20.816517,   0.000000, 288.949013, 503.588534
Outstanding requests per worker:
512 534 468 514 438 497 537 414 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162788.6,      813944,     732977,      80967,     564035,     168942,  31.621338,  81.900000, 100.900000, 139.600000,  31.553642,   0.312000, 220.434994, 595.347267
Outstanding requests per worker:
812 788 788 749 763 826 774 843 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162938.4,      814693,     732888,      81805,     590364,     142524,  43.925069, 130.000000, 154.100000, 200.900000,  50.358252,   0.353000, 333.662003, 635.445196
Outstanding requests per worker:
1058 1002 1034 947 1058 1034 867 1009 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162930.0,      814651,     732966,      81685,     605983,     126983,  54.681090, 170.300000, 204.800000, 264.100000,  68.285362,   0.274000, 417.715013, 658.537414
Outstanding requests per worker:
1186 1155 1247 1259 1152 1185 1326 1211 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162904.6,      814524,     732902,      81622,     617034,     115868,  63.878082, 204.900000, 241.300000, 309.000000,  81.774161,   0.273000, 531.325996, 675.026639
Outstanding requests per worker:
1430 1486 1310 1488 1518 1298 1607 1433 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162570.2,      812852,     731384,      81468,     623559,     107825,  83.079444, 221.300000, 261.900000, 338.400000,  86.952804,   0.412000, 544.969976, 686.187677
Outstanding requests per worker:
1767 1884 1855 2027 1873 1881 1828 1971 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162091.6,      810459,     729205,      81254,     628146,     101059, 100.392436, 234.700000, 273.500000, 340.900000,  89.785429,   0.453000, 565.464973, 696.258202
Outstanding requests per worker:
2669 2590 2581 2869 2514 2551 2542 2681 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:56   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   16:56   0:00 /usr/lib/linux
memcache      7  311  0.0 517248 161344 pts/0   Sl+  16:56   2:13 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  16:57   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20793290546      instructions:u            #    0.73  insn per cycle         
       28295051709      cycles:u                                                    
         120729390      armv8_pmuv3_0/br_mis_pred/:u                                   
        3233728664      armv8_pmuv3_0/br_pred/:u                                    

      43.051481208 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 164000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 164000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 164000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 164000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 164000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 164000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 164000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 164000 cpus 8
meanInterarrival 48
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2537943552
starting receive base loop
num_worker_connections 64
Creating worker on tid 1940320768
starting receive base loop
num_worker_connections 64
Creating worker on tid 1344401920
starting receive base loop
num_worker_connections 64
Creating worker on tid 748483072
starting receive base loop
num_worker_connections 64
Creating worker on tid 152564224
starting receive base loop
num_worker_connections 64
Creating worker on tid 3854234112
starting receive base loop
num_worker_connections 64
Creating worker on tid 3258315264
starting receive base loop
Created 512 connections total
Creating worker on tid 2662396416
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575393849.392274,       0.0,      487874,     439187,      48687,     300368,     138819,  34.969497,  89.300000, 106.200000, 154.500000,  40.173934,   0.000000, 395.649999, 500.903365
Outstanding requests per worker:
1611 1508 1582 1594 1608 1681 1583 1655 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163889.8,      819450,     737767,      81683,     566923,     170844, 124.894342, 199.000000, 227.300000, 295.200000,  56.079272,   0.608000, 534.963012, 593.861810
Outstanding requests per worker:
3362 3337 3309 3408 3416 3328 3441 3209 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165019.8,      825100,     742955,      82145,     598733,     144222, 187.027470, 292.800000, 335.500000, 416.900000,  76.687713,   1.039000, 635.047019, 635.893917
Outstanding requests per worker:
4302 4483 4270 4437 4347 4219 4587 4451 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165311.2,      826557,     743971,      82586,     615757,     128214, 231.151403, 374.700000, 435.100000, 570.100000, 104.068325,   3.548000, 883.943021, 659.703284
Outstanding requests per worker:
5348 5417 5170 5267 5046 5131 5374 5187 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165353.6,      826769,     744093,      82676,     626564,     117529, 271.331288, 450.600000, 542.600000, 716.300000, 131.202747,   4.834000, 1038.133025, 675.105639
Outstanding requests per worker:
6358 6260 5807 5819 5942 6047 6233 6130 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165379.8,      826900,     744588,      82312,     635156,     109432, 308.475121, 519.500000, 638.100000, 921.500000, 160.355351,  19.238999, 1284.592986, 686.943093
Outstanding requests per worker:
7102 7013 6505 6616 7025 6656 7008 7210 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164413.6,      822069,     739623,      82446,     637162,     102461, 354.804465, 631.300000, 755.100000, 1073.200000, 197.662367,   8.048000, 1611.296058, 697.268488
Outstanding requests per worker:
8642 8188 7766 7897 8644 7992 8789 8534 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:57   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:57   0:00 /usr/lib/linux
memcache      7  318  0.0 519296 165184 pts/0   Sl+  16:57   2:13 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:58   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21218571990      instructions:u            #    0.74  insn per cycle         
       28830885251      cycles:u                                                    
         124247724      armv8_pmuv3_0/br_mis_pred/:u                                   
        3313527735      armv8_pmuv3_0/br_pred/:u                                    

      42.651055778 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 166000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 166000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 166000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 166000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 166000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 166000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 166000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 166000 cpus 8
meanInterarrival 48
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2399334912
starting receive base loop
num_worker_connections 64
Creating worker on tid 1806103040
starting receive base loop
num_worker_connections 64
Creating worker on tid 1210184192
starting receive base loop
num_worker_connections 64
Creating worker on tid 614265344
starting receive base loop
num_worker_connections 64
Creating worker on tid 18346496
starting receive base loop
num_worker_connections 64
Creating worker on tid 3720016384
starting receive base loop
num_worker_connections 64
Creating worker on tid 3124097536
starting receive base loop
Created 512 connections total
Creating worker on tid 2528178688
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575393894.392319,       0.0,      384676,     346069,      38607,     232731,     113338,  59.629138, 118.400000, 137.900000, 206.300000,  48.576908,   0.000000, 446.960986, 488.569545
Outstanding requests per worker:
2106 1932 2083 2108 2018 1978 1963 2241 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164219.2,      821097,     739282,      81815,     562200,     177082, 141.208644, 212.100000, 243.200000, 306.400000,  55.078839,   0.613000, 550.583005, 585.142096
Outstanding requests per worker:
3550 3708 3734 3474 3414 3456 3708 3673 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164834.6,      824174,     741765,      82409,     595040,     146725, 200.830487, 312.500000, 363.800000, 473.100000,  82.912054,   1.513000, 684.700012, 631.533269
Outstanding requests per worker:
4541 4655 4794 4750 4894 4688 4916 4715 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165109.8,      825550,     743055,      82495,     612768,     130287, 252.441814, 406.200000, 484.500000, 645.200000, 114.766338,   5.442000, 1014.062047, 656.171094
Outstanding requests per worker:
5542 5673 5611 5719 5667 5723 5999 5896 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165017.4,      825088,     742621,      82467,     623603,     119018, 300.838120, 503.500000, 621.000000, 829.300000, 150.590310,  19.653000, 1163.179040, 672.781412
Outstanding requests per worker:
6656 6595 6989 6791 6689 6694 7036 6744 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165087.6,      825439,     743063,      82376,     632942,     110121, 348.170156, 609.700000, 731.200000, 1024.000000, 185.505017,  21.481000, 1373.206973, 686.145047
Outstanding requests per worker:
7659 7555 7862 7870 7950 7658 7665 7926 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164828.0,      824141,     741945,      82196,     638401,     103544, 392.667548, 738.700000, 899.200000, 1107.000000, 225.169961,  27.726000, 1445.168018, 695.334569
Outstanding requests per worker:
8706 8852 9370 8753 9482 8994 8416 8837 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:58   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:58   0:00 /usr/lib/linux
memcache      7  317  0.0 517248 168384 pts/0   Sl+  16:58   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  16:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20774849939      instructions:u            #    0.74  insn per cycle         
       28014288400      cycles:u                                                    
         120459968      armv8_pmuv3_0/br_mis_pred/:u                                   
        3238748343      armv8_pmuv3_0/br_pred/:u                                    

      41.791601280 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 168000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 168000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 168000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 168000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 168000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 168000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 168000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 168000 cpus 8
meanInterarrival 47
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2260398592
starting receive base loop
num_worker_connections 64
Creating worker on tid 1663824384
starting receive base loop
num_worker_connections 64
Creating worker on tid 1067905536
starting receive base loop
num_worker_connections 64
Creating worker on tid 471986688
starting receive base loop
num_worker_connections 64
Creating worker on tid 4171035136
starting receive base loop
num_worker_connections 64
Creating worker on tid 3575116288
starting receive base loop
num_worker_connections 64
Creating worker on tid 2981818880
starting receive base loop
Created 512 connections total
Creating worker on tid 2385900032
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575393939.392364,       0.0,      387710,     349024,      38686,     234342,     114682,  75.537516, 146.800000, 172.000000, 268.600000,  61.988067,   0.000000, 549.893022, 487.634217
Outstanding requests per worker:
2737 2738 2803 2657 2808 2772 2843 3367 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165461.6,      827309,     744463,      82846,     567053,     177410, 208.223108, 313.600000, 355.500000, 450.300000,  79.789390,   3.174000, 750.343978, 586.923261
Outstanding requests per worker:
6052 5530 5636 5709 5770 5732 6009 6124 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166096.2,      830482,     747415,      83067,     600239,     147176, 331.603364, 506.400000, 580.300000, 720.000000, 125.999265,  27.338000, 1002.251983, 632.510831
Outstanding requests per worker:
8495 8488 8219 8307 8110 8341 8659 8582 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166305.8,      831530,     748118,      83412,     617822,     130296, 449.200294, 705.100000, 800.800000, 970.800000, 182.454969,  67.752004, 1279.186964, 657.205250
Outstanding requests per worker:
11001 10727 10858 10869 10435 10651 11230 11028 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165731.6,      828659,     745384,      83275,     626483,     118901, 570.257305, 919.000000, 1044.900000, 1258.200000, 243.103212,  92.197999, 1657.196045, 673.316150
Outstanding requests per worker:
13891 13649 13672 13593 13370 13174 13816 14106 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165509.0,      827546,     744990,      82556,     634155,     110835, 707.470680, 1134.000000, 1295.200000, 1560.700000, 297.496993, 101.838000, 1924.247980, 685.669439
Outstanding requests per worker:
16835 16606 16599 16576 16227 16169 17059 16801 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164366.2,      821832,     739564,      82268,     636536,     103028, 854.804250, 1395.700000, 1561.100000, 1863.400000, 362.786268, 121.141002, 2242.296934, 695.927250
Outstanding requests per worker:
20742 20179 20607 20331 19551 19629 20705 20420 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:59   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   16:59   0:00 /usr/lib/linux
memcache      7  317  0.0 518272 171008 pts/0   Sl+  16:59   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20806821209      instructions:u            #    0.73  insn per cycle         
       28455478405      cycles:u                                                    
         120336364      armv8_pmuv3_0/br_mis_pred/:u                                   
        3238651857      armv8_pmuv3_0/br_pred/:u                                    

      41.450616353 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 170000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 170000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 170000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 170000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 170000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 170000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 170000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 170000 cpus 8
meanInterarrival 47
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1934029312
starting receive base loop
num_worker_connections 64
Creating worker on tid 1336340992
starting receive base loop
num_worker_connections 64
Creating worker on tid 740422144
starting receive base loop
num_worker_connections 64
Creating worker on tid 144503296
starting receive base loop
num_worker_connections 64
Creating worker on tid 3843551744
starting receive base loop
num_worker_connections 64
Creating worker on tid 3250254336
starting receive base loop
num_worker_connections 64
Creating worker on tid 2654335488
starting receive base loop
Created 512 connections total
Creating worker on tid 2058416640
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575393985.392410,       0.0,      491060,     441827,      49233,     302448,     139379,  48.875479, 121.600000, 142.900000, 195.800000,  52.303163,   0.000000, 387.629002, 502.524746
Outstanding requests per worker:
2520 2555 2498 2364 2579 2522 2561 2628 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165595.8,      827980,     745441,      82539,     572855,     172586, 191.920862, 295.800000, 337.700000, 438.100000,  78.694616,   0.742000, 712.741017, 594.187112
Outstanding requests per worker:
5371 5613 5506 5360 5429 5371 5274 5456 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166195.6,      830979,     747523,      83456,     603307,     144216, 312.885146, 483.300000, 560.400000, 711.500000, 124.186696,   9.766000, 969.303012, 635.996005
Outstanding requests per worker:
7751 8136 8182 7823 7993 7700 7965 8002 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166364.8,      831825,     748113,      83712,     619350,     128763, 429.114473, 681.200000, 786.200000, 977.900000, 179.068712,  30.477000, 1368.237019, 660.111665
Outstanding requests per worker:
10179 10618 10591 9739 10511 10184 10432 10628 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166233.6,      831169,     748143,      83026,     629950,     118193, 542.698030, 894.100000, 1016.500000, 1298.000000, 247.056640,  65.826997, 1652.727008, 675.414957
Outstanding requests per worker:
12875 13119 13191 11886 13114 12702 12899 13106 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165788.0,      828941,     746179,      82762,     636895,     109284, 664.088500, 1120.500000, 1266.600000, 1585.500000, 309.928572, 103.611000, 1901.965022, 687.557717
Outstanding requests per worker:
15439 16207 15719 14487 15895 15335 15956 16041 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164590.4,      822953,     740210,      82743,     637966,     102244, 808.952475, 1359.600000, 1521.300000, 1777.200000, 363.286812,  76.300003, 2138.967991, 696.736315
Outstanding requests per worker:
18920 19302 18986 18381 19785 19235 19374 19302 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:59   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   16:59   0:00 /usr/lib/linux
memcache      7  318  0.0 520320 168256 pts/0   Sl+  16:59   2:13 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:00   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21254612240      instructions:u            #    0.74  insn per cycle         
       28591915434      cycles:u                                                    
         120460596      armv8_pmuv3_0/br_mis_pred/:u                                   
        3318748388      armv8_pmuv3_0/br_pred/:u                                    

      42.831156392 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 172000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 172000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 172000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 172000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 172000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 172000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 172000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 172000 cpus 8
meanInterarrival 46
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2611212800
starting receive base loop
num_worker_connections 64
Creating worker on tid 2015490560
starting receive base loop
num_worker_connections 64
Creating worker on tid 1419571712
starting receive base loop
num_worker_connections 64
Creating worker on tid 823652864
starting receive base loop
num_worker_connections 64
Creating worker on tid 230355456
starting receive base loop
num_worker_connections 64
Creating worker on tid 3929403904
starting receive base loop
num_worker_connections 64
Creating worker on tid 3333485056
starting receive base loop
Created 512 connections total
Creating worker on tid 2737566208
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575394031.392456,       0.0,      494138,     444454,      49684,     304284,     140170,  63.654279, 150.800000, 176.200000, 265.600000,  68.056370,   0.000000, 576.404989, 501.641045
Outstanding requests per worker:
3292 3374 3404 3507 3459 3408 3260 4004 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166136.8,      830685,     748092,      82593,     574885,     173207, 276.543083, 420.300000, 478.700000, 594.200000, 106.349144,  10.757000, 900.283992, 593.783671
Outstanding requests per worker:
8471 8338 8069 8411 8431 8286 8294 8385 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166336.6,      831684,     748530,      83154,     604573,     143957, 487.670646, 720.300000, 800.000000, 968.000000, 169.148634,  77.307001, 1231.675029, 636.968713
Outstanding requests per worker:
13012 13207 12573 13417 13207 12902 12990 13374 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165648.8,      828245,     745522,      82723,     617371,     128151, 715.053768, 1030.100000, 1141.300000, 1360.900000, 233.687320, 111.477003, 1763.578057, 659.771096
Outstanding requests per worker:
18294 18478 17923 18388 18288 17798 18460 18435 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164898.2,      824492,     741573,      82919,     624756,     116817, 966.339813, 1352.400000, 1481.300000, 1741.500000, 292.347869, 183.751002, 2195.574999, 675.308906
Outstanding requests per worker:
23975 24038 23373 23824 23968 23794 23930 24314 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164247.0,      821236,     739147,      82089,     630840,     108307, 1233.283195, 1687.400000, 1837.900000, 2132.100000, 345.452634, 260.540009, 2633.445024, 687.690055
Outstanding requests per worker:
30177 30015 29524 30273 29779 29716 30236 29933 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163373.8,      816870,     734934,      81936,     633965,     100969, 1522.145172, 2075.100000, 2227.000000, 2558.900000, 400.654871, 396.890998, 2921.221972, 697.774163
Outstanding requests per worker:
36668 36791 36364 36772 36284 36092 36899 36589 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:00   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:00   0:00 /usr/lib/linux
memcache      7  311  0.0 521344 166144 pts/0   Sl+  17:00   2:13 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:01   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21220341523      instructions:u            #    0.73  insn per cycle         
       28903981377      cycles:u                                                    
         123012838      armv8_pmuv3_0/br_mis_pred/:u                                   
        3303612089      armv8_pmuv3_0/br_pred/:u                                    

      42.411186837 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 174000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 174000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 174000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 174000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 174000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 174000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 174000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 174000 cpus 8
meanInterarrival 45
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2576871936
starting receive base loop
num_worker_connections 64
Creating worker on tid 1983246848
starting receive base loop
num_worker_connections 64
Creating worker on tid 1387328000
starting receive base loop
num_worker_connections 64
Creating worker on tid 791409152
starting receive base loop
num_worker_connections 64
Creating worker on tid 195490304
starting receive base loop
num_worker_connections 64
Creating worker on tid 3894538752
starting receive base loop
num_worker_connections 64
Creating worker on tid 3298619904
starting receive base loop
Created 512 connections total
Creating worker on tid 2702701056
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575394076.392501,       0.0,      390526,     351780,      38746,     236579,     115201, 111.293618, 217.000000, 266.100000, 531.700000, 101.522863,   0.000000, 811.816990, 489.130670
Outstanding requests per worker:
4541 4526 4567 4438 4379 4482 4482 6961 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165981.8,      829910,     746821,      83089,     568847,     177974, 382.823179, 581.300000, 657.800000, 819.600000, 149.519674,  35.664000, 1224.516034, 586.573591
Outstanding requests per worker:
12016 11931 12165 12316 11782 11580 11590 14075 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164872.2,      824362,     741858,      82504,     595948,     145910, 724.923383, 1002.600000, 1097.300000, 1301.200000, 210.485200, 151.681006, 1671.836972, 632.656232
Outstanding requests per worker:
20388 20086 20003 20337 19750 19578 19691 22267 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164171.2,      820857,     738906,      81951,     609813,     129093, 1098.540937, 1462.000000, 1578.100000, 1794.300000, 268.244248, 337.727994, 2227.561951, 657.498668
Outstanding requests per worker:
28771 28760 28460 28827 28281 28044 28168 30893 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163513.6,      817569,     735670,      81899,     618234,     117436, 1492.829070, 1917.100000, 2049.800000, 2304.900000, 315.843012, 596.965015, 2710.973978, 672.749556
Outstanding requests per worker:
37828 37631 37326 37706 37493 36628 37103 39896 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163247.0,      816236,     734565,      81671,     625368,     109197, 1896.815302, 2391.300000, 2535.600000, 2796.800000, 365.473242, 834.196985, 3327.016115, 685.241601
Outstanding requests per worker:
47068 46576 46251 46717 46508 45602 46314 49337 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161824.6,      809124,     728053,      81071,     626585,     101468, 2314.187736, 2878.000000, 3032.400000, 3326.500000, 415.142264, 1077.154040, 3809.317112, 695.856980
Outstanding requests per worker:
57097 56630 55961 56853 56391 55486 56592 59261 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:01   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   17:01   0:00 /usr/lib/linux
memcache      7  311  0.0 517248 168512 pts/0   Sl+  17:01   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  17:02   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20581461750      instructions:u            #    0.73  insn per cycle         
       28110795066      cycles:u                                                    
         119115731      armv8_pmuv3_0/br_mis_pred/:u                                   
        3201621311      armv8_pmuv3_0/br_pred/:u                                    

      41.601687412 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 176000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 176000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 176000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 176000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 176000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 176000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 176000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 176000 cpus 8
meanInterarrival 45
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2297426432
starting receive base loop
num_worker_connections 64
Creating worker on tid 1704129024
starting receive base loop
num_worker_connections 64
Creating worker on tid 1110831616
starting receive base loop
num_worker_connections 64
Creating worker on tid 514912768
starting receive base loop
num_worker_connections 64
Creating worker on tid 4213961216
starting receive base loop
num_worker_connections 64
Creating worker on tid 3618042368
starting receive base loop
num_worker_connections 64
Creating worker on tid 3022123520
starting receive base loop
Created 512 connections total
Creating worker on tid 2426204672
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575394122.392547,       0.0,      389881,     351176,      38705,     235380,     115796, 103.689349, 200.100000, 235.900000, 471.200000,  90.740855,   0.000000, 700.909972, 486.126130
Outstanding requests per worker:
4165 4095 4044 4095 4034 4002 4140 6333 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167736.6,      838684,     754947,      83737,     575408,     179539, 341.509383, 520.000000, 586.500000, 738.900000, 132.194882,  30.187000, 1096.701980, 587.451964
Outstanding requests per worker:
10306 10384 10491 10507 10354 10535 10509 12098 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167571.2,      837857,     754141,      83716,     605874,     148267, 617.250460, 876.400000, 962.300000, 1163.000000, 194.976167, 155.184001, 1529.646039, 632.268483
Outstanding requests per worker:
16875 16663 16728 16856 17167 16722 16876 18417 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166840.4,      834203,     750810,      83393,     619583,     131227, 914.764611, 1252.300000, 1365.200000, 1576.900000, 255.880778, 203.595996, 1960.636020, 656.759014
Outstanding requests per worker:
23838 23414 23528 23807 23810 23607 23705 25382 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165986.4,      829933,     746467,      83466,     627719,     118748, 1238.821554, 1632.000000, 1756.700000, 1990.000000, 304.741460, 337.220013, 2472.145081, 674.628694
Outstanding requests per worker:
31260 30820 30674 31327 31430 30899 30929 32775 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165763.0,      828816,     745900,      82916,     635956,     109944, 1572.965755, 2041.200000, 2179.800000, 2431.000000, 349.610928, 489.895999, 2958.882093, 687.066538
Outstanding requests per worker:
38833 38496 38277 39075 38859 38351 38288 40093 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164428.4,      822143,     740036,      82107,     637008,     103028, 1919.949213, 2465.900000, 2618.100000, 2912.700000, 398.092960, 861.783981, 3397.114992, 695.787090
Outstanding requests per worker:
47138 46643 46773 47365 47143 46589 46732 48729 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:02   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   17:02   0:00 /usr/lib/linux
memcache      7  310  0.0 517248 168832 pts/0   Sl+  17:02   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:02   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20917776011      instructions:u            #    0.73  insn per cycle         
       28812047234      cycles:u                                                    
         122101239      armv8_pmuv3_0/br_mis_pred/:u                                   
        3250524875      armv8_pmuv3_0/br_pred/:u                                    

      41.810535907 seconds time elapsed

+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 6 threads, 150000 rps'
==> Bench: 65536 keys, 1024 conns, 6 threads, 150000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 150000 -k 65536 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 150000 -k 65536 -c 1024 -f 512 -w 6'
Starting client with -r 150000 -k 65536 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 150000 -k 65536 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 150000 -k 65536 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 150000 cpus 6
meanInterarrival 40
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1731392000
starting receive base loop
num_worker_connections 171
Creating worker on tid 272495104
starting receive base loop
num_worker_connections 171
Creating worker on tid 3107189248
starting receive base loop
num_worker_connections 170
Creating worker on tid 1649537536
starting receive base loop
num_worker_connections 170
Creating worker on tid 197325312
starting receive base loop
Created 1024 connections total
Creating worker on tid 3040080384
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575394167.392592,       0.0,      325775,     293231,      32544,     193909,      99322,  28.511843,  60.100000,  75.700000, 144.600000,  41.973302,   0.000000, 1054.942966, 476.739403
Outstanding requests per worker:
333 316 304 350 348 349 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  149996.9,      749985,     675063,      74922,     508497,     166566,  13.851057,  25.800000,  28.800000,  33.600000,   7.687293,   0.591000,  44.048000, 577.169005
Outstanding requests per worker:
356 338 351 373 322 354 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  149999.1,      749996,     674572,      75424,     537407,     137165,  14.246279,  26.600000,  29.700000,  34.600000,   7.938030,   0.549000,  43.985002, 624.988339
Outstanding requests per worker:
364 349 402 352 358 356 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150006.8,      750035,     674993,      75042,     553846,     121147,  14.538891,  27.200000,  30.500000,  35.700000,   8.128622,   0.370000,  46.579000, 650.885837
Outstanding requests per worker:
384 370 386 399 359 350 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150012.4,      750063,     675206,      74857,     563920,     111286,  14.703268,  27.500000,  30.800000,  36.200000,   8.210755,   0.554000,  46.634000, 667.337091
Outstanding requests per worker:
392 337 381 341 398 388 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150019.6,      750099,     674903,      75196,     571664,     103239,  14.827619,  27.800000,  31.200000,  36.500000,   8.302373,   0.622000,  46.590999, 680.543997
Outstanding requests per worker:
355 345 396 372 346 370 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150004.2,      750022,     675510,      74512,     578258,      97252,  14.977187,  28.000000,  31.500000,  36.900000,   8.410696,   0.655000,  47.826000, 690.217840
Outstanding requests per worker:
376 379 360 394 365 374 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  17:03   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:03   0:00 /usr/lib/linux
memcache      7  314  0.0 442048 153792 pts/0   Sl+  17:03   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       18293754161      instructions:u            #    0.70  insn per cycle         
       26146383483      cycles:u                                                    
         111983962      armv8_pmuv3_0/br_mis_pred/:u                                   
        2866796897      armv8_pmuv3_0/br_pred/:u                                    

      41.600689829 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 6 threads, 152000 rps'
==> Bench: 65536 keys, 1024 conns, 6 threads, 152000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 152000 -k 65536 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 152000 -k 65536 -c 1024 -f 512 -w 6'
Starting client with -r 152000 -k 65536 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 152000 -k 65536 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 152000 -k 65536 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 152000 cpus 6
meanInterarrival 39
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 996209152
starting receive base loop
num_worker_connections 171
Creating worker on tid 3829264896
starting receive base loop
num_worker_connections 171
Creating worker on tid 2368991744
starting receive base loop
num_worker_connections 170
Creating worker on tid 911340032
starting receive base loop
num_worker_connections 170
Creating worker on tid 3754095104
starting receive base loop
Created 1024 connections total
Creating worker on tid 2301882880
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575394212.392637,       0.0,      333640,     300185,      33455,     199118,     101067,  40.613016,  88.600000, 124.900000, 184.100000,  42.416425,   0.000000, 748.112977, 478.889781
Outstanding requests per worker:
417 464 384 417 426 445 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153852.4,      769263,     692169,      77094,     522643,     169526,  16.770065,  31.100000,  36.100000,  42.900000,   9.471403,   0.533000,  53.769998, 579.216495
Outstanding requests per worker:
404 448 456 456 425 434 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153844.0,      769221,     691912,      77309,     551523,     140389,  17.248995,  31.900000,  37.100000,  44.900000,   9.780594,   0.576000,  55.633999, 626.103143
Outstanding requests per worker:
459 424 438 443 449 464 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153851.4,      769258,     692243,      77015,     568398,     123845,  17.604104,  32.700000,  37.900000,  45.500000,   9.974538,   0.686000,  68.269998, 652.673154
Outstanding requests per worker:
456 438 458 438 479 454 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153866.2,      769332,     692383,      76949,     578765,     113618,  17.853466,  33.100000,  38.600000,  46.300000,  10.139160,   0.651000,  58.090001, 668.829437
Outstanding requests per worker:
469 432 455 452 454 434 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153846.2,      769232,     692676,      76556,     587030,     105646,  17.993776,  33.000000,  38.800000,  47.500000,  10.249214,   0.685000,  60.208999, 681.260249
Outstanding requests per worker:
537 440 487 433 464 440 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153864.0,      769321,     692519,      76802,     592878,      99641,  18.171383,  33.600000,  39.600000,  47.300000,  10.359797,   0.654000,  66.032000, 689.986205
Outstanding requests per worker:
461 422 461 490 470 457 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:03   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:03   0:00 /usr/lib/linux
memcache      7  306  0.0 445120 159552 pts/0   Sl+  17:03   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:04   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       18764099529      instructions:u            #    0.71  insn per cycle         
       26441973557      cycles:u                                                    
         109361058      armv8_pmuv3_0/br_mis_pred/:u                                   
        2934883090      armv8_pmuv3_0/br_pred/:u                                    

      41.860907153 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 6 threads, 154000 rps'
==> Bench: 65536 keys, 1024 conns, 6 threads, 154000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 154000 -k 65536 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 154000 -k 65536 -c 1024 -f 512 -w 6'
Starting client with -r 154000 -k 65536 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 154000 -k 65536 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 154000 -k 65536 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 154000 cpus 6
meanInterarrival 38
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 922284544
starting receive base loop
num_worker_connections 171
Creating worker on tid 3762156032
starting receive base loop
num_worker_connections 171
Creating worker on tid 2301882880
starting receive base loop
num_worker_connections 170
Creating worker on tid 844231168
starting receive base loop
num_worker_connections 170
Creating worker on tid 3686986240
starting receive base loop
Created 1024 connections total
Creating worker on tid 2234774016
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575394259.392684,       0.0,      398905,     359077,      39828,     242585,     116492,  25.917184,  57.000000,  71.000000, 127.500000,  31.231381,   0.000000, 790.046990, 491.191129
Outstanding requests per worker:
519 484 519 508 493 485 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157899.2,      789497,     710457,      79040,     540170,     170287,  19.051711,  34.800000,  41.400000,  49.500000,  10.682188,   0.642000,  74.588999, 585.468166
Outstanding requests per worker:
491 512 495 534 524 477 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157889.2,      789447,     710432,      79015,     569072,     141360,  19.532570,  35.600000,  42.800000,  50.500000,  10.947561,   0.669000,  80.329001, 630.425993
Outstanding requests per worker:
527 545 487 521 501 544 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157903.8,      789520,     710575,      78945,     585061,     125514,  19.954259,  36.000000,  43.700000,  52.000000,  11.180293,   0.778000,  79.599999, 654.933205
Outstanding requests per worker:
516 513 532 547 545 539 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157896.2,      789482,     710506,      78976,     595004,     115502,  20.178763,  36.700000,  44.600000,  51.800000,  11.314558,   0.673000,  84.778003, 670.984048
Outstanding requests per worker:
542 518 523 539 516 600 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157915.8,      789580,     710471,      79109,     603679,     106792,  20.295161,  36.600000,  44.700000,  52.600000,  11.355630,   0.711000,  79.677001, 684.078313
Outstanding requests per worker:
577 525 556 503 513 536 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157904.6,      789524,     710499,      79025,     609876,     100623,  20.476247,  36.900000,  45.100000,  53.000000,  11.459651,   0.708000,  72.218999, 693.058635
Outstanding requests per worker:
513 547 537 562 502 587 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:04   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:04   0:00 /usr/lib/linux
memcache      7  304  0.0 449216 163904 pts/0   Sl+  17:04   2:11 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:05   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19558113324      instructions:u            #    0.72  insn per cycle         
       27078297248      cycles:u                                                    
         110410343      armv8_pmuv3_0/br_mis_pred/:u                                   
        3061874932      armv8_pmuv3_0/br_pred/:u                                    

      42.921474736 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 6 threads, 156000 rps'
==> Bench: 65536 keys, 1024 conns, 6 threads, 156000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 156000 -k 65536 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 156000 -k 65536 -c 1024 -f 512 -w 6'
Starting client with -r 156000 -k 65536 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 156000 -k 65536 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 156000 -k 65536 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 156000 cpus 6
meanInterarrival 38
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1309733376
starting receive base loop
num_worker_connections 171
Creating worker on tid 4148687360
starting receive base loop
num_worker_connections 171
Creating worker on tid 2688414208
starting receive base loop
num_worker_connections 170
Creating worker on tid 1228141056
starting receive base loop
num_worker_connections 170
Creating worker on tid 4073517568
starting receive base loop
Created 1024 connections total
Creating worker on tid 2621305344
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575394304.392729,       0.0,      351381,     316176,      35205,     210929,     105247,  55.036055, 126.900000, 160.800000, 239.000000,  60.333769,   0.000000, 1016.031027, 483.293732
Outstanding requests per worker:
756 727 719 714 755 778 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  158147.6,      790739,     711830,      78909,     538892,     172938,  20.852824,  38.200000,  45.900000,  55.100000,  12.445595,   0.715000, 204.549000, 581.713165
Outstanding requests per worker:
538 541 546 579 537 540 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157881.4,      789408,     710353,      79055,     568717,     141636,  20.980034,  37.500000,  46.200000,  55.000000,  11.816368,   0.578000,  89.933001, 629.341995
Outstanding requests per worker:
599 528 567 576 570 551 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157912.0,      789561,     710728,      78833,     584511,     126217,  21.297735,  38.100000,  47.100000,  56.000000,  12.032706,   0.678000,  95.936999, 653.266054
Outstanding requests per worker:
587 563 562 531 574 548 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157898.2,      789492,     710443,      79049,     595889,     114554,  21.576933,  38.200000,  47.700000,  56.800000,  12.191026,   0.629000,  96.662998, 671.669413
Outstanding requests per worker:
632 538 552 558 564 577 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157902.0,      789511,     710397,      79114,     603531,     106866,  21.652542,  38.300000,  47.800000,  57.000000,  12.194303,   0.695000,  82.416996, 683.321173
Outstanding requests per worker:
566 548 591 606 585 544 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157908.8,      789545,     710733,      78812,     610423,     100310,  21.935489,  38.900000,  48.500000,  57.400000,  12.363004,   0.746000,  96.770003, 694.088572
Outstanding requests per worker:
604 519 596 577 550 565 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:05   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:05   0:00 /usr/lib/linux
memcache      7  315  0.0 447168 164608 pts/0   Sl+  17:05   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:05   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19412454127      instructions:u            #    0.72  insn per cycle         
       26805839659      cycles:u                                                    
         115000210      armv8_pmuv3_0/br_mis_pred/:u                                   
        3020691323      armv8_pmuv3_0/br_pred/:u                                    

      41.930306701 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 6 threads, 158000 rps'
==> Bench: 65536 keys, 1024 conns, 6 threads, 158000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 158000 -k 65536 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 158000 -k 65536 -c 1024 -f 512 -w 6'
Starting client with -r 158000 -k 65536 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 158000 -k 65536 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 158000 -k 65536 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 158000 cpus 6
meanInterarrival 37
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1722610176
starting receive base loop
num_worker_connections 171
Creating worker on tid 264434176
starting receive base loop
num_worker_connections 171
Creating worker on tid 3099128320
starting receive base loop
num_worker_connections 170
Creating worker on tid 1638855168
starting receive base loop
num_worker_connections 170
Creating worker on tid 189264384
starting receive base loop
Created 1024 connections total
Creating worker on tid 3032019456
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575394349.392774,       0.0,      343636,     309229,      34407,     205269,     103960,  79.529646, 165.800000, 199.700000, 400.600000,  96.799732,   0.000000, 1624.668002, 479.809274
Outstanding requests per worker:
1567 1551 1558 1560 1560 2906 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163578.4,      817893,     736567,      81326,     556955,     179612,  28.361167,  50.000000,  60.400000, 131.200000,  35.937563,   0.854000, 1309.913039, 580.774346
Outstanding requests per worker:
622 617 636 615 591 600 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162156.8,      810785,     729840,      80945,     584102,     145738,  22.927785,  39.500000,  50.300000,  59.700000,  12.567059,   0.728000, 102.889001, 629.156619
Outstanding requests per worker:
645 616 620 643 597 665 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162179.6,      810899,     729575,      81324,     600595,     128980,  23.437711,  40.400000,  51.000000,  61.900000,  12.908587,   0.837000, 112.295002, 654.648809
Outstanding requests per worker:
613 604 613 672 625 655 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162144.0,      810721,     729838,      80883,     611485,     118353,  23.586489,  40.400000,  51.500000,  61.800000,  12.916063,   0.902000, 103.882998, 670.409003
Outstanding requests per worker:
681 691 659 620 616 645 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162189.4,      810948,     729992,      80956,     620791,     109201,  23.797692,  40.500000,  51.900000,  62.200000,  13.002883,   0.805000, 111.134000, 683.811240
Outstanding requests per worker:
658 670 631 621 624 632 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162184.4,      810923,     729820,      81103,     626866,     102954,  24.099089,  41.300000,  52.400000,  62.900000,  13.193449,   0.742000, 134.832993, 692.782731
Outstanding requests per worker:
667 662 620 632 645 574 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:06   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:06   0:00 /usr/lib/linux
memcache      7  306  0.0 449216 165760 pts/0   Sl+  17:06   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:06   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19833471285      instructions:u            #    0.73  insn per cycle         
       27350304701      cycles:u                                                    
         114606756      armv8_pmuv3_0/br_mis_pred/:u                                   
        3095187692      armv8_pmuv3_0/br_pred/:u                                    

      41.641053906 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 6 threads, 160000 rps'
==> Bench: 65536 keys, 1024 conns, 6 threads, 160000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 160000 -k 65536 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 160000 -k 65536 -c 1024 -f 512 -w 6'
Starting client with -r 160000 -k 65536 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 160000 -k 65536 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 160000 -k 65536 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 160000 cpus 6
meanInterarrival 37
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 993391104
starting receive base loop
num_worker_connections 171
Creating worker on tid 3829264896
starting receive base loop
num_worker_connections 171
Creating worker on tid 2368991744
starting receive base loop
num_worker_connections 170
Creating worker on tid 911340032
starting receive base loop
num_worker_connections 170
Creating worker on tid 3754095104
starting receive base loop
Created 1024 connections total
Creating worker on tid 2301882880
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575394395.392820,       0.0,      348229,     313307,      34922,     208791,     104516,  73.612697, 152.400000, 186.800000, 520.900000, 102.987922,   0.000000, 1485.106945, 482.110792
Outstanding requests per worker:
1264 1236 1283 1289 1331 2933 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163312.0,      816561,     735312,      81249,     557217,     178095,  26.733884,  46.900000,  55.500000, 112.000000,  36.926245,   0.752000, 1173.251987, 582.168054
Outstanding requests per worker:
621 608 592 600 616 620 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162169.6,      810849,     729817,      81032,     584679,     145138,  22.636471,  39.000000,  49.800000,  59.100000,  12.503103,   0.837000,  94.740003, 630.438366
Outstanding requests per worker:
607 625 629 630 590 632 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162162.2,      810812,     729272,      81540,     600301,     128971,  23.123798,  39.800000,  50.900000,  60.800000,  12.818757,   0.917000, 106.675997, 654.418737
Outstanding requests per worker:
640 639 641 660 606 631 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162172.4,      810863,     729795,      81068,     612983,     116812,  23.307434,  39.900000,  51.400000,  61.300000,  12.867997,   0.889000,  96.262001, 672.738553
Outstanding requests per worker:
607 604 656 660 681 613 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162184.6,      810924,     729823,      81101,     620519,     109304,  23.535870,  40.100000,  51.900000,  61.500000,  12.950060,   0.682000, 109.549001, 684.102981
Outstanding requests per worker:
672 614 612 634 657 589 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162152.6,      810764,     730006,      80758,     628091,     101915,  23.653047,  40.200000,  51.900000,  62.200000,  13.046830,   0.974000, 119.810998, 694.858286
Outstanding requests per worker:
621 628 650 614 712 685 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:06   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:06   0:00 /usr/lib/linux
memcache      7  307  0.0 450240 160384 pts/0   Sl+  17:06   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:07   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19850754052      instructions:u            #    0.72  insn per cycle         
       27597481192      cycles:u                                                    
         115972841      armv8_pmuv3_0/br_mis_pred/:u                                   
        3097436056      armv8_pmuv3_0/br_pred/:u                                    

      42.021374448 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 6 threads, 162000 rps'
==> Bench: 65536 keys, 1024 conns, 6 threads, 162000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 162000 -k 65536 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 162000 -k 65536 -c 1024 -f 512 -w 6'
Starting client with -r 162000 -k 65536 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 162000 -k 65536 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 162000 -k 65536 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 162000 cpus 6
meanInterarrival 37
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1079505408
starting receive base loop
num_worker_connections 171
Creating worker on tid 3920556544
starting receive base loop
num_worker_connections 171
Creating worker on tid 2462904832
starting receive base loop
num_worker_connections 170
Creating worker on tid 1002631680
starting receive base loop
num_worker_connections 170
Creating worker on tid 3845386752
starting receive base loop
Created 1024 connections total
Creating worker on tid 2395795968
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575394440.392865,       0.0,      338283,     304362,      33921,     202686,     101676,  75.178533, 140.500000, 189.700000, 948.400000, 152.136967,   0.000000, 1982.382059, 480.619121
Outstanding requests per worker:
1165 1142 1256 1158 1226 8484 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164328.2,      821642,     739977,      81665,     560429,     179548,  43.959086,  53.600000,  65.200000, 789.600000, 141.295469,   0.752000, 2368.473053, 581.694497
Outstanding requests per worker:
598 604 600 666 621 608 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162177.0,      810886,     729893,      80993,     584903,     144990,  22.940225,  39.600000,  50.100000,  59.800000,  12.602802,   0.610000, 113.202997, 630.089634
Outstanding requests per worker:
616 590 626 618 648 632 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162162.6,      810814,     729328,      81486,     601488,     127840,  23.402735,  40.200000,  51.200000,  61.300000,  12.854818,   0.729000, 111.869998, 656.214558
Outstanding requests per worker:
629 615 606 631 647 654 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162156.0,      810781,     729973,      80808,     612375,     117598,  24.007127,  41.800000,  51.800000,  63.800000,  13.340321,   0.880000, 122.755997, 672.980160
Outstanding requests per worker:
625 655 649 624 653 684 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162186.8,      810935,     729764,      81171,     621022,     108742,  24.069862,  41.000000,  52.300000,  63.800000,  13.215242,   0.838000, 111.028999, 684.710464
Outstanding requests per worker:
649 643 634 611 658 656 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161966.2,      809832,     728705,      81127,     626086,     102619,  24.109046,  41.200000,  52.400000,  63.800000,  13.275930,   0.951000, 109.366998, 694.005186
Outstanding requests per worker:
821 814 809 825 829 844 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:07   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:07   0:00 /usr/lib/linux
memcache      7  313  0.0 514176 160000 pts/0   Sl+  17:07   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19881019537      instructions:u            #    0.72  insn per cycle         
       27532047389      cycles:u                                                    
         116478834      armv8_pmuv3_0/br_mis_pred/:u                                   
        3098309324      armv8_pmuv3_0/br_pred/:u                                    

      41.621661541 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 6 threads, 164000 rps'
==> Bench: 65536 keys, 1024 conns, 6 threads, 164000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 164000 -k 65536 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 164000 -k 65536 -c 1024 -f 512 -w 6'
Starting client with -r 164000 -k 65536 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 164000 -k 65536 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 164000 -k 65536 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 164000 cpus 6
meanInterarrival 36
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1310126592
starting receive base loop
num_worker_connections 171
Creating worker on tid 4148687360
starting receive base loop
num_worker_connections 171
Creating worker on tid 2688414208
starting receive base loop
num_worker_connections 170
Creating worker on tid 1228141056
starting receive base loop
num_worker_connections 170
Creating worker on tid 4073517568
starting receive base loop
Created 1024 connections total
Creating worker on tid 2621305344
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575394485.392910,       0.0,      335150,     301805,      33345,     201227,     100578,  96.174619, 167.700000, 216.200000, 1045.400000, 164.002119,   0.000000, 1946.498036, 482.923033
Outstanding requests per worker:
2127 2233 2128 2117 2142 13276 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169832.0,      849161,     764056,      85105,     579556,     184500,  95.273678, 148.100000, 178.000000, 1145.000000, 185.977271,   1.643000, 2606.327057, 582.430482
Outstanding requests per worker:
1275 1314 1545 1308 1490 1335 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166877.6,      834389,     750594,      83795,     601421,     149173,  44.984922,  90.300000, 120.900000, 161.200000,  33.315088,   0.846000, 282.977998, 630.327561
Outstanding requests per worker:
1223 1178 1158 1158 1225 1336 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166681.2,      833407,     750018,      83389,     618289,     131729,  43.036984,  75.200000, 101.900000, 142.300000,  27.738533,   1.187000, 232.658997, 655.664720
Outstanding requests per worker:
1103 1235 1343 1263 1195 1165 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166539.0,      832696,     749092,      83604,     629079,     120013,  46.677521,  87.200000, 113.700000, 154.700000,  30.949393,   1.586000, 245.611995, 672.693590
Outstanding requests per worker:
1333 1355 1366 1303 1408 1280 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166677.8,      833390,     750099,      83291,     638783,     111316,  46.445598,  87.600000, 114.900000, 154.600000,  31.283824,   1.710000, 260.591000, 685.934526
Outstanding requests per worker:
1284 1331 1336 1277 1342 1482 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165666.8,      828335,     745272,      83063,     641081,     104191,  54.599273, 111.600000, 135.500000, 167.900000,  36.999701,   1.537000, 270.460993, 694.686298
Outstanding requests per worker:
2178 2144 2170 2197 2196 2240 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:08   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   17:08   0:00 /usr/lib/linux
memcache      8  306  0.0 517248 170624 pts/0   Sl+  17:08   2:08 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  17:09   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       20531719995      instructions:u            #    0.73  insn per cycle         
       27980382877      cycles:u                                                    
         118698936      armv8_pmuv3_0/br_mis_pred/:u                                   
        3193121454      armv8_pmuv3_0/br_pred/:u                                    

      41.900162950 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 6 threads, 166000 rps'
==> Bench: 65536 keys, 1024 conns, 6 threads, 166000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 166000 -k 65536 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 166000 -k 65536 -c 1024 -f 512 -w 6'
Starting client with -r 166000 -k 65536 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 166000 -k 65536 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 166000 -k 65536 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 166000 cpus 6
meanInterarrival 36
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1311633920
starting receive base loop
num_worker_connections 171
Creating worker on tid 4148687360
starting receive base loop
num_worker_connections 171
Creating worker on tid 2688414208
starting receive base loop
num_worker_connections 170
Creating worker on tid 1228141056
starting receive base loop
num_worker_connections 170
Creating worker on tid 4073517568
starting receive base loop
Created 1024 connections total
Creating worker on tid 2621305344
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575394530.392955,       0.0,      334602,     301195,      33407,     199955,     101240, 101.441412, 181.900000, 229.900000, 925.700000, 149.764057,   0.000000, 1978.181005, 479.135460
Outstanding requests per worker:
2523 2497 2502 2558 2423 8732 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169519.8,      847600,     763157,      84443,     578804,     184353,  72.271853, 143.500000, 170.600000, 576.900000, 110.201095,   1.300000, 1943.882942, 582.735970
Outstanding requests per worker:
1127 1143 1142 1209 1129 1292 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166867.4,      834338,     750839,      83499,     602302,     148537,  38.701084,  74.900000, 109.500000, 153.700000,  30.764787,   1.162000, 322.999001, 631.586570
Outstanding requests per worker:
1062 975 956 994 1047 1052 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166622.6,      833114,     749561,      83553,     617976,     131585,  36.653431,  65.500000,  80.600000, 127.700000,  23.761465,   0.997000, 223.160997, 655.781868
Outstanding requests per worker:
1028 1082 1063 1104 1014 1112 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166588.6,      832944,     749651,      83293,     630429,     119222,  40.167228,  69.300000,  88.900000, 129.400000,  24.618675,   1.148000, 231.252000, 673.653907
Outstanding requests per worker:
1161 1182 1156 1162 1022 1152 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166565.2,      832827,     749747,      83080,     638140,     111607,  42.567188,  76.600000, 103.900000, 149.200000,  28.932466,   1.036000, 250.409991, 685.386678
Outstanding requests per worker:
1219 1209 1216 1310 1189 1264 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165200.8,      826005,     743571,      82434,     640027,     103544,  54.710226, 120.000000, 148.000000, 187.800000,  42.078369,   1.067000, 363.296986, 696.084009
Outstanding requests per worker:
2451 2518 2286 2481 2689 2386 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:09   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   17:09   0:00 /usr/lib/linux
memcache      7  305  0.0 518272 171392 pts/0   Sl+  17:09   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:09   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       20553907559      instructions:u            #    0.73  insn per cycle         
       28000525227      cycles:u                                                    
         118937448      armv8_pmuv3_0/br_mis_pred/:u                                   
        3189596425      armv8_pmuv3_0/br_pred/:u                                    

      41.700819913 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 6 threads, 168000 rps'
==> Bench: 65536 keys, 1024 conns, 6 threads, 168000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 168000 -k 65536 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 168000 -k 65536 -c 1024 -f 512 -w 6'
Starting client with -r 168000 -k 65536 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 168000 -k 65536 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 168000 -k 65536 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 168000 cpus 6
meanInterarrival 35
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1397551616
starting receive base loop
num_worker_connections 171
Creating worker on tid 4231918080
starting receive base loop
num_worker_connections 171
Creating worker on tid 2771644928
starting receive base loop
num_worker_connections 170
Creating worker on tid 1313993216
starting receive base loop
num_worker_connections 170
Creating worker on tid 4156748288
starting receive base loop
Created 1024 connections total
Creating worker on tid 2704536064
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575394577.393002,       0.0,      412608,     371374,      41234,     251060,     120314,  73.654518, 145.300000, 176.900000, 854.400000, 140.886088,   0.000000, 1893.131018, 492.459001
Outstanding requests per worker:
2700 2799 2562 2735 2806 9596 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172393.0,      861966,     776278,      85688,     592735,     183543, 123.972183, 184.800000, 234.600000, 865.100000, 136.606573,   2.684000, 1855.901003, 588.460302
Outstanding requests per worker:
2961 2749 3053 2969 3048 3648 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171547.4,      857738,     771694,      86044,     621435,     150259, 104.211558, 218.400000, 262.900000, 347.600000,  83.450308,   3.389000, 1155.583024, 634.634051
Outstanding requests per worker:
2947 3097 2807 2872 2998 3184 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171116.8,      855585,     770113,      85472,     637560,     132553, 108.999737, 256.100000, 299.600000, 388.000000,  92.171325,   2.327000, 801.201999, 660.261749
Outstanding requests per worker:
3113 3293 3287 3042 3453 3362 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170944.8,      854725,     769096,      85629,     647750,     121346, 120.219382, 274.900000, 322.700000, 409.400000,  97.664837,   3.420000, 665.449023, 675.510443
Outstanding requests per worker:
3602 3650 3676 3588 3738 3822 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170310.8,      851555,     766478,      85077,     654076,     112402, 143.282620, 302.800000, 364.900000, 467.300000, 105.445467,   3.547000, 754.087985, 687.995602
Outstanding requests per worker:
4780 4721 4723 4358 4608 4525 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169616.8,      848085,     762858,      85227,     657523,     105335, 188.913440, 352.300000, 409.100000, 515.800000, 112.542318,   3.379000, 785.853982, 697.791842
Outstanding requests per worker:
6068 6167 6089 5996 6285 6240 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:09   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:09   0:00 /usr/lib/linux
memcache      7  304  0.0 521344 178304 pts/0   Sl+  17:09   2:11 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:10   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21568804993      instructions:u            #    0.72  insn per cycle         
       30090299784      cycles:u                                                    
         125943416      armv8_pmuv3_0/br_mis_pred/:u                                   
        3369458386      armv8_pmuv3_0/br_pred/:u                                    

      42.971983772 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 6 threads, 170000 rps'
==> Bench: 65536 keys, 1024 conns, 6 threads, 170000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 170000 -k 65536 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 170000 -k 65536 -c 1024 -f 512 -w 6'
Starting client with -r 170000 -k 65536 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 170000 -k 65536 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 170000 -k 65536 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 170000 cpus 6
meanInterarrival 35
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 979038720
starting receive base loop
num_worker_connections 171
Creating worker on tid 3813143040
starting receive base loop
num_worker_connections 171
Creating worker on tid 2352869888
starting receive base loop
num_worker_connections 170
Creating worker on tid 892596736
starting receive base loop
num_worker_connections 170
Creating worker on tid 3737973248
starting receive base loop
Created 1024 connections total
Creating worker on tid 2285761024
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575394622.393047,       0.0,      341109,     306907,      34202,     204174,     102733, 105.234345, 186.200000, 239.800000, 1078.500000, 171.010721,   0.000000, 1976.295948, 481.162078
Outstanding requests per worker:
2901 2795 2874 2912 2955 19009 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170484.0,      852421,     767249,      85172,     581987,     185262, 218.828448, 274.200000, 632.100000, 2051.600000, 334.795313,   3.763000, 3361.447096, 582.943469
Outstanding requests per worker:
5041 5105 4885 5071 5158 12987 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170950.2,      854752,     769342,      85410,     616865,     152477, 232.938613, 346.300000, 428.700000, 1771.200000, 258.332856,   3.134000, 3099.334002, 630.724535
Outstanding requests per worker:
6055 6063 5963 5982 6125 10544 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170922.6,      854614,     769127,      85487,     635025,     134102, 245.351623, 397.100000, 488.500000, 1486.000000, 226.422500,   3.305000, 2983.458042, 657.222281
Outstanding requests per worker:
6583 6306 6700 6589 7045 10152 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170475.6,      852379,     766611,      85768,     645562,     121049, 266.675562, 460.700000, 550.700000, 1337.800000, 217.985584,   4.116000, 2712.737083, 675.222264
Outstanding requests per worker:
7628 7586 7326 7501 7862 10305 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170814.0,      854071,     768640,      85431,     655447,     113193, 290.539482, 512.800000, 619.000000, 1117.700000, 218.138753,   5.457000, 2773.139954, 686.976824
Outstanding requests per worker:
8136 7862 8231 8154 8468 10502 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169234.8,      846175,     761355,      84820,     655812,     105543, 321.959247, 546.600000, 665.300000, 1042.800000, 220.812954,   4.357000, 2746.061087, 696.704872
Outstanding requests per worker:
9946 9755 10196 9575 10547 12397 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:10   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:10   0:00 /usr/lib/linux
memcache      7  306  0.0 520320 189248 pts/0   Sl+  17:10   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:11   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21417388118      instructions:u            #    0.72  insn per cycle         
       29823983376      cycles:u                                                    
         125246353      armv8_pmuv3_0/br_mis_pred/:u                                   
        3341066813      armv8_pmuv3_0/br_pred/:u                                    

      41.831792881 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 6 threads, 172000 rps'
==> Bench: 65536 keys, 1024 conns, 6 threads, 172000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 172000 -k 65536 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 172000 -k 65536 -c 1024 -f 512 -w 6'
Starting client with -r 172000 -k 65536 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 172000 -k 65536 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 172000 -k 65536 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 172000 cpus 6
meanInterarrival 34
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1074917888
starting receive base loop
num_worker_connections 171
Creating worker on tid 3912495616
starting receive base loop
num_worker_connections 171
Creating worker on tid 2454843904
starting receive base loop
num_worker_connections 170
Creating worker on tid 994570752
starting receive base loop
num_worker_connections 170
Creating worker on tid 3837325824
starting receive base loop
Created 1024 connections total
Creating worker on tid 2385113600
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575394667.393092,       0.0,      340795,     306732,      34063,     204538,     102194, 112.022389, 194.500000, 248.000000, 1136.000000, 177.507329,   0.000000, 1989.344001, 481.815334
Outstanding requests per worker:
3304 3287 3283 3408 3402 24964 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172492.4,      862463,     776233,      86230,     588704,     187529, 308.526773, 391.800000, 1129.600000, 2431.800000, 420.203595,   3.219000, 3660.248995, 582.696666
Outstanding requests per worker:
7649 7797 7704 7813 8123 22546 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174241.0,      871206,     783969,      87237,     630242,     153727, 381.188880, 502.800000, 777.100000, 2413.700000, 357.672645,  11.952000, 3286.325932, 633.419182
Outstanding requests per worker:
9935 10269 9959 10069 10791 21816 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174567.2,      872837,     785195,      87642,     648896,     136299, 439.511985, 608.200000, 758.700000, 2354.300000, 347.022740,  23.798000, 3461.410046, 658.015954
Outstanding requests per worker:
11880 11849 11661 12172 12596 22266 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174450.2,      872252,     784784,      87468,     660854,     123930, 496.204899, 716.600000, 884.100000, 2344.800000, 352.988541,  27.288999, 3667.165995, 675.388907
Outstanding requests per worker:
13417 13700 13433 13584 14670 23783 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174515.0,      872576,     785104,      87472,     670038,     115066, 551.868756, 842.800000, 1048.100000, 2519.200000, 376.095905,  40.047999, 3690.263033, 687.621547
Outstanding requests per worker:
15005 15177 15391 15074 16376 25399 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173393.4,      866968,     779977,      86991,     672740,     107237, 618.611115, 982.800000, 1179.500000, 2507.600000, 399.275948,   7.754000, 4000.977993, 697.751314
Outstanding requests per worker:
17311 17858 17767 17533 19309 28102 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:11   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   17:11   0:00 /usr/lib/linux
memcache      8  314  0.0 522368 196544 pts/0   Sl+  17:11   2:08 memcached -t 4
memcache     19  0.0  0.0   6656  4416 pts/1    Rs+  17:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21770895945      instructions:u            #    0.72  insn per cycle         
       30090799755      cycles:u                                                    
         123920911      armv8_pmuv3_0/br_mis_pred/:u                                   
        3400132918      armv8_pmuv3_0/br_pred/:u                                    

      41.760966534 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 6 threads, 174000 rps'
==> Bench: 65536 keys, 1024 conns, 6 threads, 174000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 174000 -k 65536 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 174000 -k 65536 -c 1024 -f 512 -w 6'
Starting client with -r 174000 -k 65536 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 174000 -k 65536 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 174000 -k 65536 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 174000 cpus 6
meanInterarrival 34
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 976941568
starting receive base loop
num_worker_connections 171
Creating worker on tid 3813143040
starting receive base loop
num_worker_connections 171
Creating worker on tid 2352869888
starting receive base loop
num_worker_connections 170
Creating worker on tid 892596736
starting receive base loop
num_worker_connections 170
Creating worker on tid 3737973248
starting receive base loop
Created 1024 connections total
Creating worker on tid 2285761024
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575394712.393137,       0.0,      347277,     312771,      34506,     208827,     103944, 103.278940, 186.000000, 248.000000, 1104.700000, 178.822821,   0.000000, 1990.293980, 483.535094
Outstanding requests per worker:
2829 2760 2808 2814 2934 26553 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172721.6,      863609,     777060,      86549,     590106,     186954, 306.131998, 426.400000, 1308.300000, 2300.100000, 418.066362,   5.631000, 3087.105036, 584.788311
Outstanding requests per worker:
7520 7343 7421 7576 7733 21959 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174676.8,      873385,     785588,      87797,     631771,     153817, 368.975531, 525.900000, 912.000000, 1925.900000, 313.939253,   6.660000, 2595.599890, 633.813304
Outstanding requests per worker:
9768 9731 9592 9672 10104 19709 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175097.8,      875490,     788081,      87409,     652012,     136069, 410.554517, 615.100000, 818.300000, 1648.900000, 257.858632,  17.707000, 2410.017014, 659.453399
Outstanding requests per worker:
11104 11313 11390 11226 11756 18726 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174892.0,      874461,     787154,      87307,     663601,     123553, 449.968858, 704.700000, 889.200000, 1503.400000, 247.346471,  33.149000, 2402.764082, 675.976951
Outstanding requests per worker:
12430 12746 12617 13461 13081 19164 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175075.0,      875376,     787835,      87541,     672574,     115261, 492.826075, 792.700000, 1007.500000, 1411.300000, 253.928906,  22.458000, 2460.069895, 688.192586
Outstanding requests per worker:
13564 14383 14142 14380 14626 19489 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174110.8,      870555,     783043,      87512,     675381,     107662, 544.154725, 887.400000, 1064.300000, 1590.000000, 272.836564,  47.683999, 2907.124996, 697.967205
Outstanding requests per worker:
15806 16275 15757 16465 17036 21105 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:12   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:12   0:00 /usr/lib/linux
memcache      7  307  0.0 521344 192832 pts/0   Sl+  17:12   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21878721830      instructions:u            #    0.72  insn per cycle         
       30223681196      cycles:u                                                    
         123461905      armv8_pmuv3_0/br_mis_pred/:u                                   
        3411260001      armv8_pmuv3_0/br_pred/:u                                    

      42.200941360 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 6 threads, 176000 rps'
==> Bench: 65536 keys, 1024 conns, 6 threads, 176000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 176000 -k 65536 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 176000 -k 65536 -c 1024 -f 512 -w 6'
Starting client with -r 176000 -k 65536 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 176000 -k 65536 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 176000 -k 65536 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 176000 cpus 6
meanInterarrival 34
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1283387904
starting receive base loop
num_worker_connections 171
Creating worker on tid 4121883136
starting receive base loop
num_worker_connections 171
Creating worker on tid 2664231424
starting receive base loop
num_worker_connections 170
Creating worker on tid 1203958272
starting receive base loop
num_worker_connections 170
Creating worker on tid 4046713344
starting receive base loop
Created 1024 connections total
Creating worker on tid 2597122560
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575394758.393183,       0.0,      344150,     309861,      34289,     206109,     103752, 118.494552, 209.500000, 257.200000, 1083.900000, 175.332078,   0.000000, 1993.610978, 480.724270
Outstanding requests per worker:
3794 3841 3835 3696 3922 22952 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172579.6,      862899,     776673,      86226,     588715,     187958, 308.379527, 401.700000, 1027.400000, 2300.500000, 380.462855,   6.206000, 3273.705959, 583.395468
Outstanding requests per worker:
8013 7937 8190 7960 8470 20986 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174445.2,      872227,     785239,      86988,     630852,     154387, 380.670905, 508.300000, 746.300000, 2066.900000, 306.275746,  11.547000, 2865.612030, 632.804886
Outstanding requests per worker:
10411 10148 10145 10380 10730 19967 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174399.4,      871998,     784694,      87304,     648626,     136068, 435.452159, 619.700000, 781.900000, 2002.500000, 285.050179,  17.052000, 2886.280060, 658.064628
Outstanding requests per worker:
12332 12116 12374 12220 12951 20248 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174182.2,      870912,     783840,      87072,     660192,     123648, 498.265310, 734.700000, 921.700000, 1975.300000, 285.914750,  48.446000, 2877.744913, 675.550395
Outstanding requests per worker:
14379 13911 14472 14122 15375 21528 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174535.8,      872680,     785268,      87412,     669981,     115287, 557.105503, 865.500000, 1075.300000, 1930.100000, 303.706290,  65.029003, 3148.085117, 687.814566
Outstanding requests per worker:
16054 15566 16081 15759 17517 22562 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173710.4,      868553,     781411,      87142,     673559,     107852, 621.456117, 1001.100000, 1231.500000, 2147.000000, 337.286290,  31.433001, 3486.783981, 696.766016
Outstanding requests per worker:
18316 17890 18279 17831 20190 24916 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:12   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:12   0:00 /usr/lib/linux
memcache      7  306  0.0 522368 195456 pts/0   Sl+  17:12   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:13   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21797155895      instructions:u            #    0.74  insn per cycle         
       29581916658      cycles:u                                                    
         127652643      armv8_pmuv3_0/br_mis_pred/:u                                   
        3402137633      armv8_pmuv3_0/br_pred/:u                                    

      41.911630001 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 8 threads, 150000 rps'
==> Bench: 65536 keys, 1024 conns, 8 threads, 150000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 150000 -k 65536 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 150000 -k 65536 -c 1024 -f 512 -w 8'
Starting client with -r 150000 -k 65536 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 150000 -k 65536 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 150000 -k 65536 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 150000 cpus 8
meanInterarrival 53
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1222504960
starting receive base loop
num_worker_connections 128
Creating worker on tid 114487808
starting receive base loop
num_worker_connections 128
Creating worker on tid 3295408640
starting receive base loop
num_worker_connections 128
Creating worker on tid 2186801664
starting receive base loop
num_worker_connections 128
Creating worker on tid 1072755200
starting receive base loop
num_worker_connections 128
Creating worker on tid 4259115520
starting receive base loop
num_worker_connections 128
Creating worker on tid 3145069056
starting receive base loop
Created 1024 connections total
Creating worker on tid 2036462080
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575394803.393228,       0.0,      348920,     314128,      34792,     210072,     104056,  28.962792,  64.900000,  82.300000, 152.900000,  35.417486,   0.000000, 695.703983, 484.245168
Outstanding requests per worker:
281 296 280 258 260 261 283 268 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150921.8,      754610,     678805,      75805,     512807,     165998,  14.942423,  29.100000,  33.600000,  40.800000,   9.403344,   0.240000,  56.265000, 580.175958
Outstanding requests per worker:
295 298 283 286 290 302 315 303 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150959.4,      754798,     679245,      75553,     541990,     137255,  15.533160,  30.200000,  35.000000,  43.100000,   9.838267,   0.295000,  53.348999, 626.371013
Outstanding requests per worker:
315 301 320 332 280 296 276 271 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150951.6,      754759,     678953,      75806,     556611,     122342,  15.976995,  31.200000,  36.400000,  43.400000,  10.067455,   0.239000,  55.123001, 650.729302
Outstanding requests per worker:
327 332 293 298 288 244 289 315 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150937.8,      754690,     679103,      75587,     568212,     110891,  16.119839,  31.100000,  36.600000,  44.800000,  10.218971,   0.324000,  61.110999, 668.883336
Outstanding requests per worker:
296 349 322 314 287 300 322 304 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150973.6,      754869,     679687,      75182,     576216,     103471,  16.302352,  31.600000,  37.100000,  45.400000,  10.345940,   0.303000,  57.422999, 681.160305
Outstanding requests per worker:
289 260 333 256 334 321 327 308 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150933.0,      754666,     679690,      74976,     582035,      97655,  16.440081,  31.700000,  37.600000,  45.500000,  10.426470,   0.296000,  56.991000, 690.378189
Outstanding requests per worker:
364 307 335 301 305 293 303 313 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:13   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   17:13   0:00 /usr/lib/linux
memcache      7  308  0.0 444096 156288 pts/0   Sl+  17:13   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:14   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       18496735176      instructions:u            #    0.69  insn per cycle         
       26916448156      cycles:u                                                    
         114351379      armv8_pmuv3_0/br_mis_pred/:u                                   
        2895413670      armv8_pmuv3_0/br_pred/:u                                    

      42.119767730 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 8 threads, 152000 rps'
==> Bench: 65536 keys, 1024 conns, 8 threads, 152000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 152000 -k 65536 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 152000 -k 65536 -c 1024 -f 512 -w 8'
Starting client with -r 152000 -k 65536 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 152000 -k 65536 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 152000 -k 65536 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 152000 cpus 8
meanInterarrival 52
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 2058154496
starting receive base loop
num_worker_connections 128
Creating worker on tid 946598400
starting receive base loop
num_worker_connections 128
Creating worker on tid 4132958720
starting receive base loop
num_worker_connections 128
Creating worker on tid 3018912256
starting receive base loop
num_worker_connections 128
Creating worker on tid 1910305280
starting receive base loop
num_worker_connections 128
Creating worker on tid 796258816
starting receive base loop
num_worker_connections 128
Creating worker on tid 3982619136
starting receive base loop
Created 1024 connections total
Creating worker on tid 2868572672
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575394849.393274,       0.0,      352741,     317519,      35222,     211885,     105634,  37.253177,  80.500000, 113.900000, 188.100000,  45.835757,   0.000000, 899.242997, 482.018034
Outstanding requests per worker:
331 372 316 348 314 322 307 341 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153869.6,      769349,     692924,      76425,     524086,     168838,  16.819656,  32.400000,  38.700000,  46.500000,  10.656343,   0.291000,  61.955001, 580.834980
Outstanding requests per worker:
347 328 349 309 309 341 329 323 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153840.2,      769202,     692576,      76626,     553106,     139470,  17.385930,  33.400000,  40.300000,  48.100000,  11.013874,   0.294000,  61.014000, 627.974606
Outstanding requests per worker:
350 322 301 370 334 333 338 364 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153850.4,      769253,     692021,      77232,     568497,     123524,  17.876477,  34.100000,  41.400000,  50.100000,  11.348991,   0.318000,  62.451001, 653.426343
Outstanding requests per worker:
353 326 326 323 361 341 361 342 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153838.0,      769191,     692131,      77060,     578994,     113137,  18.082491,  34.500000,  42.000000,  50.600000,  11.500711,   0.289000,  64.930998, 669.031254
Outstanding requests per worker:
363 330 324 345 351 371 372 366 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153866.0,      769331,     692402,      76929,     587077,     105325,  18.274444,  34.800000,  42.500000,  50.900000,  11.590609,   0.330000,  70.391998, 681.950542
Outstanding requests per worker:
359 332 375 375 369 332 358 327 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153855.2,      769277,     692307,      76970,     593066,      99241,  18.438096,  35.000000,  43.000000,  51.100000,  11.674119,   0.340000,  81.734002, 691.228506
Outstanding requests per worker:
351 356 377 337 346 337 367 360 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:14   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   17:14   0:00 /usr/lib/linux
memcache      7  308  0.0 445120 154368 pts/0   Sl+  17:14   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:15   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       18914618419      instructions:u            #    0.71  insn per cycle         
       26574974495      cycles:u                                                    
         111384655      armv8_pmuv3_0/br_mis_pred/:u                                   
        2950116656      armv8_pmuv3_0/br_pred/:u                                    

      41.850940588 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 8 threads, 154000 rps'
==> Bench: 65536 keys, 1024 conns, 8 threads, 154000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 154000 -k 65536 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 154000 -k 65536 -c 1024 -f 512 -w 8'
Starting client with -r 154000 -k 65536 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 154000 -k 65536 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 154000 -k 65536 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 154000 cpus 8
meanInterarrival 51
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1533014528
starting receive base loop
num_worker_connections 128
Creating worker on tid 417788416
starting receive base loop
num_worker_connections 128
Creating worker on tid 3604148736
starting receive base loop
num_worker_connections 128
Creating worker on tid 2490102272
starting receive base loop
num_worker_connections 128
Creating worker on tid 1381495296
starting receive base loop
num_worker_connections 128
Creating worker on tid 267448832
starting receive base loop
num_worker_connections 128
Creating worker on tid 3453809152
starting receive base loop
Created 1024 connections total
Creating worker on tid 2339762688
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575394894.393319,       0.0,      358957,     323191,      35766,     216346,     106845,  48.359146,  84.400000, 126.700000, 553.200000, 103.166179,   0.000000, 1691.220999, 485.138741
Outstanding requests per worker:
495 511 470 408 528 431 456 2049 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157348.6,      786744,     708033,      78711,     537030,     171003,  21.470344,  39.000000,  46.800000,  59.400000,  36.708906,   0.327000, 1410.593033, 582.875680
Outstanding requests per worker:
411 371 362 356 360 345 418 365 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156867.0,      784336,     706268,      78068,     565296,     140972,  19.433893,  36.100000,  45.500000,  54.500000,  12.297750,   0.299000,  68.115003, 629.308442
Outstanding requests per worker:
398 385 370 361 434 384 354 381 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156862.6,      784314,     706108,      78206,     580404,     125704,  19.854139,  36.700000,  46.500000,  55.900000,  12.583328,   0.343000, 103.404000, 653.334042
Outstanding requests per worker:
407 395 335 419 418 392 384 363 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156869.8,      784350,     705851,      78499,     591513,     114338,  20.055498,  36.600000,  46.900000,  56.900000,  12.693517,   0.293000,  94.924003, 670.502501
Outstanding requests per worker:
392 372 395 389 377 393 407 407 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156865.8,      784330,     705815,      78515,     599466,     106349,  20.228044,  36.900000,  47.500000,  57.200000,  12.811317,   0.343000,  98.389998, 683.275755
Outstanding requests per worker:
380 357 440 428 439 366 409 370 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156880.4,      784403,     706302,      78101,     606067,     100235,  20.359350,  37.100000,  47.900000,  57.300000,  12.868608,   0.394000,  89.227997, 692.738493
Outstanding requests per worker:
385 415 427 384 354 394 395 438 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:15   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:15   0:00 /usr/lib/linux
memcache      7  316  0.0 448192 162880 pts/0   Sl+  17:15   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  17:15   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19340229912      instructions:u            #    0.71  insn per cycle         
       27424753329      cycles:u                                                    
         109164214      armv8_pmuv3_0/br_mis_pred/:u                                   
        3013938134      armv8_pmuv3_0/br_pred/:u                                    

      41.750883558 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 8 threads, 156000 rps'
==> Bench: 65536 keys, 1024 conns, 8 threads, 156000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 156000 -k 65536 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 156000 -k 65536 -c 1024 -f 512 -w 8'
Starting client with -r 156000 -k 65536 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 156000 -k 65536 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 156000 -k 65536 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 156000 cpus 8
meanInterarrival 51
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 2066215424
starting receive base loop
num_worker_connections 128
Creating worker on tid 954659328
starting receive base loop
num_worker_connections 128
Creating worker on tid 4141019648
starting receive base loop
num_worker_connections 128
Creating worker on tid 3026973184
starting receive base loop
num_worker_connections 128
Creating worker on tid 1918366208
starting receive base loop
num_worker_connections 128
Creating worker on tid 804319744
starting receive base loop
num_worker_connections 128
Creating worker on tid 3990680064
starting receive base loop
Created 1024 connections total
Creating worker on tid 2876633600
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575394939.393364,       0.0,      358120,     322222,      35898,     215914,     106308,  47.337739,  85.900000, 127.200000, 480.400000,  96.226753,   0.000000, 1663.467050, 486.075811
Outstanding requests per worker:
475 486 499 483 474 433 502 1806 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157316.2,      786582,     707977,      78605,     536989,     170988,  21.158166,  38.700000,  46.200000,  61.100000,  36.101944,   0.345000, 1409.664989, 583.378313
Outstanding requests per worker:
386 363 395 365 351 372 385 334 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156851.2,      784257,     706289,      77968,     565139,     141150,  19.174930,  35.700000,  44.700000,  53.900000,  12.151855,   0.376000,  92.253998, 629.207928
Outstanding requests per worker:
320 392 376 380 381 415 415 371 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156884.0,      784421,     705841,      78580,     581008,     124833,  19.586844,  36.400000,  45.800000,  54.900000,  12.405294,   0.266000,  78.203000, 654.034251
Outstanding requests per worker:
373 390 395 364 408 355 363 364 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156865.8,      784330,     705986,      78344,     591421,     114565,  19.865720,  36.600000,  46.500000,  56.100000,  12.581913,   0.341000, 100.336000, 670.959525
Outstanding requests per worker:
372 435 387 393 376 372 391 355 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156859.6,      784299,     705763,      78536,     599481,     106282,  19.956732,  36.800000,  46.600000,  56.600000,  12.687071,   0.330000,  87.978996, 683.232779
Outstanding requests per worker:
419 363 386 403 359 382 422 421 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156874.4,      784373,     705775,      78598,     605802,      99973,  20.114930,  37.000000,  47.000000,  57.200000,  12.786204,   0.359000,  94.956003, 692.719078
Outstanding requests per worker:
374 428 386 414 363 382 373 421 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  17:15   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   17:15   0:00 /usr/lib/linux
memcache      7  308  0.0 448192 162304 pts/0   Sl+  17:15   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19288027008      instructions:u            #    0.71  insn per cycle         
       27097926013      cycles:u                                                    
         109194034      armv8_pmuv3_0/br_mis_pred/:u                                   
        3009524833      armv8_pmuv3_0/br_pred/:u                                    

      42.110603349 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 8 threads, 158000 rps'
==> Bench: 65536 keys, 1024 conns, 8 threads, 158000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 158000 -k 65536 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 158000 -k 65536 -c 1024 -f 512 -w 8'
Starting client with -r 158000 -k 65536 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 158000 -k 65536 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 158000 -k 65536 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 158000 cpus 8
meanInterarrival 50
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1266872832
starting receive base loop
num_worker_connections 128
Creating worker on tid 157413888
starting receive base loop
num_worker_connections 128
Creating worker on tid 3338334720
starting receive base loop
num_worker_connections 128
Creating worker on tid 2229727744
starting receive base loop
num_worker_connections 128
Creating worker on tid 1121120768
starting receive base loop
num_worker_connections 128
Creating worker on tid 7074304
starting receive base loop
num_worker_connections 128
Creating worker on tid 3193434624
starting receive base loop
Created 1024 connections total
Creating worker on tid 2079388160
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575394985.393410,       0.0,      363903,     327607,      36296,     219237,     108370,  61.555651, 128.400000, 165.200000, 597.300000, 100.158578,   0.000000, 1425.868988, 485.244009
Outstanding requests per worker:
1056 953 891 1031 942 910 942 2239 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161153.2,      805767,     725066,      80701,     549806,     175260,  25.637592,  48.900000,  58.700000, 121.100000,  28.930482,   0.397000, 864.484012, 583.071509
Outstanding requests per worker:
414 402 429 406 410 423 406 402 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159983.4,      799918,     719993,      79925,     576873,     143120,  21.082616,  37.700000,  49.500000,  59.600000,  13.302248,   0.359000,  97.108997, 630.274096
Outstanding requests per worker:
425 417 460 423 423 414 422 443 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160000.2,      800002,     720085,      79917,     593137,     126948,  21.665620,  38.800000,  50.700000,  61.900000,  13.735077,   0.281000, 124.117002, 655.151693
Outstanding requests per worker:
410 460 462 444 388 436 430 439 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159961.8,      799810,     719926,      79884,     603729,     116197,  22.014817,  39.900000,  51.100000,  63.200000,  14.056194,   0.335000, 147.121996, 672.069634
Outstanding requests per worker:
414 486 441 489 485 465 468 515 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160046.6,      800234,     719915,      80319,     612551,     107364,  22.602331,  41.300000,  51.900000,  66.100000,  14.502279,   0.330000, 139.246002, 685.159438
Outstanding requests per worker:
469 402 456 448 456 456 435 457 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159926.6,      799634,     720009,      79625,     618211,     101798,  24.765039,  48.700000,  57.200000,  84.100000,  17.456745,   0.288000, 191.570997, 693.683378
Outstanding requests per worker:
475 532 494 479 507 501 560 465 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:16   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   17:16   0:00 /usr/lib/linux
memcache      8  308  0.0 449216 164096 pts/0   Sl+  17:16   2:09 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  17:17   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19742462725      instructions:u            #    0.72  insn per cycle         
       27332627572      cycles:u                                                    
         117994605      armv8_pmuv3_0/br_mis_pred/:u                                   
        3068191189      armv8_pmuv3_0/br_pred/:u                                    

      41.860558116 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 8 threads, 160000 rps'
==> Bench: 65536 keys, 1024 conns, 8 threads, 160000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 160000 -k 65536 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 160000 -k 65536 -c 1024 -f 512 -w 8'
Starting client with -r 160000 -k 65536 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 160000 -k 65536 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 160000 -k 65536 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 160000 cpus 8
meanInterarrival 50
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1438970368
starting receive base loop
num_worker_connections 128
Creating worker on tid 326496768
starting receive base loop
num_worker_connections 128
Creating worker on tid 3512857088
starting receive base loop
num_worker_connections 128
Creating worker on tid 2398810624
starting receive base loop
num_worker_connections 128
Creating worker on tid 1290203648
starting receive base loop
num_worker_connections 128
Creating worker on tid 181596672
starting receive base loop
num_worker_connections 128
Creating worker on tid 3362517504
starting receive base loop
Created 1024 connections total
Creating worker on tid 2253910528
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575395031.393456,       0.0,      398385,     358511,      39874,     240840,     117671,  48.667388, 102.600000, 146.000000, 504.900000,  90.578988,   0.000000, 1339.189053, 487.776749
Outstanding requests per worker:
726 810 835 806 806 894 841 1683 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160823.0,      804116,     724136,      79980,     550397,     173739,  23.740907,  45.500000,  54.700000, 101.300000,  22.180698,   0.310000, 725.567997, 585.281551
Outstanding requests per worker:
428 434 420 428 441 373 427 427 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160000.6,      800004,     720045,      79959,     577487,     142558,  21.159768,  38.400000,  49.400000,  60.600000,  13.471955,   0.338000, 117.954001, 631.129759
Outstanding requests per worker:
430 422 423 435 441 445 446 395 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160004.2,      800022,     719980,      80042,     593561,     126419,  21.444691,  38.700000,  50.000000,  61.600000,  13.622748,   0.357000, 111.038998, 656.248969
Outstanding requests per worker:
417 444 463 404 431 460 398 453 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159983.0,      799916,     719782,      80134,     604848,     114934,  21.891586,  39.800000,  50.800000,  63.000000,  13.952469,   0.316000, 122.630000, 672.744666
Outstanding requests per worker:
394 468 507 435 467 433 438 481 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159896.4,      799483,     719432,      80051,     612286,     107146,  24.870408,  49.500000,  57.700000,  90.400000,  18.187447,   0.309000, 213.937998, 685.414755
Outstanding requests per worker:
531 536 507 550 503 536 563 497 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160028.2,      800142,     720200,      79942,     618739,     101461,  25.290206,  50.700000,  57.600000,  92.600000,  18.174325,   0.355000, 193.784997, 694.040328
Outstanding requests per worker:
535 495 526 557 547 512 530 477 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:17   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:17   0:00 /usr/lib/linux
memcache      7  305  0.0 449216 159168 pts/0   Sl+  17:17   2:11 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  17:18   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19845067638      instructions:u            #    0.72  insn per cycle         
       27392648986      cycles:u                                                    
         116673958      armv8_pmuv3_0/br_mis_pred/:u                                   
        3095343489      armv8_pmuv3_0/br_pred/:u                                    

      42.970089668 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 8 threads, 162000 rps'
==> Bench: 65536 keys, 1024 conns, 8 threads, 162000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 162000 -k 65536 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 162000 -k 65536 -c 1024 -f 512 -w 8'
Starting client with -r 162000 -k 65536 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 162000 -k 65536 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 162000 -k 65536 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 162000 cpus 8
meanInterarrival 49
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1271001600
starting receive base loop
num_worker_connections 128
Creating worker on tid 157413888
starting receive base loop
num_worker_connections 128
Creating worker on tid 3338334720
starting receive base loop
num_worker_connections 128
Creating worker on tid 2229727744
starting receive base loop
num_worker_connections 128
Creating worker on tid 1121120768
starting receive base loop
num_worker_connections 128
Creating worker on tid 7074304
starting receive base loop
num_worker_connections 128
Creating worker on tid 3193434624
starting receive base loop
Created 1024 connections total
Creating worker on tid 2079388160
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575395077.393502,       0.0,      367285,     330126,      37159,     221417,     108709,  73.335196, 149.600000, 201.900000, 848.800000, 138.149919,   0.000000, 1865.260005, 486.756426
Outstanding requests per worker:
1452 1399 1266 1457 1383 1537 1405 6052 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164911.6,      824559,     742460,      82099,     563710,     178750,  60.711034, 146.200000, 177.800000, 344.600000,  89.374627,   0.416000, 1782.228947, 583.399308
Outstanding requests per worker:
987 942 994 956 978 878 965 1071 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163091.6,      815459,     733616,      81843,     587554,     146062,  51.041945, 150.700000, 181.800000, 247.300000,  58.713992,   0.370000, 435.534000, 630.501112
Outstanding requests per worker:
1041 1108 1011 1087 1153 1204 1063 1035 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163238.6,      816194,     734829,      81365,     605245,     129584,  54.276416, 160.300000, 192.100000, 264.900000,  63.156328,   0.367000, 427.430987, 654.630393
Outstanding requests per worker:
1119 1155 1113 1179 1060 1136 1018 1143 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163119.8,      815600,     734062,      81538,     616613,     117449,  57.256657, 170.100000, 204.400000, 278.100000,  67.320242,   0.305000, 413.785994, 673.315582
Outstanding requests per worker:
1235 1158 1285 1265 1193 1226 1171 1218 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163028.2,      815142,     733945,      81197,     625107,     108838,  63.936673, 192.300000, 234.500000, 295.600000,  75.488088,   0.434000, 506.581008, 685.981082
Outstanding requests per worker:
1445 1362 1381 1279 1405 1367 1322 1419 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160934.4,      804673,     724034,      80639,     622517,     101517,  75.803084, 228.800000, 278.700000, 361.900000,  91.230660,   0.414000, 546.866000, 694.854104
Outstanding requests per worker:
2846 2848 2793 2937 2852 2690 2874 2862 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:18   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:18   0:00 /usr/lib/linux
memcache      7  316  0.0 516224 171008 pts/0   Sl+  17:18   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:18   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       20241272191      instructions:u            #    0.72  insn per cycle         
       28184219051      cycles:u                                                    
         121378585      armv8_pmuv3_0/br_mis_pred/:u                                   
        3153649666      armv8_pmuv3_0/br_pred/:u                                    

      41.981512255 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 8 threads, 164000 rps'
==> Bench: 65536 keys, 1024 conns, 8 threads, 164000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 164000 -k 65536 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 164000 -k 65536 -c 1024 -f 512 -w 8'
Starting client with -r 164000 -k 65536 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 164000 -k 65536 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 164000 -k 65536 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 164000 cpus 8
meanInterarrival 48
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 2043867648
starting receive base loop
num_worker_connections 128
Creating worker on tid 930476544
starting receive base loop
num_worker_connections 128
Creating worker on tid 4116836864
starting receive base loop
num_worker_connections 128
Creating worker on tid 3002790400
starting receive base loop
num_worker_connections 128
Creating worker on tid 1894183424
starting receive base loop
num_worker_connections 128
Creating worker on tid 785576448
starting receive base loop
num_worker_connections 128
Creating worker on tid 3966497280
starting receive base loop
Created 1024 connections total
Creating worker on tid 2857890304
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575395123.393548,       0.0,      357757,     322324,      35433,     215191,     107133,  81.767505, 159.800000, 212.400000, 1026.500000, 166.460295,   0.000000, 1986.284018, 484.415849
Outstanding requests per worker:
1644 1691 1678 1662 1640 1779 1783 12173 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167135.6,      835679,     752146,      83533,     570473,     181673, 143.343143, 235.700000, 309.600000, 1232.800000, 195.333808,   0.851000, 2208.260059, 583.234078
Outstanding requests per worker:
2580 2493 2507 2631 2720 2481 2721 3644 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166576.2,      832882,     749660,      83222,     600291,     149369, 131.172652, 278.700000, 333.500000, 454.100000, 107.969572,   0.870000, 1283.316970, 630.523411
Outstanding requests per worker:
2678 2802 2738 2817 2839 2722 2778 2946 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166080.6,      830404,     747298,      83106,     616799,     130499, 141.482445, 320.500000, 386.500000, 498.700000, 119.829734,   1.151000, 974.438012, 656.954608
Outstanding requests per worker:
3005 3205 3325 3282 3157 3101 3184 3104 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165632.0,      828161,     745774,      82387,     626104,     119670, 168.256058, 377.800000, 439.700000, 561.600000, 136.926889,   0.939000, 1055.598974, 672.782726
Outstanding requests per worker:
3714 3950 3794 3719 3645 3659 4024 4091 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165625.6,      828129,     745349,      82780,     634377,     110972, 199.174355, 415.600000, 489.200000, 611.700000, 143.514507,   1.195000, 1133.726954, 685.315279
Outstanding requests per worker:
4449 4389 4396 4606 4362 4401 4603 4669 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164574.4,      822873,     740649,      82224,     636863,     103786, 232.459809, 455.000000, 539.600000, 715.000000, 156.452557,   0.799000, 1309.227943, 694.676904
Outstanding requests per worker:
5588 5789 5815 5869 5632 6018 5812 5907 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:18   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:18   0:00 /usr/lib/linux
memcache      7  308  0.0 516224 185408 pts/0   Sl+  17:18   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:19   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       20810173969      instructions:u            #    0.73  insn per cycle         
       28640593999      cycles:u                                                    
         125371444      armv8_pmuv3_0/br_mis_pred/:u                                   
        3244705260      armv8_pmuv3_0/br_pred/:u                                    

      42.401628635 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 8 threads, 166000 rps'
==> Bench: 65536 keys, 1024 conns, 8 threads, 166000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 166000 -k 65536 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 166000 -k 65536 -c 1024 -f 512 -w 8'
Starting client with -r 166000 -k 65536 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 166000 -k 65536 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 166000 -k 65536 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 166000 cpus 8
meanInterarrival 48
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1858466304
starting receive base loop
num_worker_connections 128
Creating worker on tid 745271808
starting receive base loop
num_worker_connections 128
Creating worker on tid 3931632128
starting receive base loop
num_worker_connections 128
Creating worker on tid 2817585664
starting receive base loop
num_worker_connections 128
Creating worker on tid 1708978688
starting receive base loop
num_worker_connections 128
Creating worker on tid 594932224
starting receive base loop
num_worker_connections 128
Creating worker on tid 3781292544
starting receive base loop
Created 1024 connections total
Creating worker on tid 2667246080
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575395169.393594,       0.0,      400221,     360245,      39976,     243023,     117222,  62.145030, 107.700000, 160.700000, 957.900000, 156.023254,   0.000000, 1995.818019, 491.612505
Outstanding requests per worker:
1213 1170 1208 1302 1193 1280 1188 12860 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167823.8,      839120,     755810,      83310,     577047,     178763, 115.932436, 179.300000, 255.200000, 1307.600000, 204.885219,   0.755000, 2246.958971, 588.383145
Outstanding requests per worker:
1780 1813 1816 1835 1806 1812 1748 3063 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166259.8,      831300,     748309,      82991,     601709,     146600,  98.618689, 224.900000, 270.700000, 385.600000,  95.861533,   0.562000, 1415.488958, 633.495854
Outstanding requests per worker:
2362 2351 2259 2098 2117 2156 2134 2305 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166041.8,      830210,     747194,      83016,     617090,     130104, 116.974037, 268.900000, 311.100000, 401.600000, 100.439289,   0.546000, 614.956021, 658.051303
Outstanding requests per worker:
2665 2631 2676 2645 2638 2539 2445 2752 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166140.0,      830701,     747463,      83238,     628060,     119403, 133.598636, 294.300000, 346.500000, 437.800000, 110.146080,   0.682000, 702.790976, 672.751014
Outstanding requests per worker:
2920 2775 2975 3027 2880 2914 3116 3113 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165960.0,      829801,     746864,      82937,     636401,     110463, 153.964369, 329.700000, 390.100000, 502.700000, 125.017821,   0.852000, 841.040015, 686.550482
Outstanding requests per worker:
3451 3190 3208 3300 3530 3385 3504 3736 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164852.0,      824261,     741504,      82757,     638406,     103098, 179.516285, 362.300000, 414.200000, 524.600000, 130.240057,   0.847000, 820.078015, 695.945416
Outstanding requests per worker:
4547 4570 4455 4740 4574 4620 4520 4416 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:19   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:19   0:00 /usr/lib/linux
memcache      7  304  0.0 517248 176000 pts/0   Sl+  17:19   2:11 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       20923739057      instructions:u            #    0.73  insn per cycle         
       28775117569      cycles:u                                                    
         124241116      armv8_pmuv3_0/br_mis_pred/:u                                   
        3265267451      armv8_pmuv3_0/br_pred/:u                                    

      42.760606319 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 8 threads, 168000 rps'
==> Bench: 65536 keys, 1024 conns, 8 threads, 168000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 168000 -k 65536 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 168000 -k 65536 -c 1024 -f 512 -w 8'
Starting client with -r 168000 -k 65536 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 168000 -k 65536 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 168000 -k 65536 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 168000 cpus 8
meanInterarrival 47
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1948447232
starting receive base loop
num_worker_connections 128
Creating worker on tid 836563456
starting receive base loop
num_worker_connections 128
Creating worker on tid 4017484288
starting receive base loop
num_worker_connections 128
Creating worker on tid 2908877312
starting receive base loop
num_worker_connections 128
Creating worker on tid 1794830848
starting receive base loop
num_worker_connections 128
Creating worker on tid 686223872
starting receive base loop
num_worker_connections 128
Creating worker on tid 3872584192
starting receive base loop
Created 1024 connections total
Creating worker on tid 2758537728
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575395214.393639,       0.0,      361616,     325574,      36042,     218020,     107554,  84.678539, 164.900000, 220.100000, 1017.600000, 164.304195,   0.000000, 1947.088003, 484.397071
Outstanding requests per worker:
1860 1900 1809 1842 1849 1939 1985 15966 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167647.6,      838239,     754457,      83782,     571486,     182971, 218.738763, 295.700000, 525.100000, 1778.000000, 288.832622,   0.945000, 2978.447914, 582.387875
Outstanding requests per worker:
4289 4277 4600 4604 4687 4495 4567 10525 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168937.2,      844687,     760272,      84415,     609676,     150596, 268.807555, 385.800000, 453.900000, 1346.800000, 198.757448,   1.072000, 2396.698952, 631.326917
Outstanding requests per worker:
5538 5525 5434 5703 6020 5731 5653 8871 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169258.4,      846293,     761976,      84317,     628748,     133228, 297.892349, 440.100000, 514.400000, 1202.300000, 175.270840,   1.945000, 2111.491919, 656.583501
Outstanding requests per worker:
6415 6323 6338 6298 6461 6453 6186 8820 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169408.4,      847043,     762031,      85012,     641368,     120663, 323.944611, 501.200000, 593.600000, 1137.500000, 179.444064,   2.455000, 2097.018003, 674.531342
Outstanding requests per worker:
7066 6773 6822 6891 7024 6973 7082 8738 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169460.4,      847303,     762568,      84735,     649742,     112826, 348.543940, 548.600000, 656.200000, 1179.500000, 190.284622,   3.306000, 2181.859016, 686.265641
Outstanding requests per worker:
7337 7162 7615 7397 7495 7339 7482 9374 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168638.8,      843195,     758603,      84592,     653813,     104790, 375.185031, 602.900000, 730.800000, 1205.900000, 204.298290,   4.150000, 2235.218048, 696.830362
Outstanding requests per worker:
8344 8363 8437 8369 8206 8327 8909 10173 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:20   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   17:20   0:00 /usr/lib/linux
memcache      7  308  0.0 519296 187328 pts/0   Sl+  17:20   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  17:21   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21332601561      instructions:u            #    0.73  insn per cycle         
       29117800445      cycles:u                                                    
         127003550      armv8_pmuv3_0/br_mis_pred/:u                                   
        3320257375      armv8_pmuv3_0/br_pred/:u                                    

      41.491715393 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 8 threads, 170000 rps'
==> Bench: 65536 keys, 1024 conns, 8 threads, 170000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 170000 -k 65536 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 170000 -k 65536 -c 1024 -f 512 -w 8'
Starting client with -r 170000 -k 65536 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 170000 -k 65536 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 170000 -k 65536 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 170000 cpus 8
meanInterarrival 47
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 2090594816
starting receive base loop
num_worker_connections 128
Creating worker on tid 978842112
starting receive base loop
num_worker_connections 128
Creating worker on tid 4159762944
starting receive base loop
num_worker_connections 128
Creating worker on tid 3051155968
starting receive base loop
num_worker_connections 128
Creating worker on tid 1937109504
starting receive base loop
num_worker_connections 128
Creating worker on tid 828502528
starting receive base loop
num_worker_connections 128
Creating worker on tid 4009423360
starting receive base loop
Created 1024 connections total
Creating worker on tid 2900816384
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575395259.393684,       0.0,      362116,     325915,      36201,     218217,     107698,  84.941701, 169.200000, 236.600000, 1070.300000, 171.819599,   0.000000, 1984.714985, 485.127564
Outstanding requests per worker:
1834 1951 1960 1882 1755 1864 1854 16697 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167739.8,      838700,     754903,      83797,     573785,     181118, 224.462818, 340.400000, 637.800000, 1745.600000, 280.545342,   1.163000, 2460.223913, 584.808791
Outstanding requests per worker:
4697 4546 4340 4399 4504 4599 4599 10556 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168746.4,      843733,     758977,      84756,     610111,     148866, 272.053837, 403.800000, 482.300000, 1258.000000, 180.985825,   2.284000, 1931.440949, 633.002065
Outstanding requests per worker:
6071 5914 5801 5907 5762 5686 5906 8637 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169195.6,      845979,     761343,      84636,     629077,     132266, 307.786839, 464.300000, 545.300000, 902.000000, 145.581750,   1.771000, 1544.563055, 658.194762
Outstanding requests per worker:
6772 6749 6494 6494 6776 6689 6747 8100 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169025.4,      845128,     760642,      84486,     640206,     120436, 340.173444, 522.000000, 616.400000, 848.000000, 146.697202,   1.527000, 1313.935041, 674.497974
Outstanding requests per worker:
7343 7528 7614 7630 7566 7394 7616 8129 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169506.4,      847533,     762657,      84876,     650135,     112522, 367.252377, 571.400000, 669.300000, 903.400000, 159.410550,   3.135000, 1631.759048, 686.242135
Outstanding requests per worker:
7995 7892 8148 7748 8119 7991 8048 8493 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168781.8,      843910,     759250,      84660,     653556,     105694, 393.295187, 641.100000, 759.700000, 1031.900000, 185.169394,   4.065000, 1630.126953, 695.423735
Outstanding requests per worker:
8782 8768 8936 8680 9061 9101 9298 9074 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  17:21   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:21   0:00 /usr/lib/linux
memcache      7  308  0.0 520320 193792 pts/0   Sl+  17:21   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:21   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21275110368      instructions:u            #    0.72  insn per cycle         
       29400237271      cycles:u                                                    
         126027943      armv8_pmuv3_0/br_mis_pred/:u                                   
        3320742270      armv8_pmuv3_0/br_pred/:u                                    

      42.040977712 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 8 threads, 172000 rps'
==> Bench: 65536 keys, 1024 conns, 8 threads, 172000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 172000 -k 65536 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 172000 -k 65536 -c 1024 -f 512 -w 8'
Starting client with -r 172000 -k 65536 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 172000 -k 65536 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 172000 -k 65536 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 172000 cpus 8
meanInterarrival 46
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1459483136
starting receive base loop
num_worker_connections 128
Creating worker on tid 350679552
starting receive base loop
num_worker_connections 128
Creating worker on tid 3537039872
starting receive base loop
num_worker_connections 128
Creating worker on tid 2422993408
starting receive base loop
num_worker_connections 128
Creating worker on tid 1314386432
starting receive base loop
num_worker_connections 128
Creating worker on tid 200339968
starting receive base loop
num_worker_connections 128
Creating worker on tid 3386700288
starting receive base loop
Created 1024 connections total
Creating worker on tid 2272653824
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575395305.393730,       0.0,      364541,     328013,      36528,     219394,     108619,  87.836405, 170.000000, 230.600000, 1034.700000, 170.878896,   0.000000, 1969.282985, 485.275867
Outstanding requests per worker:
2006 2093 2117 2059 2093 2117 2132 22219 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168261.8,      841310,     757039,      84271,     574862,     182177, 307.209099, 424.100000, 1082.900000, 2306.500000, 392.712773,   1.214000, 3077.769995, 584.063694
Outstanding requests per worker:
6483 6850 6507 6351 6335 6521 6201 19890 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170243.0,      851216,     766147,      85069,     614839,     151308, 431.646817, 592.500000, 861.700000, 2191.700000, 331.786400,   3.006000, 2996.736050, 631.881162
Outstanding requests per worker:
9222 8961 9156 9142 9343 9213 9008 19513 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170528.2,      852642,     767287,      85355,     633574,     133713, 529.009380, 767.300000, 983.300000, 2109.700000, 321.352099,  22.612000, 3062.993050, 657.519442
Outstanding requests per worker:
11480 11272 11489 11618 11469 11372 11139 20728 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170428.4,      852143,     767008,      85135,     645933,     121075, 628.158166, 935.300000, 1137.500000, 2228.600000, 335.890906,   6.067000, 3201.241970, 675.062182
Outstanding requests per worker:
13675 13798 13716 13885 13508 13540 13444 22533 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170689.2,      853447,     767860,      85587,     655066,     112794, 721.729216, 1114.100000, 1361.800000, 2277.800000, 371.913289,  78.689002, 3524.858952, 687.310172
Outstanding requests per worker:
15570 16099 16085 16102 15259 15343 15423 24395 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169564.4,      847823,     763185,      84638,     657379,     105806, 823.013320, 1295.900000, 1559.100000, 2415.400000, 413.707186, 138.899997, 3682.054996, 696.405038
Outstanding requests per worker:
18213 18649 18715 18760 18105 18461 18157 27021 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:21   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:21   0:00 /usr/lib/linux
memcache      7  316  0.0 520320 191232 pts/0   Sl+  17:21   2:09 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  17:22   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21334550081      instructions:u            #    0.74  insn per cycle         
       28869852706      cycles:u                                                    
         125304036      armv8_pmuv3_0/br_mis_pred/:u                                   
        3314088835      armv8_pmuv3_0/br_pred/:u                                    

      41.641496864 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 8 threads, 174000 rps'
==> Bench: 65536 keys, 1024 conns, 8 threads, 174000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 174000 -k 65536 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 174000 -k 65536 -c 1024 -f 512 -w 8'
Starting client with -r 174000 -k 65536 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 174000 -k 65536 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 174000 -k 65536 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 174000 cpus 8
meanInterarrival 45
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1285485056
starting receive base loop
num_worker_connections 128
Creating worker on tid 173535744
starting receive base loop
num_worker_connections 128
Creating worker on tid 3354456576
starting receive base loop
num_worker_connections 128
Creating worker on tid 2245849600
starting receive base loop
num_worker_connections 128
Creating worker on tid 1131803136
starting receive base loop
num_worker_connections 128
Creating worker on tid 23196160
starting receive base loop
num_worker_connections 128
Creating worker on tid 3204116992
starting receive base loop
Created 1024 connections total
Creating worker on tid 2095510016
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575395350.393775,       0.0,      364494,     328163,      36331,     219537,     108626,  84.163232, 148.300000, 210.900000, 1120.000000, 175.995400,   0.000000, 1994.572997, 484.639898
Outstanding requests per worker:
1847 1846 1924 1946 1820 1720 1916 30937 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168985.4,      844928,     760688,      84240,     577726,     182962, 389.483687, 602.900000, 1717.400000, 2770.800000, 522.382080,   1.649000, 3369.256973, 585.000080
Outstanding requests per worker:
8134 7833 7975 7963 8008 7917 7861 32285 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171773.0,      858866,     773032,      85834,     619839,     153193, 583.571074, 829.800000, 1708.700000, 2857.900000, 489.845305,   5.794000, 3722.282887, 631.231059
Outstanding requests per worker:
12096 12006 12199 11971 11976 12013 12002 33831 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172122.2,      860612,     774130,      86482,     639112,     135018, 742.837730, 1107.100000, 1731.800000, 2908.000000, 486.338963,  22.429001, 4155.252934, 657.877074
Outstanding requests per worker:
15895 15866 15526 15573 15516 15496 15687 36927 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171749.0,      858746,     773316,      85430,     650926,     122390, 906.630813, 1386.900000, 1910.900000, 3052.200000, 514.279235, 120.343998, 4437.616825, 674.963494
Outstanding requests per worker:
19566 19614 19156 19257 19559 19223 19641 40736 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171317.6,      856589,     770921,      85668,     657178,     113743, 1078.497161, 1651.800000, 2113.800000, 3304.100000, 555.604214, 142.821997, 4726.405144, 686.583418
Outstanding requests per worker:
23820 23513 23059 23447 23613 23424 23613 44639 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170216.2,      851082,     765609,      85473,     659775,     105834, 1267.141263, 1968.200000, 2458.500000, 3540.900000, 605.019390, 197.417006, 4967.168808, 696.889672
Outstanding requests per worker:
28492 28098 28091 28457 28299 28164 28154 49285 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:22   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:22   0:00 /usr/lib/linux
memcache      7  316  0.0 521344 199616 pts/0   Sl+  17:22   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:23   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21411365426      instructions:u            #    0.74  insn per cycle         
       29113017646      cycles:u                                                    
         123324810      armv8_pmuv3_0/br_mis_pred/:u                                   
        3334840020      armv8_pmuv3_0/br_pred/:u                                    

      41.570946597 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 1024 conns, 8 threads, 176000 rps'
==> Bench: 65536 keys, 1024 conns, 8 threads, 176000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 176000 -k 65536 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 176000 -k 65536 -c 1024 -f 512 -w 8'
Starting client with -r 176000 -k 65536 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 176000 -k 65536 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 176000 -k 65536 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 65536
rps 176000 cpus 8
meanInterarrival 45
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1172697600
starting receive base loop
num_worker_connections 128
Creating worker on tid 58061312
starting receive base loop
num_worker_connections 128
Creating worker on tid 3244421632
starting receive base loop
num_worker_connections 128
Creating worker on tid 2130375168
starting receive base loop
num_worker_connections 128
Creating worker on tid 1021768192
starting receive base loop
num_worker_connections 128
Creating worker on tid 4208128512
starting receive base loop
num_worker_connections 128
Creating worker on tid 3094082048
starting receive base loop
Created 1024 connections total
Creating worker on tid 1985475072
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575395395.393820,       0.0,      357224,     321702,      35522,     214545,     107157,  96.549909, 176.700000, 227.000000, 1039.500000, 168.769683,   0.000000, 1951.506972, 482.577435
Outstanding requests per worker:
2648 2414 2587 2448 2439 2531 2773 28755 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168159.8,      840800,     756952,      83848,     573787,     183165, 412.791915, 612.700000, 1615.800000, 2716.400000, 496.622783,   1.620000, 3573.964119, 583.124272
Outstanding requests per worker:
8919 9050 8891 9045 9185 9102 9086 31485 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170498.0,      852491,     767576,      84915,     615716,     151860, 636.183376, 907.200000, 1699.200000, 2884.400000, 478.794227,  67.789003, 3573.334932, 631.054276
Outstanding requests per worker:
13747 13635 13939 13771 13660 13564 13805 35143 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170251.8,      851260,     766111,      85149,     632477,     133634, 841.144123, 1244.700000, 1861.900000, 3104.100000, 502.010783, 122.551002, 4065.927982, 657.175283
Outstanding requests per worker:
18342 18503 19007 18824 18278 18302 18309 39470 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169816.0,      849081,     763748,      85333,     642558,     121190, 1055.760167, 1610.400000, 2088.100000, 3290.200000, 542.565630, 165.565997, 4375.023842, 674.977375
Outstanding requests per worker:
23431 23396 23717 23879 23472 23141 23426 44453 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169321.0,      846606,     761825,      84781,     650138,     111687, 1285.668139, 1958.600000, 2417.800000, 3495.200000, 587.905717, 198.991001, 4558.209896, 687.316405
Outstanding requests per worker:
28637 28387 29301 29252 28615 28682 28809 49608 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168132.6,      840664,     756798,      83866,     651875,     104923, 1537.548178, 2325.100000, 2742.400000, 3812.600000, 638.674866, 212.259993, 5306.070805, 696.332628
Outstanding requests per worker:
34441 34375 35362 34984 34699 34656 35348 55756 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:23   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   17:23   0:00 /usr/lib/linux
memcache      7  308  0.0 519296 197120 pts/0   Sl+  17:23   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  17:24   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21146359352      instructions:u            #    0.73  insn per cycle         
       28966456348      cycles:u                                                    
         119909956      armv8_pmuv3_0/br_mis_pred/:u                                   
        3294808002      armv8_pmuv3_0/br_pred/:u                                    

      41.790539704 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 6 threads, 150000 rps'
==> Bench: 262114 keys, 512 conns, 6 threads, 150000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 150000 -k 262114 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 150000 -k 262114 -c 512 -f 512 -w 6'
Starting client with -r 150000 -k 262114 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 150000 -k 262114 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 150000 -k 262114 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 150000 cpus 6
meanInterarrival 40
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1892413952
starting receive base loop
num_worker_connections 85
Creating worker on tid 1116074496
starting receive base loop
num_worker_connections 85
Creating worker on tid 353694208
starting receive base loop
num_worker_connections 85
Creating worker on tid 3886281216
starting receive base loop
num_worker_connections 85
Creating worker on tid 3121279488
starting receive base loop
Created 512 connections total
Creating worker on tid 2358899200
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575395441.393866,       0.0,      340610,     306307,      34303,     203624,     102683,   9.366030,  19.700000,  25.500000,  41.500000,   8.637944,   0.000000, 108.814001, 480.943038
Outstanding requests per worker:
192 196 213 193 221 195 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150002.2,      750012,     675454,      74558,     510621,     164833,   7.971169,  14.700000,  17.100000,  21.000000,   4.596369,   0.288000,  28.986000, 580.149856
Outstanding requests per worker:
212 186 194 206 225 223 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150013.6,      750069,     675277,      74792,     538409,     136868,   8.162969,  15.000000,  17.500000,  21.700000,   4.728930,   0.296000,  30.508000, 625.434944
Outstanding requests per worker:
225 186 215 207 210 194 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150003.6,      750019,     675292,      74727,     553988,     121304,   8.392796,  15.400000,  18.000000,  22.700000,   4.882321,   0.265000,  30.355999, 651.612169
Outstanding requests per worker:
228 192 211 211 215 213 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150012.4,      750063,     674927,      75136,     564027,     110900,   8.491329,  15.600000,  18.400000,  22.700000,   4.926802,   0.240000,  30.928001, 667.879757
Outstanding requests per worker:
210 232 208 233 212 202 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150013.2,      750067,     674548,      75519,     571074,     103474,   8.597518,  15.700000,  18.600000,  23.300000,   5.009699,   0.288000,  33.204999, 680.804923
Outstanding requests per worker:
230 210 211 204 190 230 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150004.6,      750024,     674836,      75188,     577966,      96870,   8.687233,  15.900000,  18.700000,  23.600000,   5.052035,   0.296000,  33.133000, 690.886051
Outstanding requests per worker:
232 220 200 204 225 215 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:24   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:24   0:00 /usr/lib/linux
memcache      7  308  0.0 443072 149632 pts/0   Sl+  17:24   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:24   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       18419034670      instructions:u            #    0.71  insn per cycle         
       25778017613      cycles:u                                                    
         111106265      armv8_pmuv3_0/br_mis_pred/:u                                   
        2875662153      armv8_pmuv3_0/br_pred/:u                                    

      42.280367370 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 6 threads, 152000 rps'
==> Bench: 262114 keys, 512 conns, 6 threads, 152000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 152000 -k 262114 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 152000 -k 262114 -c 512 -f 512 -w 6'
Starting client with -r 152000 -k 262114 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 152000 -k 262114 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 152000 -k 262114 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 152000 cpus 6
meanInterarrival 39
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2254631424
starting receive base loop
num_worker_connections 85
Creating worker on tid 1478423040
starting receive base loop
num_worker_connections 85
Creating worker on tid 713421312
starting receive base loop
num_worker_connections 85
Creating worker on tid 4246008320
starting receive base loop
num_worker_connections 85
Creating worker on tid 3483628032
starting receive base loop
Created 512 connections total
Creating worker on tid 2718626304
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575395487.393912,       0.0,      352708,     317150,      35558,     211257,     105893,  10.777530,  22.800000,  29.800000,  51.300000,  10.271996,   0.000000, 149.663001, 482.488680
Outstanding requests per worker:
221 245 221 241 211 256 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153854.6,      769274,     692485,      76789,     523434,     169051,   9.187970,  16.800000,  20.000000,  24.200000,   5.242743,   0.340000,  32.488000, 579.871632
Outstanding requests per worker:
266 236 232 217 245 223 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153861.2,      769307,     693024,      76283,     553330,     139694,   9.354889,  17.100000,  20.300000,  24.800000,   5.350201,   0.333000,  41.478001, 627.585535
Outstanding requests per worker:
243 262 238 239 231 218 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153863.4,      769318,     692421,      76897,     568348,     124073,   9.500981,  17.400000,  20.700000,  24.800000,   5.404320,   0.272000,  35.934001, 651.792694
Outstanding requests per worker:
226 241 250 253 244 245 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153858.4,      769293,     692516,      76777,     579302,     113214,   9.645754,  17.500000,  21.000000,  25.700000,   5.505966,   0.300000,  34.109998, 669.190110
Outstanding requests per worker:
231 224 261 245 242 252 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153845.8,      769230,     692161,      77069,     587687,     104474,   9.735905,  17.700000,  21.200000,  25.900000,   5.574419,   0.214000,  39.177001, 681.780791
Outstanding requests per worker:
252 239 254 247 280 255 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153871.8,      769360,     692750,      76610,     593588,      99162,   9.890892,  17.900000,  21.600000,  26.600000,   5.682818,   0.371000,  41.770998, 691.264290
Outstanding requests per worker:
254 248 255 248 225 260 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:24   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:25   0:00 /usr/lib/linux
memcache      7  308  0.0 445120 150144 pts/0   Sl+  17:25   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       18851332484      instructions:u            #    0.72  insn per cycle         
       26118152138      cycles:u                                                    
         113369120      armv8_pmuv3_0/br_mis_pred/:u                                   
        2946936193      armv8_pmuv3_0/br_pred/:u                                    

      42.431004144 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 6 threads, 154000 rps'
==> Bench: 262114 keys, 512 conns, 6 threads, 154000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 154000 -k 262114 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 154000 -k 262114 -c 512 -f 512 -w 6'
Starting client with -r 154000 -k 262114 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 154000 -k 262114 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 154000 -k 262114 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 154000 cpus 6
meanInterarrival 38
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1416163840
starting receive base loop
num_worker_connections 85
Creating worker on tid 646312448
starting receive base loop
num_worker_connections 85
Creating worker on tid 4178899456
starting receive base loop
num_worker_connections 85
Creating worker on tid 3416519168
starting receive base loop
num_worker_connections 85
Creating worker on tid 2651517440
starting receive base loop
Created 512 connections total
Creating worker on tid 1889137152
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575395533.393958,       0.0,      365581,     328921,      36660,     219968,     108953,  13.036115,  27.200000,  36.300000,  71.500000,  13.886277,   0.000000, 254.218996, 483.969294
Outstanding requests per worker:
271 244 319 257 261 257 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157891.8,      789460,     710485,      78975,     539082,     171403,  10.549216,  18.800000,  23.000000,  28.400000,   6.020187,   0.331000,  53.714000, 582.949644
Outstanding requests per worker:
269 281 270 278 288 283 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157891.2,      789457,     710511,      78946,     568515,     141996,  10.894162,  19.400000,  23.800000,  29.400000,   6.219694,   0.354000,  58.681998, 628.513509
Outstanding requests per worker:
281 316 296 265 297 293 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157886.4,      789433,     709957,      79476,     583772,     126185,  11.235927,  19.800000,  24.400000,  31.000000,   6.466667,   0.416000,  62.726997, 653.574993
Outstanding requests per worker:
279 317 289 324 324 321 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157923.4,      789618,     710875,      78743,     595219,     115656,  11.310689,  20.000000,  24.600000,  31.100000,   6.508442,   0.393000,  53.823002, 670.542569
Outstanding requests per worker:
289 298 305 287 317 307 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157912.8,      789565,     710304,      79261,     602756,     107548,  11.514708,  20.400000,  25.000000,  31.600000,   6.634719,   0.406000,  66.311002, 682.359802
Outstanding requests per worker:
310 280 273 283 299 309 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157890.2,      789452,     710523,      78929,     609520,     101003,  11.603319,  20.400000,  25.200000,  32.200000,   6.688612,   0.399000,  60.890999, 692.128795
Outstanding requests per worker:
317 285 300 353 286 292 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:25   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:25   0:00 /usr/lib/linux
memcache      7  309  0.0 448192 146624 pts/0   Sl+  17:25   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  17:26   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19415936259      instructions:u            #    0.72  insn per cycle         
       27062536747      cycles:u                                                    
         113155122      armv8_pmuv3_0/br_mis_pred/:u                                   
        3032224867      armv8_pmuv3_0/br_pred/:u                                    

      42.340441080 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 6 threads, 156000 rps'
==> Bench: 262114 keys, 512 conns, 6 threads, 156000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 156000 -k 262114 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 156000 -k 262114 -c 512 -f 512 -w 6'
Starting client with -r 156000 -k 262114 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 156000 -k 262114 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 156000 -k 262114 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 156000 cpus 6
meanInterarrival 38
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1687810560
starting receive base loop
num_worker_connections 85
Creating worker on tid 914747904
starting receive base loop
num_worker_connections 85
Creating worker on tid 152367616
starting receive base loop
num_worker_connections 85
Creating worker on tid 3684954624
starting receive base loop
num_worker_connections 85
Creating worker on tid 2919952896
starting receive base loop
Created 512 connections total
Creating worker on tid 2157572608
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575395578.394003,       0.0,      363054,     326372,      36682,     219019,     107353,  16.578849,  36.100000,  53.200000,  87.100000,  18.405577,   0.000000, 289.090008, 486.785839
Outstanding requests per worker:
282 297 305 300 292 309 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157897.2,      789487,     710557,      78930,     538337,     172220,  11.558141,  20.200000,  25.100000,  31.800000,   6.624925,   0.404000,  62.654004, 582.114889
Outstanding requests per worker:
311 324 307 285 313 308 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157862.0,      789311,     710898,      78413,     568175,     142723,  11.884899,  20.600000,  25.800000,  32.900000,   6.816987,   0.360000,  60.240999, 628.222509
Outstanding requests per worker:
356 348 331 339 330 351 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157932.4,      789663,     711089,      78574,     584463,     126626,  12.188626,  21.200000,  26.400000,  33.900000,   6.991752,   0.481000,  57.521999, 653.649372
Outstanding requests per worker:
302 330 302 324 314 339 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157875.0,      789376,     711082,      78294,     594811,     116271,  12.399657,  21.700000,  26.800000,  34.700000,   7.173862,   0.355000,  66.321000, 669.676348
Outstanding requests per worker:
362 360 349 339 325 322 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157922.6,      789614,     710525,      79089,     603121,     107404,  12.670974,  22.200000,  27.300000,  35.800000,   7.349120,   0.371000,  70.170999, 683.056047
Outstanding requests per worker:
339 330 332 339 339 298 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157901.0,      789506,     710416,      79090,     609129,     101287,  12.772746,  22.100000,  27.600000,  36.100000,   7.380038,   0.279000,  69.081001, 692.567418
Outstanding requests per worker:
315 318 352 343 344 328 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:26   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   17:26   0:00 /usr/lib/linux
memcache      8  301  0.0 447168 153216 pts/0   Sl+  17:26   2:09 memcached -t 4
memcache     19  0.0  0.0   6656  4416 pts/1    Rs+  17:27   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19396424398      instructions:u            #    0.71  insn per cycle         
       27198888308      cycles:u                                                    
         110736433      armv8_pmuv3_0/br_mis_pred/:u                                   
        3023514141      armv8_pmuv3_0/br_pred/:u                                    

      42.620428754 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 6 threads, 158000 rps'
==> Bench: 262114 keys, 512 conns, 6 threads, 158000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 158000 -k 262114 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 158000 -k 262114 -c 512 -f 512 -w 6'
Starting client with -r 158000 -k 262114 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 158000 -k 262114 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 158000 -k 262114 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 158000 cpus 6
meanInterarrival 37
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1931866624
starting receive base loop
num_worker_connections 85
Creating worker on tid 1159000576
starting receive base loop
num_worker_connections 85
Creating worker on tid 396620288
starting receive base loop
num_worker_connections 85
Creating worker on tid 3926585856
starting receive base loop
num_worker_connections 85
Creating worker on tid 3164205568
starting receive base loop
Created 512 connections total
Creating worker on tid 2399203840
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575395624.394049,       0.0,      372984,     335467,      37517,     225046,     110421,  24.349737,  58.900000,  77.500000, 114.800000,  26.174925,   0.000000, 328.532994, 486.432749
Outstanding requests per worker:
367 393 404 378 353 416 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162149.4,      810748,     729950,      80798,     555210,     174740,  14.507611,  24.400000,  31.200000,  40.900000,   8.273185,   0.485000,  81.497997, 585.397789
Outstanding requests per worker:
404 427 393 402 396 405 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162161.4,      810808,     730120,      80688,     584903,     145217,  15.270352,  25.200000,  32.500000,  43.300000,   8.662888,   0.429000,  80.012999, 630.543930
Outstanding requests per worker:
433 433 435 395 373 407 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162167.8,      810840,     729725,      81115,     601602,     128123,  15.756136,  26.100000,  33.400000,  44.900000,   8.969392,   0.616000,  87.249003, 656.184685
Outstanding requests per worker:
383 470 440 407 404 407 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162146.4,      810733,     729459,      81274,     611885,     117574,  15.999194,  26.700000,  34.100000,  46.000000,   9.208019,   0.583000,  88.831000, 671.693865
Outstanding requests per worker:
458 438 430 420 452 449 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162172.2,      810862,     729762,      81100,     620463,     109299,  16.248792,  26.900000,  34.500000,  47.000000,   9.330620,   0.548000,  88.182002, 684.295891
Outstanding requests per worker:
449 443 440 472 368 469 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161758.6,      808794,     727527,      81267,     625202,     102325,  17.201819,  28.700000,  37.900000,  54.800000,  10.755487,   0.578000, 128.301993, 693.882641
Outstanding requests per worker:
826 729 771 801 766 815 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  17:27   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   17:27   0:00 /usr/lib/linux
memcache      7  301  0.0 516224 158400 pts/0   Sl+  17:27   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:28   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20025533956      instructions:u            #    0.72  insn per cycle         
       27675243590      cycles:u                                                    
         112145103      armv8_pmuv3_0/br_mis_pred/:u                                   
        3113831249      armv8_pmuv3_0/br_pred/:u                                    

      42.790865565 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 6 threads, 160000 rps'
==> Bench: 262114 keys, 512 conns, 6 threads, 160000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 160000 -k 262114 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 160000 -k 262114 -c 512 -f 512 -w 6'
Starting client with -r 160000 -k 262114 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 160000 -k 262114 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 160000 -k 262114 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 160000 cpus 6
meanInterarrival 37
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2387276288
starting receive base loop
num_worker_connections 85
Creating worker on tid 1612640768
starting receive base loop
num_worker_connections 85
Creating worker on tid 847639040
starting receive base loop
num_worker_connections 85
Creating worker on tid 85258752
starting receive base loop
num_worker_connections 85
Creating worker on tid 3617845760
starting receive base loop
Created 512 connections total
Creating worker on tid 2852844032
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575395670.394095,       0.0,      375108,     337429,      37679,     226303,     111126,  17.158920,  36.900000,  54.900000,  88.000000,  18.315837,   0.000000, 282.629013, 486.922360
Outstanding requests per worker:
327 299 307 314 308 321 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162139.2,      810697,     729754,      80943,     554833,     174921,  12.284337,  21.200000,  26.400000,  33.900000,   6.957596,   0.413000,  61.214998, 584.852115
Outstanding requests per worker:
318 346 324 356 377 337 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162156.6,      810784,     729876,      80908,     584573,     145303,  12.757105,  22.100000,  27.300000,  35.700000,   7.283976,   0.480000,  72.903000, 630.368209
Outstanding requests per worker:
394 317 383 328 371 332 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162176.6,      810884,     729629,      81255,     602134,     127495,  13.181637,  22.400000,  28.300000,  36.900000,   7.499608,   0.460000,  69.468997, 656.120559
Outstanding requests per worker:
344 378 359 375 371 328 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162169.0,      810846,     730188,      80658,     613133,     117055,  13.509524,  22.800000,  29.100000,  37.900000,   7.707865,   0.450000,  75.410001, 672.198831
Outstanding requests per worker:
390 339 361 376 339 359 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162161.8,      810810,     729572,      81238,     620482,     109090,  13.723689,  23.300000,  29.400000,  38.600000,   7.838705,   0.354000,  77.396996, 684.909247
Outstanding requests per worker:
387 368 379 344 362 383 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161473.6,      807369,     726280,      81089,     624244,     102036,  14.268756,  24.300000,  31.400000,  42.400000,   8.679904,   0.463000, 101.264998, 694.328464
Outstanding requests per worker:
992 996 969 849 945 971 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:28   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   17:28   0:00 /usr/lib/linux
memcache      7  301  0.0 515200 156096 pts/0   Sl+  17:28   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:28   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19975300066      instructions:u            #    0.72  insn per cycle         
       27565767956      cycles:u                                                    
         114318923      armv8_pmuv3_0/br_mis_pred/:u                                   
        3115154810      armv8_pmuv3_0/br_pred/:u                                    

      42.511835935 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 6 threads, 162000 rps'
==> Bench: 262114 keys, 512 conns, 6 threads, 162000 rps
++ bc
++ echo '512 + 128'
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 162000 -k 262114 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 162000 -k 262114 -c 512 -f 512 -w 6'
Starting client with -r 162000 -k 262114 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 162000 -k 262114 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 162000 -k 262114 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 162000 cpus 6
meanInterarrival 37
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1482355200
starting receive base loop
num_worker_connections 85
Creating worker on tid 713421312
starting receive base loop
num_worker_connections 85
Creating worker on tid 4246008320
starting receive base loop
num_worker_connections 85
Creating worker on tid 3483628032
starting receive base loop
num_worker_connections 85
Creating worker on tid 2718626304
starting receive base loop
Created 512 connections total
Creating worker on tid 1956246016
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575395716.394141,       0.0,      375938,     338193,      37745,     227245,     110948,  18.684812,  40.200000,  60.700000,  97.600000,  20.886512,   0.000000, 323.830992, 488.374360
Outstanding requests per worker:
326 364 326 326 337 403 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162154.2,      810772,     729993,      80779,     554747,     175246,  13.083902,  22.500000,  28.000000,  36.800000,   7.465029,   0.388000,  71.064003, 584.918613
Outstanding requests per worker:
344 379 340 348 359 391 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162166.6,      810834,     729574,      81260,     584826,     144748,  13.692746,  23.600000,  28.900000,  39.700000,   7.920397,   0.430000,  76.637000, 630.955311
Outstanding requests per worker:
330 344 378 364 380 380 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162139.2,      810697,     729552,      81145,     601389,     128163,  14.097842,  24.100000,  29.800000,  41.100000,   8.158234,   0.446000,  80.678999, 655.719106
Outstanding requests per worker:
415 424 375 346 383 388 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162169.2,      810847,     730462,      80385,     613303,     117159,  14.330095,  24.300000,  30.400000,  41.000000,   8.183878,   0.511000,  77.822998, 672.213069
Outstanding requests per worker:
402 373 369 394 383 412 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162151.6,      810759,     729524,      81235,     620226,     109298,  14.567416,  24.600000,  31.000000,  41.800000,   8.356850,   0.351000,  76.729000, 684.208733
Outstanding requests per worker:
445 420 385 440 354 381 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161588.6,      807944,     727454,      80490,     625731,     101723,  14.865008,  25.100000,  31.700000,  43.000000,   8.602145,   0.514000,  84.073998, 695.114015
Outstanding requests per worker:
875 925 807 865 956 906 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:28   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   17:28   0:00 /usr/lib/linux
memcache      7  302  0.0 514176 153152 pts/0   Sl+  17:28   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20055792559      instructions:u            #    0.72  insn per cycle         
       27663320542      cycles:u                                                    
         114917022      armv8_pmuv3_0/br_mis_pred/:u                                   
        3117294270      armv8_pmuv3_0/br_pred/:u                                    

      42.480136034 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 6 threads, 164000 rps'
==> Bench: 262114 keys, 512 conns, 6 threads, 164000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 164000 -k 262114 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 164000 -k 262114 -c 512 -f 512 -w 6'
Starting client with -r 164000 -k 262114 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 164000 -k 262114 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 164000 -k 262114 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 164000 cpus 6
meanInterarrival 36
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2286809600
starting receive base loop
num_worker_connections 85
Creating worker on tid 1510666752
starting receive base loop
num_worker_connections 85
Creating worker on tid 748286464
starting receive base loop
num_worker_connections 85
Creating worker on tid 4278252032
starting receive base loop
num_worker_connections 85
Creating worker on tid 3515871744
starting receive base loop
Created 512 connections total
Creating worker on tid 2753491456
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575395762.394187,       0.0,      377684,     339504,      38180,     227932,     111572,  36.730136,  86.400000, 103.200000, 142.700000,  35.506151,   0.000000, 372.269005, 487.390043
Outstanding requests per worker:
968 880 925 828 811 898 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166611.8,      833060,     749982,      83078,     569440,     180542,  31.232184,  81.600000,  97.100000, 132.500000,  30.711383,   0.672000, 202.513993, 584.322452
Outstanding requests per worker:
1061 875 931 991 852 941 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166613.6,      833069,     749851,      83218,     601090,     148761,  34.816194,  93.900000, 115.900000, 146.500000,  35.891134,   0.731000, 248.486996, 630.755743
Outstanding requests per worker:
946 1003 1126 1021 912 959 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166514.0,      832571,     749355,      83216,     618119,     131236,  40.014170, 113.600000, 136.600000, 175.900000,  43.234885,   0.589000, 269.701004, 656.344079
Outstanding requests per worker:
1129 1130 1144 1106 1104 1161 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166677.2,      833387,     750448,      82939,     630590,     119858,  40.893486, 116.600000, 139.600000, 184.400000,  44.906170,   0.837000, 345.483989, 673.902791
Outstanding requests per worker:
1098 1041 1199 1191 1066 1183 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166502.4,      832513,     749740,      82773,     638481,     111259,  42.643161, 124.000000, 147.300000, 194.300000,  47.887551,   0.741000, 328.016013, 685.860392
Outstanding requests per worker:
1216 1257 1361 1219 1304 1304 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166119.0,      830596,     747907,      82689,     643682,     104225,  49.471444, 139.200000, 164.900000, 214.500000,  54.125384,   0.652000, 347.030014, 695.862887
Outstanding requests per worker:
1712 1635 1964 1749 1762 1629 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:29   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:29   0:00 /usr/lib/linux
memcache      7  308  0.0 518272 154880 pts/0   Sl+  17:29   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:30   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20689169354      instructions:u            #    0.73  insn per cycle         
       28356289273      cycles:u                                                    
         118765581      armv8_pmuv3_0/br_mis_pred/:u                                   
        3221328244      armv8_pmuv3_0/br_pred/:u                                    

      42.560786034 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 6 threads, 166000 rps'
==> Bench: 262114 keys, 512 conns, 6 threads, 166000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 166000 -k 262114 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 166000 -k 262114 -c 512 -f 512 -w 6'
Starting client with -r 166000 -k 262114 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 166000 -k 262114 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 166000 -k 262114 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 166000 cpus 6
meanInterarrival 36
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2024403456
starting receive base loop
num_worker_connections 85
Creating worker on tid 1250292224
starting receive base loop
num_worker_connections 85
Creating worker on tid 487911936
starting receive base loop
num_worker_connections 85
Creating worker on tid 4020498944
starting receive base loop
num_worker_connections 85
Creating worker on tid 3255497216
starting receive base loop
Created 512 connections total
Creating worker on tid 2493116928
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575395809.394234,       0.0,      381210,     342760,      38450,     229877,     112883,  31.064847,  71.500000,  84.600000, 122.700000,  29.748967,   0.000000, 358.716011, 486.699834
Outstanding requests per worker:
520 529 588 553 492 555 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166762.2,      833812,     750415,      83397,     571726,     178689,  16.602150,  27.200000,  35.300000,  47.900000,   9.487524,   0.496000,  90.744004, 586.995717
Outstanding requests per worker:
465 456 451 471 474 488 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166664.0,      833321,     750617,      82704,     602763,     147854,  17.112145,  27.900000,  36.400000,  49.100000,   9.718012,   0.694000,  92.936002, 632.628764
Outstanding requests per worker:
502 540 466 454 446 471 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166675.0,      833376,     749732,      83644,     619768,     129964,  17.707500,  29.100000,  37.800000,  51.300000,  10.090880,   0.693000,  94.171003, 657.645452
Outstanding requests per worker:
460 527 468 515 476 470 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166677.0,      833386,     749909,      83477,     630948,     118961,  17.962663,  29.100000,  38.300000,  51.700000,  10.180149,   0.426000,  98.779999, 674.484215
Outstanding requests per worker:
497 448 477 532 535 477 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166678.6,      833394,     750126,      83268,     639295,     110831,  18.331711,  30.100000,  39.200000,  53.300000,  10.471471,   0.680000,  99.808998, 686.346576
Outstanding requests per worker:
452 486 492 510 519 500 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166372.2,      831862,     748656,      83206,     644073,     104583,  20.309626,  36.200000,  48.100000,  72.700000,  13.594243,   0.620000, 139.529005, 695.849358
Outstanding requests per worker:
734 691 792 790 704 781 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:30   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   17:30   0:00 /usr/lib/linux
memcache      7  301  0.0 517248 156928 pts/0   Sl+  17:30   2:09 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  17:31   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20699522409      instructions:u            #    0.74  insn per cycle         
       28045257959      cycles:u                                                    
         115089447      armv8_pmuv3_0/br_mis_pred/:u                                   
        3206837133      armv8_pmuv3_0/br_pred/:u                                    

      42.801080403 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 6 threads, 168000 rps'
==> Bench: 262114 keys, 512 conns, 6 threads, 168000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 168000 -k 262114 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 168000 -k 262114 -c 512 -f 512 -w 6'
Starting client with -r 168000 -k 262114 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 168000 -k 262114 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 168000 -k 262114 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 168000 cpus 6
meanInterarrival 35
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1904275968
starting receive base loop
num_worker_connections 85
Creating worker on tid 1134817792
starting receive base loop
num_worker_connections 85
Creating worker on tid 369816064
starting receive base loop
num_worker_connections 85
Creating worker on tid 3902403072
starting receive base loop
num_worker_connections 85
Creating worker on tid 3137401344
starting receive base loop
Created 512 connections total
Creating worker on tid 2375021056
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575395855.394280,       0.0,      382703,     344242,      38461,     231514,     112728,  61.051541, 112.100000, 129.800000, 194.700000,  44.167993,   0.000000, 422.163010, 488.940713
Outstanding requests per worker:
2307 2444 2422 2380 2471 2521 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170156.4,      850783,     765802,      84981,     583339,     182463, 107.960981, 160.500000, 183.500000, 222.400000,  40.709717,   1.596000, 394.264013, 587.263683
Outstanding requests per worker:
3467 3373 3380 3557 3718 3504 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170836.0,      854181,     769185,      84996,     618712,     150473, 131.057226, 199.500000, 225.400000, 275.100000,  50.574321,   1.544000, 422.618985, 633.928982
Outstanding requests per worker:
3898 3916 4069 4140 4048 4008 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170873.4,      854368,     769304,      85064,     636262,     133042, 149.018673, 236.800000, 271.000000, 338.600000,  62.129999,   3.447000, 487.260997, 658.805550
Outstanding requests per worker:
4367 4201 4515 4653 4516 4658 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170963.6,      854819,     769303,      85516,     648369,     120934, 163.496772, 266.200000, 320.400000, 427.400000,  75.928284,   2.078000, 602.869987, 675.961833
Outstanding requests per worker:
4660 4585 4866 5107 4850 5246 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170898.0,      854491,     769281,      85210,     656892,     112389, 177.307645, 304.800000, 383.200000, 508.600000,  93.580136,   2.613000, 722.447991, 688.240811
Outstanding requests per worker:
4996 5003 5526 5386 5530 5615 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170498.2,      852492,     767428,      85064,     661538,     105890, 198.919723, 347.500000, 422.500000, 615.800000, 112.813798,   2.952000, 996.971011, 697.121043
Outstanding requests per worker:
5474 5650 6542 6296 6360 6502 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:31   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:31   0:00 /usr/lib/linux
memcache      7  301  0.0 520320 164928 pts/0   Sl+  17:31   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:31   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21576695025      instructions:u            #    0.73  insn per cycle         
       29491215929      cycles:u                                                    
         127364078      armv8_pmuv3_0/br_mis_pred/:u                                   
        3364410091      armv8_pmuv3_0/br_pred/:u                                    

      42.501083069 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 6 threads, 170000 rps'
==> Bench: 262114 keys, 512 conns, 6 threads, 170000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 170000 -k 262114 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 170000 -k 262114 -c 512 -f 512 -w 6'
Starting client with -r 170000 -k 262114 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 170000 -k 262114 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 170000 -k 262114 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 170000 cpus 6
meanInterarrival 35
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2263020032
starting receive base loop
num_worker_connections 85
Creating worker on tid 1486483968
starting receive base loop
num_worker_connections 85
Creating worker on tid 721482240
starting receive base loop
num_worker_connections 85
Creating worker on tid 4254069248
starting receive base loop
num_worker_connections 85
Creating worker on tid 3491688960
starting receive base loop
Created 512 connections total
Creating worker on tid 2726687232
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575395901.394326,       0.0,      388674,     349655,      39019,     234983,     114672,  46.605210,  92.400000, 112.000000, 173.300000,  38.749563,   0.000000, 396.822989, 488.669709
Outstanding requests per worker:
1239 1219 1267 1329 1321 1329 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171490.0,      857451,     772186,      85265,     589190,     182996,  41.077455, 112.800000, 135.400000, 175.700000,  42.429041,   1.028000, 301.928997, 587.750464
Outstanding requests per worker:
1245 1116 1350 1346 1128 1268 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171147.6,      855739,     770444,      85295,     619534,     150910,  47.974105, 140.200000, 166.300000, 214.800000,  54.435705,   0.967000, 323.092014, 633.681151
Outstanding requests per worker:
1324 1580 1475 1619 1400 1518 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171453.6,      857269,     771677,      85592,     638130,     133547,  51.885349, 152.600000, 184.000000, 236.300000,  59.810203,   0.953000, 381.731004, 658.388424
Outstanding requests per worker:
1483 1283 1505 1409 1533 1647 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171145.6,      855729,     769923,      85806,     648620,     121303,  55.359312, 166.900000, 199.600000, 256.800000,  65.586578,   1.022000, 418.451011, 675.804514
Outstanding requests per worker:
1645 1732 1733 1826 1714 1677 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171363.8,      856820,     771463,      85357,     657973,     113490,  61.021724, 190.100000, 222.600000, 282.800000,  74.461997,   0.932000, 469.823003, 687.116812
Outstanding requests per worker:
1667 1735 1861 1752 1950 1736 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169506.4,      847533,     762329,      85204,     657342,     104987,  80.330669, 207.600000, 248.700000, 312.500000,  79.663213,   0.856000, 504.238009, 697.931513
Outstanding requests per worker:
3105 3145 3576 3710 3390 3453 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  17:31   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:31   0:00 /usr/lib/linux
memcache      7  301  0.0 521344 163648 pts/0   Sl+  17:31   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:32   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21363183204      instructions:u            #    0.73  insn per cycle         
       29195669148      cycles:u                                                    
         125433605      armv8_pmuv3_0/br_mis_pred/:u                                   
        3317826767      armv8_pmuv3_0/br_pred/:u                                    

      42.401134360 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 6 threads, 172000 rps'
==> Bench: 262114 keys, 512 conns, 6 threads, 172000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 172000 -k 262114 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 172000 -k 262114 -c 512 -f 512 -w 6'
Starting client with -r 172000 -k 262114 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 172000 -k 262114 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 172000 -k 262114 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 172000 cpus 6
meanInterarrival 34
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1557066240
starting receive base loop
num_worker_connections 85
Creating worker on tid 780530176
starting receive base loop
num_worker_connections 85
Creating worker on tid 18149888
starting receive base loop
num_worker_connections 85
Creating worker on tid 3550736896
starting receive base loop
num_worker_connections 85
Creating worker on tid 2785735168
starting receive base loop
Created 512 connections total
Creating worker on tid 2023354880
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575395947.394372,       0.0,      389546,     350457,      39089,     235528,     114929,  74.025770, 131.500000, 160.300000, 421.800000,  76.215334,   0.000000, 874.643028, 488.218198
Outstanding requests per worker:
3011 2920 3285 3065 3139 4802 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174371.8,      871860,     784733,      87127,     597523,     187210, 148.301069, 217.600000, 254.900000, 447.900000,  71.370407,   2.568000, 836.830974, 586.409556
Outstanding requests per worker:
4838 4939 4919 5083 5224 5817 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175218.2,      876092,     788624,      87468,     634088,     154536, 193.108865, 298.800000, 357.800000, 496.000000,  89.350963,   7.732000, 1015.329003, 632.935202
Outstanding requests per worker:
5821 5671 6407 6304 6331 6663 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175322.0,      876611,     788815,      87796,     652911,     135904, 226.297553, 372.200000, 461.000000, 619.400000, 112.242169,   5.897000, 1088.330030, 659.545801
Outstanding requests per worker:
6692 6420 7390 7293 7373 7824 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175312.2,      876562,     788209,      88353,     664418,     123791, 258.304480, 454.300000, 552.500000, 808.600000, 143.096914,  17.045001, 1060.192943, 676.088583
Outstanding requests per worker:
7442 7383 8496 8583 8155 8807 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175236.6,      876184,     788625,      87559,     673506,     115119, 293.619198, 539.800000, 692.800000, 937.200000, 177.949701,   5.518000, 1287.806034, 688.568107
Outstanding requests per worker:
7939 8035 9839 10050 9344 9922 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174425.0,      872126,     784507,      87619,     676801,     107706, 344.429503, 655.800000, 815.400000, 1069.400000, 213.358801,  30.996000, 1550.732970, 698.318299
Outstanding requests per worker:
9086 9251 11630 11919 11712 11874 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  17:32   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   17:32   0:00 /usr/lib/linux
memcache      8  301  0.0 524416 174976 pts/0   Sl+  17:32   2:09 memcached -t 4
memcache     19  0.0  0.0   6656  4416 pts/1    Rs+  17:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       22011190224      instructions:u            #    0.74  insn per cycle         
       29694940187      cycles:u                                                    
         127397890      armv8_pmuv3_0/br_mis_pred/:u                                   
        3430251618      armv8_pmuv3_0/br_pred/:u                                    

      42.541043643 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 6 threads, 174000 rps'
==> Bench: 262114 keys, 512 conns, 6 threads, 174000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 174000 -k 262114 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 174000 -k 262114 -c 512 -f 512 -w 6'
Starting client with -r 174000 -k 262114 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 174000 -k 262114 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 174000 -k 262114 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 174000 cpus 6
meanInterarrival 34
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 2414932480
starting receive base loop
num_worker_connections 85
Creating worker on tid 1644884480
starting receive base loop
num_worker_connections 85
Creating worker on tid 882504192
starting receive base loop
num_worker_connections 85
Creating worker on tid 117502464
starting receive base loop
num_worker_connections 85
Creating worker on tid 3650089472
starting receive base loop
Created 512 connections total
Creating worker on tid 2887709184
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575395993.394418,       0.0,      384509,     346070,      38439,     232235,     113835,  84.181024, 148.900000, 184.000000, 341.200000,  66.799401,   0.000000, 637.048006, 487.798578
Outstanding requests per worker:
3604 3629 3779 3586 3783 4688 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173340.8,      866705,     780115,      86590,     593211,     186904, 180.557080, 265.900000, 305.800000, 406.500000,  70.072591,   3.966000, 933.193982, 586.004393
Outstanding requests per worker:
6176 5928 6548 6483 6654 6981 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174335.8,      871680,     784816,      86864,     631541,     153275, 249.364218, 382.500000, 460.500000, 618.100000, 108.585003,  16.673001, 1098.831058, 634.312784
Outstanding requests per worker:
7604 7397 8373 8724 8509 8880 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174346.8,      871735,     784373,      87362,     648984,     135389, 310.497635, 514.900000, 624.300000, 799.400000, 149.108091,  18.926000, 1333.858967, 658.625014
Outstanding requests per worker:
8925 8597 10132 10662 10606 11229 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174252.6,      871264,     784533,      86731,     661119,     123414, 369.036454, 645.500000, 785.900000, 991.700000, 193.350606,  34.536000, 1560.487032, 676.028317
Outstanding requests per worker:
10414 10125 12100 13269 12616 12770 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173887.4,      869438,     782315,      87123,     668045,     114270, 438.347604, 793.100000, 958.700000, 1229.700000, 240.619634,  48.735999, 1632.632971, 688.254743
Outstanding requests per worker:
12116 11575 14267 15848 15045 15403 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172946.8,      864735,     778659,      86076,     671916,     106743, 524.229049, 962.800000, 1168.000000, 1472.300000, 294.774940,  55.583999, 1814.470053, 697.793771
Outstanding requests per worker:
14192 13595 17493 18999 18346 19296 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:33   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   17:33   0:00 /usr/lib/linux
memcache      7  301  0.0 522368 173248 pts/0   Sl+  17:33   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21822102511      instructions:u            #    0.73  insn per cycle         
       30085478903      cycles:u                                                    
         126631677      armv8_pmuv3_0/br_mis_pred/:u                                   
        3395524640      armv8_pmuv3_0/br_pred/:u                                    

      42.611434794 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 6 threads, 176000 rps'
==> Bench: 262114 keys, 512 conns, 6 threads, 176000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 176000 -k 262114 -c 512 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 176000 -k 262114 -c 512 -f 512 -w 6'
Starting client with -r 176000 -k 262114 -c 512 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 176000 -k 262114 -c 512 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 176000 -k 262114 -c 512 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 176000 cpus 6
meanInterarrival 34
num_worker_connections 86
num_worker_connections 86
Creating worker on tid 1939927552
starting receive base loop
num_worker_connections 85
Creating worker on tid 1167061504
starting receive base loop
num_worker_connections 85
Creating worker on tid 404681216
starting receive base loop
num_worker_connections 85
Creating worker on tid 3934646784
starting receive base loop
num_worker_connections 85
Creating worker on tid 3172266496
starting receive base loop
Created 512 connections total
Creating worker on tid 2409886208
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575396039.394464,       0.0,      388799,     349801,      38998,     235376,     114425,  79.730239, 142.100000, 170.500000, 339.100000,  64.028181,   0.000000, 616.726995, 489.612623
Outstanding requests per worker:
3369 3466 3542 3683 3592 4479 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173461.2,      867307,     780546,      86761,     595373,     185173, 172.223290, 257.900000, 297.200000, 380.200000,  65.695261,   5.499000, 541.467011, 587.989930
Outstanding requests per worker:
5923 5650 6329 6669 6280 6425 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173930.2,      869652,     782692,      86960,     630376,     152316, 247.122912, 382.500000, 446.300000, 562.100000,  99.062865,   9.285000, 741.358995, 634.351497
Outstanding requests per worker:
7562 7688 8667 8797 8672 8705 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174086.8,      870435,     783443,      86992,     648459,     134984, 314.598276, 532.300000, 644.800000, 799.700000, 149.544579,  38.998000, 1118.656039, 659.710788
Outstanding requests per worker:
8956 9253 11133 10950 10696 11075 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173841.6,      869209,     782092,      87117,     659054,     123038, 385.686784, 700.800000, 830.000000, 1008.700000, 202.210009,  42.831000, 1247.956038, 676.079515
Outstanding requests per worker:
10200 11171 13456 13582 13172 13706 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173731.6,      868659,     781828,      86831,     667374,     114454, 460.366551, 856.200000, 1001.400000, 1204.700000, 251.546378,  44.691999, 1522.132039, 687.953471
Outstanding requests per worker:
11435 12901 16110 16240 15842 16548 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172611.4,      863058,     776626,      86432,     670047,     106579, 556.227557, 1007.300000, 1162.500000, 1412.300000, 295.497397,  76.925002, 1742.285013, 698.039222
Outstanding requests per worker:
13663 15348 19729 20022 19624 20095 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:34   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   17:34   0:00 /usr/lib/linux
memcache      7  302  0.0 521344 169792 pts/0   Sl+  17:34   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21851851877      instructions:u            #    0.74  insn per cycle         
       29606948231      cycles:u                                                    
         125011632      armv8_pmuv3_0/br_mis_pred/:u                                   
        3401646261      armv8_pmuv3_0/br_pred/:u                                    

      42.581407040 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 8 threads, 150000 rps'
==> Bench: 262114 keys, 512 conns, 8 threads, 150000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 150000 -k 262114 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 150000 -k 262114 -c 512 -f 512 -w 8'
Starting client with -r 150000 -k 262114 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 150000 -k 262114 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 150000 -k 262114 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 150000 cpus 8
meanInterarrival 53
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2194993664
starting receive base loop
num_worker_connections 64
Creating worker on tid 1596715520
starting receive base loop
num_worker_connections 64
Creating worker on tid 1000796672
starting receive base loop
num_worker_connections 64
Creating worker on tid 404877824
starting receive base loop
num_worker_connections 64
Creating worker on tid 4103926272
starting receive base loop
num_worker_connections 64
Creating worker on tid 3508007424
starting receive base loop
num_worker_connections 64
Creating worker on tid 2914710016
starting receive base loop
Created 512 connections total
Creating worker on tid 2318791168
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575396086.394511,       0.0,      453077,     408050,      45027,     277054,     130996,   7.446325,  18.100000,  22.400000,  37.600000,   9.389354,   0.000000, 181.867003, 496.825318
Outstanding requests per worker:
197 187 175 196 174 188 179 187 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150946.0,      754731,     679763,      74968,     519555,     160208,   9.605439,  18.000000,  21.800000,  28.100000,   6.134949,   0.191000,  54.928001, 589.643827
Outstanding requests per worker:
173 182 205 190 211 183 192 175 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150935.2,      754677,     679336,      75341,     544517,     134819,  10.044342,  18.800000,  22.700000,  29.500000,   6.459848,   0.177000,  60.295999, 630.801983
Outstanding requests per worker:
215 193 233 190 159 223 180 198 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150960.4,      754803,     679324,      75479,     558447,     120877,  10.340027,  19.500000,  23.400000,  30.600000,   6.675806,   0.184000,  64.805999, 653.485608
Outstanding requests per worker:
188 171 206 197 186 224 191 176 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150934.6,      754674,     679257,      75417,     568928,     110329,  10.617213,  20.000000,  24.000000,  31.500000,   6.897876,   0.156000,  73.311001, 670.075094
Outstanding requests per worker:
209 221 207 204 192 189 201 199 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150949.4,      754748,     679213,      75535,     575870,     103343,  10.695450,  20.000000,  24.200000,  31.800000,   6.885299,   0.187000,  62.871002, 681.414648
Outstanding requests per worker:
198 196 201 193 226 209 201 205 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150938.8,      754695,     679277,      75418,     582467,      96810,  11.021822,  20.700000,  24.800000,  33.200000,   7.145002,   0.208000,  66.023000, 692.407411
Outstanding requests per worker:
239 220 177 228 243 193 198 194 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:34   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   17:34   0:00 /usr/lib/linux
memcache      7  302  0.0 446144 149696 pts/0   Sl+  17:34   2:13 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:35   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       18969398715      instructions:u            #    0.71  insn per cycle         
       26606924601      cycles:u                                                    
         108436594      armv8_pmuv3_0/br_mis_pred/:u                                   
        2963952712      armv8_pmuv3_0/br_pred/:u                                    

      43.569927329 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 8 threads, 152000 rps'
==> Bench: 262114 keys, 512 conns, 8 threads, 152000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 152000 -k 262114 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 152000 -k 262114 -c 512 -f 512 -w 8'
Starting client with -r 152000 -k 262114 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 152000 -k 262114 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 152000 -k 262114 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 152000 cpus 8
meanInterarrival 52
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2624385536
starting receive base loop
num_worker_connections 64
Creating worker on tid 2031612416
starting receive base loop
num_worker_connections 64
Creating worker on tid 1438315008
starting receive base loop
num_worker_connections 64
Creating worker on tid 842396160
starting receive base loop
num_worker_connections 64
Creating worker on tid 246477312
starting receive base loop
num_worker_connections 64
Creating worker on tid 3945525760
starting receive base loop
num_worker_connections 64
Creating worker on tid 3349606912
starting receive base loop
Created 512 connections total
Creating worker on tid 2753688064
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575396132.394557,       0.0,      369344,     332344,      37000,     222587,     109757,  12.592739,  27.200000,  35.700000,  69.400000,  13.908531,   0.000000, 229.770005, 486.586880
Outstanding requests per worker:
155 204 183 186 185 219 214 245 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153835.0,      769176,     692375,      76801,     524737,     167638,  10.655815,  19.700000,  24.200000,  31.400000,   6.825958,   0.183000,  64.606003, 582.824331
Outstanding requests per worker:
193 225 222 253 207 189 212 193 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153834.8,      769175,     692719,      76456,     553582,     139137,  11.189036,  20.600000,  25.400000,  33.200000,   7.188672,   0.234000,  67.163996, 628.368035
Outstanding requests per worker:
245 257 191 237 196 215 211 230 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153856.4,      769283,     692304,      76979,     569553,     122751,  11.563527,  21.200000,  26.200000,  34.700000,   7.463120,   0.202000,  79.759002, 653.667016
Outstanding requests per worker:
199 198 198 241 276 204 252 203 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153846.8,      769235,     692444,      76791,     579480,     112964,  11.924412,  21.600000,  26.800000,  35.800000,   7.639852,   0.179000,  72.001003, 669.626311
Outstanding requests per worker:
192 216 263 195 242 258 216 217 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153843.2,      769217,     692207,      77010,     587127,     105080,  12.038315,  22.100000,  26.900000,  36.200000,   7.764334,   0.205000,  75.843997, 682.235717
Outstanding requests per worker:
217 222 242 235 227 232 238 242 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153852.4,      769263,     692354,      76909,     592948,      99406,  12.443878,  22.700000,  27.800000,  38.000000,   8.055237,   0.246000,  77.977002, 690.893237
Outstanding requests per worker:
230 237 223 225 215 252 219 259 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:35   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:35   0:00 /usr/lib/linux
memcache      7  302  0.0 445120 148352 pts/0   Sl+  17:35   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:36   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       18971468601      instructions:u            #    0.72  insn per cycle         
       26229004745      cycles:u                                                    
         108645091      armv8_pmuv3_0/br_mis_pred/:u                                   
        2954226690      armv8_pmuv3_0/br_pred/:u                                    

      42.280927477 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 8 threads, 154000 rps'
==> Bench: 262114 keys, 512 conns, 8 threads, 154000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 154000 -k 262114 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 154000 -k 262114 -c 512 -f 512 -w 8'
Starting client with -r 154000 -k 262114 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 154000 -k 262114 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 154000 -k 262114 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 154000 cpus 8
meanInterarrival 51
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2268328448
starting receive base loop
num_worker_connections 64
Creating worker on tid 1671885312
starting receive base loop
num_worker_connections 64
Creating worker on tid 1075966464
starting receive base loop
num_worker_connections 64
Creating worker on tid 480047616
starting receive base loop
num_worker_connections 64
Creating worker on tid 4179096064
starting receive base loop
num_worker_connections 64
Creating worker on tid 3585798656
starting receive base loop
num_worker_connections 64
Creating worker on tid 2989879808
starting receive base loop
Created 512 connections total
Creating worker on tid 2393960960
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575396179.394604,       0.0,      471420,     423988,      47432,     289326,     134662,  11.673802,  26.100000,  33.900000,  67.900000,  16.270215,   0.000000, 285.585999, 499.973931
Outstanding requests per worker:
250 265 265 277 244 307 258 289 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156869.4,      784348,     705783,      78565,     540834,     164949,  13.804380,  23.900000,  30.900000,  41.300000,   8.727700,   0.278000,  81.721000, 592.376884
Outstanding requests per worker:
292 297 248 264 286 252 285 275 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156865.4,      784328,     706375,      77953,     568206,     138169,  14.664657,  25.400000,  32.700000,  44.500000,   9.324609,   0.275000,  86.413004, 633.414269
Outstanding requests per worker:
237 278 289 295 263 310 318 281 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156848.0,      784241,     705523,      78718,     582510,     123013,  15.108854,  26.100000,  33.500000,  46.000000,   9.626575,   0.237000,  86.525001, 657.016107
Outstanding requests per worker:
293 263 319 289 280 319 273 346 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156861.0,      784306,     705701,      78605,     592166,     113535,  15.337866,  26.300000,  34.100000,  46.800000,   9.748413,   0.234000,  84.987000, 672.488754
Outstanding requests per worker:
348 296 317 301 286 309 293 302 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156868.8,      784345,     705503,      78842,     600069,     105434,  15.817007,  27.500000,  35.000000,  49.000000,  10.149572,   0.188000,  91.830999, 684.533429
Outstanding requests per worker:
337 264 340 336 320 308 331 255 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156858.2,      784292,     705859,      78433,     606170,      99689,  16.122571,  27.700000,  35.900000,  49.300000,  10.310002,   0.231000, 102.705002, 693.463100
Outstanding requests per worker:
298 335 315 353 301 313 332 346 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:36   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   17:36   0:00 /usr/lib/linux
memcache      7  303  0.0 450240 153280 pts/0   Sl+  17:36   2:13 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19808539312      instructions:u            #    0.73  insn per cycle         
       27077953236      cycles:u                                                    
         113862895      armv8_pmuv3_0/br_mis_pred/:u                                   
        3081163891      armv8_pmuv3_0/br_pred/:u                                    

      43.670624935 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 8 threads, 156000 rps'
==> Bench: 262114 keys, 512 conns, 8 threads, 156000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 156000 -k 262114 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 156000 -k 262114 -c 512 -f 512 -w 8'
Starting client with -r 156000 -k 262114 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 156000 -k 262114 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 156000 -k 262114 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 156000 cpus 8
meanInterarrival 51
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1626010112
starting receive base loop
num_worker_connections 64
Creating worker on tid 1033040384
starting receive base loop
num_worker_connections 64
Creating worker on tid 439742976
starting receive base loop
num_worker_connections 64
Creating worker on tid 4138791424
starting receive base loop
num_worker_connections 64
Creating worker on tid 3542872576
starting receive base loop
num_worker_connections 64
Creating worker on tid 2940793344
starting receive base loop
num_worker_connections 64
Creating worker on tid 2342973952
starting receive base loop
Created 512 connections total
Creating worker on tid 1747055104
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575396225.394650,       0.0,      379333,     341251,      38082,     229239,     112012,  15.508189,  33.200000,  44.800000,  85.500000,  17.703372,   0.000000, 276.060998, 488.003581
Outstanding requests per worker:
247 234 278 237 242 245 232 221 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156863.8,      784320,     706277,      78043,     536231,     170046,  12.688751,  23.100000,  28.100000,  38.900000,   8.196244,   0.184000,  81.061997, 583.898342
Outstanding requests per worker:
248 248 256 217 289 229 211 293 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156854.2,      784272,     706142,      78130,     564650,     141492,  13.425186,  24.000000,  29.900000,  40.900000,   8.660270,   0.229000,  84.438004, 628.649347
Outstanding requests per worker:
223 297 284 262 242 299 273 239 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156855.0,      784276,     706187,      78089,     581050,     125137,  13.770156,  25.000000,  30.500000,  42.700000,   8.939396,   0.243000,  84.423997, 653.938386
Outstanding requests per worker:
268 246 324 255 323 266 282 280 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156873.6,      784369,     705930,      78439,     591173,     114757,  14.357924,  25.200000,  31.600000,  44.000000,   9.188987,   0.246000,  84.013000, 669.806287
Outstanding requests per worker:
299 280 281 288 304 258 288 232 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156853.4,      784268,     706238,      78030,     599945,     106293,  14.693469,  25.800000,  32.600000,  45.000000,   9.412699,   0.240000,  88.016003, 683.446358
Outstanding requests per worker:
298 263 252 264 304 296 351 311 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156864.0,      784321,     705557,      78764,     605150,     100407,  15.037154,  26.400000,  33.400000,  46.200000,   9.646199,   0.273000,  86.121000, 692.672316
Outstanding requests per worker:
296 295 272 330 321 320 300 271 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  17:37   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   17:37   0:00 /usr/lib/linux
memcache      8  303  0.0 448192 152064 pts/0   Sl+  17:37   2:10 memcached -t 4
memcache     19  0.0  0.0   6656  4416 pts/1    Rs+  17:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19378241244      instructions:u            #    0.73  insn per cycle         
       26619435461      cycles:u                                                    
         111015525      armv8_pmuv3_0/br_mis_pred/:u                                   
        3016319305      armv8_pmuv3_0/br_pred/:u                                    

      42.801489484 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 8 threads, 158000 rps'
==> Bench: 262114 keys, 512 conns, 8 threads, 158000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 158000 -k 262114 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 158000 -k 262114 -c 512 -f 512 -w 8'
Starting client with -r 158000 -k 262114 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 158000 -k 262114 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 158000 -k 262114 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 158000 cpus 8
meanInterarrival 50
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1622602240
starting receive base loop
num_worker_connections 64
Creating worker on tid 1024979456
starting receive base loop
num_worker_connections 64
Creating worker on tid 431682048
starting receive base loop
num_worker_connections 64
Creating worker on tid 4130730496
starting receive base loop
num_worker_connections 64
Creating worker on tid 3534811648
starting receive base loop
num_worker_connections 64
Creating worker on tid 2938892800
starting receive base loop
num_worker_connections 64
Creating worker on tid 2342973952
starting receive base loop
Created 512 connections total
Creating worker on tid 1747055104
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575396272.394697,       0.0,      388339,     348971,      39368,     234497,     114474,  22.507038,  54.000000,  71.200000, 100.700000,  23.607486,   0.000000, 305.584013, 488.448138
Outstanding requests per worker:
305 325 305 389 333 364 341 354 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160025.8,      800130,     720469,      79661,     548585,     171884,  15.692093,  27.000000,  34.800000,  48.300000,  10.042014,   0.295000,  97.994998, 585.987661
Outstanding requests per worker:
303 382 360 286 339 345 312 323 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160005.2,      800027,     720104,      79923,     577907,     142197,  16.685990,  29.200000,  37.300000,  52.000000,  10.849801,   0.261000, 109.568998, 631.841410
Outstanding requests per worker:
328 330 374 342 329 323 349 290 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159947.4,      799738,     720306,      79432,     593516,     126790,  17.558575,  30.800000,  39.800000,  56.600000,  11.656149,   0.332000, 114.341997, 655.380862
Outstanding requests per worker:
372 414 317 424 370 326 376 381 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159491.6,      797459,     717894,      79565,     602900,     114994,  25.631973,  60.000000,  82.700000, 120.000000,  24.814382,   0.285000, 210.933998, 672.134982
Outstanding requests per worker:
652 680 642 734 707 715 682 781 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159737.4,      798688,     718623,      80065,     611595,     107028,  41.022547, 119.200000, 143.200000, 184.500000,  46.000941,   0.336000, 344.128013, 685.103047
Outstanding requests per worker:
944 892 824 863 772 948 868 843 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159885.8,      799430,     719616,      79814,     618364,     101252,  43.856801, 131.200000, 154.400000, 197.700000,  50.569294,   0.388000, 349.969000, 694.204020
Outstanding requests per worker:
1045 1020 969 935 889 955 868 891 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:38   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   17:38   0:00 /usr/lib/linux
memcache      7  303  0.0 450240 156032 pts/0   Sl+  17:38   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19912720692      instructions:u            #    0.74  insn per cycle         
       26896136577      cycles:u                                                    
         114067120      armv8_pmuv3_0/br_mis_pred/:u                                   
        3093192918      armv8_pmuv3_0/br_pred/:u                                    

      42.951076894 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 8 threads, 160000 rps'
==> Bench: 262114 keys, 512 conns, 8 threads, 160000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 160000 -k 262114 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 160000 -k 262114 -c 512 -f 512 -w 8'
Starting client with -r 160000 -k 262114 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 160000 -k 262114 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 160000 -k 262114 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 160000 cpus 8
meanInterarrival 50
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2052911616
starting receive base loop
num_worker_connections 64
Creating worker on tid 1454436864
starting receive base loop
num_worker_connections 64
Creating worker on tid 858518016
starting receive base loop
num_worker_connections 64
Creating worker on tid 262599168
starting receive base loop
num_worker_connections 64
Creating worker on tid 3961647616
starting receive base loop
num_worker_connections 64
Creating worker on tid 3365728768
starting receive base loop
num_worker_connections 64
Creating worker on tid 2769809920
starting receive base loop
Created 512 connections total
Creating worker on tid 2176512512
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575396318.394743,       0.0,      379208,     340905,      38303,     229098,     111807,  23.753087,  58.300000,  74.900000, 106.400000,  25.507694,   0.000000, 326.485008, 488.541250
Outstanding requests per worker:
402 337 389 423 338 349 359 403 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160095.4,      800478,     720666,      79812,     547394,     173272,  16.009307,  29.800000,  37.000000,  58.100000,  11.399330,   0.173000, 121.821001, 584.441260
Outstanding requests per worker:
305 289 354 312 384 274 300 369 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160008.8,      800045,     720355,      79690,     577178,     143177,  16.011226,  28.200000,  35.500000,  49.900000,  10.403350,   0.230000, 102.022998, 630.274758
Outstanding requests per worker:
348 336 309 323 348 308 274 363 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159719.8,      798600,     718632,      79968,     591508,     127124,  18.945723,  35.800000,  47.200000,  80.400000,  15.126514,   0.287000, 140.927002, 654.366573
Outstanding requests per worker:
506 482 559 452 530 500 560 509 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159520.0,      797601,     718096,      79505,     602349,     115747,  34.323332,  94.900000, 119.800000, 156.800000,  37.533189,   0.210000, 291.305006, 671.395160
Outstanding requests per worker:
775 845 854 876 802 756 848 846 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159868.2,      799342,     718897,      80445,     610506,     108391,  43.120283, 130.300000, 154.900000, 202.300000,  50.954653,   0.328000, 340.676010, 683.451290
Outstanding requests per worker:
825 1050 787 911 932 888 897 1024 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159958.8,      799795,     719957,      79838,     618687,     101270,  46.609432, 144.600000, 171.200000, 219.500000,  57.065757,   0.330000, 357.721001, 693.819059
Outstanding requests per worker:
973 927 999 989 850 900 943 1007 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:38   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:38   0:00 /usr/lib/linux
memcache      7  302  0.0 449216 152000 pts/0   Sl+  17:38   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:39   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19793396783      instructions:u            #    0.73  insn per cycle         
       26973456395      cycles:u                                                    
         113833909      armv8_pmuv3_0/br_mis_pred/:u                                   
        3085167392      armv8_pmuv3_0/br_pred/:u                                    

      42.760189892 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 8 threads, 162000 rps'
==> Bench: 262114 keys, 512 conns, 8 threads, 162000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 162000 -k 262114 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 162000 -k 262114 -c 512 -f 512 -w 8'
Starting client with -r 162000 -k 262114 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 162000 -k 262114 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 162000 -k 262114 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 162000 cpus 8
meanInterarrival 49
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1792864768
starting receive base loop
num_worker_connections 64
Creating worker on tid 1194062336
starting receive base loop
num_worker_connections 64
Creating worker on tid 598143488
starting receive base loop
num_worker_connections 64
Creating worker on tid 2224640
starting receive base loop
num_worker_connections 64
Creating worker on tid 3701273088
starting receive base loop
num_worker_connections 64
Creating worker on tid 3105354240
starting receive base loop
num_worker_connections 64
Creating worker on tid 2512056832
starting receive base loop
Created 512 connections total
Creating worker on tid 1916137984
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575396364.394789,       0.0,      391420,     352124,      39296,     236964,     115160,  43.124643,  91.000000, 109.200000, 159.100000,  38.585706,   0.000000, 367.929995, 489.740679
Outstanding requests per worker:
1318 1301 1357 1422 1209 1336 1264 1406 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161277.0,      806386,     725770,      80616,     552795,     172975,  97.520019, 163.900000, 194.400000, 251.400000,  49.956769,   0.717000, 409.907997, 586.921085
Outstanding requests per worker:
2571 2696 2511 2613 2419 2510 2728 2551 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162188.4,      810943,     730376,      80567,     585712,     144664, 143.971416, 232.800000, 273.000000, 352.800000,  65.808474,   0.868000, 573.265016, 630.620048
Outstanding requests per worker:
3309 3228 3347 3202 3209 3277 3105 3359 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162456.0,      812281,     730683,      81598,     602665,     128018, 174.628808, 274.500000, 323.400000, 429.400000,  76.146989,   1.400000, 735.274017, 656.153321
Outstanding requests per worker:
3860 3723 3840 3890 3796 3717 3632 3690 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162566.0,      812831,     731767,      81064,     613731,     118036, 196.649659, 316.100000, 383.700000, 545.600000,  94.004424,   1.205000, 790.693998, 672.738410
Outstanding requests per worker:
4393 4055 4289 4125 4371 4199 4115 4175 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162494.8,      812475,     730856,      81619,     621268,     109588, 217.493245, 361.400000, 453.400000, 607.700000, 110.304612,   2.664000, 828.417003, 684.717565
Outstanding requests per worker:
4972 4375 4761 4774 4649 4576 4803 4765 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161940.4,      809703,     728313,      81390,     626115,     102198, 241.313594, 425.300000, 536.600000, 706.300000, 133.304463,   0.566000, 1027.850032, 695.089673
Outstanding requests per worker:
5622 5420 5504 5753 5462 5498 5526 5570 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:39   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   17:39   0:00 /usr/lib/linux
memcache      7  310  0.0 516224 168768 pts/0   Sl+  17:39   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  17:40   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20548885313      instructions:u            #    0.72  insn per cycle         
       28383630908      cycles:u                                                    
         125159331      armv8_pmuv3_0/br_mis_pred/:u                                   
        3204372858      armv8_pmuv3_0/br_pred/:u                                    

      42.071317345 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 8 threads, 164000 rps'
==> Bench: 262114 keys, 512 conns, 8 threads, 164000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 164000 -k 262114 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 164000 -k 262114 -c 512 -f 512 -w 8'
Starting client with -r 164000 -k 262114 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 164000 -k 262114 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 164000 -k 262114 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 164000 cpus 8
meanInterarrival 48
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1861808640
starting receive base loop
num_worker_connections 64
Creating worker on tid 1269232128
starting receive base loop
num_worker_connections 64
Creating worker on tid 673313280
starting receive base loop
num_worker_connections 64
Creating worker on tid 77394432
starting receive base loop
num_worker_connections 64
Creating worker on tid 3776442880
starting receive base loop
num_worker_connections 64
Creating worker on tid 3183145472
starting receive base loop
num_worker_connections 64
Creating worker on tid 2587226624
starting receive base loop
Created 512 connections total
Creating worker on tid 1991307776
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575396411.394836,       0.0,      491346,     442292,      49054,     302039,     140253,  42.464317, 103.400000, 124.300000, 158.900000,  43.991636,   0.000000, 255.858988, 499.601361
Outstanding requests per worker:
2007 2190 2111 2042 2145 2117 2040 2074 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163156.4,      815783,     734416,      81367,     564328,     170088, 158.879843, 243.500000, 277.100000, 348.400000,  64.484382,   0.985000, 772.261024, 594.372937
Outstanding requests per worker:
4189 4147 4332 4331 4415 4040 4435 4445 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164175.4,      820878,     739012,      81866,     595976,     143036, 244.041938, 376.800000, 436.700000, 562.600000, 100.011181,   3.354000, 942.296982, 636.164613
Outstanding requests per worker:
6000 5908 5673 5792 5700 5952 5962 5889 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164585.0,      822926,     740728,      82198,     613042,     127686, 310.145842, 501.800000, 587.300000, 775.500000, 139.379780,   7.126000, 1148.514986, 659.578574
Outstanding requests per worker:
7257 7275 6901 7027 7197 7358 7437 6894 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164522.2,      822612,     740892,      81720,     623251,     117641, 374.066048, 655.300000, 766.400000, 986.900000, 188.848743,  21.934999, 1401.803017, 674.241470
Outstanding requests per worker:
8447 8434 7767 8578 8591 8896 9038 8388 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164228.0,      821141,     739137,      82004,     629818,     109319, 443.174546, 816.300000, 950.800000, 1197.200000, 238.442991,  62.247999, 1595.131040, 685.809757
Outstanding requests per worker:
9869 9985 9289 10157 10352 10312 10541 9918 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163142.6,      815714,     734297,      81417,     632203,     102094, 524.207418, 950.400000, 1133.900000, 1387.000000, 284.469501,  39.280999, 1828.745008, 696.460130
Outstanding requests per worker:
11594 12334 11834 12144 12587 12820 12881 11956 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:40   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:40   0:00 /usr/lib/linux
memcache      7  311  0.0 517248 160576 pts/0   Sl+  17:40   2:13 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21045116833      instructions:u            #    0.73  insn per cycle         
       29008399273      cycles:u                                                    
         126478673      armv8_pmuv3_0/br_mis_pred/:u                                   
        3279062624      armv8_pmuv3_0/br_pred/:u                                    

      43.401404953 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 8 threads, 166000 rps'
==> Bench: 262114 keys, 512 conns, 8 threads, 166000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 166000 -k 262114 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 166000 -k 262114 -c 512 -f 512 -w 8'
Starting client with -r 166000 -k 262114 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 166000 -k 262114 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 166000 -k 262114 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 166000 cpus 8
meanInterarrival 48
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2563109376
starting receive base loop
num_worker_connections 64
Creating worker on tid 1964503552
starting receive base loop
num_worker_connections 64
Creating worker on tid 1371206144
starting receive base loop
num_worker_connections 64
Creating worker on tid 775287296
starting receive base loop
num_worker_connections 64
Creating worker on tid 179368448
starting receive base loop
num_worker_connections 64
Creating worker on tid 3878416896
starting receive base loop
num_worker_connections 64
Creating worker on tid 3282498048
starting receive base loop
Created 512 connections total
Creating worker on tid 2686579200
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575396457.394882,       0.0,      385427,     346870,      38557,     232748,     114122,  59.290654, 117.100000, 136.500000, 222.500000,  51.415905,   0.000000, 540.979981, 487.220339
Outstanding requests per worker:
2066 2008 2131 1981 1984 2105 2014 2336 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163889.6,      819449,     737695,      81754,     561151,     176544, 145.582992, 225.000000, 260.700000, 327.200000,  60.186608,   0.652000, 544.164002, 585.405635
Outstanding requests per worker:
3885 3780 3743 3908 3715 3820 3955 3767 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164677.0,      823386,     741426,      81960,     593899,     147527, 213.875077, 323.200000, 377.600000, 507.100000,  86.025555,   1.013000, 790.982008, 630.328580
Outstanding requests per worker:
4992 4895 5106 4979 5101 4878 5297 5354 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164958.4,      824793,     742077,      82716,     611919,     130158, 269.143918, 423.300000, 508.000000, 660.000000, 116.327226,  20.582000, 985.762000, 656.337919
Outstanding requests per worker:
5978 6057 6283 5920 6096 5891 6523 6482 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164751.4,      823758,     741580,      82178,     622906,     118674, 322.605346, 533.400000, 638.800000, 835.900000, 152.278634,   8.136000, 1254.119992, 673.069338
Outstanding requests per worker:
7083 7150 7600 6990 7358 7081 7932 7727 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165055.6,      825279,     742733,      82546,     632465,     110268, 377.244472, 633.400000, 775.600000, 995.100000, 183.760428,  60.711000, 1371.536016, 685.542235
Outstanding requests per worker:
8216 8393 8837 7725 8559 8201 8601 8500 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164482.8,      822415,     740093,      82322,     636190,     103903, 426.111313, 782.700000, 900.800000, 1151.100000, 225.734032,  33.282999, 1671.679020, 695.272186
Outstanding requests per worker:
9526 9901 10004 9084 10109 9615 9873 9915 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:41   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:41   0:00 /usr/lib/linux
memcache      7  310  0.0 516224 165312 pts/0   Sl+  17:41   2:10 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  17:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20775268623      instructions:u            #    0.73  insn per cycle         
       28434437890      cycles:u                                                    
         123142659      armv8_pmuv3_0/br_mis_pred/:u                                   
        3231651382      armv8_pmuv3_0/br_pred/:u                                    

      42.120818411 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 8 threads, 168000 rps'
==> Bench: 262114 keys, 512 conns, 8 threads, 168000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 168000 -k 262114 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 168000 -k 262114 -c 512 -f 512 -w 8'
Starting client with -r 168000 -k 262114 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 168000 -k 262114 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 168000 -k 262114 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 168000 cpus 8
meanInterarrival 47
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1598943744
starting receive base loop
num_worker_connections 64
Creating worker on tid 1000796672
starting receive base loop
num_worker_connections 64
Creating worker on tid 404877824
starting receive base loop
num_worker_connections 64
Creating worker on tid 4103926272
starting receive base loop
num_worker_connections 64
Creating worker on tid 3508007424
starting receive base loop
num_worker_connections 64
Creating worker on tid 2914710016
starting receive base loop
num_worker_connections 64
Creating worker on tid 2318791168
starting receive base loop
Created 512 connections total
Creating worker on tid 1722872320
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575396503.394928,       0.0,      382373,     343952,      38421,     231355,     112597,  77.593369, 150.200000, 179.500000, 314.000000,  66.681410,   0.000000, 637.549996, 488.792951
Outstanding requests per worker:
2932 2707 2836 2734 2840 2772 2743 3702 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165246.4,      826233,     743501,      82732,     566468,     177033, 214.529084, 326.300000, 371.500000, 469.600000,  84.042579,   1.912000, 699.944019, 586.502805
Outstanding requests per worker:
5998 6071 6052 5812 6251 5895 5689 6431 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165944.0,      829721,     746674,      83047,     599818,     146856, 343.109292, 520.900000, 592.500000, 719.200000, 129.451098,  54.908000, 1008.911967, 632.653490
Outstanding requests per worker:
8800 9041 8536 8640 8818 8478 8448 8823 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165522.8,      827615,     744754,      82861,     615282,     129472, 475.198672, 742.500000, 846.900000, 1036.800000, 193.578374,  68.167001, 1338.814974, 657.710977
Outstanding requests per worker:
11571 11941 11522 11550 11733 11425 11235 12123 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164992.4,      824963,     742998,      81965,     625028,     117970, 618.345958, 989.100000, 1132.000000, 1349.200000, 264.955965,  76.453000, 1788.231969, 674.207808
Outstanding requests per worker:
14779 15094 15271 14810 14994 14945 14234 15161 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165112.2,      825562,     743078,      82484,     633041,     110037, 771.475718, 1252.400000, 1406.400000, 1661.900000, 332.234608, 104.534999, 2122.543097, 686.377337
Outstanding requests per worker:
18159 18547 18371 17954 18119 17735 17425 18580 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163677.4,      818388,     736499,      81889,     633740,     102759, 932.284668, 1518.600000, 1684.900000, 1947.600000, 393.183928, 120.947003, 2358.484030, 694.922449
Outstanding requests per worker:
22009 22411 22766 21997 22202 21936 21790 22506 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:41   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   17:41   0:00 /usr/lib/linux
memcache      7  302  0.0 516224 170688 pts/0   Sl+  17:41   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  17:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20750730820      instructions:u            #    0.73  insn per cycle         
       28557562729      cycles:u                                                    
         116482763      armv8_pmuv3_0/br_mis_pred/:u                                   
        3231013851      armv8_pmuv3_0/br_pred/:u                                    

      42.551214679 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 8 threads, 170000 rps'
==> Bench: 262114 keys, 512 conns, 8 threads, 170000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 170000 -k 262114 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 170000 -k 262114 -c 512 -f 512 -w 8'
Starting client with -r 170000 -k 262114 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 170000 -k 262114 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 170000 -k 262114 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 170000 cpus 8
meanInterarrival 47
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2156458496
starting receive base loop
num_worker_connections 64
Creating worker on tid 1561850368
starting receive base loop
num_worker_connections 64
Creating worker on tid 968552960
starting receive base loop
num_worker_connections 64
Creating worker on tid 372634112
starting receive base loop
num_worker_connections 64
Creating worker on tid 4071682560
starting receive base loop
num_worker_connections 64
Creating worker on tid 3475763712
starting receive base loop
num_worker_connections 64
Creating worker on tid 2879844864
starting receive base loop
Created 512 connections total
Creating worker on tid 2283926016
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575396549.394974,       0.0,      389942,     350584,      39358,     235646,     114938,  71.579976, 141.700000, 166.200000, 266.400000,  59.189179,   0.000000, 494.430989, 488.964767
Outstanding requests per worker:
2560 2747 2571 2574 2519 2535 2620 3158 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166086.6,      830434,     748045,      82389,     569664,     178381, 190.084660, 280.200000, 316.000000, 386.200000,  68.890724,   2.229000, 591.481984, 586.781565
Outstanding requests per worker:
5132 5385 5020 5340 5157 5315 5169 5458 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166834.8,      834175,     751509,      82666,     604571,     146938, 294.386697, 431.700000, 483.200000, 589.100000, 100.316925,  31.475000, 811.263025, 633.511993
Outstanding requests per worker:
7146 7370 7247 7442 7283 7639 7392 7428 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166864.4,      834323,     750422,      83901,     619894,     130528, 392.884987, 601.400000, 696.800000, 848.500000, 151.978617,  57.923000, 1142.837048, 657.163038
Outstanding requests per worker:
9435 9373 9453 9472 9170 10155 9083 9650 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166598.2,      832992,     749453,      83539,     630305,     119148, 496.420103, 792.400000, 891.800000, 1124.600000, 207.788916,  81.745997, 1343.850017, 674.544505
Outstanding requests per worker:
11719 11506 11708 11673 11489 12249 11611 11953 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165999.0,      829996,     746974,      83022,     636306,     110668, 613.004865, 971.600000, 1098.200000, 1346.200000, 261.126340,  84.478997, 1666.689992, 686.775127
Outstanding requests per worker:
14593 14144 14383 14283 13992 14814 14173 14661 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164897.0,      824486,     741872,      82614,     638331,     103541, 740.245448, 1164.900000, 1322.800000, 1581.500000, 311.357801,  98.922998, 2024.604082, 695.572902
Outstanding requests per worker:
18155 17210 17852 17651 17185 18029 17675 17952 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:42   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:42   0:00 /usr/lib/linux
memcache      7  303  0.0 517248 171200 pts/0   Sl+  17:42   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:43   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20908929866      instructions:u            #    0.73  insn per cycle         
       28659998509      cycles:u                                                    
         117526091      armv8_pmuv3_0/br_mis_pred/:u                                   
        3255890203      armv8_pmuv3_0/br_pred/:u                                    

      42.631195876 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 8 threads, 172000 rps'
==> Bench: 262114 keys, 512 conns, 8 threads, 172000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 172000 -k 262114 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 172000 -k 262114 -c 512 -f 512 -w 8'
Starting client with -r 172000 -k 262114 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 172000 -k 262114 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 172000 -k 262114 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 172000 cpus 8
meanInterarrival 46
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2016735744
starting receive base loop
num_worker_connections 64
Creating worker on tid 1419571712
starting receive base loop
num_worker_connections 64
Creating worker on tid 823652864
starting receive base loop
num_worker_connections 64
Creating worker on tid 230355456
starting receive base loop
num_worker_connections 64
Creating worker on tid 3929403904
starting receive base loop
num_worker_connections 64
Creating worker on tid 3333485056
starting receive base loop
num_worker_connections 64
Creating worker on tid 2737566208
starting receive base loop
Created 512 connections total
Creating worker on tid 2141647360
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575396597.395022,       0.0,      502639,     452148,      50491,     310051,     142097,  56.914139, 140.200000, 162.800000, 222.900000,  60.648931,   0.000000, 447.046995, 502.829049
Outstanding requests per worker:
2958 3107 3052 3108 3053 2961 3066 3352 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167429.4,      837148,     754014,      83134,     581012,     173002, 239.498554, 361.600000, 404.900000, 498.800000,  89.698184,   1.487000, 744.772971, 595.909484
Outstanding requests per worker:
7150 6939 7269 7359 7340 7019 6946 7165 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167830.8,      839155,     755302,      83853,     609940,     145362, 415.445665, 618.500000, 681.500000, 801.600000, 144.300219,  53.215999, 1094.550967, 637.014024
Outstanding requests per worker:
10958 11127 10791 11237 10918 10948 10833 10841 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167584.4,      837923,     754352,      83571,     624519,     129833, 591.485302, 860.600000, 939.400000, 1072.600000, 198.340483,  90.645999, 1398.578048, 659.773485
Outstanding requests per worker:
14826 15185 15120 15138 14684 14610 15019 14782 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166583.0,      832916,     749624,      83292,     631750,     117874, 789.277807, 1133.800000, 1233.000000, 1402.900000, 254.562149, 108.636998, 1900.431991, 675.879384
Outstanding requests per worker:
19615 19515 19962 19688 19222 19138 19688 19244 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166384.2,      831922,     748858,      83064,     639450,     109408, 1002.398905, 1402.500000, 1508.300000, 1728.200000, 304.699327, 147.824004, 2355.108023, 687.908859
Outstanding requests per worker:
24580 24399 24768 24279 24125 23808 23722 24142 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165049.8,      825250,     742631,      82619,     639957,     102674, 1233.662011, 1677.100000, 1821.100000, 2076.700000, 343.784681, 304.091990, 2687.433004, 697.180033
Outstanding requests per worker:
30270 29669 30218 29715 29649 29185 29625 29870 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:43   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:43   0:00 /usr/lib/linux
memcache      7  311  0.0 521344 169024 pts/0   Sl+  17:43   2:13 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:44   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21427101563      instructions:u            #    0.74  insn per cycle         
       29079052033      cycles:u                                                    
         121450113      armv8_pmuv3_0/br_mis_pred/:u                                   
        3345554256      armv8_pmuv3_0/br_pred/:u                                    

      43.450251816 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 8 threads, 174000 rps'
==> Bench: 262114 keys, 512 conns, 8 threads, 174000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 174000 -k 262114 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 174000 -k 262114 -c 512 -f 512 -w 8'
Starting client with -r 174000 -k 262114 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 174000 -k 262114 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 174000 -k 262114 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 174000 cpus 8
meanInterarrival 45
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1999237632
starting receive base loop
num_worker_connections 64
Creating worker on tid 1403449856
starting receive base loop
num_worker_connections 64
Creating worker on tid 807531008
starting receive base loop
num_worker_connections 64
Creating worker on tid 211612160
starting receive base loop
num_worker_connections 64
Creating worker on tid 3910660608
starting receive base loop
num_worker_connections 64
Creating worker on tid 3317363200
starting receive base loop
num_worker_connections 64
Creating worker on tid 2721444352
starting receive base loop
Created 512 connections total
Creating worker on tid 2125525504
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575396644.395069,       0.0,      498821,     448519,      50302,     306563,     141956,  74.586188, 182.300000, 217.000000, 339.100000,  85.391264,   0.000000, 714.465022, 501.294768
Outstanding requests per worker:
4158 4099 4147 3991 4173 4038 4161 5759 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166624.0,      833121,     750057,      83064,     578158,     171899, 354.553958, 543.800000, 615.700000, 742.300000, 137.723395,  24.148000, 1065.206051, 596.093578
Outstanding requests per worker:
11102 11206 10979 10691 11389 11043 11199 12729 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166116.4,      830583,     747288,      83295,     603794,     143494, 667.876550, 944.500000, 1027.100000, 1182.900000, 201.810130, 155.863002, 1467.712045, 637.519048
Outstanding requests per worker:
18448 18249 18155 17878 18814 18349 18603 20206 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165676.4,      828383,     745376,      83007,     617303,     128073, 1001.642663, 1347.600000, 1449.400000, 1617.700000, 257.177986, 235.999003, 1949.831963, 660.145729
Outstanding requests per worker:
25836 25832 25605 25289 26321 25896 26577 27915 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165096.8,      825485,     743522,      81963,     626255,     117267, 1350.662672, 1773.100000, 1898.000000, 2082.000000, 314.340228, 314.727992, 2525.430918, 675.227980
Outstanding requests per worker:
33826 33769 33624 33150 34610 33844 34227 35712 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164570.6,      822854,     740663,      82191,     631450,     109213, 1713.860786, 2220.900000, 2357.100000, 2572.200000, 369.584955, 524.874985, 2976.067066, 686.908247
Outstanding requests per worker:
42017 42116 41863 41476 43122 42274 42341 43702 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163630.2,      818152,     736827,      81325,     634558,     102269, 2095.111768, 2684.300000, 2840.100000, 3102.800000, 427.764293, 755.863011, 3646.735907, 696.051912
Outstanding requests per worker:
50646 51083 50722 50290 51904 51127 51188 52743 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:44   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:44   0:00 /usr/lib/linux
memcache      7  311  0.0 520320 171584 pts/0   Sl+  17:44   2:14 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:44   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21208119872      instructions:u            #    0.73  insn per cycle         
       28953872605      cycles:u                                                    
         122704081      armv8_pmuv3_0/br_mis_pred/:u                                   
        3309436471      armv8_pmuv3_0/br_pred/:u                                    

      43.460718898 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 512 conns, 8 threads, 176000 rps'
==> Bench: 262114 keys, 512 conns, 8 threads, 176000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 176000 -k 262114 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 176000 -k 262114 -c 512 -f 512 -w 8'
Starting client with -r 176000 -k 262114 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 176000 -k 262114 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 176000 -k 262114 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 176000 cpus 8
meanInterarrival 45
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2430071296
starting receive base loop
num_worker_connections 64
Creating worker on tid 1838346752
starting receive base loop
num_worker_connections 64
Creating worker on tid 1245049344
starting receive base loop
num_worker_connections 64
Creating worker on tid 649130496
starting receive base loop
num_worker_connections 64
Creating worker on tid 53211648
starting receive base loop
num_worker_connections 64
Creating worker on tid 3752260096
starting receive base loop
num_worker_connections 64
Creating worker on tid 3156341248
starting receive base loop
Created 512 connections total
Creating worker on tid 2560422400
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575396690.395115,       0.0,      390963,     351525,      39438,     236123,     115402, 100.186204, 194.300000, 231.300000, 437.600000,  87.706467,   0.000000, 764.635980, 488.018849
Outstanding requests per worker:
3815 3833 3703 3910 3962 4026 4058 5800 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168908.6,      844544,     760100,      84444,     579149,     180951, 314.936302, 480.500000, 547.800000, 693.100000, 124.052772,  11.466000, 1126.677036, 587.027219
Outstanding requests per worker:
9233 9781 9352 9507 9295 9631 9894 10811 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169150.8,      845755,     761331,      84424,     611755,     149576, 553.655047, 811.700000, 902.500000, 1061.100000, 184.488301,  85.928001, 1431.476951, 633.381309
Outstanding requests per worker:
14718 15256 14456 15236 14675 14742 15379 16228 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168309.4,      841548,     757229,      84319,     626132,     131097, 807.193549, 1146.700000, 1256.000000, 1460.600000, 251.689942, 155.224994, 1931.470990, 658.749958
Outstanding requests per worker:
20911 21086 20094 20952 20589 20982 21244 22221 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167517.8,      837590,     754347,      83243,     634755,     119592, 1083.247908, 1517.200000, 1670.400000, 1915.200000, 321.995298, 250.138015, 2328.058004, 674.410404
Outstanding requests per worker:
27422 27393 26722 27691 26786 26929 27774 28719 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167277.4,      836388,     752524,      83864,     641510,     111014, 1374.315114, 1921.000000, 2086.500000, 2363.700000, 387.568372, 399.724007, 2829.761982, 686.595157
Outstanding requests per worker:
34068 33979 33307 34066 33258 33538 34478 35307 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165874.8,      829375,     746119,      83256,     642792,     103327, 1687.009107, 2329.300000, 2513.600000, 2804.700000, 445.353379, 515.000999, 3291.193962, 696.316653
Outstanding requests per worker:
41642 41189 40754 41491 40735 40908 42009 42843 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:45   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   17:45   0:00 /usr/lib/linux
memcache      7  310  0.0 519296 172480 pts/0   Sl+  17:45   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:45   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       21142489520      instructions:u            #    0.75  insn per cycle         
       28330927755      cycles:u                                                    
         117938711      armv8_pmuv3_0/br_mis_pred/:u                                   
        3283753970      armv8_pmuv3_0/br_pred/:u                                    

      42.310274444 seconds time elapsed

+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 6 threads, 150000 rps'
==> Bench: 262114 keys, 1024 conns, 6 threads, 150000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 150000 -k 262114 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 150000 -k 262114 -c 1024 -f 512 -w 6'
Starting client with -r 150000 -k 262114 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 150000 -k 262114 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 150000 -k 262114 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 150000 cpus 6
meanInterarrival 40
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1797059072
starting receive base loop
num_worker_connections 171
Creating worker on tid 339603968
starting receive base loop
num_worker_connections 171
Creating worker on tid 3174298112
starting receive base loop
num_worker_connections 170
Creating worker on tid 1716646400
starting receive base loop
num_worker_connections 170
Creating worker on tid 264434176
starting receive base loop
Created 1024 connections total
Creating worker on tid 3107189248
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575396736.395161,       0.0,      321346,     288759,      32587,     191620,      97139,  31.105095,  68.800000,  86.300000, 145.500000,  30.141958,   0.000000, 438.775986, 479.783054
Outstanding requests per worker:
382 348 360 391 364 352 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150016.0,      750081,     675114,      74967,     508761,     166353,  14.608344,  27.200000,  30.400000,  36.100000,   8.158738,   0.603000,  46.704002, 577.824607
Outstanding requests per worker:
362 347 388 354 374 383 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  149989.3,      749947,     675334,      74613,     537328,     138006,  15.018151,  27.800000,  31.500000,  38.900000,   8.502114,   0.592000,  49.068000, 624.521951
Outstanding requests per worker:
387 371 360 379 412 388 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150011.2,      750057,     675152,      74905,     553751,     121401,  15.310908,  28.500000,  32.000000,  39.200000,   8.659669,   0.477000,  50.602000, 651.240956
Outstanding requests per worker:
389 386 388 407 367 364 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150006.4,      750033,     675222,      74811,     564140,     111082,  15.496107,  28.800000,  32.700000,  39.900000,   8.809043,   0.460000,  49.794000, 668.085849
Outstanding requests per worker:
366 398 370 414 378 408 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150007.6,      750039,     675122,      74917,     571733,     103389,  15.673496,  29.000000,  33.000000,  41.500000,   8.965639,   0.588000,  54.650001, 680.454946
Outstanding requests per worker:
388 383 417 378 397 417 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150009.0,      750046,     674961,      75085,     577616,      97345,  15.840754,  29.600000,  33.600000,  40.400000,   8.978330,   0.495000,  51.210001, 690.332921
Outstanding requests per worker:
381 405 394 405 391 399 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  17:45   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:45   0:00 /usr/lib/linux
memcache      7  306  0.0 442048 157120 pts/0   Sl+  17:45   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  17:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       18251972880      instructions:u            #    0.70  insn per cycle         
       26107251136      cycles:u                                                    
         107644250      armv8_pmuv3_0/br_mis_pred/:u                                   
        2861103106      armv8_pmuv3_0/br_pred/:u                                    

      42.661318930 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 6 threads, 152000 rps'
==> Bench: 262114 keys, 1024 conns, 6 threads, 152000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 152000 -k 262114 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 152000 -k 262114 -c 1024 -f 512 -w 6'
Starting client with -r 152000 -k 262114 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 152000 -k 262114 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 152000 -k 262114 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 152000 cpus 6
meanInterarrival 39
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 940765696
starting receive base loop
num_worker_connections 171
Creating worker on tid 3778277888
starting receive base loop
num_worker_connections 171
Creating worker on tid 2320626176
starting receive base loop
num_worker_connections 170
Creating worker on tid 860353024
starting receive base loop
num_worker_connections 170
Creating worker on tid 3703108096
starting receive base loop
Created 1024 connections total
Creating worker on tid 2250895872
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575396782.395207,       0.0,      334360,     300987,      33373,     200066,     100921,  35.673305,  74.400000,  99.900000, 174.300000,  48.429761,   0.000000, 1075.768948, 480.653108
Outstanding requests per worker:
386 372 383 399 400 417 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153828.4,      769143,     692384,      76759,     523478,     168906,  15.995752,  29.900000,  34.200000,  40.100000,   9.003536,   0.573000,  50.057001, 580.078974
Outstanding requests per worker:
412 414 445 412 424 423 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153861.0,      769306,     692831,      76475,     553081,     139750,  16.532403,  30.700000,  35.400000,  42.500000,   9.360161,   0.630000,  54.067001, 627.346561
Outstanding requests per worker:
429 416 407 454 420 420 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153841.6,      769209,     691936,      77273,     567908,     124028,  16.905917,  31.400000,  36.200000,  43.600000,   9.570505,   0.417000,  65.771997, 651.572277
Outstanding requests per worker:
441 422 433 441 435 441 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153839.2,      769197,     692787,      76410,     579828,     112959,  17.208874,  32.200000,  37.200000,  43.800000,   9.729805,   0.613000,  55.009000, 669.657457
Outstanding requests per worker:
458 450 446 421 455 476 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153867.8,      769340,     693029,      76311,     587680,     105349,  17.358763,  32.100000,  37.500000,  45.600000,   9.900407,   0.643000,  55.413999, 681.319679
Outstanding requests per worker:
476 453 415 413 455 459 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153856.8,      769285,     692204,      77081,     592923,      99281,  17.603885,  32.800000,  38.300000,  44.800000,   9.982704,   0.570000,  55.530000, 691.056979
Outstanding requests per worker:
456 446 456 434 477 439 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:46   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   17:46   0:00 /usr/lib/linux
memcache      8  299  0.0 445120 157568 pts/0   Sl+  17:46   2:08 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  17:47   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       18798196170      instructions:u            #    0.71  insn per cycle         
       26479491485      cycles:u                                                    
         114129995      armv8_pmuv3_0/br_mis_pred/:u                                   
        2932846676      armv8_pmuv3_0/br_pred/:u                                    

      42.820774372 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 6 threads, 154000 rps'
==> Bench: 262114 keys, 1024 conns, 6 threads, 154000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 154000 -k 262114 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 154000 -k 262114 -c 1024 -f 512 -w 6'
Starting client with -r 154000 -k 262114 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 154000 -k 262114 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 154000 -k 262114 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 154000 cpus 6
meanInterarrival 38
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1614344704
starting receive base loop
num_worker_connections 171
Creating worker on tid 154399232
starting receive base loop
num_worker_connections 171
Creating worker on tid 2991714816
starting receive base loop
num_worker_connections 170
Creating worker on tid 1531441664
starting receive base loop
num_worker_connections 170
Creating worker on tid 79229440
starting receive base loop
Created 1024 connections total
Creating worker on tid 2921984512
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575396828.395253,       0.0,      340288,     306227,      34061,     203737,     102490,  57.941436, 130.700000, 164.500000, 246.200000,  66.016673,   0.000000, 1180.992007, 480.686190
Outstanding requests per worker:
731 764 706 741 765 832 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  158171.0,      790856,     711740,      79116,     538453,     173287,  20.732849,  38.100000,  45.600000,  54.300000,  12.136964,   0.704000, 200.357005, 580.789922
Outstanding requests per worker:
566 555 568 539 510 526 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157890.4,      789453,     710859,      78594,     568157,     142702,  20.892777,  37.600000,  46.200000,  54.500000,  11.757095,   0.752000,  91.844998, 628.325053
Outstanding requests per worker:
530 548 553 565 609 533 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157890.2,      789452,     710592,      78860,     584333,     126259,  21.314769,  38.000000,  47.200000,  55.400000,  11.978647,   0.667000,  99.501997, 653.416570
Outstanding requests per worker:
560 558 595 562 580 581 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157910.0,      789551,     710785,      78766,     595479,     115306,  21.479551,  38.100000,  47.700000,  55.600000,  12.018170,   0.892000,  94.449997, 670.725401
Outstanding requests per worker:
584 565 555 621 579 544 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157919.6,      789599,     711012,      78587,     603994,     107018,  21.662244,  38.500000,  48.100000,  56.200000,  12.125460,   0.781000,  89.166999, 683.716809
Outstanding requests per worker:
601 589 587 543 560 548 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157902.6,      789514,     710714,      78800,     609592,     101122,  21.811338,  38.600000,  48.500000,  56.800000,  12.212172,   0.799000,  80.256999, 691.906365
Outstanding requests per worker:
585 542 602 570 563 574 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:47   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:47   0:00 /usr/lib/linux
memcache      7  299  0.0 448192 165184 pts/0   Sl+  17:47   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:48   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19350493960      instructions:u            #    0.70  insn per cycle         
       27756210827      cycles:u                                                    
         113404304      armv8_pmuv3_0/br_mis_pred/:u                                   
        3013094833      armv8_pmuv3_0/br_pred/:u                                    

      42.621266886 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 6 threads, 156000 rps'
==> Bench: 262114 keys, 1024 conns, 6 threads, 156000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 156000 -k 262114 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 156000 -k 262114 -c 1024 -f 512 -w 6'
Starting client with -r 156000 -k 262114 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 156000 -k 262114 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 156000 -k 262114 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 156000 cpus 6
meanInterarrival 38
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1611198976
starting receive base loop
num_worker_connections 171
Creating worker on tid 154399232
starting receive base loop
num_worker_connections 171
Creating worker on tid 2991714816
starting receive base loop
num_worker_connections 170
Creating worker on tid 1531441664
starting receive base loop
num_worker_connections 170
Creating worker on tid 79229440
starting receive base loop
Created 1024 connections total
Creating worker on tid 2921984512
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575396874.395299,       0.0,      338531,     304465,      34066,     202096,     102369,  55.177871, 124.100000, 158.700000, 232.900000,  65.458224,   0.000000, 1232.846975, 479.808681
Outstanding requests per worker:
598 556 622 598 632 586 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  158003.6,      790019,     711008,      79011,     537837,     173171,  19.472192,  35.900000,  42.900000,  49.700000,  10.980943,   0.635000, 138.264000, 580.772394
Outstanding requests per worker:
537 511 537 501 511 524 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157890.8,      789455,     710825,      78630,     567881,     142944,  19.908712,  36.200000,  43.800000,  51.000000,  11.151313,   0.654000,  62.144998, 628.486768
Outstanding requests per worker:
568 518 525 549 528 540 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157915.4,      789578,     710047,      79531,     583867,     126180,  20.360376,  37.000000,  44.900000,  52.600000,  11.434919,   0.630000,  79.172000, 653.966622
Outstanding requests per worker:
524 564 514 534 517 578 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157904.4,      789523,     710455,      79068,     595564,     114891,  20.553021,  37.200000,  45.600000,  53.200000,  11.543931,   0.746000,  72.264001, 671.282757
Outstanding requests per worker:
554 526 560 531 544 517 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157896.8,      789485,     710271,      79214,     603141,     107130,  20.746126,  37.400000,  45.900000,  53.700000,  11.637530,   0.593000,  72.452001, 682.595802
Outstanding requests per worker:
544 583 510 574 533 551 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157898.4,      789493,     710274,      79219,     609300,     100974,  20.926937,  37.600000,  46.300000,  54.200000,  11.709960,   0.678000,  82.711004, 693.169632
Outstanding requests per worker:
526 574 552 569 585 557 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:48   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:48   0:00 /usr/lib/linux
memcache      7  299  0.0 449216 167680 pts/0   Sl+  17:48   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:48   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19297588152      instructions:u            #    0.72  insn per cycle         
       26776127107      cycles:u                                                    
         115621615      armv8_pmuv3_0/br_mis_pred/:u                                   
        3014993363      armv8_pmuv3_0/br_pred/:u                                    

      42.771272108 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 6 threads, 158000 rps'
==> Bench: 262114 keys, 1024 conns, 6 threads, 158000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 158000 -k 262114 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 158000 -k 262114 -c 1024 -f 512 -w 6'
Starting client with -r 158000 -k 262114 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 158000 -k 262114 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 158000 -k 262114 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 158000 cpus 6
meanInterarrival 37
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1117712896
starting receive base loop
num_worker_connections 171
Creating worker on tid 3955421696
starting receive base loop
num_worker_connections 171
Creating worker on tid 2495148544
starting receive base loop
num_worker_connections 170
Creating worker on tid 1034875392
starting receive base loop
num_worker_connections 170
Creating worker on tid 3880251904
starting receive base loop
Created 1024 connections total
Creating worker on tid 2428039680
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575396920.395345,       0.0,      345248,     310660,      34588,     207200,     103460,  74.438032, 154.300000, 188.600000, 461.600000,  95.915685,   0.000000, 1543.737054, 482.312473
Outstanding requests per worker:
1378 1408 1307 1272 1388 2666 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163329.6,      816649,     735120,      81529,     557338,     177782,  26.152518,  46.700000,  55.000000, 107.000000,  29.982107,   0.825000, 1062.582970, 583.011838
Outstanding requests per worker:
643 621 582 583 666 590 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162181.8,      810910,     730173,      80737,     585086,     145087,  22.714652,  39.300000,  50.000000,  59.500000,  12.600020,   0.823000,  87.555997, 630.464423
Outstanding requests per worker:
673 595 625 567 599 590 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162168.8,      810845,     729704,      81141,     601270,     128434,  22.999303,  39.400000,  50.900000,  60.300000,  12.698697,   0.879000,  90.761997, 655.092420
Outstanding requests per worker:
639 650 583 610 600 608 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162161.4,      810808,     729597,      81211,     612153,     117444,  23.400887,  40.200000,  51.100000,  61.900000,  12.977113,   0.799000, 115.518004, 671.861688
Outstanding requests per worker:
651 635 619 621 667 587 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162173.0,      810866,     729941,      80925,     621010,     108931,  23.425293,  40.000000,  51.500000,  61.400000,  12.917349,   0.734000, 100.881003, 684.617025
Outstanding requests per worker:
654 688 646 650 601 587 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162154.8,      810775,     729505,      81270,     627053,     102452,  23.744982,  40.500000,  52.200000,  62.100000,  13.060046,   0.981000, 106.430002, 694.383427
Outstanding requests per worker:
677 641 664 646 657 629 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:48   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:48   0:00 /usr/lib/linux
memcache      7  299  0.0 514176 167232 pts/0   Sl+  17:48   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:49   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       20008495801      instructions:u            #    0.73  insn per cycle         
       27299924336      cycles:u                                                    
         117139329      armv8_pmuv3_0/br_mis_pred/:u                                   
        3103902190      armv8_pmuv3_0/br_pred/:u                                    

      42.901165160 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 6 threads, 160000 rps'
==> Bench: 262114 keys, 1024 conns, 6 threads, 160000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 160000 -k 262114 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 160000 -k 262114 -c 1024 -f 512 -w 6'
Starting client with -r 160000 -k 262114 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 160000 -k 262114 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 160000 -k 262114 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 160000 cpus 6
meanInterarrival 37
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 924316160
starting receive base loop
num_worker_connections 171
Creating worker on tid 3762156032
starting receive base loop
num_worker_connections 171
Creating worker on tid 2301882880
starting receive base loop
num_worker_connections 170
Creating worker on tid 844231168
starting receive base loop
num_worker_connections 170
Creating worker on tid 3686986240
starting receive base loop
Created 1024 connections total
Creating worker on tid 2234774016
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575396967.395392,       0.0,      340685,     306452,      34233,     203766,     102686,  80.342023, 161.200000, 197.100000, 592.400000, 105.645348,   0.000000, 1542.554975, 479.881942
Outstanding requests per worker:
1439 1472 1694 1582 1603 3490 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163692.6,      818464,     736952,      81512,     558941,     178011,  31.158128,  53.100000,  70.900000, 151.100000,  48.320213,   0.733000, 1376.979947, 583.087939
Outstanding requests per worker:
596 597 669 609 628 609 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162150.4,      810753,     730172,      80581,     585015,     145157,  23.132814,  39.700000,  50.200000,  60.800000,  12.636494,   0.809000, 111.286998, 630.303772
Outstanding requests per worker:
579 632 649 661 665 628 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162180.0,      810901,     730057,      80844,     602006,     128051,  23.539070,  40.300000,  51.100000,  62.200000,  12.878915,   0.945000, 108.329996, 656.357606
Outstanding requests per worker:
631 614 597 635 626 667 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162148.0,      810741,     729785,      80956,     612982,     116803,  23.916265,  41.000000,  51.700000,  62.900000,  13.103518,   0.869000, 116.456002, 673.007224
Outstanding requests per worker:
645 624 659 671 677 620 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162177.6,      810889,     729585,      81304,     620684,     108901,  24.127041,  41.300000,  52.200000,  63.800000,  13.204249,   1.009000, 117.036998, 684.601901
Outstanding requests per worker:
598 632 708 679 604 666 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162155.0,      810776,     729390,      81386,     627234,     102156,  24.259088,  41.400000,  52.600000,  64.000000,  13.275328,   0.956000, 116.576999, 694.437899
Outstanding requests per worker:
652 675 659 663 673 655 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:49   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:49   0:00 /usr/lib/linux
memcache      7  306  0.0 450240 168704 pts/0   Sl+  17:49   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:50   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19853769789      instructions:u            #    0.72  insn per cycle         
       27732151019      cycles:u                                                    
         114110885      armv8_pmuv3_0/br_mis_pred/:u                                   
        3099909976      armv8_pmuv3_0/br_pred/:u                                    

      42.661043156 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 6 threads, 162000 rps'
==> Bench: 262114 keys, 1024 conns, 6 threads, 162000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 162000 -k 262114 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 162000 -k 262114 -c 1024 -f 512 -w 6'
Starting client with -r 162000 -k 262114 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 162000 -k 262114 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 162000 -k 262114 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 162000 cpus 6
meanInterarrival 37
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1294266880
starting receive base loop
num_worker_connections 171
Creating worker on tid 4132565504
starting receive base loop
num_worker_connections 171
Creating worker on tid 2672292352
starting receive base loop
num_worker_connections 170
Creating worker on tid 1212019200
starting receive base loop
num_worker_connections 170
Creating worker on tid 4054774272
starting receive base loop
Created 1024 connections total
Creating worker on tid 2605183488
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575397013.395438,       0.0,      343050,     308578,      34472,     204912,     103666,  74.906098, 154.300000, 190.600000, 423.200000, 101.774959,   0.000000, 1818.634987, 479.479512
Outstanding requests per worker:
1382 1233 1339 1428 1282 3288 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163426.6,      817134,     735579,      81555,     557109,     178470,  27.849725,  47.400000,  55.400000, 102.900000,  51.052126,   0.875000, 1535.603046, 581.637222
Outstanding requests per worker:
602 623 627 571 631 623 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162178.4,      810893,     730330,      80563,     585129,     145201,  22.686453,  39.200000,  49.800000,  59.500000,  12.540590,   0.808000, 106.407002, 629.793577
Outstanding requests per worker:
599 617 595 586 614 647 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162149.0,      810746,     729375,      81371,     601208,     128167,  23.130246,  39.800000,  50.800000,  61.000000,  12.799456,   0.947000, 108.993001, 655.942360
Outstanding requests per worker:
619 657 661 625 645 585 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162189.4,      810948,     729687,      81261,     612568,     117119,  23.274589,  39.900000,  51.200000,  61.000000,  12.830891,   0.938000,  92.519000, 672.420774
Outstanding requests per worker:
625 598 625 638 652 613 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  162145.4,      810728,     730013,      80715,     621014,     108999,  23.501107,  40.200000,  51.500000,  61.600000,  12.945281,   0.591000, 107.956000, 685.036454
Outstanding requests per worker:
601 660 631 674 654 655 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161567.8,      807840,     726545,      81295,     624427,     102118,  23.709488,  40.400000,  52.100000,  62.100000,  13.070154,   0.949000, 112.907998, 694.391662
Outstanding requests per worker:
1145 1256 1123 1142 1110 1130 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:50   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:50   0:00 /usr/lib/linux
memcache      7  306  0.0 515200 169088 pts/0   Sl+  17:50   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  17:51   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19890561233      instructions:u            #    0.72  insn per cycle         
       27606316552      cycles:u                                                    
         116303095      armv8_pmuv3_0/br_mis_pred/:u                                   
        3102547710      armv8_pmuv3_0/br_pred/:u                                    

      42.640640543 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 6 threads, 164000 rps'
==> Bench: 262114 keys, 1024 conns, 6 threads, 164000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 164000 -k 262114 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 164000 -k 262114 -c 1024 -f 512 -w 6'
Starting client with -r 164000 -k 262114 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 164000 -k 262114 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 164000 -k 262114 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 164000 cpus 6
meanInterarrival 36
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1109389824
starting receive base loop
num_worker_connections 171
Creating worker on tid 3947360768
starting receive base loop
num_worker_connections 171
Creating worker on tid 2487087616
starting receive base loop
num_worker_connections 170
Creating worker on tid 1026814464
starting receive base loop
num_worker_connections 170
Creating worker on tid 3872190976
starting receive base loop
Created 1024 connections total
Creating worker on tid 2419978752
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575397060.395485,       0.0,      407818,     366730,      41088,     247421,     119309,  56.593622, 118.300000, 150.200000, 495.500000,  91.887767,   0.000000, 1396.062970, 490.294724
Outstanding requests per worker:
1328 1487 1352 1428 1508 2934 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167736.4,      838683,     755054,      83629,     575686,     179368,  32.759364,  56.600000,  67.500000, 127.100000,  37.242499,   0.666000, 1152.567983, 587.448798
Outstanding requests per worker:
786 788 764 774 799 841 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166653.6,      833269,     750002,      83267,     602453,     147549,  28.008059,  49.800000,  58.200000,  82.000000,  16.052017,   0.916000, 169.937998, 633.118886
Outstanding requests per worker:
898 803 801 801 813 752 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166676.0,      833381,     750314,      83067,     619971,     130343,  29.333800,  52.900000,  60.700000,  92.300000,  17.300607,   0.932000, 183.593005, 657.075734
Outstanding requests per worker:
814 791 770 872 806 827 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166635.4,      833178,     749581,      83597,     629978,     119603,  30.425021,  55.900000,  63.600000, 102.900000,  18.896614,   1.110000, 206.973001, 673.644619
Outstanding requests per worker:
863 910 812 890 875 766 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166646.8,      833235,     749648,      83587,     638663,     110985,  31.023803,  57.100000,  65.000000, 105.800000,  19.348587,   1.031000, 207.163006, 686.500980
Outstanding requests per worker:
891 886 862 900 870 857 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165550.8,      827755,     745006,      82749,     642199,     102807,  39.390590,  75.300000, 109.600000, 150.600000,  30.361167,   1.141000, 260.111004, 696.633502
Outstanding requests per worker:
1775 1738 1671 1911 1842 1959 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:51   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   17:51   0:00 /usr/lib/linux
memcache      7  304  0.0 517248 171200 pts/0   Sl+  17:51   2:10 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  17:51   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       20686799737      instructions:u            #    0.72  insn per cycle         
       28669229832      cycles:u                                                    
         121909075      armv8_pmuv3_0/br_mis_pred/:u                                   
        3224231030      armv8_pmuv3_0/br_pred/:u                                    

      43.681113046 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 6 threads, 166000 rps'
==> Bench: 262114 keys, 1024 conns, 6 threads, 166000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 166000 -k 262114 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 166000 -k 262114 -c 1024 -f 512 -w 6'
Starting client with -r 166000 -k 262114 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 166000 -k 262114 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 166000 -k 262114 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 166000 cpus 6
meanInterarrival 36
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 762376704
starting receive base loop
num_worker_connections 171
Creating worker on tid 3595694592
starting receive base loop
num_worker_connections 171
Creating worker on tid 2135421440
starting receive base loop
num_worker_connections 170
Creating worker on tid 675148288
starting receive base loop
num_worker_connections 170
Creating worker on tid 3517903360
starting receive base loop
Created 1024 connections total
Creating worker on tid 2068312576
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575397106.395531,       0.0,      344035,     309447,      34588,     206056,     103391, 100.632742, 191.900000, 230.800000, 692.100000, 124.451138,   0.000000, 1899.224043, 481.370122
Outstanding requests per worker:
2632 2715 2900 2745 2728 6198 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169638.4,      848193,     763704,      84489,     579526,     184178,  58.639016, 123.200000, 150.600000, 283.600000,  84.523710,   1.003000, 1808.555961, 583.789373
Outstanding requests per worker:
837 860 880 873 860 815 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166690.0,      833451,     750124,      83327,     601265,     148859,  30.672292,  55.900000,  63.500000, 100.700000,  18.527205,   0.948000, 194.432005, 630.765496
Outstanding requests per worker:
858 859 822 911 802 839 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166640.4,      833203,     750226,      82977,     619288,     130938,  31.291455,  56.700000,  64.700000, 102.600000,  18.767051,   0.993000, 195.455000, 656.807577
Outstanding requests per worker:
895 881 899 897 880 868 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166622.4,      833113,     749387,      83726,     629501,     119886,  33.502591,  60.000000,  69.200000, 111.700000,  20.547250,   1.071000, 198.690996, 673.580230
Outstanding requests per worker:
902 932 938 941 971 905 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166548.0,      832741,     749476,      83265,     638764,     110712,  35.314937,  64.100000,  74.700000, 126.400000,  23.124338,   1.278000, 236.543000, 686.644270
Outstanding requests per worker:
1039 951 1113 1053 1027 1058 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165659.8,      828300,     745277,      83023,     641551,     103726,  44.850729,  86.000000, 114.900000, 158.000000,  31.655545,   1.423000, 298.269004, 696.186015
Outstanding requests per worker:
1893 1805 1814 1883 1975 1992 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:51   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   17:51   0:00 /usr/lib/linux
memcache      7  306  0.0 516224 169408 pts/0   Sl+  17:51   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:52   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       20528537974      instructions:u            #    0.72  insn per cycle         
       28627299384      cycles:u                                                    
         120832034      armv8_pmuv3_0/br_mis_pred/:u                                   
        3188862803      armv8_pmuv3_0/br_pred/:u                                    

      42.771566317 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 6 threads, 168000 rps'
==> Bench: 262114 keys, 1024 conns, 6 threads, 168000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 168000 -k 262114 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 168000 -k 262114 -c 1024 -f 512 -w 6'
Starting client with -r 168000 -k 262114 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 168000 -k 262114 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 168000 -k 262114 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 168000 cpus 6
meanInterarrival 35
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1317270016
starting receive base loop
num_worker_connections 171
Creating worker on tid 4156748288
starting receive base loop
num_worker_connections 171
Creating worker on tid 2696475136
starting receive base loop
num_worker_connections 170
Creating worker on tid 1236201984
starting receive base loop
num_worker_connections 170
Creating worker on tid 4081578496
starting receive base loop
Created 1024 connections total
Creating worker on tid 2629366272
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575397152.395577,       0.0,      337927,     304219,      33708,     202211,     102008, 111.519113, 190.900000, 234.100000, 962.300000, 153.884009,   0.000000, 1949.792027, 479.957583
Outstanding requests per worker:
3302 3267 3223 3188 3202 12491 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172826.0,      864131,     778038,      86093,     590827,     187211, 150.614316, 211.800000, 280.400000, 1355.000000, 207.472947,   3.036000, 2469.211102, 583.580837
Outstanding requests per worker:
3235 3141 3227 3235 3203 5756 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171792.0,      858961,     773192,      85769,     620810,     152382, 120.220716, 241.400000, 286.300000, 553.000000, 136.992462,   2.538000, 1924.569011, 632.599753
Outstanding requests per worker:
3296 3095 3171 3157 3230 4095 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171390.4,      856953,     771586,      85367,     637562,     134024, 118.089551, 272.500000, 320.200000, 450.900000, 117.139491,   2.394000, 1571.874022, 658.159843
Outstanding requests per worker:
3253 3067 3385 3328 3280 3994 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171272.4,      856363,     770599,      85764,     649014,     121585, 120.560800, 282.800000, 337.600000, 459.400000, 112.658392,   3.387000, 1549.216986, 675.611563
Outstanding requests per worker:
3538 3511 3336 3568 3444 3791 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171213.4,      856068,     770207,      85861,     656793,     113414, 125.558761, 288.500000, 344.600000, 441.300000, 106.867565,   2.097000, 1301.612020, 687.145270
Outstanding requests per worker:
3715 3658 3724 3667 3689 3918 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169197.6,      845989,     761153,      84836,     655905,     105248, 152.739827, 305.900000, 362.100000, 449.000000, 105.339161,   2.716000, 699.285984, 696.787549
Outstanding requests per worker:
5477 5632 5610 5466 5623 5780 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:52   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:52   0:00 /usr/lib/linux
memcache      7  305  0.0 520320 177088 pts/0   Sl+  17:52   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:53   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21331603428      instructions:u            #    0.74  insn per cycle         
       28835817220      cycles:u                                                    
         126384425      armv8_pmuv3_0/br_mis_pred/:u                                   
        3317684788      armv8_pmuv3_0/br_pred/:u                                    

      42.879629789 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 6 threads, 170000 rps'
==> Bench: 262114 keys, 1024 conns, 6 threads, 170000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 170000 -k 262114 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 170000 -k 262114 -c 1024 -f 512 -w 6'
Starting client with -r 170000 -k 262114 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 170000 -k 262114 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 170000 -k 262114 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 170000 cpus 6
meanInterarrival 35
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 757330432
starting receive base loop
num_worker_connections 171
Creating worker on tid 3595694592
starting receive base loop
num_worker_connections 171
Creating worker on tid 2135421440
starting receive base loop
num_worker_connections 170
Creating worker on tid 675148288
starting receive base loop
num_worker_connections 170
Creating worker on tid 3517903360
starting receive base loop
Created 1024 connections total
Creating worker on tid 2068312576
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575397198.395623,       0.0,      344054,     309199,      34855,     205182,     104017, 110.771819, 192.500000, 237.600000, 1008.800000, 161.121834,   0.000000, 1976.655006, 479.190030
Outstanding requests per worker:
3136 3220 3245 3215 3224 11687 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173696.4,      868483,     781417,      87066,     593234,     188183, 131.798505, 192.200000, 251.000000, 1001.000000, 155.114368,   2.156000, 2056.260109, 584.094742
Outstanding requests per worker:
2558 2692 2669 2752 2636 3158 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171907.0,      859536,     774119,      85417,     621684,     152435,  83.403966, 178.700000, 219.000000, 286.200000,  68.074473,   2.969000, 814.369023, 632.454952
Outstanding requests per worker:
2281 2393 2344 2395 2315 2423 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171286.2,      856432,     771193,      85239,     637643,     133550,  84.509283, 201.700000, 245.100000, 298.400000,  72.463389,   2.919000, 485.181004, 658.125456
Outstanding requests per worker:
2539 2431 2480 2600 2328 2546 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171170.8,      855855,     770404,      85451,     648395,     122009,  91.287567, 219.900000, 262.100000, 334.900000,  78.902112,   1.706000, 592.949986, 674.732159
Outstanding requests per worker:
2640 2767 2715 2798 2693 2653 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171242.8,      856215,     770703,      85512,     657342,     113361,  99.400095, 233.000000, 273.500000, 349.600000,  82.274703,   3.037000, 535.144985, 687.062222
Outstanding requests per worker:
2862 2837 2868 2824 2808 3066 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169826.4,      849133,     763688,      85445,     658508,     105180, 116.281402, 252.100000, 292.300000, 378.500000,  88.309065,   3.422000, 599.830985, 697.217171
Outstanding requests per worker:
4129 4080 4021 4320 4340 4474 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:53   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   17:53   0:00 /usr/lib/linux
memcache      7  306  0.0 521344 182208 pts/0   Sl+  17:53   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:54   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21278823542      instructions:u            #    0.73  insn per cycle         
       28987168854      cycles:u                                                    
         125039843      armv8_pmuv3_0/br_mis_pred/:u                                   
        3306965846      armv8_pmuv3_0/br_pred/:u                                    

      42.780964868 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 6 threads, 172000 rps'
==> Bench: 262114 keys, 1024 conns, 6 threads, 172000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 172000 -k 262114 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 172000 -k 262114 -c 1024 -f 512 -w 6'
Starting client with -r 172000 -k 262114 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 172000 -k 262114 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 172000 -k 262114 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 172000 cpus 6
meanInterarrival 34
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 890302976
starting receive base loop
num_worker_connections 171
Creating worker on tid 3729912320
starting receive base loop
num_worker_connections 171
Creating worker on tid 2269639168
starting receive base loop
num_worker_connections 170
Creating worker on tid 809366016
starting receive base loop
num_worker_connections 170
Creating worker on tid 3652121088
starting receive base loop
Created 1024 connections total
Creating worker on tid 2202530304
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575397244.395669,       0.0,      339549,     305344,      34205,     203659,     101685, 109.103200, 192.500000, 253.200000, 1118.100000, 180.706221,   0.000000, 1959.630013, 482.256075
Outstanding requests per worker:
3065 3267 2968 3119 3194 24834 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173662.4,      868313,     781867,      86446,     592508,     189359, 286.825368, 382.300000, 1168.400000, 2299.000000, 400.494621,   5.364000, 3180.800915, 582.708823
Outstanding requests per worker:
6894 7107 6555 6945 7142 19921 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175262.4,      876313,     788522,      87791,     632329,     156193, 329.294573, 466.400000, 690.400000, 2030.900000, 303.429284,  10.218000, 2952.949047, 631.207855
Outstanding requests per worker:
8688 8686 8633 8572 8879 17196 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175368.6,      876844,     789450,      87394,     652350,     137100, 358.788378, 528.100000, 664.300000, 1836.500000, 265.471456,   7.027000, 3370.580912, 657.959985
Outstanding requests per worker:
9991 9981 9729 9862 10104 16568 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175325.8,      876630,     788664,      87966,     663964,     124700, 391.826817, 600.700000, 742.100000, 1681.800000, 259.285398,   7.739000, 3494.066954, 675.111700
Outstanding requests per worker:
10897 11125 10895 10906 11701 16482 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175467.6,      877339,     789685,      87654,     673715,     115970, 422.320713, 670.500000, 843.800000, 1531.900000, 263.784571,  13.274000, 3592.597008, 687.513473
Outstanding requests per worker:
12120 11888 11711 11921 12820 16632 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174963.8,      874820,     787467,      87353,     679553,     107914, 457.570457, 753.700000, 919.400000, 1639.500000, 280.252444,  28.755000, 3537.652016, 698.245661
Outstanding requests per worker:
13423 13295 12972 13144 14374 17475 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:54   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:54   0:00 /usr/lib/linux
memcache      7  306  0.0 523392 195584 pts/0   Sl+  17:54   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:54   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21887320418      instructions:u            #    0.72  insn per cycle         
       30227201588      cycles:u                                                    
         125720577      armv8_pmuv3_0/br_mis_pred/:u                                   
        3421828781      armv8_pmuv3_0/br_pred/:u                                    

      42.681074892 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 6 threads, 174000 rps'
==> Bench: 262114 keys, 1024 conns, 6 threads, 174000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 174000 -k 262114 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 174000 -k 262114 -c 1024 -f 512 -w 6'
Starting client with -r 174000 -k 262114 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 174000 -k 262114 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 174000 -k 262114 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 174000 cpus 6
meanInterarrival 34
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 993063424
starting receive base loop
num_worker_connections 171
Creating worker on tid 3829264896
starting receive base loop
num_worker_connections 171
Creating worker on tid 2368991744
starting receive base loop
num_worker_connections 170
Creating worker on tid 911340032
starting receive base loop
num_worker_connections 170
Creating worker on tid 3754095104
starting receive base loop
Created 1024 connections total
Creating worker on tid 2301882880
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575397290.395715,       0.0,      341746,     307364,      34382,     204552,     102812,  97.173043, 160.600000, 221.500000, 1130.900000, 181.071917,   0.000000, 1975.653052, 481.161122
Outstanding requests per worker:
2147 2339 2256 2441 2458 28431 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172486.6,      862434,     776367,      86067,     589251,     187116, 302.800614, 409.500000, 1382.800000, 2483.700000, 455.238197,   5.006000, 3508.845091, 583.635265
Outstanding requests per worker:
7133 7209 7201 7087 7423 24014 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174975.0,      874876,     787517,      87359,     632456,     155061, 363.141060, 501.000000, 957.400000, 2194.900000, 367.017507,   4.637000, 3806.577921, 632.346660
Outstanding requests per worker:
9004 9120 9500 8996 9513 21504 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175140.2,      875702,     787762,      87940,     651342,     136420, 402.850835, 599.200000, 776.700000, 2146.100000, 345.548811,   5.949000, 3870.934963, 658.786175
Outstanding requests per worker:
10575 10511 10592 10712 11338 20670 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175199.6,      875999,     788811,      87188,     664286,     124525, 436.530961, 675.300000, 853.400000, 2308.400000, 348.637949,  18.601000, 3998.022079, 676.040955
Outstanding requests per worker:
12189 11820 11721 11964 12663 20454 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175151.8,      875760,     787692,      88068,     672109,     115583, 476.158804, 779.900000, 976.300000, 2448.600000, 360.474924,  18.076999, 3726.735115, 686.979417
Outstanding requests per worker:
13595 12807 12837 13265 14086 20884 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173642.0,      868211,     781751,      86460,     673616,     108135, 533.171829, 886.300000, 1105.200000, 2513.400000, 375.019396,  24.700999, 3918.699026, 696.875787
Outstanding requests per worker:
16218 15267 14913 15647 16505 23159 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:55   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   17:55   0:00 /usr/lib/linux
memcache      7  299  0.0 521344 194176 pts/0   Sl+  17:55   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:55   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21812957620      instructions:u            #    0.74  insn per cycle         
       29651753787      cycles:u                                                    
         124192509      armv8_pmuv3_0/br_mis_pred/:u                                   
        3407387425      armv8_pmuv3_0/br_pred/:u                                    

      42.761657369 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 6 threads, 176000 rps'
==> Bench: 262114 keys, 1024 conns, 6 threads, 176000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 6'
++ bc
+ client_cores_spec=112-118
+ CLIENT_CORES_SPEC=112-118
+ CLIENT_ARGS='-r 176000 -k 262114 -c 1024 -f 512 -w 6'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-118
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 176000 -k 262114 -c 1024 -f 512 -w 6'
Starting client with -r 176000 -k 262114 -c 1024 -f 512 -w 6
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-118 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 176000 -k 262114 -c 1024 -f 512 -w 6
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 176000 -k 262114 -c 1024 -f 512 -w 6
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 6
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 176000 cpus 6
meanInterarrival 34
num_worker_connections 171
num_worker_connections 171
Creating worker on tid 1653928448
starting receive base loop
num_worker_connections 171
Creating worker on tid 197325312
starting receive base loop
num_worker_connections 171
Creating worker on tid 3032019456
starting receive base loop
num_worker_connections 170
Creating worker on tid 1571746304
starting receive base loop
num_worker_connections 170
Creating worker on tid 122155520
starting receive base loop
Created 1024 connections total
Creating worker on tid 2964910592
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575397336.395761,       0.0,      348818,     313933,      34885,     209106,     104827, 106.446161, 197.200000, 257.300000, 1101.800000, 180.163265,   0.000000, 1982.897043, 482.326531
Outstanding requests per worker:
3266 2951 2961 3046 3059 26218 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172672.6,      863364,     777143,      86221,     589817,     187326, 309.252420, 442.100000, 1308.100000, 2317.700000, 411.978732,   6.392000, 3148.813009, 583.417453
Outstanding requests per worker:
7716 7587 7812 7556 7998 21941 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174478.0,      872391,     785452,      86939,     630450,     155002, 376.439646, 514.300000, 924.700000, 1905.500000, 307.666374,  11.341000, 2810.729027, 632.023495
Outstanding requests per worker:
9928 9903 10099 9854 10361 20484 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174717.6,      873589,     785927,      87662,     649327,     136600, 427.669116, 606.200000, 815.500000, 1822.700000, 269.151305,  13.411000, 2665.420055, 657.916557
Outstanding requests per worker:
11820 11587 11772 11906 12253 20135 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  174982.0,      874911,     787586,      87325,     663471,     124115, 470.295584, 682.100000, 854.400000, 1690.700000, 252.636924,  46.053998, 2528.054953, 675.909772
Outstanding requests per worker:
13173 13085 13031 13308 14131 20263 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  175002.8,      875015,     787544,      87471,     672599,     114945, 515.575823, 792.200000, 963.800000, 1624.000000, 258.063845,  43.510001, 2418.790102, 688.695468
Outstanding requests per worker:
14771 14441 14387 14630 15526 20693 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  173994.4,      869973,     782871,      87102,     675638,     107233, 567.437540, 912.600000, 1123.300000, 1590.100000, 274.457352,  67.676999, 2445.596933, 698.233070
Outstanding requests per worker:
16869 16608 16603 16706 17708 22390 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:55   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:55   0:00 /usr/lib/linux
memcache      7  299  0.0 523392 199616 pts/0   Sl+  17:55   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:56   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21842693173      instructions:u            #    0.73  insn per cycle         
       30095444520      cycles:u                                                    
         125397074      armv8_pmuv3_0/br_mis_pred/:u                                   
        3404336116      armv8_pmuv3_0/br_pred/:u                                    

      42.730274236 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 8 threads, 150000 rps'
==> Bench: 262114 keys, 1024 conns, 8 threads, 150000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 150000 -k 262114 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 150000 -k 262114 -c 1024 -f 512 -w 8'
Starting client with -r 150000 -k 262114 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 150000 -k 262114 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 150000 -k 262114 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 150000 cpus 8
meanInterarrival 53
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1764553216
starting receive base loop
num_worker_connections 128
Creating worker on tid 653980160
starting receive base loop
num_worker_connections 128
Creating worker on tid 3840340480
starting receive base loop
num_worker_connections 128
Creating worker on tid 2731733504
starting receive base loop
num_worker_connections 128
Creating worker on tid 1617687040
starting receive base loop
num_worker_connections 128
Creating worker on tid 509080064
starting receive base loop
num_worker_connections 128
Creating worker on tid 3690000896
starting receive base loop
Created 1024 connections total
Creating worker on tid 2581393920
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575397382.395807,       0.0,      350914,     315824,      35090,     210986,     104838,  26.952697,  62.100000,  78.700000, 137.700000,  29.202740,   0.000000, 509.782016, 484.245415
Outstanding requests per worker:
263 261 256 252 273 274 278 258 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150934.4,      754673,     679817,      74856,     513663,     166154,  14.619148,  28.200000,  32.400000,  41.100000,   9.256582,   0.260000,  51.805999, 580.224783
Outstanding requests per worker:
273 272 302 252 286 286 310 260 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150944.2,      754722,     679401,      75321,     541210,     138191,  15.135663,  29.200000,  33.600000,  43.100000,   9.609352,   0.261000,  54.768000, 625.369362
Outstanding requests per worker:
304 283 290 300 270 306 284 277 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150941.8,      754710,     679060,      75650,     556095,     122965,  15.651141,  30.000000,  35.000000,  45.200000,   9.998488,   0.271000,  60.768001, 650.584199
Outstanding requests per worker:
276 296 319 325 298 294 290 271 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150933.0,      754666,     679322,      75344,     567647,     111675,  15.881858,  30.500000,  35.800000,  45.200000,  10.125006,   0.286000,  57.645001, 668.858172
Outstanding requests per worker:
265 287 311 309 326 315 320 341 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150957.8,      754790,     679128,      75662,     575165,     103963,  15.966182,  30.700000,  35.800000,  46.300000,  10.215801,   0.277000,  58.006998, 680.494103
Outstanding requests per worker:
333 290 313 312 307 306 299 311 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150956.4,      754783,     679299,      75484,     581345,      97954,  16.266443,  31.300000,  36.900000,  46.000000,  10.360205,   0.305000,  57.339001, 690.530950
Outstanding requests per worker:
327 288 332 269 294 326 345 313 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:56   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   17:56   0:00 /usr/lib/linux
memcache      7  301  0.0 444096 155840 pts/0   Sl+  17:56   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:57   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       18519454071      instructions:u            #    0.71  insn per cycle         
       26210404177      cycles:u                                                    
         108572444      armv8_pmuv3_0/br_mis_pred/:u                                   
        2901365178      armv8_pmuv3_0/br_pred/:u                                    

      42.960939002 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 8 threads, 152000 rps'
==> Bench: 262114 keys, 1024 conns, 8 threads, 152000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 152000 -k 262114 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 152000 -k 262114 -c 1024 -f 512 -w 8'
Starting client with -r 152000 -k 262114 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 152000 -k 262114 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 152000 -k 262114 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 152000 cpus 8
meanInterarrival 52
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1716908544
starting receive base loop
num_worker_connections 128
Creating worker on tid 602993152
starting receive base loop
num_worker_connections 128
Creating worker on tid 3789353472
starting receive base loop
num_worker_connections 128
Creating worker on tid 2675307008
starting receive base loop
num_worker_connections 128
Creating worker on tid 1566700032
starting receive base loop
num_worker_connections 128
Creating worker on tid 452653568
starting receive base loop
num_worker_connections 128
Creating worker on tid 3639013888
starting receive base loop
Created 1024 connections total
Creating worker on tid 2530406912
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575397430.395855,       0.0,      397180,     357219,      39961,     239886,     117333,  29.599522,  65.700000,  89.100000, 167.600000,  45.467447,   0.000000, 1024.659038, 488.172527
Outstanding requests per worker:
337 309 352 358 353 367 372 377 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153889.2,      769447,     692465,      76982,     526756,     165709,  17.513923,  33.600000,  40.500000,  48.900000,  11.142503,   0.301000,  95.100001, 585.738049
Outstanding requests per worker:
371 329 345 313 305 349 324 338 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153845.2,      769227,     692924,      76303,     554239,     138685,  17.932011,  34.400000,  41.700000,  49.600000,  11.367011,   0.281000,  61.744999, 628.111695
Outstanding requests per worker:
356 352 334 334 367 321 343 350 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153854.6,      769274,     691616,      77658,     568511,     123105,  18.295010,  34.800000,  42.600000,  50.900000,  11.591590,   0.305000,  79.479001, 653.630299
Outstanding requests per worker:
357 391 323 364 311 350 325 367 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153842.2,      769212,     692824,      76388,     579939,     112885,  18.491105,  35.100000,  42.900000,  51.600000,  11.738774,   0.320000,  84.229998, 669.943992
Outstanding requests per worker:
345 372 313 380 378 344 336 382 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153854.4,      769273,     692219,      77054,     587537,     104682,  18.667620,  35.500000,  43.900000,  51.700000,  11.850431,   0.333000,  87.691002, 682.365019
Outstanding requests per worker:
359 368 334 355 325 378 392 357 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  153859.0,      769296,     692322,      76974,     594067,      98255,  18.780256,  35.400000,  43.900000,  52.300000,  11.894637,   0.290000,  72.462000, 692.601285
Outstanding requests per worker:
343 358 356 367 388 339 377 353 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:57   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   17:57   0:00 /usr/lib/linux
memcache      7  298  0.0 447168 161856 pts/0   Sl+  17:57   2:11 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:58   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19032581439      instructions:u            #    0.71  insn per cycle         
       26731255009      cycles:u                                                    
         110287208      armv8_pmuv3_0/br_mis_pred/:u                                   
        2981656964      armv8_pmuv3_0/br_pred/:u                                    

      43.770260473 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 8 threads, 154000 rps'
==> Bench: 262114 keys, 1024 conns, 8 threads, 154000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 154000 -k 262114 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 154000 -k 262114 -c 1024 -f 512 -w 8'
Starting client with -r 154000 -k 262114 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 154000 -k 262114 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 154000 -k 262114 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 154000 cpus 8
meanInterarrival 51
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1884877312
starting receive base loop
num_worker_connections 128
Creating worker on tid 777515520
starting receive base loop
num_worker_connections 128
Creating worker on tid 3958436352
starting receive base loop
num_worker_connections 128
Creating worker on tid 2849829376
starting receive base loop
num_worker_connections 128
Creating worker on tid 1735782912
starting receive base loop
num_worker_connections 128
Creating worker on tid 627175936
starting receive base loop
num_worker_connections 128
Creating worker on tid 3808096768
starting receive base loop
Created 1024 connections total
Creating worker on tid 2699489792
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575397476.395901,       0.0,      362137,     325630,      36507,     217517,     108113,  44.318258,  80.100000, 118.300000, 422.300000,  87.787985,   0.000000, 1544.600010, 483.912996
Outstanding requests per worker:
464 422 481 440 429 436 427 1342 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157176.8,      785885,     707332,      78553,     536646,     170686,  20.294077,  38.000000,  45.600000,  57.200000,  25.384459,   0.304000, 1089.884996, 583.139931
Outstanding requests per worker:
376 376 352 356 373 380 408 353 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156861.8,      784310,     706282,      78028,     565199,     141083,  19.321686,  36.000000,  45.100000,  54.000000,  12.226354,   0.328000,  71.341999, 628.980264
Outstanding requests per worker:
363 379 371 385 403 383 387 370 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156826.6,      784134,     705622,      78512,     579811,     125811,  19.635687,  36.300000,  45.500000,  55.900000,  12.469839,   0.361000, 104.056999, 653.492650
Outstanding requests per worker:
438 424 372 417 406 437 387 407 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156914.2,      784572,     706582,      77990,     592283,     114299,  19.903745,  36.600000,  46.500000,  56.100000,  12.612260,   0.339000,  84.651001, 671.524999
Outstanding requests per worker:
447 393 379 353 416 413 354 359 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156875.2,      784377,     705751,      78626,     599906,     105845,  20.225432,  37.200000,  47.300000,  57.600000,  12.863470,   0.295000, 102.984004, 683.973268
Outstanding requests per worker:
377 415 406 393 408 409 380 369 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156857.6,      784289,     705361,      78928,     605859,      99502,  20.376418,  37.500000,  47.500000,  58.300000,  12.961490,   0.348000, 102.949999, 693.383258
Outstanding requests per worker:
443 417 398 391 383 381 404 417 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:58   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   17:58   0:00 /usr/lib/linux
memcache      7  301  0.0 448192 155328 pts/0   Sl+  17:58   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:58   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19319905615      instructions:u            #    0.71  insn per cycle         
       27164842928      cycles:u                                                    
         109112444      armv8_pmuv3_0/br_mis_pred/:u                                   
        3015330016      armv8_pmuv3_0/br_pred/:u                                    

      42.941280195 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 8 threads, 156000 rps'
==> Bench: 262114 keys, 1024 conns, 8 threads, 156000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 156000 -k 262114 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 156000 -k 262114 -c 1024 -f 512 -w 8'
Starting client with -r 156000 -k 262114 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 156000 -k 262114 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 156000 -k 262114 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 156000 cpus 8
meanInterarrival 51
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1826877952
starting receive base loop
num_worker_connections 128
Creating worker on tid 718467584
starting receive base loop
num_worker_connections 128
Creating worker on tid 3899388416
starting receive base loop
num_worker_connections 128
Creating worker on tid 2790781440
starting receive base loop
num_worker_connections 128
Creating worker on tid 1676734976
starting receive base loop
num_worker_connections 128
Creating worker on tid 568128000
starting receive base loop
num_worker_connections 128
Creating worker on tid 3749048832
starting receive base loop
Created 1024 connections total
Creating worker on tid 2640441856
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575397522.395947,       0.0,      353664,     318193,      35471,     212734,     105459,  49.524242,  96.100000, 142.600000, 484.300000,  90.648334,   0.000000, 1520.735025, 484.465717
Outstanding requests per worker:
548 511 527 510 505 495 563 1212 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  157259.4,      786298,     707965,      78333,     536447,     171518,  19.368790,  36.600000,  44.400000,  55.500000,  17.735430,   0.271000, 821.545005, 582.040998
Outstanding requests per worker:
347 384 361 305 421 391 385 359 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156854.6,      784274,     705907,      78367,     564832,     141075,  18.974034,  35.400000,  44.400000,  52.900000,  11.990414,   0.329000,  90.089999, 628.834426
Outstanding requests per worker:
395 388 382 383 379 407 369 367 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156883.2,      784417,     706067,      78350,     580590,     125477,  19.305062,  36.000000,  45.000000,  54.500000,  12.271082,   0.299000,  91.692999, 653.374936
Outstanding requests per worker:
366 408 356 382 377 401 377 398 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156894.0,      784471,     705842,      78629,     591067,     114775,  19.468220,  36.000000,  45.400000,  54.900000,  12.334015,   0.342000,  85.611999, 670.375645
Outstanding requests per worker:
374 377 346 372 414 398 373 364 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156858.8,      784295,     705692,      78603,     598919,     106773,  19.685961,  36.500000,  46.100000,  55.500000,  12.479884,   0.348000,  91.528997, 682.477307
Outstanding requests per worker:
388 370 395 363 373 365 409 429 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156872.6,      784364,     705769,      78595,     605746,     100023,  19.919196,  36.700000,  46.500000,  56.500000,  12.654204,   0.352000,  95.585003, 692.845122
Outstanding requests per worker:
392 417 380 383 393 353 387 419 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  17:58   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:58   0:00 /usr/lib/linux
memcache      7  308  0.0 447168 161600 pts/0   Sl+  17:58   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19264304753      instructions:u            #    0.71  insn per cycle         
       26947113031      cycles:u                                                    
         112648205      armv8_pmuv3_0/br_mis_pred/:u                                   
        3003426208      armv8_pmuv3_0/br_pred/:u                                    

      42.460002222 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 8 threads, 158000 rps'
==> Bench: 262114 keys, 1024 conns, 8 threads, 158000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 158000 -k 262114 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 5
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 158000 -k 262114 -c 1024 -f 512 -w 8'
Starting client with -r 158000 -k 262114 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 158000 -k 262114 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 158000 -k 262114 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 158000 cpus 8
meanInterarrival 50
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 2096361984
starting receive base loop
num_worker_connections 128
Creating worker on tid 986903040
starting receive base loop
num_worker_connections 128
Creating worker on tid 4167823872
starting receive base loop
num_worker_connections 128
Creating worker on tid 3059216896
starting receive base loop
num_worker_connections 128
Creating worker on tid 1945170432
starting receive base loop
num_worker_connections 128
Creating worker on tid 836563456
starting receive base loop
num_worker_connections 128
Creating worker on tid 4017484288
starting receive base loop
Created 1024 connections total
Creating worker on tid 2908877312
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575397568.395993,       0.0,      362029,     325606,      36423,     217272,     108334,  64.388328, 125.600000, 168.400000, 767.500000, 125.250533,   0.000000, 1529.121041, 483.248592
Outstanding requests per worker:
1052 1032 1047 990 1019 1148 1055 3841 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161466.8,      807335,     726516,      80819,     551244,     175272,  35.379326,  64.200000, 100.900000, 174.300000,  57.930614,   0.369000, 1366.973996, 583.241349
Outstanding requests per worker:
473 460 503 532 458 471 492 523 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159985.8,      799930,     720024,      79906,     576446,     143578,  24.497981,  48.400000,  55.700000,  84.900000,  17.092886,   0.290000, 179.391995, 628.993325
Outstanding requests per worker:
480 508 491 582 453 488 492 534 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160002.6,      800014,     719914,      80100,     592939,     126975,  25.563538,  51.500000,  58.600000,  95.200000,  18.531951,   0.313000, 193.279997, 655.454399
Outstanding requests per worker:
466 453 571 510 556 517 492 525 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159949.6,      799749,     720044,      79705,     604031,     116013,  26.206675,  52.900000,  60.300000, 100.200000,  19.350475,   0.326000, 200.142995, 672.020610
Outstanding requests per worker:
505 554 545 573 497 557 599 552 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160022.6,      800114,     720320,      79794,     612415,     107905,  26.981404,  54.700000,  62.800000, 108.500000,  20.549139,   0.457000, 217.573002, 684.267700
Outstanding requests per worker:
511 513 564 571 550 512 548 562 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159974.0,      799871,     719815,      80056,     618298,     101517,  27.852875,  56.700000,  65.600000, 115.400000,  21.722316,   0.365000, 216.298997, 693.811645
Outstanding requests per worker:
587 582 568 568 510 516 590 587 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:59   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:59   0:00 /usr/lib/linux
memcache      7  308  0.0 449216 166016 pts/0   Sl+  17:59   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:00   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       19719576744      instructions:u            #    0.71  insn per cycle         
       27767422800      cycles:u                                                    
         115578278      armv8_pmuv3_0/br_mis_pred/:u                                   
        3071405554      armv8_pmuv3_0/br_pred/:u                                    

      42.720907147 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 8 threads, 160000 rps'
==> Bench: 262114 keys, 1024 conns, 8 threads, 160000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 160000 -k 262114 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 160000 -k 262114 -c 1024 -f 512 -w 8'
Starting client with -r 160000 -k 262114 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 160000 -k 262114 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 160000 -k 262114 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 160000 cpus 8
meanInterarrival 50
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1951003136
starting receive base loop
num_worker_connections 128
Creating worker on tid 836563456
starting receive base loop
num_worker_connections 128
Creating worker on tid 4017484288
starting receive base loop
num_worker_connections 128
Creating worker on tid 2908877312
starting receive base loop
num_worker_connections 128
Creating worker on tid 1794830848
starting receive base loop
num_worker_connections 128
Creating worker on tid 686223872
starting receive base loop
num_worker_connections 128
Creating worker on tid 3872584192
starting receive base loop
Created 1024 connections total
Creating worker on tid 2758537728
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575397621.396046,       0.0,      490444,     441389,      49055,     301291,     140098,  28.883712,  61.100000,  79.400000, 269.300000,  60.408058,   0.000000, 1118.615031, 500.336411
Outstanding requests per worker:
497 513 558 504 567 513 609 773 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160238.2,      801192,     721591,      79601,     554540,     167051,  21.787954,  40.800000,  51.200000,  62.400000,  14.664588,   0.319000, 359.638989, 594.184077
Outstanding requests per worker:
395 390 420 481 422 422 439 420 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159996.6,      799984,     720474,      79510,     579784,     140690,  21.949462,  40.300000,  51.200000,  62.500000,  14.094879,   0.365000, 126.010001, 634.348530
Outstanding requests per worker:
409 418 444 419 422 439 458 459 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159906.4,      799533,     720078,      79455,     594864,     125214,  22.435497,  41.600000,  52.400000,  64.400000,  14.584243,   0.366000, 165.122002, 657.729554
Outstanding requests per worker:
468 475 492 553 469 530 494 504 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159983.4,      799918,     719717,      80201,     604904,     114813,  25.362933,  50.500000,  57.600000,  91.400000,  17.972645,   0.338000, 181.286007, 673.718070
Outstanding requests per worker:
547 517 523 540 579 480 447 496 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  160021.6,      800109,     719721,      80388,     612834,     106887,  25.949394,  51.700000,  59.200000,  94.600000,  18.626407,   0.328000, 195.829004, 685.957303
Outstanding requests per worker:
470 444 569 490 535 571 516 473 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159226.4,      796133,     715935,      80198,     615649,     100286,  27.494574,  54.300000,  62.400000, 104.500000,  20.731630,   0.398000, 254.720986, 694.977638
Outstanding requests per worker:
989 984 934 1018 1026 1026 1016 1009 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:00   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   18:00   0:00 /usr/lib/linux
memcache      7  268  0.0 516224 162752 pts/0   Sl+  18:00   2:14 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  18:01   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       20261400195      instructions:u            #    0.71  insn per cycle         
       28389779640      cycles:u                                                    
         118425433      armv8_pmuv3_0/br_mis_pred/:u                                   
        3144325852      armv8_pmuv3_0/br_pred/:u                                    

      49.421084088 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 8 threads, 162000 rps'
==> Bench: 262114 keys, 1024 conns, 8 threads, 162000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 162000 -k 262114 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 162000 -k 262114 -c 1024 -f 512 -w 8'
Starting client with -r 162000 -k 262114 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 162000 -k 262114 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 162000 -k 262114 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 162000 cpus 8
meanInterarrival 49
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1613230592
starting receive base loop
num_worker_connections 128
Creating worker on tid 501019136
starting receive base loop
num_worker_connections 128
Creating worker on tid 3681939968
starting receive base loop
num_worker_connections 128
Creating worker on tid 2573332992
starting receive base loop
num_worker_connections 128
Creating worker on tid 1459286528
starting receive base loop
num_worker_connections 128
Creating worker on tid 350679552
starting receive base loop
num_worker_connections 128
Creating worker on tid 3537039872
starting receive base loop
Created 1024 connections total
Creating worker on tid 2422993408
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575397673.396098,       0.0,      373225,     335932,      37293,     224899,     111033,  66.652128, 131.000000, 169.900000, 742.100000, 131.137239,   0.000000, 1958.845019, 485.385030
Outstanding requests per worker:
1205 1126 1215 1213 1156 1242 1209 5574 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165129.0,      825646,     743014,      82632,     565185,     177829,  47.378697,  81.800000, 122.100000, 411.700000,  98.840943,   0.379000, 1927.330017, 585.341728
Outstanding requests per worker:
532 634 557 595 573 595 596 592 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163334.2,      816672,     735284,      81388,     589421,     145863,  27.533815,  55.500000,  63.800000, 109.600000,  20.822574,   0.335000, 214.954004, 631.231989
Outstanding requests per worker:
559 529 543 545 555 599 514 550 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163180.4,      815903,     734309,      81594,     605183,     129126,  28.120993,  56.900000,  65.500000, 113.100000,  21.409672,   0.342000, 217.710003, 655.784675
Outstanding requests per worker:
659 615 599 553 609 662 624 582 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163321.6,      816609,     734815,      81794,     617045,     117770,  29.733703,  59.500000,  69.400000, 121.700000,  22.992904,   0.422000, 218.382999, 672.410186
Outstanding requests per worker:
588 590 622 585 582 575 574 608 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  163209.4,      816048,     734434,      81614,     624198,     110236,  31.129468,  62.000000,  73.100000, 129.600000,  24.601723,   0.340000, 228.625000, 684.714247
Outstanding requests per worker:
674 627 611 640 553 645 641 659 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  161608.0,      808041,     727275,      80766,     624964,     102311,  35.710771,  72.100000, 102.400000, 154.800000,  31.363925,   0.365000, 313.221008, 694.474001
Outstanding requests per worker:
1703 1631 1814 1662 1593 1544 1694 1760 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:01   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   18:01   0:00 /usr/lib/linux
memcache      7  265  0.0 515200 167360 pts/0   Sl+  18:01   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:02   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       20281385388      instructions:u            #    0.71  insn per cycle         
       28462784348      cycles:u                                                    
         121510700      armv8_pmuv3_0/br_mis_pred/:u                                   
        3141572897      armv8_pmuv3_0/br_pred/:u                                    

      48.661656436 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 8 threads, 164000 rps'
==> Bench: 262114 keys, 1024 conns, 8 threads, 164000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 164000 -k 262114 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 164000 -k 262114 -c 1024 -f 512 -w 8'
Starting client with -r 164000 -k 262114 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 164000 -k 262114 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 164000 -k 262114 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 164000 cpus 8
meanInterarrival 48
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 2095706624
starting receive base loop
num_worker_connections 128
Creating worker on tid 986903040
starting receive base loop
num_worker_connections 128
Creating worker on tid 4167823872
starting receive base loop
num_worker_connections 128
Creating worker on tid 3059216896
starting receive base loop
num_worker_connections 128
Creating worker on tid 1945170432
starting receive base loop
num_worker_connections 128
Creating worker on tid 836563456
starting receive base loop
num_worker_connections 128
Creating worker on tid 4017484288
starting receive base loop
Created 1024 connections total
Creating worker on tid 2908877312
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575397724.396149,       0.0,      359871,     323912,      35959,     216010,     107902,  77.758351, 140.000000, 182.400000, 1061.700000, 168.879870,   0.000000, 1984.768033, 483.164446
Outstanding requests per worker:
1515 1643 1403 1611 1576 1463 1483 13791 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166954.4,      834773,     750810,      83963,     569428,     181382, 152.397822, 226.200000, 336.600000, 1404.300000, 220.769542,   0.756000, 2358.774900, 582.904984
Outstanding requests per worker:
2719 2679 2616 2492 2492 2740 2517 4893 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166276.4,      831383,     748616,      82767,     599910,     148706, 144.215565, 261.200000, 309.000000, 463.900000, 112.260233,   0.791000, 1593.857050, 631.112055
Outstanding requests per worker:
3177 2951 3104 3118 3040 3043 3238 3541 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165917.2,      829587,     746094,      83493,     615509,     130585, 160.906796, 294.900000, 347.800000, 454.000000, 102.778163,   1.093000, 1131.351948, 656.192513
Outstanding requests per worker:
3545 3616 3603 3588 3668 3588 3584 3829 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165825.0,      829126,     746755,      82371,     627486,     119269, 186.148339, 348.300000, 412.000000, 523.600000, 115.442222,   0.853000, 809.291005, 673.746182
Outstanding requests per worker:
4090 4227 4304 4133 4087 4042 4270 4153 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165827.0,      829136,     745854,      83282,     634701,     111153, 212.540474, 401.600000, 475.200000, 608.900000, 129.336803,   0.837000, 954.325974, 685.356981
Outstanding requests per worker:
4716 4721 4587 4642 4835 4607 4730 4741 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165164.8,      825825,     743324,      82501,     639569,     103755, 240.328038, 448.600000, 534.600000, 685.800000, 143.398452,   0.923000, 1158.689976, 695.605110
Outstanding requests per worker:
5676 5673 5539 5750 5605 5602 5516 5835 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:02   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   18:02   0:00 /usr/lib/linux
memcache      7  270  0.0 517248 179968 pts/0   Sl+  18:02   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       20876531765      instructions:u            #    0.73  insn per cycle         
       28502800869      cycles:u                                                    
         123353390      armv8_pmuv3_0/br_mis_pred/:u                                   
        3256470773      armv8_pmuv3_0/br_pred/:u                                    

      47.531151396 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 8 threads, 166000 rps'
==> Bench: 262114 keys, 1024 conns, 8 threads, 166000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 166000 -k 262114 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 166000 -k 262114 -c 1024 -f 512 -w 8'
Starting client with -r 166000 -k 262114 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 166000 -k 262114 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 166000 -k 262114 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 166000 cpus 8
meanInterarrival 48
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1247146496
starting receive base loop
num_worker_connections 128
Creating worker on tid 133231104
starting receive base loop
num_worker_connections 128
Creating worker on tid 3319591424
starting receive base loop
num_worker_connections 128
Creating worker on tid 2205544960
starting receive base loop
num_worker_connections 128
Creating worker on tid 1096937984
starting receive base loop
num_worker_connections 128
Creating worker on tid 4277858816
starting receive base loop
num_worker_connections 128
Creating worker on tid 3169251840
starting receive base loop
Created 1024 connections total
Creating worker on tid 2060644864
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575397776.396201,       0.0,      358859,     322834,      36025,     215591,     107243,  73.276809, 122.400000, 168.600000, 1071.400000, 170.125475,   0.000000, 1982.915044, 483.602220
Outstanding requests per worker:
1195 1230 1377 1147 1245 1338 1147 16269 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166079.2,      830397,     747380,      83017,     566421,     180959, 169.415776, 238.000000, 467.600000, 1589.800000, 261.810795,   1.072000, 2542.486906, 582.906366
Outstanding requests per worker:
2986 3072 3256 3096 3024 3085 3044 6426 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165650.6,      828254,     745395,      82859,     598054,     147341, 183.724558, 297.700000, 357.900000, 692.600000, 137.990969,   1.050000, 2071.365118, 630.816967
Outstanding requests per worker:
3890 4006 3816 3847 3960 4089 4230 5351 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165805.8,      829030,     745928,      83102,     615389,     130539, 212.866678, 348.400000, 401.700000, 545.200000, 122.551301,   1.148000, 1788.064957, 656.178119
Outstanding requests per worker:
4606 4566 4681 4697 4605 4650 4663 5086 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  165994.6,      829974,     747174,      82800,     628057,     119117, 235.800671, 390.900000, 446.700000, 578.300000, 122.864637,   1.330000, 1542.153955, 673.234181
Outstanding requests per worker:
5156 5163 5038 5052 4946 5051 5067 5520 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  166114.4,      830573,     747687,      82886,     636754,     110933, 254.391603, 427.400000, 497.400000, 638.300000, 132.440845,   1.078000, 1584.907055, 685.582194
Outstanding requests per worker:
5463 5596 5376 5530 5382 5434 5250 5820 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  164857.4,      824288,     742134,      82154,     638432,     103702, 275.886889, 454.900000, 526.300000, 658.200000, 132.712077,   1.516000, 1471.654058, 695.277206
Outstanding requests per worker:
6669 6621 6724 6493 6433 6654 6723 6695 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:03   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   18:03   0:00 /usr/lib/linux
memcache      7  275  0.0 516224 185280 pts/0   Sl+  18:03   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       20860467899      instructions:u            #    0.73  insn per cycle         
       28690878440      cycles:u                                                    
         126530563      armv8_pmuv3_0/br_mis_pred/:u                                   
        3251801813      armv8_pmuv3_0/br_pred/:u                                    

      47.840944733 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 8 threads, 168000 rps'
==> Bench: 262114 keys, 1024 conns, 8 threads, 168000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 168000 -k 262114 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 168000 -k 262114 -c 1024 -f 512 -w 8'
Starting client with -r 168000 -k 262114 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 168000 -k 262114 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 168000 -k 262114 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 168000 cpus 8
meanInterarrival 47
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1750266368
starting receive base loop
num_worker_connections 128
Creating worker on tid 635236864
starting receive base loop
num_worker_connections 128
Creating worker on tid 3816157696
starting receive base loop
num_worker_connections 128
Creating worker on tid 2707550720
starting receive base loop
num_worker_connections 128
Creating worker on tid 1593504256
starting receive base loop
num_worker_connections 128
Creating worker on tid 484897280
starting receive base loop
num_worker_connections 128
Creating worker on tid 3671257600
starting receive base loop
Created 1024 connections total
Creating worker on tid 2557211136
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575397827.396252,       0.0,      360961,     324634,      36327,     216832,     107802,  74.930467, 128.200000, 169.100000, 1060.500000, 168.234231,   0.000000, 1997.715950, 484.188286
Outstanding requests per worker:
1354 1254 1160 1422 1434 1471 1389 21332 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167186.2,      835932,     752648,      83284,     571333,     181315, 242.544758, 325.100000, 976.900000, 2013.500000, 352.299115,   1.454000, 2747.195959, 583.513567
Outstanding requests per worker:
4634 4583 4734 4554 4537 4621 4391 13960 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168800.6,      844004,     759715,      84289,     609803,     149912, 297.638445, 414.900000, 536.700000, 1586.300000, 235.088035,   1.747000, 2337.306023, 631.577551
Outstanding requests per worker:
5905 6079 5914 6008 6003 6016 5893 11371 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169033.4,      845168,     760785,      84383,     628594,     132191, 331.270119, 459.600000, 532.700000, 1254.900000, 180.849973,   2.512000, 2174.339056, 657.325318
Outstanding requests per worker:
7184 7005 6994 7050 6910 6778 7038 10175 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169713.8,      848570,     763706,      84864,     642732,     120974, 354.377713, 507.800000, 580.900000, 980.200000, 153.167183,   1.715000, 1920.963049, 674.412169
Outstanding requests per worker:
7514 7741 7506 7493 7274 7300 7585 9291 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169188.6,      845944,     761050,      84894,     647988,     113062, 378.197313, 573.400000, 664.400000, 892.100000, 157.459201,   1.907000, 1890.530944, 685.704770
Outstanding requests per worker:
8224 8317 8365 8294 7899 8301 8155 9343 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168746.6,      843734,     759489,      84245,     654053,     105436, 412.082521, 638.400000, 746.900000, 964.700000, 171.363073,   5.745000, 1751.835942, 696.335803
Outstanding requests per worker:
9405 9204 9188 9115 8955 9317 9165 9990 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:03   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   18:03   0:00 /usr/lib/linux
memcache      7  270  0.0 519296 191424 pts/0   Sl+  18:03   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:04   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21280328684      instructions:u            #    0.73  insn per cycle         
       29174694153      cycles:u                                                    
         130180983      armv8_pmuv3_0/br_mis_pred/:u                                   
        3292791361      armv8_pmuv3_0/br_pred/:u                                    

      47.751912114 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 8 threads, 170000 rps'
==> Bench: 262114 keys, 1024 conns, 8 threads, 170000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 170000 -k 262114 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 170000 -k 262114 -c 1024 -f 512 -w 8'
Starting client with -r 170000 -k 262114 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 170000 -k 262114 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 170000 -k 262114 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 170000 cpus 8
meanInterarrival 47
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1249505792
starting receive base loop
num_worker_connections 128
Creating worker on tid 141292032
starting receive base loop
num_worker_connections 128
Creating worker on tid 3327652352
starting receive base loop
num_worker_connections 128
Creating worker on tid 2213605888
starting receive base loop
num_worker_connections 128
Creating worker on tid 1104998912
starting receive base loop
num_worker_connections 128
Creating worker on tid 4285919744
starting receive base loop
num_worker_connections 128
Creating worker on tid 3177312768
starting receive base loop
Created 1024 connections total
Creating worker on tid 2063266304
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575397879.396304,       0.0,      364724,     328127,      36597,     219488,     108639,  82.066751, 157.100000, 212.700000, 1015.400000, 164.949894,   0.000000, 1958.747983, 484.886830
Outstanding requests per worker:
1765 1770 1901 1813 1616 1871 1764 16926 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167193.8,      835970,     752356,      83614,     571753,     180603, 228.332573, 304.000000, 618.000000, 1875.800000, 304.598055,   0.909000, 3038.292885, 584.657423
Outstanding requests per worker:
4693 4713 4836 4556 4621 4696 4728 11764 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168495.2,      842477,     758656,      83821,     608929,     149727, 289.535378, 414.500000, 510.000000, 1518.900000, 237.118260,   1.052000, 2756.509066, 631.748669
Outstanding requests per worker:
6060 6051 5971 6043 6076 6096 6186 10809 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168722.8,      843615,     759891,      83724,     627170,     132721, 334.642866, 513.100000, 611.400000, 1406.800000, 223.438279,   1.847000, 2600.351095, 657.211900
Outstanding requests per worker:
7359 7218 7044 7022 7019 7303 7031 10798 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169086.0,      845431,     760830,      84601,     639971,     120859, 373.004605, 594.400000, 707.900000, 1215.900000, 234.303734,   2.897000, 2647.469044, 674.527951
Outstanding requests per worker:
7651 7891 7922 7887 7963 7950 7940 11293 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169101.6,      845509,     760940,      84569,     648092,     112848, 407.331629, 660.800000, 815.600000, 1255.100000, 251.540400,   3.961000, 2821.387053, 685.953862
Outstanding requests per worker:
8492 8920 8783 8260 8511 8714 8944 11521 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168598.4,      842993,     759010,      83983,     653736,     105274, 440.201539, 717.800000, 878.800000, 1439.500000, 267.274394,  11.018000, 3165.380955, 696.416541
Outstanding requests per worker:
9504 9765 9531 9282 9545 9978 10007 12710 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:04   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   18:04   0:00 /usr/lib/linux
memcache      7  276  0.0 518272 190720 pts/0   Sl+  18:04   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:05   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21237291459      instructions:u            #    0.73  insn per cycle         
       29137915566      cycles:u                                                    
         130154334      armv8_pmuv3_0/br_mis_pred/:u                                   
        3309293489      armv8_pmuv3_0/br_pred/:u                                    

      47.700801096 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 8 threads, 172000 rps'
==> Bench: 262114 keys, 1024 conns, 8 threads, 172000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 172000 -k 262114 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 172000 -k 262114 -c 1024 -f 512 -w 8'
Starting client with -r 172000 -k 262114 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 172000 -k 262114 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 172000 -k 262114 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 172000 cpus 8
meanInterarrival 46
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1858204160
starting receive base loop
num_worker_connections 128
Creating worker on tid 745271808
starting receive base loop
num_worker_connections 128
Creating worker on tid 3931632128
starting receive base loop
num_worker_connections 128
Creating worker on tid 2817585664
starting receive base loop
num_worker_connections 128
Creating worker on tid 1708978688
starting receive base loop
num_worker_connections 128
Creating worker on tid 594932224
starting receive base loop
num_worker_connections 128
Creating worker on tid 3781292544
starting receive base loop
Created 1024 connections total
Creating worker on tid 2667246080
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575397930.396355,       0.0,      365355,     328708,      36647,     219740,     108968,  83.084650, 154.000000, 213.200000, 1045.200000, 171.129387,   0.000000, 1964.295983, 484.491582
Outstanding requests per worker:
1929 1669 1897 1835 1847 1884 2040 24336 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  167814.8,      839075,     755120,      83955,     573542,     181578, 319.267534, 443.400000, 1272.400000, 2394.500000, 435.397311,   1.263000, 3762.423992, 584.827467
Outstanding requests per worker:
6597 6456 6564 6633 6490 6462 6495 22308 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169813.6,      849069,     764291,      84778,     612656,     151635, 452.227668, 623.900000, 1086.300000, 2345.400000, 380.887651,   4.401000, 3774.238110, 631.140986
Outstanding requests per worker:
9373 9278 9421 9631 9231 9505 9527 22636 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170369.8,      851850,     767200,      84650,     633595,     133605, 560.285922, 826.900000, 1076.700000, 2402.700000, 383.237128,  29.038001, 3899.815083, 657.500789
Outstanding requests per worker:
12005 11700 12074 11679 11807 11613 11908 23668 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170073.2,      850367,     765063,      85304,     643334,     121729, 664.127856, 1031.300000, 1241.500000, 2638.500000, 410.729158,  68.825997, 4336.245060, 674.052053
Outstanding requests per worker:
14377 14314 14321 14188 14143 14417 14447 25515 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169833.8,      849170,     764419,      84751,     651544,     112875, 776.818045, 1252.700000, 1504.800000, 2797.000000, 455.233899,  57.211000, 4521.048069, 686.964512
Outstanding requests per worker:
16917 16848 17235 16587 16870 17103 17191 27463 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169020.4,      845103,     760532,      84571,     655644,     104888, 903.765870, 1495.900000, 1764.900000, 2926.100000, 504.646839,  42.475000, 4625.844002, 697.309235
Outstanding requests per worker:
19925 20310 20597 19741 19751 19934 20069 30402 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:05   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   18:05   0:00 /usr/lib/linux
memcache      7  270  0.0 520320 197248 pts/0   Sl+  18:05   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  18:06   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21260848594      instructions:u            #    0.73  insn per cycle         
       29145915257      cycles:u                                                    
         122759090      armv8_pmuv3_0/br_mis_pred/:u                                   
        3311080093      armv8_pmuv3_0/br_pred/:u                                    

      47.760842186 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 8 threads, 174000 rps'
==> Bench: 262114 keys, 1024 conns, 8 threads, 174000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 174000 -k 262114 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 174000 -k 262114 -c 1024 -f 512 -w 8'
Starting client with -r 174000 -k 262114 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 174000 -k 262114 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 174000 -k 262114 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 174000 cpus 8
meanInterarrival 45
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1319891456
starting receive base loop
num_worker_connections 128
Creating worker on tid 208400896
starting receive base loop
num_worker_connections 128
Creating worker on tid 3394761216
starting receive base loop
num_worker_connections 128
Creating worker on tid 2280714752
starting receive base loop
num_worker_connections 128
Creating worker on tid 1172107776
starting receive base loop
num_worker_connections 128
Creating worker on tid 58061312
starting receive base loop
num_worker_connections 128
Creating worker on tid 3244421632
starting receive base loop
Created 1024 connections total
Creating worker on tid 2130375168
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575397982.396407,       0.0,      369030,     331899,      37131,     222203,     109696,  89.162119, 164.800000, 219.700000, 1076.900000, 174.652087,   0.000000, 1960.937977, 485.855580
Outstanding requests per worker:
2069 2163 2014 2023 2170 1988 3053 28800 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169097.2,      845487,     761084,      84403,     579133,     181951, 384.691201, 546.900000, 1554.900000, 2834.200000, 509.464941,   1.476000, 4112.473965, 585.818573
Outstanding requests per worker:
8089 7991 8134 7808 8200 8366 8320 30839 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171866.6,      859334,     773618,      85716,     622013,     151605, 578.807140, 781.400000, 1560.600000, 3067.500000, 491.873623,  11.412000, 4609.639168, 633.260291
Outstanding requests per worker:
12341 11904 12130 11790 12087 12047 11947 33127 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172209.6,      861049,     775487,      85562,     641031,     134456, 738.140641, 1057.400000, 1692.300000, 3133.900000, 508.135326,  39.776001, 4874.125957, 658.396038
Outstanding requests per worker:
15897 15659 15816 15183 15715 15702 15620 35731 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172037.2,      860187,     774698,      85489,     651880,     122818, 892.209128, 1357.900000, 1817.400000, 3384.500000, 547.057333, 114.740998, 5406.190872, 674.308004
Outstanding requests per worker:
19688 19405 18991 19086 19185 19304 19047 39395 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  172262.2,      861312,     775269,      86043,     661355,     113914, 1049.658025, 1634.300000, 2059.500000, 3628.100000, 595.605694, 108.799003, 5624.128819, 686.573085
Outstanding requests per worker:
23203 22750 22680 22494 22684 22660 22490 42790 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170744.6,      853724,     768163,      85561,     662246,     105917, 1223.180460, 1926.800000, 2340.300000, 3909.600000, 647.106288, 160.833001, 6128.971100, 696.747774
Outstanding requests per worker:
27362 27174 26818 27039 26835 27129 27225 47424 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:06   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   18:06   0:00 /usr/lib/linux
memcache      7  276  0.0 520320 192320 pts/0   Sl+  18:06   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  18:07   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21498814388      instructions:u            #    0.73  insn per cycle         
       29275026151      cycles:u                                                    
         125726833      armv8_pmuv3_0/br_mis_pred/:u                                   
        3348714022      armv8_pmuv3_0/br_pred/:u                                    

      47.761125855 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 262114 keys, 1024 conns, 8 threads, 176000 rps'
==> Bench: 262114 keys, 1024 conns, 8 threads, 176000 rps
++ echo '1024 + 128'
++ bc
+ max_conns=1152
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 176000 -k 262114 -c 1024 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 1152'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 8c2087849d92e24b1243199ed495ac991ee6b786be357aa1b3a3d9f950ab31bc has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 4 -m 4096 -n 550 -c 1152
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 1152
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 4 -m 4096 -n 550 -c 1152
+ echo 'Starting client with -r 176000 -k 262114 -c 1024 -f 512 -w 8'
Starting client with -r 176000 -k 262114 -c 1024 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 176000 -k 262114 -c 1024 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 176000 -k 262114 -c 1024 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.80.2
Loading key value file...created uniform distribution 262114
rps 176000 cpus 8
meanInterarrival 45
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1534587392
starting receive base loop
num_worker_connections 128
Creating worker on tid 425849344
starting receive base loop
num_worker_connections 128
Creating worker on tid 3606770176
starting receive base loop
num_worker_connections 128
Creating worker on tid 2498163200
starting receive base loop
num_worker_connections 128
Creating worker on tid 1389556224
starting receive base loop
num_worker_connections 128
Creating worker on tid 275509760
starting receive base loop
num_worker_connections 128
Creating worker on tid 3461870080
starting receive base loop
Created 1024 connections total
Creating worker on tid 2347823616
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575398033.396458,       0.0,      371152,     333718,      37434,     223822,     109896,  89.390965, 168.000000, 226.200000, 1052.700000, 172.514504,   0.000000, 1996.093035, 486.720554
Outstanding requests per worker:
2051 2114 2284 2234 2165 2154 2559 28201 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  169138.8,      845695,     761012,      84683,     579492,     181520, 385.672088, 566.000000, 1573.800000, 2601.400000, 479.537136,   1.067000, 3418.401957, 586.232910
Outstanding requests per worker:
8111 8339 8231 8141 8441 8349 8365 29094 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171650.6,      858254,     772696,      85558,     620532,     152164, 576.583315, 809.000000, 1549.200000, 2682.800000, 442.691985,  23.415999, 3469.099045, 632.477374
Outstanding requests per worker:
12430 12457 12393 12158 12391 12240 12393 31312 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171416.8,      857085,     771758,      85327,     637207,     134551, 749.197397, 1088.400000, 1675.800000, 2786.400000, 453.160770,  60.862999, 3622.838974, 658.069995
Outstanding requests per worker:
16018 16401 16529 16333 16517 16696 16381 34787 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  170978.0,      854891,     769484,      85407,     647813,     121671, 933.551498, 1367.000000, 1841.800000, 3091.800000, 481.998843, 191.931993, 3862.612009, 674.726022
Outstanding requests per worker:
20486 20539 20668 20474 20998 20842 20671 39089 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  171041.4,      855208,     769778,      85430,     656876,     112902, 1124.681819, 1647.800000, 2070.300000, 3334.700000, 524.294112, 186.655998, 4081.445217, 687.133994
Outstanding requests per worker:
24718 25114 24928 24594 25158 25109 24498 43453 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  168421.2,      842107,     757923,      84184,     653564,     104359, 1344.944992, 1982.000000, 2340.800000, 3569.500000, 566.875115, 230.160996, 4371.164799, 697.521768
Outstanding requests per worker:
30514 30917 31179 30245 31160 30819 30280 49310 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:07   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   18:07   0:00 /usr/lib/linux
memcache      8  276  0.0 521344 197184 pts/0   Sl+  18:07   2:09 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  18:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 1152':

       21407883186      instructions:u            #    0.73  insn per cycle         
       29291241853      cycles:u                                                    
         121934298      armv8_pmuv3_0/br_mis_pred/:u                                   
        3333415587      armv8_pmuv3_0/br_pred/:u                                    

      47.311912579 seconds time elapsed

