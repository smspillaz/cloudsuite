+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys 256 conns 1 threads 27000 rps'
==> Bench: 4096 keys 256 conns 1 threads 27000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 27000 -k 4096 -c 256 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
caching_network
+ docker network create caching_network
a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 4096 -c 256 -f 512 -w 1'
Starting client with -r 27000 -k 4096 -c 256 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 4096 -c 256 -f 512 -w 1
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 4096 -c 256 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 4096
rps 27000 cpus 1
meanInterarrival 37
num_worker_connections 256
Created 256 connections total
Creating worker on tid 768209408
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575280666.279091,       0.0,       54013,      48665,       5348,      28439,      20226,   0.994931,   1.300000,   1.500000,   2.700000,   1.869155,   0.000000,  72.919004, 393.943450
Outstanding requests per worker:
22 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.2,      135146,     121580,      13566,      79932,      41648,   0.882637,   1.300000,   1.400000,   1.700000,   0.276550,   0.163000,   4.482000, 472.551670
Outstanding requests per worker:
25 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.4,      135142,     121543,      13599,      85323,      36220,   0.899457,   1.300000,   1.400000,   1.700000,   0.284761,   0.159000,   3.759000, 520.685988
Outstanding requests per worker:
25 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.2,      135146,     121769,      13377,      88169,      33600,   0.908211,   1.300000,   1.400000,   1.800000,   0.288028,   0.160000,   3.440000, 545.754199
Outstanding requests per worker:
23 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27027.8,      135139,     121658,      13481,      90065,      31593,   0.916368,   1.300000,   1.400000,   1.800000,   0.292563,   0.160000,   3.622000, 563.116170
Outstanding requests per worker:
25 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.6,      135148,     121576,      13572,      91535,      30041,   0.917597,   1.300000,   1.400000,   1.800000,   0.294544,   0.157000,   3.985000, 577.299977
Outstanding requests per worker:
20 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.0,      135140,     121844,      13296,      92863,      28981,   0.922639,   1.300000,   1.500000,   1.800000,   0.295041,   0.159000,   3.096000, 587.819417
Outstanding requests per worker:
23 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3648 pts/0    Ss+  09:31   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   09:31   0:00 /usr/lib/linux
memcache      8 77.5  0.0 124352 41536 pts/0    Sl+  09:31   0:28 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  09:32   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3322873544      instructions:u            #    0.53  insn per cycle         
        6269286910      cycles:u                                                    
          24400025      armv8_pmuv3_0/br_mis_pred/:u                                   
         587296765      armv8_pmuv3_0/br_pred/:u                                    

      36.960066660 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys 256 conns 1 threads 28000 rps'
==> Bench: 4096 keys 256 conns 1 threads 28000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 28000 -k 4096 -c 256 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 4096 -c 256 -f 512 -w 1'
Starting client with -r 28000 -k 4096 -c 256 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 4096 -c 256 -f 512 -w 1
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 4096 -c 256 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 4096
rps 28000 cpus 1
meanInterarrival 35
num_worker_connections 256
Created 256 connections total
Creating worker on tid 768537088
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575280706.279131,       0.0,       57095,      51439,       5656,      30162,      21277,   1.318860,   1.800000,   2.100000,   3.900000,   1.214221,   0.000000,  49.199998, 395.206730
Outstanding requests per worker:
31 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28572.2,      142861,     128489,      14372,      84868,      43621,   1.192156,   1.700000,   1.900000,   2.400000,   0.404566,   0.162000,   4.126000, 475.593561
Outstanding requests per worker:
38 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28573.8,      142869,     128520,      14349,      90445,      38075,   1.253926,   1.800000,   2.000000,   2.600000,   0.444101,   0.155000,   7.136000, 523.310068
Outstanding requests per worker:
37 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28572.2,      142861,     128861,      14000,      93816,      35045,   1.246019,   1.800000,   2.000000,   2.500000,   0.432030,   0.162000,   5.236000, 550.627669
Outstanding requests per worker:
37 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28573.6,      142868,     128440,      14428,      95890,      32550,   1.277707,   1.900000,   2.100000,   2.700000,   0.457555,   0.162000,   6.329000, 567.579897
Outstanding requests per worker:
33 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28572.8,      142864,     128639,      14225,      97210,      31429,   1.295600,   1.900000,   2.100000,   2.700000,   0.461540,   0.160000,   6.114000, 579.966744
Outstanding requests per worker:
40 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28572.6,      142863,     128744,      14119,      98792,      29952,   1.280005,   1.900000,   2.100000,   2.600000,   0.450334,   0.163000,   5.170000, 592.895583
Outstanding requests per worker:
39 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  09:32   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   09:32   0:00 /usr/lib/linux
memcache      8 82.4  0.0 127424 46912 pts/0    Sl+  09:32   0:29 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  09:32   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3492979855      instructions:u            #    0.53  insn per cycle         
        6596889525      cycles:u                                                    
          25184106      armv8_pmuv3_0/br_mis_pred/:u                                   
         617376384      armv8_pmuv3_0/br_pred/:u                                    

      35.710916064 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys 256 conns 1 threads 29000 rps'
==> Bench: 4096 keys 256 conns 1 threads 29000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 29000 -k 4096 -c 256 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 4096 -c 256 -f 512 -w 1'
Starting client with -r 29000 -k 4096 -c 256 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 4096 -c 256 -f 512 -w 1
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 4096 -c 256 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 4096
rps 29000 cpus 1
meanInterarrival 34
num_worker_connections 256
Created 256 connections total
Creating worker on tid 528871936
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575280747.279172,       0.0,       58752,      52941,       5811,      31309,      21632,   1.629937,   2.300000,   2.800000,   5.300000,   1.399503,   0.000000,  51.973000, 399.406755
Outstanding requests per worker:
52 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29414.4,      147072,     132275,      14797,      87638,      44637,   1.509241,   2.200000,   2.500000,   3.200000,   0.563513,   0.160000,   6.551000, 477.258749
Outstanding requests per worker:
49 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29414.6,      147073,     132357,      14716,      93305,      39052,   1.571127,   2.300000,   2.600000,   3.400000,   0.589205,   0.163000,   7.095000, 524.175782
Outstanding requests per worker:
44 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.2,      147066,     132578,      14488,      96674,      35904,   1.593695,   2.400000,   2.700000,   3.500000,   0.602720,   0.163000,   7.677000, 551.167735
Outstanding requests per worker:
45 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.8,      147069,     132181,      14888,      98683,      33498,   1.624700,   2.400000,   2.700000,   3.500000,   0.620580,   0.162000,   8.185000, 569.613553
Outstanding requests per worker:
44 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.2,      147066,     132467,      14599,     100407,      32060,   1.647762,   2.500000,   2.800000,   3.600000,   0.632311,   0.164000,   9.045000, 582.828674
Outstanding requests per worker:
49 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29414.2,      147071,     132488,      14583,     102209,      30279,   1.641703,   2.500000,   2.700000,   3.500000,   0.618915,   0.161000,   6.723000, 596.915449
Outstanding requests per worker:
46 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'12\r'
+ echo 'memcached pid is: 12'
memcached pid is: 12
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  09:32   0:00 bash docker-en
memcache     11  0.0  0.0  62272  5952 pts/0    S+   09:32   0:00 /usr/lib/linux
memcache     12 83.9  0.0 128448 46272 pts/0    Sl+  09:32   0:30 memcached -t 1
memcache     20  0.0  0.0   6656  4352 pts/1    Rs+  09:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3601702811      instructions:u            #    0.54  insn per cycle         
        6617449041      cycles:u                                                    
          24680485      armv8_pmuv3_0/br_mis_pred/:u                                   
         632679107      armv8_pmuv3_0/br_pred/:u                                    

      35.700618375 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys 256 conns 1 threads 30000 rps'
==> Bench: 4096 keys 256 conns 1 threads 30000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 30000 -k 4096 -c 256 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 30000 -k 4096 -c 256 -f 512 -w 1'
Starting client with -r 30000 -k 4096 -c 256 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 4096 -c 256 -f 512 -w 1
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 4096 -c 256 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 4096
rps 30000 cpus 1
meanInterarrival 33
num_worker_connections 256
Created 256 connections total
Creating worker on tid 408744448
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575280787.279212,       0.0,       60528,      54539,       5989,      32312,      22227,   2.414248,   3.700000,   4.500000,   8.100000,   1.586544,   0.000000,  43.409001, 400.117311
Outstanding requests per worker:
66 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30303.0,      151515,     136258,      15257,      90147,      46111,   2.277201,   3.500000,   4.000000,   5.300000,   0.945805,   0.165000,  14.710000, 476.350299
Outstanding requests per worker:
83 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30305.8,      151529,     136412,      15117,      96022,      40390,   2.387296,   3.700000,   4.200000,   5.600000,   1.007502,   0.168000,  11.602000, 523.450136
Outstanding requests per worker:
76 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30306.0,      151530,     136505,      15025,      99434,      37071,   2.450139,   3.800000,   4.400000,   5.800000,   1.048528,   0.163000,  13.434000, 551.508509
Outstanding requests per worker:
72 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30304.0,      151520,     136278,      15242,     101585,      34693,   2.511082,   3.900000,   4.500000,   6.000000,   1.094781,   0.167000,  20.451000, 569.110201
Outstanding requests per worker:
83 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30306.2,      151531,     136485,      15046,     103591,      32894,   7.225848,  15.700000,  39.800000,  84.100000,  15.446245,   0.196000, 160.679996, 583.499850
Outstanding requests per worker:
79 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30304.6,      151523,     136473,      15050,     105179,      31294,   2.550068,   3.900000,   4.500000,   5.900000,   1.078655,   0.174000,  12.199000, 595.984700
Outstanding requests per worker:
79 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  09:33   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   09:33   0:00 /usr/lib/linux
memcache      9 83.0  0.0 128448 49088 pts/0    Sl+  09:33   0:30 memcached -t 1
memcache     22  0.0  0.0   6656  4352 pts/1    Rs+  09:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3698192954      instructions:u            #    0.55  insn per cycle         
        6688076569      cycles:u                                                    
          26517916      armv8_pmuv3_0/br_mis_pred/:u                                   
         648182763      armv8_pmuv3_0/br_pred/:u                                    

      37.090291594 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys 256 conns 1 threads 31000 rps'
==> Bench: 4096 keys 256 conns 1 threads 31000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 31000 -k 4096 -c 256 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 31000 -k 4096 -c 256 -f 512 -w 1'
Starting client with -r 31000 -k 4096 -c 256 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 4096 -c 256 -f 512 -w 1
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 4096 -c 256 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 4096
rps 31000 cpus 1
meanInterarrival 32
num_worker_connections 256
Created 256 connections total
Creating worker on tid 371651072
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575280828.279253,       0.0,       62378,      56213,       6165,      32686,      23527,   3.690988,   6.000000,   7.600000,  13.400000,   3.275799,   0.000000,  87.104000, 392.786562
Outstanding requests per worker:
105 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31249.4,      156247,     140532,      15715,      93300,      47232,   3.223693,   5.100000,   6.000000,   8.200000,   1.490643,   0.176000,  17.193001, 480.352624
Outstanding requests per worker:
119 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31255.8,      156279,     140627,      15652,      99516,      41111,   3.504837,   5.600000,   6.700000,   9.200000,   1.685649,   0.198000,  26.745001, 527.987158
Outstanding requests per worker:
99 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31253.2,      156266,     140815,      15451,     102739,      38076,   3.595019,   5.800000,   6.900000,   9.500000,   1.748715,   0.202000,  21.608001, 553.322771
Outstanding requests per worker:
93 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31249.6,      156248,     140500,      15748,     104809,      35691,   3.813110,   6.200000,   7.400000,  10.200000,   1.881601,   0.168000,  23.672000, 571.077274
Outstanding requests per worker:
108 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31247.6,      156238,     140802,      15436,     107481,      33321,   3.918947,   6.400000,   7.600000,  10.700000,   1.986727,   0.196000,  30.065000, 587.975263
Outstanding requests per worker:
129 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31246.6,      156233,     140611,      15622,     108766,      31845,   3.904195,   6.300000,   7.400000,  10.000000,   1.856572,   0.179000,  18.240999, 599.398077
Outstanding requests per worker:
155 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  09:34   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   09:34   0:00 /usr/lib/linux
memcache      8 89.1  0.0 130496 50048 pts/0    Sl+  09:34   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  09:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3754471058      instructions:u            #    0.55  insn per cycle         
        6848103649      cycles:u                                                    
          25785646      armv8_pmuv3_0/br_mis_pred/:u                                   
         656515007      armv8_pmuv3_0/br_pred/:u                                    

      35.790321007 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys 256 conns 1 threads 32000 rps'
==> Bench: 4096 keys 256 conns 1 threads 32000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 1'
++ bc
+ client_cores_spec=112-113
+ CLIENT_CORES_SPEC=112-113
+ CLIENT_ARGS='-r 32000 -k 4096 -c 256 -f 512 -w 1'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-113
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 32000 -k 4096 -c 256 -f 512 -w 1'
Starting client with -r 32000 -k 4096 -c 256 -f 512 -w 1
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-113 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 4096 -c 256 -f 512 -w 1
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 4096 -c 256 -f 512 -w 1
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 1
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 4096
rps 32000 cpus 1
meanInterarrival 31
num_worker_connections 256
Created 256 connections total
Creating worker on tid 177664512
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575280868.279293,       0.0,       64147,      57805,       6342,      33909,      23896,  13.560934,  19.900000,  25.400000,  44.400000,   7.459157,   0.000000, 113.412999, 397.338085
Outstanding requests per worker:
347 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32236.6,      161183,     144975,      16208,      96845,      48130,  14.723823,  29.500000,  38.700000,  60.400000,  11.955296,   0.219000, 123.600997, 482.833357
Outstanding requests per worker:
464 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32121.4,      160607,     144486,      16121,     102303,      42183,  30.091072,  64.900000,  84.800000, 140.700000,  28.018365,   0.281000, 242.991999, 528.268981
Outstanding requests per worker:
1156 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32072.4,      160362,     144498,      15864,     105952,      38546,  58.721890, 127.200000, 159.100000, 239.200000,  50.382349,   0.284000, 357.948989, 555.822434
Outstanding requests per worker:
2096 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31738.4,      158692,     142783,      15909,     107057,      35726,  89.093788, 197.800000, 241.000000, 319.000000,  73.794323,   0.237000, 445.096999, 573.451090
Outstanding requests per worker:
4439 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31641.6,      158208,     142581,      15627,     108825,      33756, 173.976300, 359.800000, 425.200000, 554.100000, 128.251086,   0.695000, 737.176001, 589.523029
Outstanding requests per worker:
6685 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31621.0,      158105,     142225,      15880,     109875,      32350, 235.073180, 516.200000, 611.600000, 734.700000, 180.823883,   0.669000, 933.404982, 598.909432
Outstanding requests per worker:
8427 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  09:34   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   09:34   0:00 /usr/lib/linux
memcache      9 88.3  0.0 129472 50112 pts/0    Sl+  09:34   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  09:35   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3761991341      instructions:u            #    0.57  insn per cycle         
        6629519419      cycles:u                                                    
          24562611      armv8_pmuv3_0/br_mis_pred/:u                                   
         643143499      armv8_pmuv3_0/br_pred/:u                                    

      35.760664658 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys 256 conns 2 threads 27000 rps'
==> Bench: 4096 keys 256 conns 2 threads 27000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 27000 -k 4096 -c 256 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 4096 -c 256 -f 512 -w 2'
Starting client with -r 27000 -k 4096 -c 256 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 4096 -c 256 -f 512 -w 2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 4096 -c 256 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 4096
rps 27000 cpus 2
meanInterarrival 74
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 2003038720
starting receive base loop
Created 256 connections total
Creating worker on tid 895611392
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575280910.279335,       0.0,       68514,      61795,       6719,      36858,      24937,   0.899604,   0.243100,   0.254100,  20.700000,   8.020041,   0.000000, 189.686999, 404.776390
Outstanding requests per worker:
4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.2,      135146,     121436,      13710,      80310,      41126,   0.182794,   0.232100,   0.247100,   0.261100,   0.038080,   0.098000,   1.174000, 477.727346
Outstanding requests per worker:
3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.2,      135146,     121518,      13628,      85312,      36206,   0.183276,   0.234100,   0.248100,   0.264100,   0.038807,   0.099000,   1.156000, 520.870908
Outstanding requests per worker:
2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.8,      135149,     121687,      13462,      88434,      33253,   0.183198,   0.234100,   0.248100,   0.263100,   0.038586,   0.097000,   1.002000, 548.413980
Outstanding requests per worker:
3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.2,      135141,     121545,      13596,      90142,      31403,   0.183034,   0.234100,   0.248100,   0.264100,   0.038652,   0.097000,   0.844000, 563.841746
Outstanding requests per worker:
2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.6,      135143,     121329,      13814,      91550,      29779,   0.183371,   0.235100,   0.248100,   0.264100,   0.039039,   0.100000,   1.003000, 579.191636
Outstanding requests per worker:
2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.4,      135142,     121836,      13306,      93042,      28794,   0.183560,   0.236100,   0.248100,   0.265100,   0.039536,   0.072000,   0.870000, 589.170434
Outstanding requests per worker:
3 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  09:35   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   09:35   0:00 /usr/lib/linux
memcache      9 81.9  0.0 125376 44992 pts/0    Sl+  09:35   0:30 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  09:36   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3365777483      instructions:u            #    0.51  insn per cycle         
        6578670600      cycles:u                                                    
          25755094      armv8_pmuv3_0/br_mis_pred/:u                                   
         594088350      armv8_pmuv3_0/br_pred/:u                                    

      36.910143437 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys 256 conns 2 threads 28000 rps'
==> Bench: 4096 keys 256 conns 2 threads 28000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 28000 -k 4096 -c 256 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 4096 -c 256 -f 512 -w 2'
Starting client with -r 28000 -k 4096 -c 256 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 4096 -c 256 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 4096 -c 256 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 4096
rps 28000 cpus 2
meanInterarrival 71
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1406398976
starting receive base loop
Created 256 connections total
Creating worker on tid 291631616
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575280950.279375,       0.0,       71765,      64610,       7155,      38655,      25955,   0.438663,   0.245100,   0.253100,   0.746100,   3.332316,   0.000000,  90.772003, 407.628463
Outstanding requests per worker:
2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.2,      140851,     126882,      13969,      84651,      42231,   0.189415,   0.244100,   0.250100,   0.267100,   0.039217,   0.097000,   1.051000, 484.154719
Outstanding requests per worker:
3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.4,      140852,     126826,      14026,      89435,      37391,   0.189142,   0.243100,   0.250100,   0.269100,   0.040101,   0.093000,   1.103000, 525.338251
Outstanding requests per worker:
3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.0,      140850,     126571,      14279,      92180,      34391,   0.189244,   0.244100,   0.251100,   0.268100,   0.039789,   0.097000,   1.104000, 549.217862
Outstanding requests per worker:
3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.2,      140851,     126701,      14150,      94298,      32403,   0.189662,   0.244100,   0.251100,   0.270100,   0.040506,   0.097000,   1.113000, 568.502253
Outstanding requests per worker:
2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.0,      140850,     126732,      14118,      95928,      30804,   0.189874,   0.244100,   0.251100,   0.270100,   0.041875,   0.095000,   1.050000, 581.688784
Outstanding requests per worker:
2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.0,      140850,     126802,      14048,      97263,      29539,   0.189893,   0.244100,   0.251100,   0.270100,   0.041282,   0.096000,   1.128000, 592.223474
Outstanding requests per worker:
2 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  09:36   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   09:36   0:00 /usr/lib/linux
memcache      9 88.4  0.0 126400 46976 pts/0    Sl+  09:36   0:30 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  09:36   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3487200158      instructions:u            #    0.52  insn per cycle         
        6668271236      cycles:u                                                    
          25402435      armv8_pmuv3_0/br_mis_pred/:u                                   
         611228535      armv8_pmuv3_0/br_pred/:u                                    

      35.770948399 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys 256 conns 2 threads 29000 rps'
==> Bench: 4096 keys 256 conns 2 threads 29000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 29000 -k 4096 -c 256 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 4096 -c 256 -f 512 -w 2'
Starting client with -r 29000 -k 4096 -c 256 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 4096 -c 256 -f 512 -w 2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 4096 -c 256 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 4096
rps 29000 cpus 2
meanInterarrival 68
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1894248960
starting receive base loop
Created 256 connections total
Creating worker on tid 785576448
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575280991.279416,       0.0,       75389,      67885,       7504,      40771,      27114,   0.647887,   0.249100,   0.258000,   2.800000,   5.351854,   0.000000, 133.993000, 408.926493
Outstanding requests per worker:
3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.4,      147067,     132436,      14631,      88327,      44109,   0.195853,   0.246100,   0.253100,   0.290100,   0.041364,   0.101000,   0.787000, 482.638369
Outstanding requests per worker:
3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.0,      147065,     132323,      14742,      93366,      38957,   0.196860,   0.246100,   0.254100,   0.295100,   0.043053,   0.101000,   1.163000, 525.305518
Outstanding requests per worker:
2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.0,      147065,     132198,      14867,      96383,      35815,   0.196950,   0.247100,   0.254100,   0.295100,   0.042758,   0.088000,   0.860000, 551.328121
Outstanding requests per worker:
3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.2,      147066,     132260,      14806,      98672,      33588,   0.197122,   0.247100,   0.254100,   0.297100,   0.043308,   0.091000,   0.876000, 568.495229
Outstanding requests per worker:
2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.0,      147065,     132271,      14794,     100416,      31855,   0.197605,   0.247100,   0.255100,   0.297100,   0.044553,   0.094000,   1.014000, 583.364789
Outstanding requests per worker:
2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29413.4,      147067,     132376,      14691,     101861,      30515,   0.197953,   0.247100,   0.255100,   0.298100,   0.046090,   0.090000,   1.099000, 594.684709
Outstanding requests per worker:
4 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  09:36   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   09:36   0:00 /usr/lib/linux
memcache      9 85.0  0.0 128448 49024 pts/0    Sl+  09:36   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  09:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3625655746      instructions:u            #    0.53  insn per cycle         
        6782062901      cycles:u                                                    
          25199600      armv8_pmuv3_0/br_mis_pred/:u                                   
         634468225      armv8_pmuv3_0/br_pred/:u                                    

      37.030310822 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys 256 conns 2 threads 30000 rps'
==> Bench: 4096 keys 256 conns 2 threads 30000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 30000 -k 4096 -c 256 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 30000 -k 4096 -c 256 -f 512 -w 2'
Starting client with -r 30000 -k 4096 -c 256 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 4096 -c 256 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 4096 -c 256 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 4096
rps 30000 cpus 2
meanInterarrival 66
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1712189952
starting receive base loop
Created 256 connections total
Creating worker on tid 602993152
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575281032.279457,       0.0,       76617,      68873,       7744,      41394,      27479,   0.524526,   0.252100,   0.280100,   1.200000,   4.618626,   0.000000, 134.948000, 410.570732
Outstanding requests per worker:
2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30306.6,      151533,     136289,      15244,      91511,      44778,   0.203389,   0.250100,   0.258000,   0.299100,   0.043883,   0.099000,   0.848000, 487.671059
Outstanding requests per worker:
3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30304.6,      151523,     136167,      15356,      96608,      39559,   0.203372,   0.250100,   0.259100,   0.298100,   0.043754,   0.095000,   0.818000, 528.564748
Outstanding requests per worker:
4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30305.0,      151525,     136391,      15134,      99795,      36596,   0.203779,   0.250100,   0.260100,   0.299100,   0.044095,   0.093000,   0.843000, 553.519506
Outstanding requests per worker:
3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30305.2,      151526,     136420,      15106,     101931,      34489,   0.204230,   0.250100,   0.260100,   0.300100,   0.045588,   0.094000,   0.950000, 571.155212
Outstanding requests per worker:
3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30306.4,      151532,     136595,      14937,     103689,      32906,   0.204753,   0.251100,   0.263100,   0.301100,   0.047195,   0.098000,   0.967000, 583.690948
Outstanding requests per worker:
3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30304.2,      151521,     136430,      15091,     105404,      31026,   0.205084,   0.251100,   0.264100,   0.303100,   0.047726,   0.095000,   1.030000, 598.564223
Outstanding requests per worker:
2 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  09:37   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   09:37   0:00 /usr/lib/linux
memcache      8 91.5  0.0 130496 49024 pts/0    Sl+  09:37   0:32 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  09:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3760630395      instructions:u            #    0.55  insn per cycle         
        6845172585      cycles:u                                                    
          26169776      armv8_pmuv3_0/br_mis_pred/:u                                   
         659578199      armv8_pmuv3_0/br_pred/:u                                    

      35.549232150 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys 256 conns 2 threads 31000 rps'
==> Bench: 4096 keys 256 conns 2 threads 31000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 31000 -k 4096 -c 256 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 31000 -k 4096 -c 256 -f 512 -w 2'
Starting client with -r 31000 -k 4096 -c 256 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 4096 -c 256 -f 512 -w 2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 4096 -c 256 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 4096
rps 31000 cpus 2
meanInterarrival 64
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 2051863040
starting receive base loop
Created 256 connections total
Creating worker on tid 938537472
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575281073.279498,       0.0,       80180,      72208,       7972,      43572,      28636,   0.775889,   0.278100,   0.292100,  13.900000,   5.938503,   0.000000, 119.281001, 412.678387
Outstanding requests per worker:
3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31252.2,      156261,     140794,      15467,      94498,      46296,   0.210841,   0.268100,   0.283100,   0.307100,   0.045630,   0.100000,   0.883000, 487.815262
Outstanding requests per worker:
3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31252.8,      156264,     140558,      15706,      99602,      40956,   0.211751,   0.272100,   0.284100,   0.309100,   0.045842,   0.103000,   0.891000, 529.412641
Outstanding requests per worker:
3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31252.6,      156263,     140935,      15328,     103425,      37510,   0.212581,   0.274100,   0.284100,   0.310100,   0.046687,   0.098000,   0.842000, 556.243169
Outstanding requests per worker:
3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31253.8,      156269,     140635,      15634,     105276,      35359,   0.212906,   0.275100,   0.284100,   0.312100,   0.047879,   0.095000,   0.943000, 571.688541
Outstanding requests per worker:
2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31251.6,      156258,     140508,      15750,     107227,      33281,   0.213596,   0.276100,   0.285000,   0.314100,   0.050313,   0.096000,   1.056000, 587.814580
Outstanding requests per worker:
3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31252.2,      156261,     140546,      15715,     108404,      32142,   0.214679,   0.277100,   0.285000,   0.318100,   0.051891,   0.093000,   1.114000, 596.747599
Outstanding requests per worker:
3 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.1  0.0   4160  3584 pts/0    Ss+  09:38   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   09:38   0:00 /usr/lib/linux
memcache      8 87.6  0.0 130496 49152 pts/0    Sl+  09:38   0:32 memcached -t 1
memcache     16  0.0  0.0   6656  4416 pts/1    Rs+  09:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3848275894      instructions:u            #    0.55  insn per cycle         
        6964580645      cycles:u                                                    
          26406076      armv8_pmuv3_0/br_mis_pred/:u                                   
         671335939      armv8_pmuv3_0/br_pred/:u                                    

      37.080700138 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys 256 conns 2 threads 32000 rps'
==> Bench: 4096 keys 256 conns 2 threads 32000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 2'
++ bc
+ client_cores_spec=112-114
+ CLIENT_CORES_SPEC=112-114
+ CLIENT_ARGS='-r 32000 -k 4096 -c 256 -f 512 -w 2'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-114
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 32000 -k 4096 -c 256 -f 512 -w 2'
Starting client with -r 32000 -k 4096 -c 256 -f 512 -w 2
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-114 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 4096 -c 256 -f 512 -w 2
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 4096 -c 256 -f 512 -w 2
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 2
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 4096
rps 32000 cpus 2
meanInterarrival 62
num_worker_connections 128
num_worker_connections 128
Creating worker on tid 1634136576
starting receive base loop
Created 256 connections total
Creating worker on tid 519762432
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575281113.279538,       0.0,       82362,      74077,       8285,      44477,      29600,   0.609300,   0.285000,   0.398100,   1.700000,   5.127979,   0.000000, 147.039995, 410.518339
Outstanding requests per worker:
3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32260.0,      161300,     145466,      15834,      97542,      47924,   0.226415,   0.280100,   0.288100,   0.347100,   0.051342,   0.094000,   0.900000, 487.978339
Outstanding requests per worker:
4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32260.4,      161302,     145011,      16291,     103175,      41836,   0.230532,   0.282100,   0.292100,   0.346000,   0.050935,   0.102000,   1.146000, 531.098972
Outstanding requests per worker:
4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32260.0,      161300,     145309,      15991,     106713,      38596,   0.235060,   0.284100,   0.299100,   0.352100,   0.053940,   0.110000,   1.021000, 555.468746
Outstanding requests per worker:
3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32259.2,      161296,     144958,      16338,     108864,      36094,   0.239098,   0.287100,   0.309100,   0.366100,   0.055307,   0.097000,   1.090000, 574.408615
Outstanding requests per worker:
4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32260.0,      161300,     145183,      16117,     111487,      33696,   0.241675,   0.288100,   0.312100,   0.387100,   0.060613,   0.100000,   1.224000, 592.408891
Outstanding requests per worker:
4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32260.2,      161301,     145189,      16112,     112437,      32752,   0.243741,   0.289100,   0.315100,   0.405100,   0.071606,   0.099000,   1.411000, 600.097562
Outstanding requests per worker:
3 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  09:38   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   09:38   0:00 /usr/lib/linux
memcache     10 90.6  0.0 130496 50752 pts/0    Sl+  09:38   0:32 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  09:39   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3893919339      instructions:u            #    0.56  insn per cycle         
        6954090004      cycles:u                                                    
          25017665      armv8_pmuv3_0/br_mis_pred/:u                                   
         672485340      armv8_pmuv3_0/br_pred/:u                                    

      35.580221856 seconds time elapsed

+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys 256 conns 4 threads 27000 rps'
==> Bench: 4096 keys 256 conns 4 threads 27000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 27000 -k 4096 -c 256 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 27000 -k 4096 -c 256 -f 512 -w 4'
Starting client with -r 27000 -k 4096 -c 256 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 27000 -k 4096 -c 256 -f 512 -w 4
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 27000 -k 4096 -c 256 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
Loading key value file...created uniform distribution 4096
rps 27000 cpus 4
meanInterarrival 148
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1923150336
starting receive base loop
num_worker_connections 64
Creating worker on tid 1328280064
starting receive base loop
num_worker_connections 64
Creating worker on tid 732361216
starting receive base loop
Created 256 connections total
Creating worker on tid 136442368
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575281154.279579,       0.0,       70322,      63269,       7053,      37617,      25652,   0.943011,   0.126100,   0.173000,  33.100000,   7.960964,   0.000000, 170.475006, 403.931404
Outstanding requests per worker:
0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.2,      135146,     121714,      13432,      80662,      41052,   0.108790,   0.125100,   0.128100,   0.187100,   0.020939,   0.067000,   1.508000, 478.628030
Outstanding requests per worker:
1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.6,      135148,     121520,      13628,      85392,      36128,   0.108874,   0.125100,   0.128100,   0.188100,   0.022534,   0.066000,   1.510000, 522.728942
Outstanding requests per worker:
1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27030.0,      135150,     121757,      13393,      88357,      33400,   0.109046,   0.126100,   0.129000,   0.187100,   0.021810,   0.066000,   1.537000, 547.065672
Outstanding requests per worker:
0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27028.4,      135142,     121461,      13681,      90143,      31318,   0.109093,   0.126100,   0.129000,   0.187100,   0.022698,   0.061000,   0.705000, 565.323281
Outstanding requests per worker:
1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.0,      135145,     121653,      13492,      91594,      30059,   0.110923,   0.126100,   0.130100,   0.195100,   0.045027,   0.067000,   1.512000, 576.932587
Outstanding requests per worker:
0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   27029.6,      135148,     121684,      13464,      92995,      28689,   0.108982,   0.126100,   0.129000,   0.186100,   0.020216,   0.065000,   0.643000, 590.024136
Outstanding requests per worker:
1 1 1 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  09:39   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   09:39   0:00 /usr/lib/linux
memcache     10 81.7  0.0 125376 43776 pts/0    Sl+  09:39   0:30 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  09:40   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3301711034      instructions:u            #    0.52  insn per cycle         
        6300748629      cycles:u                                                    
          22736756      armv8_pmuv3_0/br_mis_pred/:u                                   
         571627369      armv8_pmuv3_0/br_pred/:u                                    

      37.091462146 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys 256 conns 4 threads 28000 rps'
==> Bench: 4096 keys 256 conns 4 threads 28000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 28000 -k 4096 -c 256 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 28000 -k 4096 -c 256 -f 512 -w 4'
Starting client with -r 28000 -k 4096 -c 256 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 28000 -k 4096 -c 256 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 28000 -k 4096 -c 256 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 4096
rps 28000 cpus 4
meanInterarrival 142
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1691283968
starting receive base loop
num_worker_connections 64
Creating worker on tid 1092088320
starting receive base loop
num_worker_connections 64
Creating worker on tid 498790912
starting receive base loop
Created 256 connections total
Creating worker on tid 4197839360
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575281195.279620,       0.0,       72231,      64926,       7305,      38706,      26220,   0.792701,   0.128100,   0.182100,  22.100000,   6.874706,   0.000000, 155.754000, 405.560099
Outstanding requests per worker:
0 1 0 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28171.8,      140859,     126833,      14026,      84497,      42336,   0.107284,   0.125100,   0.137100,   0.186100,   0.022268,   0.060000,   0.602000, 481.831873
Outstanding requests per worker:
1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28172.0,      140860,     126713,      14147,      89258,      37455,   0.107717,   0.125100,   0.139100,   0.188100,   0.025378,   0.058000,   0.745000, 524.250527
Outstanding requests per worker:
0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28170.2,      140851,     126709,      14142,      92468,      34241,   0.107902,   0.126100,   0.147100,   0.188100,   0.025347,   0.060000,   0.965000, 550.945063
Outstanding requests per worker:
0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28171.2,      140856,     126671,      14185,      94357,      32314,   0.107706,   0.126100,   0.139100,   0.186100,   0.024092,   0.061000,   0.678000, 568.626308
Outstanding requests per worker:
1 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28171.6,      140858,     126728,      14130,      96174,      30554,   0.107853,   0.126100,   0.139100,   0.185100,   0.025898,   0.059000,   0.799000, 581.888036
Outstanding requests per worker:
0 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   28171.8,      140859,     126663,      14196,      97064,      29599,   0.107791,   0.126100,   0.154100,   0.187100,   0.023030,   0.060000,   0.961000, 591.998421
Outstanding requests per worker:
1 0 0 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  09:40   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   09:40   0:00 /usr/lib/linux
memcache      8 85.9  0.0 128448 47360 pts/0    Sl+  09:40   0:30 memcached -t 1
memcache     16  0.0  0.0   6656  4416 pts/1    Rs+  09:40   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 384':

        3473815749      instructions:u            #    0.52  insn per cycle         
        6627395612      cycles:u                                                    
          25225376      armv8_pmuv3_0/br_mis_pred/:u                                   
         606116324      armv8_pmuv3_0/br_pred/:u                                    

      35.709105978 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 4096 keys 256 conns 4 threads 29000 rps'
==> Bench: 4096 keys 256 conns 4 threads 29000 rps
++ echo '256 + 128'
++ bc
+ max_conns=384
++ echo '112 + 4'
++ bc
+ client_cores_spec=112-116
+ CLIENT_CORES_SPEC=112-116
+ CLIENT_ARGS='-r 29000 -k 4096 -c 256 -f 512 -w 4'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 384'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-116
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id a77a1ae543584e3d305053abee3c3ce97146aeb0df5de147e300543d8a8e64d0 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384'
Starting server with perf args -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ server args -t 1 -m 4096 -n 550 -c 384
+ docker rm -f dc-server
dc-server
+ echo 'Starting client with -r 29000 -k 4096 -c 256 -f 512 -w 4'
Starting client with -r 29000 -k 4096 -c 256 -f 512 -w 4
+ docker rm -f cloudsuite-data-caching-perf-test-client
++ pwd
+ docker run --cpuset-cpus=1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 384
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-116 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 29000 -k 4096 -c 256 -f 512 -w 4
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 29000 -k 4096 -c 256 -f 512 -w 4
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 4
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.144.2
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles,armv8_pmuv3_0/br_mis_pred/,armv8_pmuv3_0/br_pred/ memcached -t 1 -m 4096 -n 550 -c 384
Loading key value file...created uniform distribution 4096
rps 29000 cpus 4
meanInterarrival 137
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2336223744
starting receive base loop
num_worker_connections 64
Creating worker on tid 1738994176
starting receive base loop
num_worker_connections 64
Creating worker on tid 1143075328
starting receive base loop
Created 256 connections total
Creating worker on tid 547156480
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575281235.279660,       0.0,       75010,      67545,       7465,      40369,      27176,   1.222327,   0.120100,   0.492100,  42.000000,  10.430384,   0.000000, 221.957996, 406.236094
Outstanding requests per worker:
1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29198.6,      145993,     131376,      14617,      87791,      43585,   0.095320,   0.115100,   0.123100,   0.186100,   0.023035,   0.059000,   0.786000, 483.973336
Outstanding requests per worker:
0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   29198.4,      145992,     131171,      14821,      92651,      38520,   0.094810,   0.114100,   0.122100,   0.181100,   0.021604,   0.059000,   1.439000, 526.461001
Outstanding requests per worker:
1 0 0 0 
