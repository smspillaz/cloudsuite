+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 120000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 120000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 120000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3,4 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 120000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 120000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 120000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 120000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 120000 cpus 8
meanInterarrival 66
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2507469312
starting receive base loop
num_worker_connections 64
Creating worker on tid 1908077056
starting receive base loop
num_worker_connections 64
Creating worker on tid 1312158208
starting receive base loop
num_worker_connections 64
Creating worker on tid 716239360
starting receive base loop
num_worker_connections 64
Creating worker on tid 120320512
starting receive base loop
num_worker_connections 64
Creating worker on tid 3819368960
starting receive base loop
num_worker_connections 64
Creating worker on tid 3223450112
starting receive base loop
Created 512 connections total
Creating worker on tid 2627531264
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575891996.890421,       0.0,      292704,     263314,      29390,     173180,      90134,   0.853854,   0.492100,   0.630100,   1.800000,   7.107202,   0.000000, 157.759994, 472.626887
Outstanding requests per worker:
7 6 3 6 8 7 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121219.3,      606097,     545555,      60542,     405867,     139688,   0.278718,   0.486100,   0.581100,   0.851100,   0.159562,   0.061000,   2.138000, 567.507012
Outstanding requests per worker:
4 6 3 5 4 6 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121219.5,      606098,     545313,      60785,     428535,     116778,   0.295535,   0.509100,   0.641100,   1.100000,   0.183509,   0.063000,   2.602000, 612.729189
Outstanding requests per worker:
3 6 5 3 5 4 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121221.5,      606108,     545472,      60636,     441361,     104111,   0.305053,   0.548100,   0.685100,   1.100000,   0.191064,   0.061000,   3.020000, 639.126562
Outstanding requests per worker:
4 2 4 3 4 4 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121222.3,      606112,     545113,      60999,     450022,      95091,   0.314575,   0.559100,   0.700000,   1.200000,   0.222028,   0.056000,   3.956000, 655.953347
Outstanding requests per worker:
6 6 5 7 6 3 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121215.3,      606077,     545690,      60387,     456476,      89214,   0.310417,   0.557100,   0.698100,   1.100000,   0.209024,   0.060000,   4.113000, 669.254612
Outstanding requests per worker:
6 7 7 8 6 6 9 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121222.5,      606113,     545398,      60715,     461186,      84212,   0.318832,   0.568100,   0.717100,   1.200000,   0.219216,   0.059000,   3.486000, 679.549995
Outstanding requests per worker:
6 5 8 5 4 5 6 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:20   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   11:20   0:00 /usr/lib/linux
memcache      7  265  0.0 423616 127744 pts/0   Sl+  11:20   2:04 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  11:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

         394226607      L1-dcache-load-misses:u   # [35m  10.76%[m of all L1-dcache hits  
        3664997521      L1-dcache-loads:u                                           
        1884816428      armv8_pmuv3_0/l2d_cache/:u                                   
         618374311      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      46.610274132 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 120500 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 120500 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 120500 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3,4 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 120500 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 120500 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 120500 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 120500 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 120500 cpus 8
meanInterarrival 66
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2462642688
starting receive base loop
num_worker_connections 64
Creating worker on tid 1865150976
starting receive base loop
num_worker_connections 64
Creating worker on tid 1269232128
starting receive base loop
num_worker_connections 64
Creating worker on tid 673313280
starting receive base loop
num_worker_connections 64
Creating worker on tid 77394432
starting receive base loop
num_worker_connections 64
Creating worker on tid 3776442880
starting receive base loop
num_worker_connections 64
Creating worker on tid 3183145472
starting receive base loop
Created 512 connections total
Creating worker on tid 2587226624
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575892046.890471,       0.0,      292862,     263199,      29663,     173309,      89890,   0.561583,   0.495100,   0.640100,   1.900000,   4.339834,   0.000000, 121.275000, 473.914130
Outstanding requests per worker:
6 5 6 4 6 5 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121224.9,      606125,     545947,      60178,     406524,     139423,   0.277299,   0.478100,   0.577100,   0.892100,   0.163299,   0.062000,   2.693000, 567.600135
Outstanding requests per worker:
3 4 3 4 3 2 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121223.5,      606118,     545869,      60249,     429237,     116632,   0.281373,   0.489100,   0.589100,   0.889100,   0.163199,   0.061000,   2.287000, 613.652955
Outstanding requests per worker:
2 2 4 4 5 2 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121228.9,      606145,     545823,      60322,     441778,     104045,   0.282566,   0.492100,   0.584100,   0.848100,   0.160367,   0.060000,   2.614000, 638.737710
Outstanding requests per worker:
6 4 2 4 4 3 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121219.5,      606098,     545603,      60495,     450492,      95111,   0.291353,   0.501000,   0.626100,   0.953100,   0.171316,   0.056000,   2.028000, 656.035308
Outstanding requests per worker:
3 3 5 3 3 3 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121222.5,      606113,     545351,      60762,     456650,      88701,   0.291472,   0.500100,   0.626100,   0.951100,   0.177895,   0.061000,   2.796000, 669.884592
Outstanding requests per worker:
3 3 3 4 4 4 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121224.7,      606124,     545589,      60535,     461218,      84371,   0.294264,   0.510100,   0.638100,   0.898100,   0.171308,   0.060000,   2.490000, 679.040404
Outstanding requests per worker:
6 4 5 4 4 2 4 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  11:20   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   11:20   0:00 /usr/lib/linux
memcache      7  264  0.0 424640 121152 pts/0   Sl+  11:20   2:04 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  11:21   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

         396605652      L1-dcache-load-misses:u   # [35m  10.81%[m of all L1-dcache hits  
        3669229689      L1-dcache-loads:u                                           
        1891287851      armv8_pmuv3_0/l2d_cache/:u                                   
         626984051      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      46.720389153 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 121000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 121000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 121000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3,4 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 121000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 121000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 121000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 121000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 121000 cpus 8
meanInterarrival 66
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2489315840
starting receive base loop
num_worker_connections 64
Creating worker on tid 1897394688
starting receive base loop
num_worker_connections 64
Creating worker on tid 1304097280
starting receive base loop
num_worker_connections 64
Creating worker on tid 708178432
starting receive base loop
num_worker_connections 64
Creating worker on tid 112259584
starting receive base loop
num_worker_connections 64
Creating worker on tid 3811308032
starting receive base loop
num_worker_connections 64
Creating worker on tid 3215389184
starting receive base loop
Created 512 connections total
Creating worker on tid 2619470336
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575892096.890521,       0.0,      290435,     261280,      29155,     172367,      88913,   0.635896,   0.501000,   0.692000,   1.800000,   5.481235,   0.000000, 151.219994, 474.781935
Outstanding requests per worker:
3 4 4 4 5 6 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121219.3,      606097,     545690,      60407,     406946,     138744,   0.461233,   0.514100,   0.700000,   5.200000,   1.877770,   0.063000,  64.237997, 568.591937
Outstanding requests per worker:
3 4 4 4 3 3 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121221.1,      606106,     545345,      60761,     429878,     115467,   0.291588,   0.502100,   0.632100,   0.980100,   0.178039,   0.061000,   2.163000, 615.395190
Outstanding requests per worker:
3 3 4 3 2 4 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121218.9,      606095,     545627,      60468,     443105,     102522,   0.306863,   0.541100,   0.685100,   1.100000,   0.199256,   0.062000,   3.194000, 642.047694
Outstanding requests per worker:
2 4 3 3 4 4 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121222.1,      606111,     545294,      60817,     450050,      95244,   0.297648,   0.511100,   0.638100,   0.960100,   0.178367,   0.061000,   2.872000, 657.179353
Outstanding requests per worker:
7 6 4 5 6 6 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121219.1,      606096,     545208,      60888,     457721,      87487,   0.305231,   0.536100,   0.687100,   1.100000,   0.190973,   0.061000,   2.564000, 672.795185
Outstanding requests per worker:
6 4 5 5 3 6 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121220.1,      606101,     545745,      60356,     462574,      83171,   0.314294,   0.556100,   0.699100,   1.100000,   0.218528,   0.061000,   3.750000, 681.538961
Outstanding requests per worker:
4 4 3 5 4 3 4 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:21   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   11:21   0:00 /usr/lib/linux
memcache      7  265  0.0 423616 124544 pts/0   Sl+  11:21   2:04 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  11:22   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

         398162716      L1-dcache-load-misses:u   # [35m  10.87%[m of all L1-dcache hits  
        3661993613      L1-dcache-loads:u                                           
        1891812898      armv8_pmuv3_0/l2d_cache/:u                                   
         624869340      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      46.721449427 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 121500 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 121500 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 121500 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3,4 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 121500 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 121500 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 121500 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 121500 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 121500 cpus 8
meanInterarrival 65
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2427449856
starting receive base loop
num_worker_connections 64
Creating worker on tid 1830285824
starting receive base loop
num_worker_connections 64
Creating worker on tid 1236988416
starting receive base loop
num_worker_connections 64
Creating worker on tid 641069568
starting receive base loop
num_worker_connections 64
Creating worker on tid 45150720
starting receive base loop
num_worker_connections 64
Creating worker on tid 3744199168
starting receive base loop
num_worker_connections 64
Creating worker on tid 3148280320
starting receive base loop
Created 512 connections total
Creating worker on tid 2552361472
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575892146.890571,       0.0,      302422,     272056,      30366,     179470,      92586,   0.556273,   0.550100,   0.751100,   2.500000,   4.055040,   0.000000, 115.736000, 475.062686
Outstanding requests per worker:
5 4 4 5 5 5 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123088.9,      615445,     554090,      61355,     413196,     140894,   0.310056,   0.551100,   0.689100,   1.200000,   0.201102,   0.058000,   2.297000, 568.752878
Outstanding requests per worker:
2 3 3 3 2 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123088.1,      615441,     554011,      61430,     436361,     117650,   0.322056,   0.569100,   0.743100,   1.200000,   0.215616,   0.059000,   3.094000, 614.988201
Outstanding requests per worker:
3 4 3 4 3 4 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.1,      615411,     553694,      61717,     448615,     105079,   0.328840,   0.608000,   0.761000,   1.200000,   0.220590,   0.061000,   3.436000, 640.303003
Outstanding requests per worker:
7 6 5 3 4 8 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.9,      615430,     553907,      61523,     457294,      96613,   0.346379,   0.626100,   0.815100,   1.400000,   0.253651,   0.062000,   4.210000, 657.365300
Outstanding requests per worker:
4 4 3 4 4 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.5,      615428,     553804,      61624,     463816,      89988,   0.335708,   0.610100,   0.758100,   1.200000,   0.218900,   0.060000,   2.363000, 669.785242
Outstanding requests per worker:
3 4 5 3 5 5 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123079.1,      615396,     553457,      61939,     468319,      85138,   0.354020,   0.623100,   0.802100,   1.400000,   0.335856,   0.077000,   9.796000, 680.400555
Outstanding requests per worker:
4 9 5 5 6 9 6 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:22   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   11:22   0:00 /usr/lib/linux
memcache      7  267  0.0 424640 128512 pts/0   Sl+  11:22   2:05 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  11:23   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

         399653557      L1-dcache-load-misses:u   # [35m  10.74%[m of all L1-dcache hits  
        3721996538      L1-dcache-loads:u                                           
        1896361091      armv8_pmuv3_0/l2d_cache/:u                                   
         630087173      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      46.450394828 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 122000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 122000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 122000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3,4 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 122000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 122000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 122000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 122000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 122000 cpus 8
meanInterarrival 65
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2326327808
starting receive base loop
num_worker_connections 64
Creating worker on tid 1730933248
starting receive base loop
num_worker_connections 64
Creating worker on tid 1135014400
starting receive base loop
num_worker_connections 64
Creating worker on tid 539095552
starting receive base loop
num_worker_connections 64
Creating worker on tid 4238144000
starting receive base loop
num_worker_connections 64
Creating worker on tid 3642225152
starting receive base loop
num_worker_connections 64
Creating worker on tid 3048927744
starting receive base loop
Created 512 connections total
Creating worker on tid 2453008896
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575892196.890621,       0.0,      297643,     267596,      30047,     175848,      91748,   0.663291,   0.574100,   0.803100,   1.800000,   5.179121,   0.000000, 135.826007, 472.157241
Outstanding requests per worker:
4 3 4 5 6 5 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123091.7,      615459,     554042,      61417,     413529,     140513,   0.325957,   0.571100,   0.742100,   1.200000,   0.221006,   0.062000,   3.210000, 570.428984
Outstanding requests per worker:
5 4 5 4 5 5 6 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.3,      615412,     554158,      61254,     435950,     118208,   0.331321,   0.607100,   0.754100,   1.200000,   0.219404,   0.058000,   3.215000, 614.477663
Outstanding requests per worker:
7 6 5 5 6 6 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123086.9,      615435,     554042,      61393,     448528,     105514,   0.350053,   0.630100,   0.812100,   1.400000,   0.248871,   0.059000,   3.342000, 639.561811
Outstanding requests per worker:
6 5 3 5 5 5 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123080.1,      615401,     553532,      61869,     457006,      96526,   0.366615,   0.681100,   0.881100,   1.500000,   0.283652,   0.057000,   4.466000, 657.292292
Outstanding requests per worker:
4 6 6 7 6 6 7 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123096.1,      615481,     553673,      61808,     463061,      90612,   0.358548,   0.644100,   0.835100,   1.400000,   0.260330,   0.058000,   3.861000, 669.784640
Outstanding requests per worker:
2 4 3 3 3 3 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123080.3,      615402,     553754,      61648,     468903,      84851,   0.367231,   0.680100,   0.875100,   1.400000,   0.270975,   0.071000,   4.070000, 679.834594
Outstanding requests per worker:
6 6 5 4 6 6 5 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:23   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   11:23   0:00 /usr/lib/linux
memcache      7  267  0.0 424640 127744 pts/0   Sl+  11:23   2:05 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  11:24   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

         398771235      L1-dcache-load-misses:u   # [35m  10.77%[m of all L1-dcache hits  
        3702057927      L1-dcache-loads:u                                           
        1887371000      armv8_pmuv3_0/l2d_cache/:u                                   
         642778113      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      46.690029999 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 122500 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 122500 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 122500 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3,4 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 122500 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 122500 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 122500 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 122500 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 122500 cpus 8
meanInterarrival 65
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2411328000
starting receive base loop
num_worker_connections 64
Creating worker on tid 1814163968
starting receive base loop
num_worker_connections 64
Creating worker on tid 1218245120
starting receive base loop
num_worker_connections 64
Creating worker on tid 622326272
starting receive base loop
num_worker_connections 64
Creating worker on tid 29028864
starting receive base loop
num_worker_connections 64
Creating worker on tid 3728077312
starting receive base loop
num_worker_connections 64
Creating worker on tid 3132158464
starting receive base loop
Created 512 connections total
Creating worker on tid 2536239616
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575892246.890671,       0.0,      296966,     267395,      29571,     176104,      91291,   0.701365,   0.673100,   1.300000,   6.700000,   4.217826,   0.000000, 118.161999, 473.162871
Outstanding requests per worker:
5 4 6 5 4 6 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123090.5,      615453,     553669,      61784,     413133,     140536,   0.292432,   0.503100,   0.628100,   0.938100,   0.176128,   0.061000,   2.765000, 569.522039
Outstanding requests per worker:
6 4 4 3 4 4 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123090.9,      615455,     554090,      61365,     436996,     117094,   0.305653,   0.544100,   0.679100,   1.100000,   0.200609,   0.061000,   3.299000, 615.924283
Outstanding requests per worker:
2 4 5 3 5 6 7 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123083.3,      615417,     553521,      61896,     449070,     104451,   0.308254,   0.548100,   0.678100,   1.100000,   0.199025,   0.061000,   2.968000, 640.806647
Outstanding requests per worker:
3 4 6 4 5 5 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.1,      615426,     553687,      61739,     457039,      96648,   0.320081,   0.560100,   0.702100,   1.100000,   0.234214,   0.062000,   4.388000, 656.819423
Outstanding requests per worker:
4 5 5 3 5 7 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123088.5,      615443,     553743,      61700,     463799,      89944,   0.315740,   0.560100,   0.697100,   1.100000,   0.197719,   0.074000,   2.571000, 671.241850
Outstanding requests per worker:
5 5 5 5 5 7 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123081.5,      615408,     553737,      61671,     469101,      84636,   0.319475,   0.565100,   0.704100,   1.100000,   0.201350,   0.061000,   2.918000, 680.852468
Outstanding requests per worker:
8 8 5 7 4 9 4 9 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:24   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   11:24   0:00 /usr/lib/linux
memcache      7  266  0.0 425664 127744 pts/0   Sl+  11:24   2:05 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  11:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

         403875129      L1-dcache-load-misses:u   # [35m  10.87%[m of all L1-dcache hits  
        3717197501      L1-dcache-loads:u                                           
        1904196813      armv8_pmuv3_0/l2d_cache/:u                                   
         631316744      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      46.621163832 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 123000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 123000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 123000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3,4 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 123000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 123000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 123000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 123000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 123000 cpus 8
meanInterarrival 65
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1834676736
starting receive base loop
num_worker_connections 64
Creating worker on tid 1236988416
starting receive base loop
num_worker_connections 64
Creating worker on tid 641069568
starting receive base loop
num_worker_connections 64
Creating worker on tid 45150720
starting receive base loop
num_worker_connections 64
Creating worker on tid 3744199168
starting receive base loop
num_worker_connections 64
Creating worker on tid 3148280320
starting receive base loop
num_worker_connections 64
Creating worker on tid 2552361472
starting receive base loop
Created 512 connections total
Creating worker on tid 1956442624
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575892297.890722,       0.0,      299807,     269877,      29930,     177708,      92169,   0.601987,   0.555100,   0.798100,   2.200000,   4.520722,   0.000000, 126.840994, 473.857039
Outstanding requests per worker:
4 5 4 3 3 5 2 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123084.3,      615422,     554129,      61293,     413633,     140496,   0.310490,   0.551100,   0.679100,   0.958100,   0.183932,   0.074000,   2.703000, 570.083194
Outstanding requests per worker:
3 4 4 6 4 4 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123088.3,      615442,     553713,      61729,     435724,     117989,   0.331211,   0.603100,   0.750100,   1.200000,   0.216894,   0.062000,   3.029000, 614.423887
Outstanding requests per worker:
5 4 3 5 3 2 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123088.1,      615441,     554132,      61309,     448887,     105245,   0.377998,   0.647100,   0.872100,   1.600000,   0.462785,   0.060000,  14.603000, 640.149436
Outstanding requests per worker:
5 4 4 5 4 5 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123088.3,      615442,     553976,      61466,     456940,      97036,   0.360676,   0.673100,   0.842100,   1.400000,   0.253173,   0.077000,   2.973000, 656.232136
Outstanding requests per worker:
5 6 5 6 8 5 8 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123090.1,      615451,     553532,      61919,     463295,      90237,   0.372108,   0.688100,   0.888100,   1.500000,   0.271290,   0.061000,   3.562000, 669.174568
Outstanding requests per worker:
3 3 2 3 3 2 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123078.5,      615393,     554112,      61281,     468997,      85115,   0.361514,   0.678100,   0.873100,   1.400000,   0.246567,   0.076000,   2.454000, 680.507688
Outstanding requests per worker:
9 7 11 5 8 7 7 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:25   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   11:25   0:00 /usr/lib/linux
memcache      7  273  0.0 425664 121344 pts/0   Sl+  11:25   2:05 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  11:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

         399448125      L1-dcache-load-misses:u   # [35m  10.79%[m of all L1-dcache hits  
        3703460032      L1-dcache-loads:u                                           
        1881058259      armv8_pmuv3_0/l2d_cache/:u                                   
         623624409      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      46.650497334 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 123500 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 123500 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 123500 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3,4 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 123500 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 123500 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 123500 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 123500 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 123500 cpus 8
meanInterarrival 64
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2639262208
starting receive base loop
num_worker_connections 64
Creating worker on tid 2042294784
starting receive base loop
num_worker_connections 64
Creating worker on tid 1446375936
starting receive base loop
num_worker_connections 64
Creating worker on tid 850457088
starting receive base loop
num_worker_connections 64
Creating worker on tid 254538240
starting receive base loop
num_worker_connections 64
Creating worker on tid 3953586688
starting receive base loop
num_worker_connections 64
Creating worker on tid 3357667840
starting receive base loop
Created 512 connections total
Creating worker on tid 2761748992
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575892347.890772,       0.0,      301892,     271685,      30207,     179149,      92536,   0.835377,   1.100000,   2.000000,   5.300000,   5.208080,   0.000000, 138.914004, 474.530324
Outstanding requests per worker:
4 6 4 4 6 5 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125011.5,      625058,     562654,      62404,     419003,     143651,   0.359705,   0.672100,   0.856100,   1.400000,   0.246970,   0.074000,   2.857000, 568.449084
Outstanding requests per worker:
8 5 7 8 5 5 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125004.9,      625025,     562413,      62612,     442518,     119895,   0.433430,   0.754100,   1.100000,   2.200000,   0.687123,   0.074000,  21.281000, 614.426313
Outstanding requests per worker:
11 10 16 10 12 12 13 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125019.9,      625100,     562635,      62465,     455709,     106926,   0.411952,   0.777100,   1.100000,   1.800000,   0.356034,   0.077000,   7.137000, 639.834271
Outstanding requests per worker:
2 4 6 4 5 5 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125009.5,      625048,     562508,      62540,     464784,      97724,   0.416963,   0.778100,   1.100000,   2.000000,   0.358600,   0.073000,   4.647000, 657.930556
Outstanding requests per worker:
6 4 4 4 6 5 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125013.1,      625066,     562537,      62529,     471333,      91204,   0.448294,   0.863100,   1.200000,   2.100000,   0.410033,   0.077000,   6.501000, 670.723401
Outstanding requests per worker:
4 7 4 4 4 6 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125010.3,      625052,     562825,      62227,     476617,      86208,   0.417373,   0.790100,   1.100000,   1.800000,   0.339575,   0.076000,   5.348000, 680.649474
Outstanding requests per worker:
9 9 8 6 8 10 8 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:25   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   11:25   0:00 /usr/lib/linux
memcache      7  275  0.0 425664 128768 pts/0   Sl+  11:25   2:06 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  11:26   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

         403332838      L1-dcache-load-misses:u   # [35m  10.77%[m of all L1-dcache hits  
        3744197580      L1-dcache-loads:u                                           
        1891239089      armv8_pmuv3_0/l2d_cache/:u                                   
         634443855      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      46.502099797 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 124000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 124000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 124000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3,4 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 124000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 124000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 124000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 124000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 124000 cpus 8
meanInterarrival 64
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2271408640
starting receive base loop
num_worker_connections 64
Creating worker on tid 1679946240
starting receive base loop
num_worker_connections 64
Creating worker on tid 1084027392
starting receive base loop
num_worker_connections 64
Creating worker on tid 488108544
starting receive base loop
num_worker_connections 64
Creating worker on tid 4189778432
starting receive base loop
num_worker_connections 64
Creating worker on tid 3593859584
starting receive base loop
num_worker_connections 64
Creating worker on tid 2997940736
starting receive base loop
Created 512 connections total
Creating worker on tid 2402021888
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575892397.890822,       0.0,      301094,     270983,      30111,     179164,      91819,   1.189703,   1.400000,   2.700000,   8.400000,   7.206781,   0.000000, 158.124000, 475.251879
Outstanding requests per worker:
3 7 4 6 4 4 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125004.7,      625024,     562519,      62505,     420029,     142490,   0.403973,   0.753000,   1.100000,   1.900000,   0.338339,   0.061000,   4.193000, 570.024701
Outstanding requests per worker:
5 8 7 7 6 7 9 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125013.7,      625069,     562607,      62462,     443158,     119449,   0.416313,   0.799000,   1.100000,   1.800000,   0.328970,   0.058000,   4.525000, 615.371392
Outstanding requests per worker:
5 4 6 5 5 5 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125010.9,      625055,     562713,      62342,     456081,     106632,   0.422740,   0.813100,   1.100000,   1.600000,   0.318217,   0.076000,   3.755000, 640.405082
Outstanding requests per worker:
6 6 5 8 4 10 4 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125016.5,      625083,     562798,      62285,     465118,      97680,   0.448723,   0.871100,   1.200000,   2.000000,   0.370971,   0.078000,   4.706000, 658.517203
Outstanding requests per worker:
5 6 5 7 5 5 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.9,      625040,     562340,      62700,     471614,      90726,   0.455951,   0.871100,   1.200000,   2.000000,   0.371574,   0.061000,   4.894000, 671.931725
Outstanding requests per worker:
5 8 4 6 5 7 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125011.9,      625060,     562523,      62537,     476925,      85598,   0.479270,   0.938100,   1.300000,   2.200000,   0.408871,   0.076000,   5.085000, 682.224361
Outstanding requests per worker:
3 4 4 6 5 4 6 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:26   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   11:26   0:00 /usr/lib/linux
memcache      7  269  0.0 425664 126784 pts/0   Sl+  11:26   2:06 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  11:27   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

         399582176      L1-dcache-load-misses:u   # [35m  10.68%[m of all L1-dcache hits  
        3741127728      L1-dcache-loads:u                                           
        1875666832      armv8_pmuv3_0/l2d_cache/:u                                   
         615339390      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      46.871055420 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 124500 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 124500 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 124500 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3,4 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 124500 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 124500 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 124500 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 124500 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 124500 cpus 8
meanInterarrival 64
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2197025280
starting receive base loop
num_worker_connections 64
Creating worker on tid 1604776448
starting receive base loop
num_worker_connections 64
Creating worker on tid 1008857600
starting receive base loop
num_worker_connections 64
Creating worker on tid 412938752
starting receive base loop
num_worker_connections 64
Creating worker on tid 4111987200
starting receive base loop
num_worker_connections 64
Creating worker on tid 3518689792
starting receive base loop
num_worker_connections 64
Creating worker on tid 2922770944
starting receive base loop
Created 512 connections total
Creating worker on tid 2326852096
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575892448.890873,       0.0,      304804,     274264,      30540,     181308,      92956,   0.782211,   0.856100,   1.400000,   4.800000,   5.203028,   0.000000, 138.396993, 475.293320
Outstanding requests per worker:
6 4 7 4 5 5 5 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125008.1,      625041,     562783,      62258,     420758,     142025,   0.376072,   0.688100,   0.916100,   1.600000,   0.279589,   0.074000,   4.150000, 570.602259
Outstanding requests per worker:
9 6 4 6 5 8 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125015.3,      625077,     562463,      62614,     443429,     119034,   0.398108,   0.744100,   0.991100,   1.700000,   0.308009,   0.074000,   3.424000, 616.171289
Outstanding requests per worker:
6 4 5 6 6 7 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.3,      625037,     562537,      62500,     455341,     107196,   0.385411,   0.718100,   0.917100,   1.600000,   0.289712,   0.059000,   3.896000, 639.525125
Outstanding requests per worker:
5 5 4 5 4 4 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125009.7,      625049,     562299,      62750,     464617,      97682,   0.419402,   0.798100,   1.100000,   1.800000,   0.325940,   0.059000,   4.070000, 658.016121
Outstanding requests per worker:
5 6 5 5 4 4 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125003.5,      625018,     562342,      62676,     471197,      91145,   0.450910,   0.873100,   1.200000,   2.000000,   0.391500,   0.060000,   7.674000, 670.909496
Outstanding requests per worker:
6 7 5 7 6 7 10 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125011.7,      625059,     562521,      62538,     476776,      85745,   0.456970,   0.866100,   1.300000,   2.400000,   0.442181,   0.076000,   6.582000, 681.217124
Outstanding requests per worker:
4 5 4 4 5 6 5 8 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  11:27   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   11:27   0:00 /usr/lib/linux
memcache      7  275  0.0 426688 125760 pts/0   Sl+  11:27   2:06 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  11:28   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

         402309097      L1-dcache-load-misses:u   # [35m  10.72%[m of all L1-dcache hits  
        3752102161      L1-dcache-loads:u                                           
        1898861810      armv8_pmuv3_0/l2d_cache/:u                                   
         606441658      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      46.279591260 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 125000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 125000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3,4 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 125000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 125000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 125000 cpus 8
meanInterarrival 64
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1912271360
starting receive base loop
num_worker_connections 64
Creating worker on tid 1320219136
starting receive base loop
num_worker_connections 64
Creating worker on tid 724300288
starting receive base loop
num_worker_connections 64
Creating worker on tid 128381440
starting receive base loop
num_worker_connections 64
Creating worker on tid 3827429888
starting receive base loop
num_worker_connections 64
Creating worker on tid 3231511040
starting receive base loop
num_worker_connections 64
Creating worker on tid 2635592192
starting receive base loop
Created 512 connections total
Creating worker on tid 2042294784
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575892498.890923,       0.0,      298478,     268437,      30041,     177279,      91158,   1.163156,   2.100000,   3.900000,   7.800000,   6.011398,   0.000000, 149.985999, 474.401949
Outstanding requests per worker:
6 8 9 8 6 5 6 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125014.5,      625073,     562616,      62457,     419291,     143325,   0.405462,   0.754100,   1.100000,   1.800000,   0.325890,   0.074000,   4.904000, 568.489007
Outstanding requests per worker:
6 3 3 2 3 4 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125005.5,      625028,     562777,      62251,     442681,     120096,   0.430118,   0.819100,   1.100000,   1.900000,   0.338043,   0.073000,   3.624000, 614.199818
Outstanding requests per worker:
6 5 6 5 6 4 11 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125010.7,      625054,     562474,      62580,     455613,     106861,   0.455501,   0.871100,   1.300000,   2.300000,   0.435229,   0.061000,   7.101000, 639.612067
Outstanding requests per worker:
6 11 7 7 8 4 7 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125020.5,      625103,     562660,      62443,     464411,      98249,   0.458775,   0.878100,   1.300000,   2.200000,   0.402889,   0.061000,   5.345000, 656.668871
Outstanding requests per worker:
4 5 6 4 6 3 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.1,      625031,     562570,      62461,     471247,      91323,   0.507714,   1.100000,   1.400000,   2.600000,   0.480336,   0.075000,   6.181000, 670.451117
Outstanding requests per worker:
8 6 6 5 6 5 8 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125010.1,      625051,     562746,      62305,     477256,      85490,   0.474907,   0.933100,   1.300000,   2.100000,   0.390955,   0.073000,   5.605000, 681.790213
Outstanding requests per worker:
8 7 7 3 4 5 4 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:28   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   11:28   0:00 /usr/lib/linux
memcache      7  276  0.0 426688 130816 pts/0   Sl+  11:28   2:06 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  11:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

         396903089      L1-dcache-load-misses:u   # [35m  10.64%[m of all L1-dcache hits  
        3731255165      L1-dcache-loads:u                                           
        1877502058      armv8_pmuv3_0/l2d_cache/:u                                   
         637852897      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      46.911350625 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 125500 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 125500 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125500 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3,4 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 125500 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 125500 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125500 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125500 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 125500 cpus 8
meanInterarrival 63
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2623336960
starting receive base loop
num_worker_connections 64
Creating worker on tid 2031612416
starting receive base loop
num_worker_connections 64
Creating worker on tid 1438315008
starting receive base loop
num_worker_connections 64
Creating worker on tid 842396160
starting receive base loop
num_worker_connections 64
Creating worker on tid 246477312
starting receive base loop
num_worker_connections 64
Creating worker on tid 3945525760
starting receive base loop
num_worker_connections 64
Creating worker on tid 3349606912
starting receive base loop
Created 512 connections total
Creating worker on tid 2753688064
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575892548.890973,       0.0,      303859,     273615,      30244,     180273,      93342,   1.439320,   2.200000,   4.500000,  13.200000,   7.272692,   0.000000, 163.023993, 473.917165
Outstanding requests per worker:
13 12 17 10 12 11 13 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  127007.9,      635040,     571513,      63527,     426672,     144841,   0.525582,   1.100000,   1.500000,   2.800000,   0.516406,   0.058000,   6.397000, 570.909503
Outstanding requests per worker:
4 9 8 6 6 8 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126990.1,      634951,     571824,      63127,     450996,     120828,   0.590401,   1.300000,   1.800000,   3.100000,   0.582981,   0.060000,   6.372000, 615.720933
Outstanding requests per worker:
10 7 6 10 9 13 11 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126995.5,      634978,     571614,      63364,     463293,     108321,   0.631588,   1.400000,   1.900000,   3.300000,   0.613856,   0.060000,   7.292000, 640.682298
Outstanding requests per worker:
8 9 9 8 8 12 11 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126999.3,      634997,     571277,      63720,     471910,      99367,   0.561966,   1.200000,   1.600000,   2.500000,   0.476771,   0.075000,   4.634000, 657.909830
Outstanding requests per worker:
7 9 9 7 6 8 8 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126988.9,      634945,     571329,      63616,     478866,      92463,   0.775686,   1.800000,   2.700000,   4.600000,   0.886342,   0.073000,   8.918000, 671.415757
Outstanding requests per worker:
18 14 17 11 10 14 12 17 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  127005.3,      635027,     571650,      63377,     484508,      87142,   0.752321,   1.700000,   2.300000,   3.900000,   0.753448,   0.072000,   8.072000, 681.560271
Outstanding requests per worker:
7 6 6 7 6 7 6 8 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:29   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   11:29   0:00 /usr/lib/linux
memcache      7  272  0.0 427712 125504 pts/0   Sl+  11:29   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  11:30   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

         400395473      L1-dcache-load-misses:u   # [35m  10.56%[m of all L1-dcache hits  
        3792632410      L1-dcache-loads:u                                           
        1872016339      armv8_pmuv3_0/l2d_cache/:u                                   
         615820446      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      46.851184726 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 126000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 126000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 126000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3,4 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 126000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 126000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 126000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 126000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 126000 cpus 8
meanInterarrival 63
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2555572736
starting receive base loop
num_worker_connections 64
Creating worker on tid 1956442624
starting receive base loop
num_worker_connections 64
Creating worker on tid 1360523776
starting receive base loop
num_worker_connections 64
Creating worker on tid 767226368
starting receive base loop
num_worker_connections 64
Creating worker on tid 171307520
starting receive base loop
num_worker_connections 64
Creating worker on tid 3870355968
starting receive base loop
num_worker_connections 64
Creating worker on tid 3274437120
starting receive base loop
Created 512 connections total
Creating worker on tid 2678518272
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575892599.891024,       0.0,      303484,     273137,      30347,     180116,      93021,   1.343546,   2.700000,   4.500000,   9.700000,   6.536191,   0.000000, 161.138996, 474.116326
Outstanding requests per worker:
10 8 9 9 7 7 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126993.3,      634967,     572143,      62824,     427267,     144876,   0.516425,   1.100000,   1.400000,   2.400000,   0.580780,   0.074000,  19.754000, 570.078237
Outstanding requests per worker:
3 4 7 6 8 6 8 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126987.3,      634937,     571583,      63354,     451249,     120334,   0.577530,   1.300000,   1.700000,   2.700000,   0.528929,   0.077000,   5.460000, 616.943251
Outstanding requests per worker:
7 9 9 9 10 7 8 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126988.3,      634942,     571577,      63365,     463907,     107670,   0.621045,   1.400000,   1.800000,   2.700000,   0.547499,   0.077000,   5.066000, 641.362376
Outstanding requests per worker:
11 8 8 10 9 8 12 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126978.9,      634895,     571356,      63539,     473013,      98343,   0.705469,   1.600000,   2.200000,   3.400000,   0.687454,   0.073000,   7.606000, 658.561386
Outstanding requests per worker:
20 20 15 16 20 18 17 17 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  127005.7,      635029,     571509,      63520,     479535,      91974,   0.802809,   1.900000,   2.600000,   4.200000,   0.832593,   0.058000,   7.598000, 672.617086
Outstanding requests per worker:
9 11 10 7 5 11 7 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126978.3,      634892,     571502,      63390,     484703,      86799,   0.816270,   1.900000,   2.600000,   4.200000,   0.827616,   0.073000,   7.658000, 681.674930
Outstanding requests per worker:
17 17 21 16 19 17 15 19 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:30   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   11:30   0:00 /usr/lib/linux
memcache      7  278  0.0 426688 125504 pts/0   Sl+  11:30   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  11:30   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

         401166058      L1-dcache-load-misses:u   # [35m  10.61%[m of all L1-dcache hits  
        3782680794      L1-dcache-loads:u                                           
        1865127882      armv8_pmuv3_0/l2d_cache/:u                                   
         613849584      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      47.030156435 seconds time elapsed

