+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 120000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 120000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 120000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3,4 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 120000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 120000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 120000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 120000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 120000 cpus 8
meanInterarrival 66
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2075324928
starting receive base loop
num_worker_connections 64
Creating worker on tid 1478619648
starting receive base loop
num_worker_connections 64
Creating worker on tid 882700800
starting receive base loop
num_worker_connections 64
Creating worker on tid 286781952
starting receive base loop
num_worker_connections 64
Creating worker on tid 3988451840
starting receive base loop
num_worker_connections 64
Creating worker on tid 3392532992
starting receive base loop
num_worker_connections 64
Creating worker on tid 2796614144
starting receive base loop
Created 512 connections total
Creating worker on tid 2200695296
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575899917.898342,       0.0,      291780,     262618,      29162,     172900,      89718,   0.672611,   0.480100,   0.629100,   1.600000,   5.843627,   0.000000, 147.277996, 472.321794
Outstanding requests per worker:
5 2 4 5 5 3 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121220.7,      606104,     545730,      60374,     406286,     139444,   0.273913,   0.475100,   0.574100,   0.845100,   0.155086,   0.061000,   2.015000, 568.027585
Outstanding requests per worker:
2 3 3 2 2 2 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121220.9,      606105,     545788,      60317,     429165,     116623,   0.316096,   0.493100,   0.623100,   1.100000,   0.655843,   0.060000,  28.262001, 614.176301
Outstanding requests per worker:
3 2 2 2 3 3 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121215.5,      606078,     545531,      60547,     442073,     103458,   0.874443,   0.568100,   0.899100,  21.800000,   4.028815,   0.062000,  86.204000, 639.557834
Outstanding requests per worker:
3 5 5 3 5 4 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121219.1,      606096,     545250,      60846,     449732,      95518,   0.980800,   0.633100,   1.100000,  24.700000,   4.496089,   0.062000,  95.322996, 656.777713
Outstanding requests per worker:
3 4 4 4 3 6 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121215.3,      606077,     545807,      60270,     457006,      88801,   1.019839,   0.644100,   1.200000,  25.800000,   4.761771,   0.063000,  97.406000, 670.099607
Outstanding requests per worker:
6 7 5 6 7 6 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121226.1,      606131,     545804,      60327,     461393,      84411,   0.986470,   0.637100,   1.100000,  25.000000,   4.496913,   0.063000,  92.560001, 679.325698
Outstanding requests per worker:
1 4 3 2 3 2 4 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  13:32   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   13:32   0:00 /usr/lib/linux
memcache      7  265  0.0 423616 125760 pts/0   Sl+  13:32   2:04 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  13:32   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

         395714583      L1-dcache-load-misses:u   # [35m  10.76%[m of all L1-dcache hits  
        3679075585      L1-dcache-loads:u                                           
        1881640090      armv8_pmuv3_0/l2d_cache/:u                                   
         638395201      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      46.679511054 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 120500 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 120500 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 120500 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3,4 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 120500 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 120500 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 120500 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 120500 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 120500 cpus 8
meanInterarrival 66
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2023354880
starting receive base loop
num_worker_connections 64
Creating worker on tid 1427632640
starting receive base loop
num_worker_connections 64
Creating worker on tid 834335232
starting receive base loop
num_worker_connections 64
Creating worker on tid 238416384
starting receive base loop
num_worker_connections 64
Creating worker on tid 3937464832
starting receive base loop
num_worker_connections 64
Creating worker on tid 3341545984
starting receive base loop
num_worker_connections 64
Creating worker on tid 2745627136
starting receive base loop
Created 512 connections total
Creating worker on tid 2149708288
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575899968.898393,       0.0,      297503,     267907,      29596,     176844,      91063,   1.029181,   0.514100,   0.888100,  27.700000,   6.177201,   0.000000, 135.740995, 474.267436
Outstanding requests per worker:
4 4 5 4 4 3 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121218.9,      606095,     545479,      60616,     406240,     139239,   0.917217,   0.560100,   0.888100,  23.300000,   4.342344,   0.060000,  95.224999, 568.079946
Outstanding requests per worker:
4 4 4 3 4 5 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121220.5,      606103,     545344,      60759,     428453,     116891,   0.761249,   0.575100,   0.882100,  17.100000,   3.564292,   0.061000,  89.856997, 613.469014
Outstanding requests per worker:
2 5 3 3 3 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121220.1,      606101,     545444,      60657,     441344,     104100,   0.981866,   0.632100,   1.200000,  24.900000,   4.542771,   0.060000,  93.222998, 638.837496
Outstanding requests per worker:
3 2 4 3 3 3 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121220.3,      606102,     545500,      60602,     449678,      95822,   1.005446,   0.652100,   1.200000,  25.100000,   4.613721,   0.062000,  88.666998, 655.972455
Outstanding requests per worker:
3 5 7 5 3 5 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121217.1,      606086,     545567,      60519,     456161,      89406,   1.009719,   0.689100,   1.300000,  25.600000,   4.600673,   0.062000,  96.896999, 669.621694
Outstanding requests per worker:
7 5 5 6 5 4 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121222.3,      606112,     545643,      60469,     461749,      83894,   1.000112,   0.706100,   1.300000,  24.900000,   4.456554,   0.063000,  94.028004, 680.229579
Outstanding requests per worker:
4 3 3 4 3 3 4 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:32   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   13:32   0:00 /usr/lib/linux
memcache      7  272  0.0 424640 128576 pts/0   Sl+  13:32   2:05 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

         396592575      L1-dcache-load-misses:u   # [35m  10.79%[m of all L1-dcache hits  
        3674251969      L1-dcache-loads:u                                           
        1885580700      armv8_pmuv3_0/l2d_cache/:u                                   
         624826714      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      46.711535936 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 121000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 121000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 121000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3,4 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 121000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 121000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 121000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 121000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 121000 cpus 8
meanInterarrival 66
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2383475200
starting receive base loop
num_worker_connections 64
Creating worker on tid 1789981184
starting receive base loop
num_worker_connections 64
Creating worker on tid 1194062336
starting receive base loop
num_worker_connections 64
Creating worker on tid 598143488
starting receive base loop
num_worker_connections 64
Creating worker on tid 2224640
starting receive base loop
num_worker_connections 64
Creating worker on tid 3701273088
starting receive base loop
num_worker_connections 64
Creating worker on tid 3105354240
starting receive base loop
Created 512 connections total
Creating worker on tid 2512056832
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575900018.898443,       0.0,      289266,     260357,      28909,     170881,      89476,   0.651998,   0.438100,   0.567100,   1.200000,   5.587885,   0.000000, 141.822994, 471.279693
Outstanding requests per worker:
4 4 3 6 4 3 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121223.1,      606116,     546013,      60103,     405910,     140103,   0.455080,   0.479100,   0.616100,   3.600000,   2.268594,   0.058000,  75.286999, 565.935355
Outstanding requests per worker:
4 3 6 3 3 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121202.5,      606013,     545037,      60976,     427717,     117320,   0.866404,   0.563100,   0.897100,  21.400000,   3.958976,   0.061000,  80.567002, 612.166523
Outstanding requests per worker:
18 16 17 12 26 21 17 18 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121073.7,      605369,     544645,      60724,     440207,     104438,   0.940795,   0.571100,   0.981100,  23.800000,   4.270844,   0.061000,  86.125001, 637.788255
Outstanding requests per worker:
115 134 119 109 105 100 103 82 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121336.9,      606685,     545934,      60751,     449826,      96108,   1.056537,   0.627100,   1.200000,  27.300000,   4.774309,   0.061000,  90.318002, 655.583213
Outstanding requests per worker:
54 26 36 24 31 32 45 38 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121275.1,      606376,     545511,      60865,     455799,      89712,   0.979318,   0.613100,   1.100000,  25.000000,   4.502619,   0.059000,  92.188001, 668.259841
Outstanding requests per worker:
4 3 3 3 4 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121225.7,      606129,     545660,      60469,     461656,      84004,   0.954638,   0.578100,   0.978100,  24.500000,   4.410067,   0.062000,  92.643999, 679.241269
Outstanding requests per worker:
4 4 4 5 4 3 5 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  13:33   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   13:33   0:00 /usr/lib/linux
memcache      7  264  0.0 424640 129536 pts/0   Sl+  13:33   2:04 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

         396243703      L1-dcache-load-misses:u   # [35m  10.79%[m of all L1-dcache hits  
        3673428976      L1-dcache-loads:u                                           
        1891824061      armv8_pmuv3_0/l2d_cache/:u                                   
         637361330      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      46.511036298 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 121500 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 121500 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 121500 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3,4 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 121500 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 121500 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 121500 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 121500 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 121500 cpus 8
meanInterarrival 65
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2430661120
starting receive base loop
num_worker_connections 64
Creating worker on tid 1838346752
starting receive base loop
num_worker_connections 64
Creating worker on tid 1245049344
starting receive base loop
num_worker_connections 64
Creating worker on tid 649130496
starting receive base loop
num_worker_connections 64
Creating worker on tid 53211648
starting receive base loop
num_worker_connections 64
Creating worker on tid 3752260096
starting receive base loop
num_worker_connections 64
Creating worker on tid 3156341248
starting receive base loop
Created 512 connections total
Creating worker on tid 2560422400
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575900069.898494,       0.0,      298966,     268901,      30065,     177154,      91747,   1.948195,   0.756100,   8.000000,  46.700000,   8.808915,   0.000000, 145.168006, 473.715200
Outstanding requests per worker:
20 21 24 22 31 27 23 24 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123121.3,      615607,     554444,      61163,     412973,     141471,   1.009476,   0.628100,   1.200000,  25.200000,   4.639171,   0.061000,  93.575001, 568.298705
Outstanding requests per worker:
7 4 3 8 6 6 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123076.3,      615382,     553853,      61529,     435423,     118430,   1.043503,   0.693100,   1.300000,  25.900000,   4.669890,   0.061000,  93.587004, 613.733406
Outstanding requests per worker:
16 7 13 11 11 5 10 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123095.1,      615476,     554078,      61398,     448520,     105558,   1.039802,   0.743100,   1.400000,  25.600000,   4.638067,   0.062000,  93.515001, 639.292009
Outstanding requests per worker:
4 3 5 4 4 4 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123091.1,      615456,     553935,      61521,     456674,      97261,   1.047584,   0.695100,   1.300000,  25.900000,   4.733469,   0.061000, 101.686999, 656.214444
Outstanding requests per worker:
4 3 3 3 3 3 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.5,      615428,     553714,      61714,     463773,      89941,   0.800895,   0.695100,   1.100000,  17.700000,   3.671674,   0.061000,  90.928003, 670.172797
Outstanding requests per worker:
6 8 6 6 9 8 6 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123090.9,      615455,     554163,      61292,     469017,      85146,   1.025313,   0.754100,   1.300000,  24.700000,   4.517268,   0.061000,  89.089997, 679.487815
Outstanding requests per worker:
3 2 3 2 2 2 3 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:34   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   13:34   0:00 /usr/lib/linux
memcache      7  267  0.0 425664 126528 pts/0   Sl+  13:34   2:05 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:35   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

         403220038      L1-dcache-load-misses:u   # [35m  10.86%[m of all L1-dcache hits  
        3714591849      L1-dcache-loads:u                                           
        1889223618      armv8_pmuv3_0/l2d_cache/:u                                   
         637294204      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      46.810136884 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 122000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 122000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 122000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3,4 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 122000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 122000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 122000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 122000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 122000 cpus 8
meanInterarrival 65
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2499932672
starting receive base loop
num_worker_connections 64
Creating worker on tid 1908077056
starting receive base loop
num_worker_connections 64
Creating worker on tid 1312158208
starting receive base loop
num_worker_connections 64
Creating worker on tid 716239360
starting receive base loop
num_worker_connections 64
Creating worker on tid 120320512
starting receive base loop
num_worker_connections 64
Creating worker on tid 3819368960
starting receive base loop
num_worker_connections 64
Creating worker on tid 3223450112
starting receive base loop
Created 512 connections total
Creating worker on tid 2627531264
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575900119.898544,       0.0,      295576,     265906,      29670,     176042,      89864,   1.223308,   0.689100,   1.600000,  29.900000,   7.164381,   0.000000, 154.991999, 476.881609
Outstanding requests per worker:
6 4 4 3 6 4 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123089.1,      615446,     553917,      61529,     412676,     141241,   0.964795,   0.673100,   1.300000,  23.700000,   4.338183,   0.062000,  92.684999, 568.597985
Outstanding requests per worker:
5 4 5 4 2 4 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123091.9,      615460,     554054,      61406,     435896,     118158,   1.005555,   0.689100,   1.200000,  25.000000,   4.562728,   0.061000,  95.785998, 614.536850
Outstanding requests per worker:
5 3 4 4 3 4 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123081.7,      615409,     553870,      61539,     448479,     105391,   1.097067,   0.749100,   1.300000,  27.400000,   4.949962,   0.060000,  94.154999, 639.939856
Outstanding requests per worker:
5 3 4 5 6 4 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123084.7,      615424,     553801,      61623,     456442,      97359,   1.113610,   0.763100,   1.400000,  27.800000,   5.009239,   0.062000, 108.670004, 655.590116
Outstanding requests per worker:
9 4 4 4 6 5 9 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123074.3,      615372,     553680,      61692,     463303,      90377,   0.608151,   0.705100,   0.972100,   5.800000,   2.820985,   0.061000,  91.058001, 669.456298
Outstanding requests per worker:
11 14 12 12 9 14 14 16 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123103.9,      615520,     553515,      62005,     468803,      84712,   1.106721,   0.757100,   1.600000,  26.800000,   4.902796,   0.061000, 103.312999, 681.112440
Outstanding requests per worker:
3 5 5 5 4 2 4 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:35   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   13:35   0:00 /usr/lib/linux
memcache      7  273  0.0 425664 126976 pts/0   Sl+  13:35   2:05 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:36   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

         399677806      L1-dcache-load-misses:u   # [35m  10.75%[m of all L1-dcache hits  
        3716599070      L1-dcache-loads:u                                           
        1881434969      armv8_pmuv3_0/l2d_cache/:u                                   
         623405064      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      46.609922871 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 122500 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 122500 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 122500 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3,4 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 122500 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 122500 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 122500 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 122500 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 122500 cpus 8
meanInterarrival 65
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2466181632
starting receive base loop
num_worker_connections 64
Creating worker on tid 1873211904
starting receive base loop
num_worker_connections 64
Creating worker on tid 1277293056
starting receive base loop
num_worker_connections 64
Creating worker on tid 681374208
starting receive base loop
num_worker_connections 64
Creating worker on tid 85455360
starting receive base loop
num_worker_connections 64
Creating worker on tid 3787125248
starting receive base loop
num_worker_connections 64
Creating worker on tid 3191206400
starting receive base loop
Created 512 connections total
Creating worker on tid 2595287552
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575900169.898594,       0.0,      295402,     265863,      29539,     175617,      90246,   0.608394,   0.575100,   0.837100,   2.400000,   4.293557,   0.000000, 118.003003, 476.307196
Outstanding requests per worker:
3 3 3 4 4 3 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.3,      615412,     554055,      61357,     412515,     141540,   0.609196,   0.612100,   0.827100,  10.400000,   2.780716,   0.060000,  87.672003, 567.943192
Outstanding requests per worker:
6 3 6 5 4 4 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123081.3,      615407,     553579,      61828,     435904,     117675,   0.311401,   0.555100,   0.687100,   1.100000,   0.191562,   0.059000,   3.009000, 615.554318
Outstanding requests per worker:
6 3 6 9 4 5 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123083.5,      615418,     553695,      61723,     448356,     105339,   0.321005,   0.567100,   0.738000,   1.100000,   0.205247,   0.059000,   2.645000, 640.272329
Outstanding requests per worker:
4 7 5 4 3 4 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123077.9,      615390,     553793,      61597,     456997,      96796,   0.340633,   0.616100,   0.772100,   1.300000,   0.251967,   0.060000,   4.460000, 657.121018
Outstanding requests per worker:
11 5 6 9 8 8 6 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123094.7,      615474,     554197,      61277,     463910,      90287,   0.362172,   0.640100,   0.872100,   1.600000,   0.325610,   0.059000,   9.577000, 669.731444
Outstanding requests per worker:
5 4 6 7 4 5 3 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123087.9,      615440,     553785,      61655,     469255,      84530,   0.358903,   0.632100,   0.838100,   1.700000,   0.302094,   0.058000,   4.401000, 680.660319
Outstanding requests per worker:
5 5 3 4 6 5 3 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:36   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   13:36   0:00 /usr/lib/linux
memcache      7  267  0.0 425664 125376 pts/0   Sl+  13:36   2:05 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

         401695234      L1-dcache-load-misses:u   # [35m  10.85%[m of all L1-dcache hits  
        3702816644      L1-dcache-loads:u                                           
        1893781533      armv8_pmuv3_0/l2d_cache/:u                                   
         625034542      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      46.841509975 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 123000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 123000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 123000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3,4 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 123000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 123000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 123000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 123000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 123000 cpus 8
meanInterarrival 65
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2406937088
starting receive base loop
num_worker_connections 64
Creating worker on tid 1814163968
starting receive base loop
num_worker_connections 64
Creating worker on tid 1218245120
starting receive base loop
num_worker_connections 64
Creating worker on tid 622326272
starting receive base loop
num_worker_connections 64
Creating worker on tid 29028864
starting receive base loop
num_worker_connections 64
Creating worker on tid 3728077312
starting receive base loop
num_worker_connections 64
Creating worker on tid 3132158464
starting receive base loop
Created 512 connections total
Creating worker on tid 2536239616
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575900220.898645,       0.0,      297541,     267980,      29561,     175814,      92166,   0.937369,   0.568100,   1.100000,   7.200000,   7.377833,   0.000000, 175.016001, 471.535111
Outstanding requests per worker:
6 6 6 9 7 8 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123095.1,      615476,     554117,      61359,     413648,     140469,   0.296092,   0.506100,   0.631000,   0.941100,   0.178218,   0.062000,   2.691000, 569.805364
Outstanding requests per worker:
4 5 6 6 3 4 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123083.7,      615419,     553816,      61603,     436177,     117639,   0.318197,   0.561100,   0.709100,   1.200000,   0.214698,   0.078000,   2.773000, 615.624650
Outstanding requests per worker:
5 5 5 5 3 7 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123087.3,      615437,     553911,      61526,     448856,     105055,   0.326356,   0.572100,   0.742100,   1.200000,   0.225388,   0.061000,   4.576000, 640.669528
Outstanding requests per worker:
4 4 4 5 4 4 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123089.5,      615448,     553711,      61737,     457138,      96573,   0.325067,   0.582100,   0.745100,   1.100000,   0.207371,   0.062000,   2.693000, 657.440826
Outstanding requests per worker:
3 4 4 5 5 4 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123079.5,      615398,     553691,      61707,     463617,      90074,   0.330871,   0.576100,   0.747100,   1.200000,   0.231635,   0.060000,   3.551000, 670.502018
Outstanding requests per worker:
11 12 11 10 14 14 12 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123092.9,      615465,     553848,      61617,     468702,      85146,   0.339649,   0.616100,   0.777100,   1.300000,   0.247089,   0.061000,   4.705000, 679.059623
Outstanding requests per worker:
5 5 7 6 6 6 4 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:37   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   13:37   0:00 /usr/lib/linux
memcache      7  272  0.0 424640 127744 pts/0   Sl+  13:37   2:05 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

         400142277      L1-dcache-load-misses:u   # [35m  10.78%[m of all L1-dcache hits  
        3713341102      L1-dcache-loads:u                                           
        1901666351      armv8_pmuv3_0/l2d_cache/:u                                   
         615585489      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      46.551278541 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 123500 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 123500 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 123500 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3,4 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 123500 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 123500 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 123500 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 123500 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 123500 cpus 8
meanInterarrival 64
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2275602944
starting receive base loop
num_worker_connections 64
Creating worker on tid 1679946240
starting receive base loop
num_worker_connections 64
Creating worker on tid 1084027392
starting receive base loop
num_worker_connections 64
Creating worker on tid 488108544
starting receive base loop
num_worker_connections 64
Creating worker on tid 4189778432
starting receive base loop
num_worker_connections 64
Creating worker on tid 3593859584
starting receive base loop
num_worker_connections 64
Creating worker on tid 2997940736
starting receive base loop
Created 512 connections total
Creating worker on tid 2402021888
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575900270.898695,       0.0,      300443,     270492,      29951,     178667,      91825,   0.959580,   1.200000,   3.200000,   8.000000,   5.118994,   0.000000, 132.632002, 475.549081
Outstanding requests per worker:
7 5 5 5 6 6 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.3,      625037,     562557,      62480,     419886,     142671,   0.400398,   0.753000,   1.100000,   1.700000,   0.311053,   0.074000,   3.236000, 569.325850
Outstanding requests per worker:
8 8 8 8 6 9 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125009.3,      625047,     562807,      62240,     443142,     119665,   0.431411,   0.846100,   1.200000,   1.900000,   0.353682,   0.075000,   4.179000, 615.341566
Outstanding requests per worker:
6 7 5 6 4 9 9 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125013.7,      625069,     562720,      62349,     456672,     106048,   0.459619,   0.888100,   1.200000,   2.100000,   0.385303,   0.061000,   5.557000, 641.280864
Outstanding requests per worker:
7 6 4 7 7 4 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125010.9,      625055,     562525,      62530,     463861,      98664,   0.486279,   0.952100,   1.400000,   2.300000,   0.436843,   0.060000,   5.984000, 656.474699
Outstanding requests per worker:
10 9 10 9 9 8 10 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125008.7,      625044,     562621,      62423,     471500,      91121,   0.442108,   0.863100,   1.200000,   1.900000,   0.346493,   0.077000,   3.890000, 671.005695
Outstanding requests per worker:
10 7 8 7 9 9 8 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125011.3,      625057,     562416,      62641,     476308,      86108,   0.466225,   0.887100,   1.200000,   2.300000,   0.413291,   0.061000,   5.078000, 680.590467
Outstanding requests per worker:
10 10 8 8 7 8 7 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:37   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   13:37   0:00 /usr/lib/linux
memcache      7  270  0.0 426688 124096 pts/0   Sl+  13:37   2:06 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

         398908030      L1-dcache-load-misses:u   # [35m  10.67%[m of all L1-dcache hits  
        3738942469      L1-dcache-loads:u                                           
        1877420480      armv8_pmuv3_0/l2d_cache/:u                                   
         605318414      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      46.869552170 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 124000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 124000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 124000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3,4 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 124000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 124000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 124000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 124000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 124000 cpus 8
meanInterarrival 64
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1698886144
starting receive base loop
num_worker_connections 64
Creating worker on tid 1102770688
starting receive base loop
num_worker_connections 64
Creating worker on tid 506851840
starting receive base loop
num_worker_connections 64
Creating worker on tid 4205900288
starting receive base loop
num_worker_connections 64
Creating worker on tid 3609981440
starting receive base loop
num_worker_connections 64
Creating worker on tid 3014062592
starting receive base loop
num_worker_connections 64
Creating worker on tid 2418143744
starting receive base loop
Created 512 connections total
Creating worker on tid 1822224896
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575900320.898745,       0.0,      301076,     270944,      30132,     178800,      92144,   0.601168,   0.686100,   1.100000,   3.800000,   3.581246,   0.000000, 105.230004, 474.659251
Outstanding requests per worker:
4 5 7 3 6 4 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  124998.9,      624995,     562586,      62409,     420336,     142250,   0.359422,   0.659100,   0.862100,   1.600000,   0.277316,   0.059000,   3.626000, 569.828622
Outstanding requests per worker:
9 8 7 9 10 12 8 15 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.7,      625039,     562714,      62325,     443580,     119134,   0.374900,   0.686100,   0.890100,   1.500000,   0.276104,   0.075000,   3.449000, 616.065961
Outstanding requests per worker:
11 8 8 5 12 6 7 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125011.3,      625057,     562449,      62608,     455757,     106692,   0.408831,   0.754100,   1.100000,   1.900000,   0.355311,   0.076000,   5.753000, 640.464369
Outstanding requests per worker:
5 6 3 6 7 3 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.5,      625038,     562715,      62323,     465020,      97695,   0.412650,   0.788100,   1.100000,   1.800000,   0.356930,   0.076000,   6.515000, 657.389465
Outstanding requests per worker:
4 7 5 6 6 4 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.9,      625035,     562368,      62667,     470988,      91380,   0.425452,   0.800100,   1.100000,   2.000000,   0.376704,   0.058000,   5.976000, 670.377585
Outstanding requests per worker:
7 3 5 2 6 6 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125005.9,      625030,     562741,      62289,     477168,      85573,   0.442500,   0.859100,   1.200000,   2.300000,   0.405392,   0.075000,   5.094000, 681.230376
Outstanding requests per worker:
5 7 6 8 4 4 6 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:38   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   13:38   0:00 /usr/lib/linux
memcache      7  274  0.0 426688 127744 pts/0   Sl+  13:38   2:06 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:39   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

         402798410      L1-dcache-load-misses:u   # [35m  10.75%[m of all L1-dcache hits  
        3746407813      L1-dcache-loads:u                                           
        1896583076      armv8_pmuv3_0/l2d_cache/:u                                   
         624820098      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      46.431027418 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 124500 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 124500 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 124500 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3,4 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 124500 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 124500 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 124500 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 124500 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 124500 cpus 8
meanInterarrival 64
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1796665856
starting receive base loop
num_worker_connections 64
Creating worker on tid 1202123264
starting receive base loop
num_worker_connections 64
Creating worker on tid 606204416
starting receive base loop
num_worker_connections 64
Creating worker on tid 10285568
starting receive base loop
num_worker_connections 64
Creating worker on tid 3709334016
starting receive base loop
num_worker_connections 64
Creating worker on tid 3116036608
starting receive base loop
num_worker_connections 64
Creating worker on tid 2520117760
starting receive base loop
Created 512 connections total
Creating worker on tid 1924198912
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575900371.898796,       0.0,      301785,     271769,      30016,     179412,      92357,   0.874998,   1.100000,   2.400000,   5.800000,   5.376834,   0.000000, 140.439004, 474.921047
Outstanding requests per worker:
4 6 5 5 8 4 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125015.7,      625079,     562842,      62237,     420156,     142686,   0.374025,   0.687100,   0.917100,   1.500000,   0.271649,   0.061000,   3.483000, 570.364132
Outstanding requests per worker:
2 3 4 3 4 4 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125013.9,      625070,     562707,      62363,     442380,     120327,   0.374313,   0.684100,   0.878100,   1.500000,   0.271486,   0.074000,   3.576000, 613.718116
Outstanding requests per worker:
6 5 4 5 6 5 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.1,      625036,     562457,      62579,     455301,     107156,   0.400714,   0.745100,   0.952100,   1.600000,   0.302451,   0.072000,   4.591000, 639.245809
Outstanding requests per worker:
4 4 6 5 5 6 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125010.7,      625054,     562896,      62158,     464822,      98074,   0.469321,   0.912100,   1.300000,   2.500000,   0.436250,   0.075000,   4.595000, 657.287412
Outstanding requests per worker:
5 2 6 3 5 5 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125010.7,      625054,     562586,      62468,     471062,      91524,   0.436995,   0.825100,   1.200000,   1.900000,   0.358343,   0.061000,   4.199000, 670.492239
Outstanding requests per worker:
5 6 5 5 4 5 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125013.5,      625068,     562499,      62569,     476438,      86061,   0.496375,   0.990100,   1.500000,   2.700000,   0.474933,   0.076000,   4.922000, 680.759079
Outstanding requests per worker:
3 7 5 6 4 5 7 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:39   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   13:39   0:00 /usr/lib/linux
memcache      7  275  0.0 426688 125696 pts/0   Sl+  13:39   2:06 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:40   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

         401740092      L1-dcache-load-misses:u   # [35m  10.72%[m of all L1-dcache hits  
        3747751758      L1-dcache-loads:u                                           
        1888124663      armv8_pmuv3_0/l2d_cache/:u                                   
         610767315      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      46.961735076 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 125000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 125000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3,4 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 125000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 125000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 125000 cpus 8
meanInterarrival 64
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2216751616
starting receive base loop
num_worker_connections 64
Creating worker on tid 1620898304
starting receive base loop
num_worker_connections 64
Creating worker on tid 1024979456
starting receive base loop
num_worker_connections 64
Creating worker on tid 431682048
starting receive base loop
num_worker_connections 64
Creating worker on tid 4130730496
starting receive base loop
num_worker_connections 64
Creating worker on tid 3534811648
starting receive base loop
num_worker_connections 64
Creating worker on tid 2938892800
starting receive base loop
Created 512 connections total
Creating worker on tid 2342973952
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575900421.898846,       0.0,      299694,     269565,      30129,     178136,      91429,   1.009695,   1.100000,   2.900000,   9.500000,   6.121047,   0.000000, 154.254004, 474.968126
Outstanding requests per worker:
6 5 5 7 4 4 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125009.3,      625047,     562873,      62174,     420744,     142129,   0.403705,   0.747100,   1.100000,   2.000000,   0.351990,   0.076000,   4.499000, 571.009844
Outstanding requests per worker:
4 4 4 6 4 6 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125005.5,      625028,     562656,      62372,     443263,     119393,   0.448809,   0.868100,   1.300000,   2.300000,   0.410981,   0.060000,   5.421000, 615.336220
Outstanding requests per worker:
8 8 11 12 9 8 6 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125018.9,      625095,     562258,      62837,     456213,     106045,   0.493793,   0.946100,   1.400000,   2.500000,   0.589526,   0.075000,  17.065000, 641.481322
Outstanding requests per worker:
5 6 6 5 5 4 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125003.9,      625020,     562745,      62275,     464981,      97764,   0.479017,   0.933100,   1.300000,   2.400000,   0.430807,   0.075000,   5.671000, 657.593686
Outstanding requests per worker:
5 9 6 7 5 5 9 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125009.9,      625050,     562608,      62442,     471599,      91009,   0.663219,   1.200000,   1.800000,   4.300000,   1.355407,   0.061000,  35.253000, 670.876834
Outstanding requests per worker:
5 5 4 5 6 7 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125009.9,      625050,     562482,      62568,     477000,      85482,   0.535407,   1.100000,   1.500000,   2.600000,   0.496574,   0.074000,   5.674000, 681.401867
Outstanding requests per worker:
7 4 5 5 7 7 8 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:40   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   13:40   0:00 /usr/lib/linux
memcache      7  276  0.0 426688 124928 pts/0   Sl+  13:40   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

         403733458      L1-dcache-load-misses:u   # [35m  10.81%[m of all L1-dcache hits  
        3734681347      L1-dcache-loads:u                                           
        1882150813      armv8_pmuv3_0/l2d_cache/:u                                   
         631328021      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      46.521518432 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 125500 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 125500 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125500 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3,4 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 125500 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 125500 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125500 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125500 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 125500 cpus 8
meanInterarrival 63
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2635198976
starting receive base loop
num_worker_connections 64
Creating worker on tid 2042294784
starting receive base loop
num_worker_connections 64
Creating worker on tid 1446375936
starting receive base loop
num_worker_connections 64
Creating worker on tid 850457088
starting receive base loop
num_worker_connections 64
Creating worker on tid 254538240
starting receive base loop
num_worker_connections 64
Creating worker on tid 3953586688
starting receive base loop
num_worker_connections 64
Creating worker on tid 3357667840
starting receive base loop
Created 512 connections total
Creating worker on tid 2761748992
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575900472.898897,       0.0,      304597,     274325,      30272,     181465,      92860,   1.268289,   2.400000,   4.800000,  11.100000,   5.104705,   0.000000, 128.863007, 476.317390
Outstanding requests per worker:
6 10 6 10 6 7 7 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126991.7,      634959,     571231,      63728,     427015,     144216,   0.636150,   1.400000,   2.000000,   3.200000,   0.617825,   0.073000,   5.870000, 571.171712
Outstanding requests per worker:
9 6 4 9 5 5 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126982.5,      634913,     571805,      63108,     450199,     121606,   0.716611,   1.700000,   2.300000,   3.600000,   0.711906,   0.074000,   6.961000, 614.934373
Outstanding requests per worker:
11 8 13 9 14 10 14 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126989.3,      634947,     571355,      63592,     462876,     108479,   0.819760,   2.000000,   2.700000,   4.100000,   0.842588,   0.072000,   7.839000, 639.715247
Outstanding requests per worker:
14 13 11 12 12 12 12 16 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126991.3,      634957,     571393,      63564,     471910,      99483,   0.869311,   2.100000,   2.900000,   4.400000,   0.909127,   0.076000,   7.644000, 657.885268
Outstanding requests per worker:
7 16 10 9 14 13 11 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126987.3,      634937,     571386,      63551,     479014,      92372,   0.892179,   2.100000,   2.900000,   4.500000,   0.917147,   0.075000,   8.848000, 671.041252
Outstanding requests per worker:
11 14 15 16 16 14 12 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126976.7,      634884,     571292,      63592,     484504,      86788,   0.864996,   2.000000,   2.900000,   4.800000,   0.924356,   0.073000,   8.476000, 681.827577
Outstanding requests per worker:
21 21 22 26 28 26 17 17 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:41   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   13:41   0:00 /usr/lib/linux
memcache      7  278  0.0 426688 130944 pts/0   Sl+  13:41   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

         405267844      L1-dcache-load-misses:u   # [35m  10.73%[m of all L1-dcache hits  
        3778571730      L1-dcache-loads:u                                           
        1854937857      armv8_pmuv3_0/l2d_cache/:u                                   
         607683862      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      46.550516437 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 126000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 126000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 126000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3,4 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 126000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 126000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 126000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 126000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 126000 cpus 8
meanInterarrival 63
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1897067008
starting receive base loop
num_worker_connections 64
Creating worker on tid 1304097280
starting receive base loop
num_worker_connections 64
Creating worker on tid 708178432
starting receive base loop
num_worker_connections 64
Creating worker on tid 112259584
starting receive base loop
num_worker_connections 64
Creating worker on tid 3811308032
starting receive base loop
num_worker_connections 64
Creating worker on tid 3215389184
starting receive base loop
num_worker_connections 64
Creating worker on tid 2619470336
starting receive base loop
Created 512 connections total
Creating worker on tid 2023551488
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575900522.898947,       0.0,      305238,     274856,      30382,     181255,      93601,   1.168529,   2.500000,   4.500000,   8.000000,   4.793758,   0.000000, 128.051996, 474.091990
Outstanding requests per worker:
9 6 6 6 4 6 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126991.3,      634957,     571572,      63385,     427288,     144284,   0.479516,   0.926100,   1.400000,   2.500000,   0.446604,   0.075000,   6.273000, 571.148443
Outstanding requests per worker:
8 6 5 9 10 7 7 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126991.7,      634959,     571393,      63566,     450041,     121352,   0.499599,   0.991100,   1.400000,   2.200000,   0.424816,   0.061000,   4.383000, 615.655551
Outstanding requests per worker:
13 10 11 9 10 10 8 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  127003.7,      635019,     571383,      63636,     464057,     107326,   0.598716,   1.300000,   1.800000,   2.900000,   0.548656,   0.060000,   4.558000, 641.604194
Outstanding requests per worker:
7 8 8 7 10 6 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126988.1,      634941,     571860,      63081,     472891,      98969,   0.640881,   1.400000,   1.900000,   3.100000,   0.598155,   0.070000,   6.420000, 658.806250
Outstanding requests per worker:
11 11 10 11 7 11 11 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126995.5,      634978,     571743,      63235,     479688,      92055,   0.696337,   1.600000,   2.200000,   3.300000,   0.665135,   0.075000,   5.585000, 671.890584
Outstanding requests per worker:
10 8 10 8 10 8 11 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126996.5,      634983,     571222,      63761,     484886,      86336,   0.744439,   1.700000,   2.300000,   3.700000,   0.722370,   0.070000,   6.505000, 682.845680
Outstanding requests per worker:
12 10 10 10 5 7 12 8 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:42   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   13:42   0:00 /usr/lib/linux
memcache      7  271  0.0 428736 129792 pts/0   Sl+  13:42   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

         402529140      L1-dcache-load-misses:u   # [35m  10.63%[m of all L1-dcache hits  
        3788369234      L1-dcache-loads:u                                           
        1878288219      armv8_pmuv3_0/l2d_cache/:u                                   
         626057052      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      46.950763840 seconds time elapsed

