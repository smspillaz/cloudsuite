+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 30000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 30000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 30000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 30000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 30000 cpus 8
meanInterarrival 266
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1927279104
starting receive base loop
num_worker_connections 64
Creating worker on tid 1328280064
starting receive base loop
num_worker_connections 64
Creating worker on tid 732361216
starting receive base loop
num_worker_connections 64
Creating worker on tid 136442368
starting receive base loop
num_worker_connections 64
Creating worker on tid 3835490816
starting receive base loop
num_worker_connections 64
Creating worker on tid 3239571968
starting receive base loop
num_worker_connections 64
Creating worker on tid 2646274560
starting receive base loop
Created 512 connections total
Creating worker on tid 2050355712
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575897932.896357,       0.0,       91206,      82008,       9198,      49646,      32362,   1.582059,   4.600000,   7.100000,  10.300000,   7.452298,   0.000000, 180.060998, 414.864343
Outstanding requests per worker:
0 1 0 1 0 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.6,      150388,     135429,      14959,      91157,      44272,   0.167979,   0.327000,   0.383100,   0.476100,   0.102649,   0.067000,   1.093000, 488.672692
Outstanding requests per worker:
1 0 0 0 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.2,      150386,     135266,      15120,      96272,      38994,   0.168706,   0.328100,   0.383100,   0.466100,   0.100128,   0.067000,   0.913000, 530.511666
Outstanding requests per worker:
1 1 1 1 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.4,      150387,     135412,      14975,      99071,      36341,   0.169897,   0.327000,   0.380100,   0.461100,   0.101510,   0.066000,   1.143000, 553.215779
Outstanding requests per worker:
1 0 0 1 0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30079.4,      150397,     135449,      14948,     101493,      33956,   0.174004,   0.336100,   0.389100,   0.475100,   0.104868,   0.067000,   1.132000, 572.641112
Outstanding requests per worker:
0 1 1 1 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.8,      150384,     135537,      14847,     103050,      32487,   0.172734,   0.328100,   0.379100,   0.473100,   0.104808,   0.066000,   1.258000, 586.289648
Outstanding requests per worker:
0 1 1 1 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.4,      150387,     135422,      14965,     104273,      31149,   0.172797,   0.330100,   0.385100,   0.458100,   0.098904,   0.067000,   0.777000, 594.393326
Outstanding requests per worker:
0 1 0 1 0 0 1 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:58   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   12:59   0:00 /usr/lib/linux
memcache     11 67.6  0.0 129472 52224 pts/0    Sl+  12:59   0:32 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  12:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

          97802127      L1-dcache-load-misses:u   # [35m  10.40%[m of all L1-dcache hits  
         939976376      L1-dcache-loads:u                                           
         492725729      armv8_pmuv3_0/l2d_cache/:u                                   
         160364641      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      47.620250597 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 30500 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 30500 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30500 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 30500 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 30500 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30500 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30500 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 30500 cpus 8
meanInterarrival 262
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2385048064
starting receive base loop
num_worker_connections 64
Creating worker on tid 1789981184
starting receive base loop
num_worker_connections 64
Creating worker on tid 1194062336
starting receive base loop
num_worker_connections 64
Creating worker on tid 598143488
starting receive base loop
num_worker_connections 64
Creating worker on tid 2224640
starting receive base loop
num_worker_connections 64
Creating worker on tid 3701273088
starting receive base loop
num_worker_connections 64
Creating worker on tid 3105354240
starting receive base loop
Created 512 connections total
Creating worker on tid 2512056832
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575897983.896408,       0.0,       92703,      83355,       9348,      50539,      32816,   6.362956,  15.900000,  17.900000,  19.700000,   8.599918,   0.000000, 150.242999, 414.837202
Outstanding requests per worker:
22 22 23 23 25 20 25 23 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30574.2,      152871,     137659,      15212,      93180,      44479,   0.311857,   0.453100,   0.577100,   5.400000,   0.772801,   0.061000,   8.427000, 493.793628
Outstanding requests per worker:
1 0 1 0 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.0,      152680,     137506,      15174,      97595,      39911,   0.191246,   0.403100,   0.480100,   0.598100,   0.130473,   0.067000,   1.137000, 530.982961
Outstanding requests per worker:
1 0 1 0 0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30535.6,      152678,     137518,      15160,     101056,      36462,   0.193394,   0.402100,   0.477100,   0.590100,   0.126903,   0.067000,   1.233000, 557.457606
Outstanding requests per worker:
1 0 1 0 1 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30538.2,      152691,     137455,      15236,     102990,      34465,   0.197292,   0.415100,   0.489100,   0.604100,   0.132320,   0.061000,   1.089000, 573.102623
Outstanding requests per worker:
1 0 0 0 0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30537.8,      152689,     137428,      15261,     104935,      32493,   0.200789,   0.420100,   0.495100,   0.611100,   0.134751,   0.068000,   1.114000, 588.168736
Outstanding requests per worker:
0 0 0 1 0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.0,      152680,     137464,      15216,     106197,      31267,   0.202388,   0.419100,   0.494100,   0.612100,   0.140260,   0.067000,   1.528000, 598.053818
Outstanding requests per worker:
1 0 0 1 0 1 1 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  12:59   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   12:59   0:00 /usr/lib/linux
memcache     10 68.1  0.0 130496 53568 pts/0    Sl+  12:59   0:32 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:00   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

          97725297      L1-dcache-load-misses:u   # [35m  10.45%[m of all L1-dcache hits  
         934888162      L1-dcache-loads:u                                           
         482314424      armv8_pmuv3_0/l2d_cache/:u                                   
         157444334      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      47.430617700 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 31000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 31000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 31000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 31000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 31000 cpus 8
meanInterarrival 258
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1900605952
starting receive base loop
num_worker_connections 64
Creating worker on tid 1304097280
starting receive base loop
num_worker_connections 64
Creating worker on tid 708178432
starting receive base loop
num_worker_connections 64
Creating worker on tid 112259584
starting receive base loop
num_worker_connections 64
Creating worker on tid 3811308032
starting receive base loop
num_worker_connections 64
Creating worker on tid 3215389184
starting receive base loop
num_worker_connections 64
Creating worker on tid 2619470336
starting receive base loop
Created 512 connections total
Creating worker on tid 2023551488
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575898034.896459,       0.0,       95955,      86280,       9675,      52064,      34216,   7.908910,  21.100000,  24.600000,  27.800000,  10.009723,   0.000000, 179.033995, 413.914441
Outstanding requests per worker:
40 29 34 38 36 32 38 34 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31064.8,      155324,     139639,      15685,      94597,      45042,   0.671226,   0.485100,   4.100000,  10.800000,   1.825272,   0.068000,  14.225000, 494.116751
Outstanding requests per worker:
1 2 0 1 1 1 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.6,      155053,     139551,      15502,      99507,      40044,   0.226826,   0.390100,   0.439100,   0.558100,   0.111008,   0.065000,   1.183000, 533.537610
Outstanding requests per worker:
0 1 1 0 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31011.6,      155058,     139593,      15465,     102860,      36733,   0.234902,   0.397100,   0.446100,   0.566100,   0.116042,   0.066000,   1.225000, 558.614092
Outstanding requests per worker:
0 1 1 1 1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.6,      155048,     139511,      15537,     104562,      34949,   0.235976,   0.398100,   0.446100,   0.562000,   0.114679,   0.068000,   1.127000, 573.769402
Outstanding requests per worker:
0 1 0 1 1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.2,      155051,     139485,      15566,     106492,      32993,   0.242531,   0.408100,   0.455100,   0.575100,   0.122308,   0.067000,   1.241000, 589.474503
Outstanding requests per worker:
0 0 0 1 1 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.4,      155052,     139608,      15444,     108107,      31501,   0.244358,   0.406100,   0.455100,   0.586100,   0.130136,   0.068000,   1.483000, 600.417340
Outstanding requests per worker:
1 1 1 0 0 0 1 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:00   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   13:00   0:00 /usr/lib/linux
memcache      9 67.9  0.0 129472 54272 pts/0    Sl+  13:00   0:32 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:01   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

          97078715      L1-dcache-load-misses:u   # [35m  10.48%[m of all L1-dcache hits  
         926014319      L1-dcache-loads:u                                           
         472398007      armv8_pmuv3_0/l2d_cache/:u                                   
         161768016      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      47.651522115 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 31500 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 31500 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31500 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 31500 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 31500 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31500 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31500 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 31500 cpus 8
meanInterarrival 253
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2426139136
starting receive base loop
num_worker_connections 64
Creating worker on tid 1830285824
starting receive base loop
num_worker_connections 64
Creating worker on tid 1236988416
starting receive base loop
num_worker_connections 64
Creating worker on tid 641069568
starting receive base loop
num_worker_connections 64
Creating worker on tid 45150720
starting receive base loop
num_worker_connections 64
Creating worker on tid 3744199168
starting receive base loop
num_worker_connections 64
Creating worker on tid 3148280320
starting receive base loop
Created 512 connections total
Creating worker on tid 2552361472
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575898085.896510,       0.0,       94846,      85412,       9434,      52161,      33251,  10.345568,  27.300000,  31.600000,  35.700000,  12.668138,   0.000000, 194.839001, 419.825844
Outstanding requests per worker:
57 63 57 52 65 50 47 54 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31710.0,      158550,     142694,      15856,      96907,      45787,   2.538086,  10.300000,  15.800000,  22.100000,   5.163673,   0.070000,  25.673000, 495.235266
Outstanding requests per worker:
1 1 0 0 1 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31623.0,      158115,     142174,      15941,     101779,      40395,   0.251223,   0.393100,   0.436100,   0.575100,   0.112880,   0.069000,   1.078000, 535.567980
Outstanding requests per worker:
0 1 0 1 1 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31622.0,      158110,     142267,      15843,     104899,      37368,   0.283422,   0.437100,   0.497100,   0.707100,   0.135363,   0.071000,   1.312000, 559.457288
Outstanding requests per worker:
1 2 1 1 1 2 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31622.4,      158112,     142456,      15656,     107153,      35303,   0.284298,   0.421100,   0.470100,   0.973100,   0.149378,   0.068000,   1.583000, 575.802437
Outstanding requests per worker:
1 0 1 0 1 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31622.0,      158110,     142389,      15721,     108737,      33652,   0.304242,   0.439100,   0.500100,   1.400000,   0.190269,   0.068000,   1.983000, 587.637416
Outstanding requests per worker:
1 1 1 0 0 1 2 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31623.0,      158115,     142471,      15644,     110424,      32047,   0.352959,   0.478100,   0.593000,   2.100000,   0.297076,   0.067000,   2.568000, 600.732668
Outstanding requests per worker:
1 0 2 1 1 1 1 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:01   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   13:01   0:00 /usr/lib/linux
memcache      8 68.4  0.0 130496 55360 pts/0    Sl+  13:01   0:32 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  13:02   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

          97347728      L1-dcache-load-misses:u   # [35m  10.42%[m of all L1-dcache hits  
         933976127      L1-dcache-loads:u                                           
         467322263      armv8_pmuv3_0/l2d_cache/:u                                   
         156950297      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      47.700317925 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 32000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 32000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 32000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 32000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 32000 cpus 8
meanInterarrival 250
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2445472256
starting receive base loop
num_worker_connections 64
Creating worker on tid 1849029120
starting receive base loop
num_worker_connections 64
Creating worker on tid 1253110272
starting receive base loop
num_worker_connections 64
Creating worker on tid 657191424
starting receive base loop
num_worker_connections 64
Creating worker on tid 61272576
starting receive base loop
num_worker_connections 64
Creating worker on tid 3760321024
starting receive base loop
num_worker_connections 64
Creating worker on tid 3164402176
starting receive base loop
Created 512 connections total
Creating worker on tid 2568483328
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575898136.896561,       0.0,       96631,      86948,       9683,      53112,      33836,  11.310437,  30.100000,  34.400000,  40.200000,  13.723690,   0.000000, 191.686004, 417.777189
Outstanding requests per worker:
54 59 58 61 65 56 54 64 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32094.0,      160470,     144429,      16041,      97762,      46667,   3.001468,  11.300000,  17.600000,  24.200000,   5.654571,   0.071000,  28.317001, 494.748956
Outstanding requests per worker:
1 1 1 1 2 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.8,      160009,     143918,      16091,     103114,      40804,   0.366180,   0.539000,   0.611100,   1.300000,   0.182781,   0.071000,   1.871000, 538.259168
Outstanding requests per worker:
2 1 2 1 1 2 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32003.0,      160015,     143993,      16022,     106022,      37971,   0.389065,   0.574100,   0.676100,   1.200000,   0.179383,   0.073000,   1.562000, 559.734057
Outstanding requests per worker:
1 1 1 1 2 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.2,      160011,     144002,      16009,     108589,      35413,   0.404743,   0.594100,   0.670100,   0.823100,   0.145730,   0.069000,   1.100000, 577.712837
Outstanding requests per worker:
3 2 3 2 2 2 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.0,      160010,     144166,      15844,     110269,      33897,   0.455923,   0.668100,   0.811100,   1.500000,   0.215798,   0.070000,   2.058000, 590.089203
Outstanding requests per worker:
3 2 3 1 2 2 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.8,      160014,     143843,      16171,     111804,      32039,   0.581636,   0.906100,   1.500000,   2.400000,   0.403245,   0.068000,   2.992000, 603.249605
Outstanding requests per worker:
1 2 2 1 1 1 2 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:02   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   13:02   0:00 /usr/lib/linux
memcache      9 68.5  0.0 131520 55424 pts/0    Sl+  13:02   0:32 memcached -t 1
memcache     18  1.0  0.0   6656  4352 pts/1    Rs+  13:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

          96409957      L1-dcache-load-misses:u   # [35m  10.32%[m of all L1-dcache hits  
         933963047      L1-dcache-loads:u                                           
         460731730      armv8_pmuv3_0/l2d_cache/:u                                   
         150022614      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      47.440973080 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 32500 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 32500 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32500 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 32500 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 32500 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32500 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32500 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 32500 cpus 8
meanInterarrival 246
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2302996992
starting receive base loop
num_worker_connections 64
Creating worker on tid 1706750464
starting receive base loop
num_worker_connections 64
Creating worker on tid 1110831616
starting receive base loop
num_worker_connections 64
Creating worker on tid 514912768
starting receive base loop
num_worker_connections 64
Creating worker on tid 4213961216
starting receive base loop
num_worker_connections 64
Creating worker on tid 3618042368
starting receive base loop
num_worker_connections 64
Creating worker on tid 3022123520
starting receive base loop
Created 512 connections total
Creating worker on tid 2426204672
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575898187.896612,       0.0,       97773,      87994,       9779,      53198,      34796,  12.118074,  32.500000,  38.000000,  43.900000,  13.943666,   0.000000, 173.807994, 417.094995
Outstanding requests per worker:
56 73 68 67 56 63 69 59 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32558.4,      162792,     146433,      16359,      99679,      46754,  10.965426,  17.500000,  20.700000,  27.500000,   6.145817,   0.105000,  30.108999, 496.853100
Outstanding requests per worker:
45 43 41 30 40 53 40 41 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32517.0,      162585,     146181,      16404,     104791,      41390,  11.237632,  18.800000,  19.600000,  20.800000,   6.011628,   0.105000,  22.305001, 537.530794
Outstanding requests per worker:
45 52 41 48 46 48 39 44 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32511.4,      162557,     146400,      16157,     108081,      38319,  12.297531,  20.900000,  21.800000,  22.800000,   6.723744,   0.105000,  24.506999, 560.277637
Outstanding requests per worker:
43 50 52 54 53 54 59 51 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32521.0,      162605,     146286,      16319,     110201,      36085,  12.576591,  21.400000,  22.100000,  23.100000,   6.885861,   0.110000,  25.519000, 577.026175
Outstanding requests per worker:
60 54 57 43 54 53 47 59 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32526.0,      162630,     146294,      16336,     112026,      34268,  12.655271,  21.800000,  22.500000,  23.700000,   6.978745,   0.107000,  25.388001, 590.675619
Outstanding requests per worker:
50 58 55 50 44 54 47 55 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32523.0,      162615,     146399,      16216,     113680,      32719,  13.009612,  22.600000,  23.200000,  24.200000,   7.229104,   0.107000,  27.224001, 603.743496
Outstanding requests per worker:
48 51 41 57 54 59 58 54 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:03   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   13:03   0:00 /usr/lib/linux
memcache     10 70.2  0.0 131520 55552 pts/0    Sl+  13:03   0:33 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:04   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

          90109437      L1-dcache-load-misses:u   # [33m   9.09%[m of all L1-dcache hits  
         991784076      L1-dcache-loads:u                                           
         418906259      armv8_pmuv3_0/l2d_cache/:u                                   
         124516026      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      47.490561928 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 33000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 33000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 33000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 33000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 33000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 33000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 33000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 33000 cpus 8
meanInterarrival 242
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2068181504
starting receive base loop
num_worker_connections 64
Creating worker on tid 1470558720
starting receive base loop
num_worker_connections 64
Creating worker on tid 874639872
starting receive base loop
num_worker_connections 64
Creating worker on tid 278721024
starting receive base loop
num_worker_connections 64
Creating worker on tid 3977769472
starting receive base loop
num_worker_connections 64
Creating worker on tid 3384472064
starting receive base loop
num_worker_connections 64
Creating worker on tid 2788553216
starting receive base loop
Created 512 connections total
Creating worker on tid 2192634368
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575898238.896663,       0.0,       99687,      89807,       9880,      55029,      34778,  15.806924,  38.900000,  49.400000,  67.800000,  24.409185,   0.000000, 660.717010, 422.869108
Outstanding requests per worker:
74 86 70 81 65 71 68 74 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33081.8,      165409,     149086,      16323,     101746,      47340,  14.544459,  25.800000,  26.800000,  31.800000,   8.401318,   0.103000,  37.461001, 500.312726
Outstanding requests per worker:
62 58 61 58 62 64 67 53 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33061.0,      165305,     148736,      16569,     107005,      41731,  14.726527,  26.600000,  27.500000,  28.700000,   8.475577,   0.106000,  30.800000, 540.599438
Outstanding requests per worker:
59 66 62 54 58 68 63 57 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33058.4,      165292,     148937,      16355,     110664,      38273,  15.033692,  27.400000,  28.200000,  29.500000,   8.697897,   0.106000,  32.258999, 566.066813
Outstanding requests per worker:
66 60 51 70 63 64 66 60 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33059.4,      165297,     148726,      16571,     112840,      35886,  15.279873,  28.000000,  28.900000,  30.100000,   8.872090,   0.114000,  32.311000, 582.844829
Outstanding requests per worker:
58 56 59 65 68 69 59 69 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33062.8,      165314,     148838,      16476,     114369,      34469,  15.347226,  28.200000,  29.100000,  30.200000,   8.902409,   0.113000,  32.375999, 593.954125
Outstanding requests per worker:
56 63 57 64 68 60 65 60 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33055.4,      165277,     148876,      16401,     115974,      32902,  15.499780,  28.500000,  29.500000,  30.800000,   9.048256,   0.120000,  33.982001, 605.566807
Outstanding requests per worker:
62 65 65 58 62 74 67 57 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:04   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   13:04   0:00 /usr/lib/linux
memcache      9 69.0  0.0 130496 56000 pts/0    Sl+  13:04   0:33 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  13:04   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

          88706859      L1-dcache-load-misses:u   # [33m   8.71%[m of all L1-dcache hits  
        1018261103      L1-dcache-loads:u                                           
         416162939      armv8_pmuv3_0/l2d_cache/:u                                   
         120414567      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      47.760435115 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 33500 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 33500 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 33500 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 33500 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 33500 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 33500 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 33500 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 33500 cpus 8
meanInterarrival 238
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1705898496
starting receive base loop
num_worker_connections 64
Creating worker on tid 1110831616
starting receive base loop
num_worker_connections 64
Creating worker on tid 514912768
starting receive base loop
num_worker_connections 64
Creating worker on tid 4213961216
starting receive base loop
num_worker_connections 64
Creating worker on tid 3618042368
starting receive base loop
num_worker_connections 64
Creating worker on tid 3022123520
starting receive base loop
num_worker_connections 64
Creating worker on tid 2426204672
starting receive base loop
Created 512 connections total
Creating worker on tid 1830285824
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575898290.896715,       0.0,      105232,      94726,      10506,      57691,      37035,  16.613258,  42.700000,  53.700000,  73.000000,  26.322263,   0.000000, 692.871988, 419.968509
Outstanding requests per worker:
79 87 84 76 86 91 82 79 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33646.4,      168232,     151443,      16789,     103078,      48365,  15.819221,  28.900000,  30.100000,  34.800000,   9.351231,   0.099000,  43.214001, 497.370047
Outstanding requests per worker:
65 62 68 63 64 77 59 53 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33609.8,      168049,     151481,      16568,     108542,      42939,  15.846184,  29.500000,  30.500000,  31.900000,   9.310782,   0.104000,  34.154002, 536.918709
Outstanding requests per worker:
59 71 69 68 72 67 72 64 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33613.0,      168065,     151083,      16982,     111777,      39306,  16.168564,  30.300000,  31.300000,  32.700000,   9.518639,   0.100000,  35.211999, 561.929727
Outstanding requests per worker:
71 81 67 68 78 68 61 72 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33619.6,      168098,     151284,      16814,     114591,      36693,  16.478393,  31.000000,  32.000000,  33.400000,   9.762459,   0.113000,  36.936000, 581.640636
Outstanding requests per worker:
69 72 72 65 72 77 60 69 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33613.6,      168068,     151286,      16782,     116151,      35135,  16.661214,  31.400000,  32.600000,  34.200000,   9.895299,   0.107000,  37.303999, 593.345319
Outstanding requests per worker:
71 75 69 61 66 71 80 74 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33619.0,      168095,     151460,      16635,     117923,      33537,  16.788987,  31.800000,  32.900000,  34.400000,   9.984809,   0.118000,  36.784001, 604.709540
Outstanding requests per worker:
56 80 73 70 70 65 66 73 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:04   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   13:04   0:00 /usr/lib/linux
memcache     10 70.8  0.0 132544 58240 pts/0    Sl+  13:04   0:33 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:05   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

          90789297      L1-dcache-load-misses:u   # [33m   8.72%[m of all L1-dcache hits  
        1041233570      L1-dcache-loads:u                                           
         421777540      armv8_pmuv3_0/l2d_cache/:u                                   
         119682682      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      47.690789800 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 34000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 34000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 34000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 34000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 34000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 34000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 34000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 34000 cpus 8
meanInterarrival 235
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1988096512
starting receive base loop
num_worker_connections 64
Creating worker on tid 1395388928
starting receive base loop
num_worker_connections 64
Creating worker on tid 799470080
starting receive base loop
num_worker_connections 64
Creating worker on tid 203551232
starting receive base loop
num_worker_connections 64
Creating worker on tid 3902599680
starting receive base loop
num_worker_connections 64
Creating worker on tid 3306680832
starting receive base loop
num_worker_connections 64
Creating worker on tid 2713383424
starting receive base loop
Created 512 connections total
Creating worker on tid 2117464576
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575898341.896766,       0.0,      102519,      92234,      10285,      56077,      36157,  18.799897,  46.800000,  59.400000,  82.600000,  28.726920,   0.000000, 702.705026, 417.138431
Outstanding requests per worker:
88 105 102 110 75 98 84 90 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34083.6,      170418,     153406,      17012,     104379,      49027,  16.793545,  30.900000,  32.300000,  40.400000,  10.121660,   0.114000,  48.932001, 496.270550
Outstanding requests per worker:
59 89 67 64 79 70 59 73 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34045.8,      170229,     153121,      17108,     109529,      43592,  16.572675,  31.300000,  32.500000,  34.100000,   9.873091,   0.113000,  36.756001, 536.296674
Outstanding requests per worker:
70 70 61 74 67 67 74 72 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34043.6,      170218,     153294,      16924,     113471,      39823,  17.062965,  32.700000,  33.800000,  35.400000,  10.240862,   0.097000,  39.193001, 562.303397
Outstanding requests per worker:
69 66 70 73 63 72 72 76 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34044.4,      170222,     153192,      17030,     115806,      37386,  17.050647,  32.600000,  33.700000,  35.100000,  10.222266,   0.108000,  38.134001, 580.233870
Outstanding requests per worker:
75 75 60 73 77 66 76 68 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34038.4,      170192,     153056,      17136,     117621,      35435,  17.536316,  33.600000,  35.000000,  36.800000,  10.527661,   0.094000,  41.056000, 594.379377
Outstanding requests per worker:
82 74 84 78 73 68 83 59 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34044.6,      170223,     153157,      17066,     119043,      34114,  17.758025,  34.100000,  35.400000,  37.500000,  10.686260,   0.103000,  41.336000, 605.064966
Outstanding requests per worker:
77 78 79 84 73 68 66 78 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:05   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   13:05   0:00 /usr/lib/linux
memcache      8 69.1  0.0 133568 57536 pts/0    Sl+  13:05   0:33 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  13:06   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

          90464099      L1-dcache-load-misses:u   # [33m   8.58%[m of all L1-dcache hits  
        1053968462      L1-dcache-loads:u                                           
         423090672      armv8_pmuv3_0/l2d_cache/:u                                   
         122374731      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      47.780159315 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 34500 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 34500 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 34500 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 34500 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 34500 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 34500 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 34500 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 34500 cpus 8
meanInterarrival 231
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2117661184
starting receive base loop
num_worker_connections 64
Creating worker on tid 1521545728
starting receive base loop
num_worker_connections 64
Creating worker on tid 925626880
starting receive base loop
num_worker_connections 64
Creating worker on tid 329708032
starting receive base loop
num_worker_connections 64
Creating worker on tid 4028756480
starting receive base loop
num_worker_connections 64
Creating worker on tid 3432837632
starting receive base loop
num_worker_connections 64
Creating worker on tid 2836918784
starting receive base loop
Created 512 connections total
Creating worker on tid 2243621376
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575898392.896817,       0.0,      102764,      92320,      10444,      56435,      35885,  31.913942,  59.600000,  83.100000, 450.200000,  93.071315,   0.000000, 1647.415042, 423.000477
Outstanding requests per worker:
155 129 175 163 185 167 171 170 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34765.0,      173825,     156322,      17503,     106379,      49943,  20.002363,  37.200000,  39.600000,  59.300000,  13.433252,   0.102000, 392.268002, 497.938883
Outstanding requests per worker:
84 90 88 83 79 81 82 76 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34632.6,      173163,     155618,      17545,     111879,      43739,  19.175468,  37.900000,  39.600000,  41.400000,  11.764615,   0.101000,  45.244999, 539.825412
Outstanding requests per worker:
71 82 95 90 90 83 87 73 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34635.0,      173175,     155994,      17181,     115819,      40175,  19.701569,  39.200000,  41.200000,  43.100000,  12.136697,   0.122000,  45.522999, 564.134377
Outstanding requests per worker:
95 74 77 91 72 95 78 91 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34625.8,      173129,     155788,      17341,     117896,      37892,  20.039717,  40.100000,  42.000000,  44.100000,  12.400422,   0.100000,  46.542998, 581.541178
Outstanding requests per worker:
73 91 96 102 78 93 94 94 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34638.2,      173191,     156078,      17113,     120158,      35920,  20.476049,  41.000000,  43.100000,  45.600000,  12.709488,   0.115000,  53.091001, 595.592620
Outstanding requests per worker:
101 91 89 83 76 101 83 85 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34632.2,      173161,     155899,      17262,     121335,      34564,  20.597296,  41.100000,  43.400000,  46.300000,  12.808180,   0.106000,  55.486999, 604.562691
Outstanding requests per worker:
84 96 89 77 97 93 100 82 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:06   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   13:06   0:00 /usr/lib/linux
memcache      8 69.2  0.0 133568 60032 pts/0    Sl+  13:06   0:33 memcached -t 1
memcache     16  0.0  0.0   6656  4416 pts/1    Rs+  13:07   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

          89359241      L1-dcache-load-misses:u   # [33m   8.28%[m of all L1-dcache hits  
        1079437952      L1-dcache-loads:u                                           
         423899350      armv8_pmuv3_0/l2d_cache/:u                                   
         120109479      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      47.970126501 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 35000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 35000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 35000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 35000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 35000 cpus 8
meanInterarrival 228
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2439377408
starting receive base loop
num_worker_connections 64
Creating worker on tid 1840968192
starting receive base loop
num_worker_connections 64
Creating worker on tid 1245049344
starting receive base loop
num_worker_connections 64
Creating worker on tid 649130496
starting receive base loop
num_worker_connections 64
Creating worker on tid 53211648
starting receive base loop
num_worker_connections 64
Creating worker on tid 3752260096
starting receive base loop
num_worker_connections 64
Creating worker on tid 3156341248
starting receive base loop
Created 512 connections total
Creating worker on tid 2560422400
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575898444.896869,       0.0,      106681,      96057,      10624,      58424,      37633,  27.135627,  59.800000,  80.600000, 131.500000,  58.610154,   0.000000, 1233.299017, 418.710557
Outstanding requests per worker:
143 130 148 138 149 113 132 139 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35171.0,      175855,     158343,      17512,     107970,      50373,  20.480941,  39.900000,  42.000000,  54.600000,  13.146812,   0.120000,  83.076000, 498.823434
Outstanding requests per worker:
77 95 94 82 103 81 77 90 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35089.4,      175447,     157942,      17505,     113621,      44321,  20.343305,  40.800000,  43.100000,  45.300000,  12.678833,   0.107000,  47.965001, 538.212458
Outstanding requests per worker:
81 77 99 93 81 99 86 82 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35081.0,      175405,     157843,      17562,     116716,      41127,  21.027549,  42.600000,  45.000000,  47.600000,  13.153369,   0.096000,  50.223999, 563.502943
Outstanding requests per worker:
95 87 95 88 89 110 96 87 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35094.6,      175473,     158019,      17454,     119768,      38251,  21.522412,  43.800000,  46.400000,  49.000000,  13.514314,   0.107000,  53.268000, 582.456148
Outstanding requests per worker:
89 88 82 107 94 94 90 83 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35081.4,      175407,     157852,      17555,     121751,      36101,  22.034496,  45.000000,  47.800000,  50.500000,  13.868133,   0.105000,  53.615000, 596.613549
Outstanding requests per worker:
99 104 98 85 112 90 102 86 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35093.0,      175465,     157894,      17571,     123138,      34756,  22.266678,  45.400000,  48.300000,  51.100000,  14.029426,   0.120000,  54.678001, 605.987454
Outstanding requests per worker:
91 91 97 96 101 87 97 103 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:07   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   13:07   0:00 /usr/lib/linux
memcache      9 70.5  0.0 133568 60352 pts/0    Sl+  13:07   0:33 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  13:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

          89284422      L1-dcache-load-misses:u   # [33m   8.14%[m of all L1-dcache hits  
        1097006314      L1-dcache-loads:u                                           
         423327779      armv8_pmuv3_0/l2d_cache/:u                                   
         119401208      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      47.760012357 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 35500 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 35500 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35500 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 35500 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 35500 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35500 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35500 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 35500 cpus 8
meanInterarrival 225
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2618356224
starting receive base loop
num_worker_connections 64
Creating worker on tid 2023551488
starting receive base loop
num_worker_connections 64
Creating worker on tid 1427632640
starting receive base loop
num_worker_connections 64
Creating worker on tid 834335232
starting receive base loop
num_worker_connections 64
Creating worker on tid 238416384
starting receive base loop
num_worker_connections 64
Creating worker on tid 3937464832
starting receive base loop
num_worker_connections 64
Creating worker on tid 3341545984
starting receive base loop
Created 512 connections total
Creating worker on tid 2745627136
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575898495.896920,       0.0,      109348,      98282,      11066,      59923,      38359,  34.080107,  61.100000,  84.300000, 525.800000, 109.553116,   0.000000, 1885.880947, 419.706783
Outstanding requests per worker:
186 187 181 202 243 169 184 535 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35780.2,      178901,     161094,      17807,     110062,      51032,  24.977115,  46.000000,  49.500000,  81.000000,  37.211862,   0.107000, 1549.240947, 502.157554
Outstanding requests per worker:
96 101 104 94 91 95 104 88 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35550.2,      177751,     159868,      17883,     114985,      44883,  22.401607,  45.800000,  48.700000,  52.300000,  14.142379,   0.111000,  59.301000, 541.696043
Outstanding requests per worker:
102 96 109 99 106 107 89 103 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35550.0,      177750,     159864,      17886,     118626,      41238,  23.394366,  48.000000,  51.500000,  56.600000,  14.921300,   0.112000,  63.569002, 565.291191
Outstanding requests per worker:
104 104 107 108 106 103 110 106 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35545.2,      177726,     160192,      17534,     121617,      38575,  24.283371,  50.100000,  54.500000,  58.000000,  15.527000,   0.111000,  64.769000, 584.334368
Outstanding requests per worker:
109 116 107 111 119 107 116 121 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35552.8,      177764,     159903,      17861,     123404,      36499,  25.076206,  51.900000,  57.100000,  59.900000,  16.111237,   0.121000,  63.970000, 598.219239
Outstanding requests per worker:
119 117 114 112 127 112 111 121 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35554.8,      177774,     159919,      17855,     124845,      35074,  25.648236,  53.100000,  58.500000,  62.700000,  16.519393,   0.109000,  66.699997, 607.765019
Outstanding requests per worker:
104 123 117 135 118 115 106 139 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:08   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   13:08   0:00 /usr/lib/linux
memcache      9 69.3  0.0 134592 58560 pts/0    Sl+  13:08   0:33 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  13:09   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

          90152336      L1-dcache-load-misses:u   # [33m   8.06%[m of all L1-dcache hits  
        1119174355      L1-dcache-loads:u                                           
         427437968      armv8_pmuv3_0/l2d_cache/:u                                   
         122886058      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      47.730383824 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 36000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 36000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 36000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 36000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 36000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 36000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 36000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 36000 cpus 8
meanInterarrival 222
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1611985408
starting receive base loop
num_worker_connections 64
Creating worker on tid 1016918528
starting receive base loop
num_worker_connections 64
Creating worker on tid 420999680
starting receive base loop
num_worker_connections 64
Creating worker on tid 4122669568
starting receive base loop
num_worker_connections 64
Creating worker on tid 3526750720
starting receive base loop
num_worker_connections 64
Creating worker on tid 2930831872
starting receive base loop
num_worker_connections 64
Creating worker on tid 2334913024
starting receive base loop
Created 512 connections total
Creating worker on tid 1738994176
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575898547.896972,       0.0,      109286,      98228,      11058,      60157,      38071,  34.127860,  55.600000,  79.000000, 632.600000, 116.512851,   0.000000, 1946.552992, 422.142536
Outstanding requests per worker:
192 174 168 153 170 171 173 1895 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36467.8,      182339,     164149,      18190,     112160,      51989,  44.735863,  61.400000,  70.100000, 539.500000, 141.795293,   0.124000, 2546.411037, 500.424736
Outstanding requests per worker:
118 119 121 121 113 127 119 112 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36033.6,      180168,     161984,      18184,     116966,      45018,  27.323154,  56.600000,  63.900000,  68.200000,  17.769667,   0.123000,  72.350003, 543.591521
Outstanding requests per worker:
117 115 117 122 136 125 120 129 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36033.2,      180166,     162331,      17835,     120905,      41426,  27.944428,  57.500000,  65.500000,  69.900000,  18.139974,   0.107000,  72.901003, 567.494533
Outstanding requests per worker:
123 132 120 126 116 127 144 129 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36029.2,      180146,     162083,      18063,     122974,      39109,  28.648799,  59.000000,  67.800000,  73.000000,  18.707325,   0.106000,  76.738998, 583.330429
Outstanding requests per worker:
151 148 130 128 115 146 102 142 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36038.8,      180194,     162024,      18170,     125293,      36731,  29.269518,  60.200000,  69.300000,  74.900000,  19.139822,   0.106000,  80.691002, 598.551782
Outstanding requests per worker:
141 134 117 143 132 138 115 140 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36023.6,      180118,     162110,      18008,     126763,      35347,  30.601045,  62.000000,  71.600000,  82.700000,  20.383694,   0.125000, 116.922997, 608.873493
Outstanding requests per worker:
145 137 158 123 155 127 150 147 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:09   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   13:09   0:00 /usr/lib/linux
memcache     10 71.0  0.0 134592 61824 pts/0    Sl+  13:09   0:33 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:10   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 640':

          90702617      L1-dcache-load-misses:u   # [33m   7.96%[m of all L1-dcache hits  
        1138860093      L1-dcache-loads:u                                           
         428873983      armv8_pmuv3_0/l2d_cache/:u                                   
         121144917      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      47.570422746 seconds time elapsed

