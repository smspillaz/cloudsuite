+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 120000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 120000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 120000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3,4 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 120000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 120000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 120000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 120000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 120000 cpus 8
meanInterarrival 66
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1827402240
starting receive base loop
num_worker_connections 64
Creating worker on tid 1234366976
starting receive base loop
num_worker_connections 64
Creating worker on tid 641069568
starting receive base loop
num_worker_connections 64
Creating worker on tid 45150720
starting receive base loop
num_worker_connections 64
Creating worker on tid 3744199168
starting receive base loop
num_worker_connections 64
Creating worker on tid 3148280320
starting receive base loop
num_worker_connections 64
Creating worker on tid 2552361472
starting receive base loop
Created 512 connections total
Creating worker on tid 1956442624
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575889361.887786,       0.0,      301095,     271148,      29947,     178628,      92520,   0.633774,   0.444100,   0.581100,   1.600000,   5.647958,   0.000000, 148.179993, 473.485218
Outstanding requests per worker:
4 3 3 2 4 1 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121225.1,      606126,     545369,      60757,     406437,     138932,   0.275410,   0.482100,   0.577100,   0.849100,   0.158720,   0.061000,   1.943000, 567.617769
Outstanding requests per worker:
5 3 5 3 3 2 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121217.9,      606090,     545466,      60624,     428775,     116691,   0.287486,   0.493100,   0.620100,   0.947100,   0.211963,   0.061000,   6.783000, 613.405882
Outstanding requests per worker:
4 4 4 4 3 5 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121219.7,      606099,     545648,      60451,     441212,     104436,   0.294950,   0.503100,   0.636100,   1.100000,   0.207697,   0.061000,   3.551000, 639.179400
Outstanding requests per worker:
7 4 6 4 4 4 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121223.9,      606120,     545144,      60976,     449887,      95257,   0.294768,   0.509100,   0.637100,   0.952100,   0.182257,   0.060000,   2.473000, 656.036181
Outstanding requests per worker:
4 4 4 4 5 5 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121227.9,      606140,     545549,      60591,     456506,      89043,   0.289581,   0.498100,   0.622100,   0.913100,   0.175537,   0.058000,   3.225000, 669.546508
Outstanding requests per worker:
4 3 3 3 3 3 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121217.3,      606087,     545454,      60633,     461339,      84115,   0.293232,   0.504100,   0.634100,   0.962100,   0.182277,   0.059000,   2.886000, 679.189836
Outstanding requests per worker:
5 3 4 6 4 4 2 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:36   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   10:36   0:00 /usr/lib/linux
memcache      7  265  0.0 424640 127360 pts/0   Sl+  10:36   2:04 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  10:36   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

         401740109      L1-dcache-load-misses:u   # [35m  10.96%[m of all L1-dcache hits  
        3665429878      L1-dcache-loads:u                                           
        1893966936      armv8_pmuv3_0/l2d_cache/:u                                   
         632908422      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      46.880188880 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 120500 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 120500 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 120500 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3,4 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 120500 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 120500 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 120500 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 120500 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 120500 cpus 8
meanInterarrival 66
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1888416256
starting receive base loop
num_worker_connections 64
Creating worker on tid 1293414912
starting receive base loop
num_worker_connections 64
Creating worker on tid 700117504
starting receive base loop
num_worker_connections 64
Creating worker on tid 104198656
starting receive base loop
num_worker_connections 64
Creating worker on tid 3803247104
starting receive base loop
num_worker_connections 64
Creating worker on tid 3207328256
starting receive base loop
num_worker_connections 64
Creating worker on tid 2611409408
starting receive base loop
Created 512 connections total
Creating worker on tid 2015490560
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575889411.887836,       0.0,      295448,     265866,      29582,     188772,      77094,   0.540396,   0.447100,   0.575100,   1.100000,   4.542161,   0.000000, 127.602994, 487.576730
Outstanding requests per worker:
3 4 3 3 4 3 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121221.9,      606110,     545895,      60215,     420104,     125791,   0.276929,   0.488100,   0.582100,   0.878100,   0.159555,   0.060000,   1.834000, 564.061422
Outstanding requests per worker:
4 3 4 3 4 3 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121223.9,      606120,     545742,      60378,     440307,     105435,   0.282800,   0.493100,   0.616100,   0.909100,   0.171216,   0.062000,   2.287000, 605.067646
Outstanding requests per worker:
4 6 4 5 4 4 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121219.5,      606098,     545585,      60513,     450804,      94781,   0.294150,   0.509100,   0.639100,   0.986100,   0.189020,   0.060000,   2.734000, 626.314024
Outstanding requests per worker:
5 5 5 2 4 4 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121220.7,      606104,     545504,      60600,     458462,      87042,   0.299219,   0.513100,   0.648100,   1.200000,   0.201611,   0.060000,   2.955000, 642.854938
Outstanding requests per worker:
3 3 4 3 3 3 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121222.3,      606112,     545571,      60541,     463596,      81975,   0.299393,   0.517100,   0.654000,   1.100000,   0.200714,   0.059000,   3.574000, 652.504523
Outstanding requests per worker:
3 2 5 3 4 3 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121217.9,      606090,     545625,      60465,     468831,      76794,   0.308773,   0.554100,   0.700000,   1.200000,   0.217443,   0.062000,   3.594000, 661.937723
Outstanding requests per worker:
4 5 4 5 5 4 4 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:36   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   10:37   0:00 /usr/lib/linux
memcache      7  271  0.0 413376 117376 pts/0   Sl+  10:37   2:04 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  10:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

         397004895      L1-dcache-load-misses:u   # [35m  10.69%[m of all L1-dcache hits  
        3714518709      L1-dcache-loads:u                                           
        1892135547      armv8_pmuv3_0/l2d_cache/:u                                   
         618616258      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      46.510274032 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 121000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 121000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 121000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3,4 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 121000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 121000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 121000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 121000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 121000 cpus 8
meanInterarrival 66
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2533028352
starting receive base loop
num_worker_connections 64
Creating worker on tid 1940320768
starting receive base loop
num_worker_connections 64
Creating worker on tid 1344401920
starting receive base loop
num_worker_connections 64
Creating worker on tid 748483072
starting receive base loop
num_worker_connections 64
Creating worker on tid 152564224
starting receive base loop
num_worker_connections 64
Creating worker on tid 3854234112
starting receive base loop
num_worker_connections 64
Creating worker on tid 3258315264
starting receive base loop
Created 512 connections total
Creating worker on tid 2662396416
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575889461.887886,       0.0,      294385,     264853,      29532,     174215,      90638,   0.890472,   0.453100,   0.616100,   2.300000,   8.235131,   0.000000, 189.337999, 472.968647
Outstanding requests per worker:
4 5 4 2 3 4 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121229.3,      606147,     545567,      60580,     405910,     139657,   0.268401,   0.447100,   0.564100,   0.830100,   0.156199,   0.078000,   2.874000, 567.154648
Outstanding requests per worker:
3 2 1 3 2 1 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121216.9,      606085,     545563,      60522,     428432,     117131,   0.276895,   0.488100,   0.581100,   0.850100,   0.159446,   0.057000,   2.738000, 612.898967
Outstanding requests per worker:
3 3 5 4 5 5 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121217.5,      606088,     545312,      60776,     441668,     103644,   0.286160,   0.498100,   0.625100,   0.951100,   0.176149,   0.061000,   2.702000, 639.424023
Outstanding requests per worker:
4 7 6 6 7 8 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121223.3,      606117,     545398,      60719,     450265,      95133,   0.284679,   0.497100,   0.620100,   0.896100,   0.167809,   0.060000,   3.006000, 656.384352
Outstanding requests per worker:
9 6 6 3 7 6 10 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121232.7,      606164,     545026,      61138,     455874,      89152,   0.293497,   0.507100,   0.644100,   1.100000,   0.184329,   0.061000,   2.168000, 669.333883
Outstanding requests per worker:
2 2 3 4 3 3 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121217.1,      606086,     545756,      60330,     462104,      83652,   0.289105,   0.498100,   0.626100,   0.964100,   0.187322,   0.060000,   3.794000, 680.058195
Outstanding requests per worker:
4 5 5 3 6 4 5 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:37   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   10:37   0:00 /usr/lib/linux
memcache      7  270  0.0 424640 126144 pts/0   Sl+  10:37   2:04 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  10:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

         398751507      L1-dcache-load-misses:u   # [35m  10.84%[m of all L1-dcache hits  
        3677604556      L1-dcache-loads:u                                           
        1894703038      armv8_pmuv3_0/l2d_cache/:u                                   
         639060725      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      46.350745446 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 121500 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 121500 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 121500 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3,4 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 121500 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 121500 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 121500 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 121500 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 121500 cpus 8
meanInterarrival 65
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1788539392
starting receive base loop
num_worker_connections 64
Creating worker on tid 1194062336
starting receive base loop
num_worker_connections 64
Creating worker on tid 598143488
starting receive base loop
num_worker_connections 64
Creating worker on tid 2224640
starting receive base loop
num_worker_connections 64
Creating worker on tid 3701273088
starting receive base loop
num_worker_connections 64
Creating worker on tid 3105354240
starting receive base loop
num_worker_connections 64
Creating worker on tid 2512056832
starting receive base loop
Created 512 connections total
Creating worker on tid 1916137984
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575889511.887936,       0.0,      297304,     267708,      29596,     176693,      91015,   0.741715,   0.573100,   0.884100,   4.600000,   5.499637,   0.000000, 141.147003, 474.836848
Outstanding requests per worker:
6 5 5 5 5 5 7 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123087.3,      615437,     554184,      61253,     412654,     141530,   0.308362,   0.548100,   0.682100,   1.100000,   0.191889,   0.062000,   2.445000, 568.592182
Outstanding requests per worker:
5 4 6 6 4 4 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.3,      615427,     554012,      61415,     435902,     118110,   0.319751,   0.560100,   0.704100,   1.200000,   0.216631,   0.061000,   3.110000, 614.621916
Outstanding requests per worker:
8 5 9 9 6 7 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123093.3,      615467,     553756,      61711,     448137,     105619,   0.326082,   0.558100,   0.695100,   1.300000,   0.253425,   0.061000,   4.733000, 639.192906
Outstanding requests per worker:
8 5 6 5 5 6 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123086.9,      615435,     553710,      61725,     457110,      96600,   0.326556,   0.571100,   0.744100,   1.200000,   0.222546,   0.080000,   2.905000, 656.637325
Outstanding requests per worker:
4 3 3 4 2 4 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123084.1,      615421,     553861,      61560,     463543,      90318,   0.323811,   0.569100,   0.734100,   1.100000,   0.210965,   0.062000,   3.431000, 669.743064
Outstanding requests per worker:
6 3 4 5 5 4 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123087.5,      615438,     553989,      61449,     468709,      85280,   0.328048,   0.565100,   0.737100,   1.300000,   0.229793,   0.073000,   4.669000, 679.531803
Outstanding requests per worker:
7 3 4 5 6 4 7 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:38   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   10:38   0:00 /usr/lib/linux
memcache      8  272  0.0 425664 127744 pts/0   Sl+  10:38   2:05 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  10:39   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

         404839418      L1-dcache-load-misses:u   # [35m  10.93%[m of all L1-dcache hits  
        3705048640      L1-dcache-loads:u                                           
        1902400955      armv8_pmuv3_0/l2d_cache/:u                                   
         636025353      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      46.601386593 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 122000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 122000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 122000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3,4 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 122000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 122000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 122000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 122000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 122000 cpus 8
meanInterarrival 65
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2567238144
starting receive base loop
num_worker_connections 64
Creating worker on tid 1975185920
starting receive base loop
num_worker_connections 64
Creating worker on tid 1379267072
starting receive base loop
num_worker_connections 64
Creating worker on tid 783348224
starting receive base loop
num_worker_connections 64
Creating worker on tid 187429376
starting receive base loop
num_worker_connections 64
Creating worker on tid 3886477824
starting receive base loop
num_worker_connections 64
Creating worker on tid 3290558976
starting receive base loop
Created 512 connections total
Creating worker on tid 2694640128
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575889561.887986,       0.0,      297994,     268357,      29637,     176665,      91692,   0.554855,   0.629100,   0.920100,   2.300000,   3.588511,   0.000000, 106.260002, 473.845597
Outstanding requests per worker:
3 4 5 3 5 4 5 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123093.3,      615467,     554167,      61300,     412765,     141402,   0.309007,   0.544100,   0.675100,   1.100000,   0.250541,   0.061000,   9.518000, 567.540335
Outstanding requests per worker:
4 4 3 3 4 5 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.3,      615412,     553772,      61640,     435435,     118337,   0.326343,   0.579100,   0.745100,   1.100000,   0.208410,   0.059000,   2.489000, 613.836787
Outstanding requests per worker:
3 7 5 5 3 4 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123088.7,      615444,     553805,      61639,     448054,     105751,   0.337234,   0.608000,   0.757100,   1.300000,   0.243697,   0.059000,   3.433000, 638.708993
Outstanding requests per worker:
4 3 4 4 4 4 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.5,      615428,     553412,      62016,     456721,      96691,   0.351011,   0.627100,   0.817100,   1.400000,   0.272215,   0.076000,   4.780000, 657.093569
Outstanding requests per worker:
5 9 6 7 6 5 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123096.5,      615483,     553919,      61564,     464162,      89757,   0.354200,   0.627100,   0.813100,   1.400000,   0.297928,   0.061000,   8.563000, 671.162109
Outstanding requests per worker:
6 3 5 5 3 5 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123083.7,      615419,     553839,      61580,     469238,      84601,   0.357726,   0.646000,   0.834100,   1.400000,   0.264036,   0.072000,   4.333000, 681.702164
Outstanding requests per worker:
5 4 4 4 5 5 4 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:39   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   10:39   0:00 /usr/lib/linux
memcache      7  273  0.0 424640 121280 pts/0   Sl+  10:39   2:05 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  10:40   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

         398490785      L1-dcache-load-misses:u   # [35m  10.73%[m of all L1-dcache hits  
        3712778736      L1-dcache-loads:u                                           
        1897874322      armv8_pmuv3_0/l2d_cache/:u                                   
         634958331      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      47.090780725 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 122500 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 122500 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 122500 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3,4 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 122500 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 122500 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 122500 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 122500 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 122500 cpus 8
meanInterarrival 65
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2138239488
starting receive base loop
num_worker_connections 64
Creating worker on tid 1545728512
starting receive base loop
num_worker_connections 64
Creating worker on tid 949809664
starting receive base loop
num_worker_connections 64
Creating worker on tid 353890816
starting receive base loop
num_worker_connections 64
Creating worker on tid 4055560704
starting receive base loop
num_worker_connections 64
Creating worker on tid 3459641856
starting receive base loop
num_worker_connections 64
Creating worker on tid 2863723008
starting receive base loop
Created 512 connections total
Creating worker on tid 2267804160
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575889611.888036,       0.0,      296559,     266624,      29935,     175493,      91131,   0.762454,   0.623100,   0.891100,   2.600000,   6.303082,   0.000000, 158.262998, 472.586335
Outstanding requests per worker:
7 5 9 5 9 6 7 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123087.3,      615437,     554405,      61032,     413563,     140842,   0.337018,   0.608000,   0.769100,   1.400000,   0.246128,   0.061000,   3.493000, 569.418566
Outstanding requests per worker:
4 4 3 3 6 7 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.3,      615412,     554018,      61394,     436000,     118018,   0.341796,   0.621100,   0.799000,   1.300000,   0.230916,   0.061000,   3.018000, 614.240868
Outstanding requests per worker:
8 7 6 5 3 7 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.7,      615429,     553893,      61536,     448647,     105246,   0.331681,   0.602100,   0.748100,   1.200000,   0.214588,   0.059000,   3.212000, 639.578209
Outstanding requests per worker:
4 3 3 3 3 3 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123079.5,      615398,     553566,      61832,     456996,      96570,   0.359884,   0.659100,   0.835100,   1.500000,   0.272600,   0.073000,   4.200000, 657.216560
Outstanding requests per worker:
8 7 6 6 8 4 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123088.5,      615443,     553950,      61493,     463342,      90608,   0.359960,   0.664100,   0.827100,   1.300000,   0.247114,   0.076000,   3.673000, 669.086746
Outstanding requests per worker:
4 4 3 3 4 3 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123083.7,      615419,     554036,      61383,     469315,      84721,   0.375840,   0.689100,   0.897100,   1.600000,   0.287897,   0.061000,   4.845000, 680.682293
Outstanding requests per worker:
5 3 4 6 4 5 7 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  10:40   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   10:40   0:00 /usr/lib/linux
memcache      7  273  0.0 425664 127744 pts/0   Sl+  10:40   2:05 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  10:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

         400183901      L1-dcache-load-misses:u   # [35m  10.82%[m of all L1-dcache hits  
        3699270884      L1-dcache-loads:u                                           
        1888884105      armv8_pmuv3_0/l2d_cache/:u                                   
         632445600      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      46.310969851 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 123000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 123000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 123000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3,4 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 123000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 123000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 123000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 123000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 123000 cpus 8
meanInterarrival 65
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1920659968
starting receive base loop
num_worker_connections 64
Creating worker on tid 1328280064
starting receive base loop
num_worker_connections 64
Creating worker on tid 732361216
starting receive base loop
num_worker_connections 64
Creating worker on tid 136442368
starting receive base loop
num_worker_connections 64
Creating worker on tid 3835490816
starting receive base loop
num_worker_connections 64
Creating worker on tid 3239571968
starting receive base loop
num_worker_connections 64
Creating worker on tid 2646274560
starting receive base loop
Created 512 connections total
Creating worker on tid 2050355712
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575889661.888086,       0.0,      296499,     266464,      30035,     175520,      90944,   0.723545,   0.558100,   0.749100,   1.600000,   6.149607,   0.000000, 155.957997, 473.255832
Outstanding requests per worker:
5 5 6 10 10 4 7 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123095.9,      615480,     554122,      61358,     413159,     140963,   0.313455,   0.557100,   0.695100,   1.100000,   0.199274,   0.060000,   2.579000, 569.556433
Outstanding requests per worker:
4 6 3 5 8 4 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123080.1,      615401,     553815,      61586,     435401,     118414,   0.323848,   0.573100,   0.744100,   1.200000,   0.210190,   0.073000,   2.772000, 613.960146
Outstanding requests per worker:
9 7 6 10 7 9 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123092.3,      615462,     553773,      61689,     447923,     105850,   0.342402,   0.621100,   0.802100,   1.300000,   0.242332,   0.076000,   3.208000, 638.779579
Outstanding requests per worker:
4 4 6 5 6 5 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123089.1,      615446,     553806,      61640,     456834,      96972,   0.350244,   0.627100,   0.820100,   1.500000,   0.273755,   0.059000,   4.068000, 655.890337
Outstanding requests per worker:
7 7 4 6 7 6 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123092.9,      615465,     553966,      61499,     464093,      89873,   0.350434,   0.634100,   0.820100,   1.400000,   0.250665,   0.061000,   3.729000, 670.909608
Outstanding requests per worker:
6 6 4 6 3 5 4 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123084.7,      615424,     553737,      61687,     468706,      85031,   0.369611,   0.649100,   0.876100,   1.600000,   0.392101,   0.058000,  13.993000, 680.511812
Outstanding requests per worker:
5 4 6 7 5 4 5 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:41   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   10:41   0:00 /usr/lib/linux
memcache      7  267  0.0 425664 125696 pts/0   Sl+  10:41   2:05 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  10:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

         398571540      L1-dcache-load-misses:u   # [35m  10.76%[m of all L1-dcache hits  
        3703533268      L1-dcache-loads:u                                           
        1902979269      armv8_pmuv3_0/l2d_cache/:u                                   
         649304522      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      46.750421570 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 123500 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 123500 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 123500 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3,4 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 123500 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 123500 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 123500 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 123500 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 123500 cpus 8
meanInterarrival 64
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2246177280
starting receive base loop
num_worker_connections 64
Creating worker on tid 1647702528
starting receive base loop
num_worker_connections 64
Creating worker on tid 1051783680
starting receive base loop
num_worker_connections 64
Creating worker on tid 455864832
starting receive base loop
num_worker_connections 64
Creating worker on tid 4154913280
starting receive base loop
num_worker_connections 64
Creating worker on tid 3558994432
starting receive base loop
num_worker_connections 64
Creating worker on tid 2963075584
starting receive base loop
Created 512 connections total
Creating worker on tid 2367156736
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575889711.888136,       0.0,      300506,     270402,      30104,     178310,      92092,   0.731659,   0.814100,   1.500000,   3.900000,   4.787399,   0.000000, 130.021006, 472.904339
Outstanding requests per worker:
7 5 7 7 4 5 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125017.3,      625087,     562479,      62608,     419893,     142586,   0.345632,   0.622100,   0.795100,   1.200000,   0.236975,   0.062000,   3.927000, 569.686548
Outstanding requests per worker:
2 3 5 3 4 4 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125005.3,      625027,     562825,      62202,     442616,     120209,   0.351087,   0.630100,   0.807000,   1.300000,   0.244866,   0.060000,   3.171000, 614.248871
Outstanding requests per worker:
8 5 5 3 3 4 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125005.1,      625026,     562724,      62302,     455893,     106831,   0.408158,   0.751100,   1.100000,   2.000000,   0.381643,   0.072000,   7.735000, 639.899841
Outstanding requests per worker:
4 7 4 4 6 11 6 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125015.5,      625078,     562279,      62799,     464272,      98007,   0.401614,   0.751100,   1.100000,   1.700000,   0.320175,   0.074000,   5.009000, 657.647821
Outstanding requests per worker:
4 4 4 5 4 5 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125013.9,      625070,     562375,      62695,     471001,      91374,   0.406138,   0.751100,   0.985100,   1.800000,   0.338590,   0.072000,   5.156000, 670.186155
Outstanding requests per worker:
3 4 4 4 5 5 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125004.3,      625022,     562590,      62432,     476311,      86279,   0.405236,   0.761000,   1.100000,   1.600000,   0.315552,   0.061000,   4.499000, 680.109383
Outstanding requests per worker:
5 5 5 7 5 4 7 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:41   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   10:42   0:00 /usr/lib/linux
memcache      7  274  0.0 426688 127744 pts/0   Sl+  10:42   2:06 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  10:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

         402875002      L1-dcache-load-misses:u   # [35m  10.74%[m of all L1-dcache hits  
        3749916928      L1-dcache-loads:u                                           
        1899161784      armv8_pmuv3_0/l2d_cache/:u                                   
         618086032      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      46.241496346 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 124000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 124000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 124000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3,4 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 124000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 124000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 124000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 124000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 124000 cpus 8
meanInterarrival 64
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1865019904
starting receive base loop
num_worker_connections 64
Creating worker on tid 1269232128
starting receive base loop
num_worker_connections 64
Creating worker on tid 673313280
starting receive base loop
num_worker_connections 64
Creating worker on tid 77394432
starting receive base loop
num_worker_connections 64
Creating worker on tid 3776442880
starting receive base loop
num_worker_connections 64
Creating worker on tid 3183145472
starting receive base loop
num_worker_connections 64
Creating worker on tid 2587226624
starting receive base loop
Created 512 connections total
Creating worker on tid 1991307776
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575889761.888186,       0.0,      296675,     267030,      29645,     175745,      91285,   0.922864,   1.200000,   2.700000,   7.200000,   5.225968,   0.000000, 137.783006, 473.590046
Outstanding requests per worker:
6 6 5 3 3 5 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  124998.3,      624992,     562631,      62361,     419365,     143266,   0.384155,   0.732100,   0.938100,   1.500000,   0.276246,   0.075000,   3.174000, 568.900610
Outstanding requests per worker:
9 10 6 10 11 12 10 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125012.1,      625061,     562637,      62424,     442573,     120064,   0.418341,   0.806100,   1.100000,   1.600000,   0.306158,   0.076000,   2.924000, 614.429721
Outstanding requests per worker:
7 9 7 8 10 7 7 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.9,      625040,     562450,      62590,     455972,     106478,   0.453270,   0.876100,   1.200000,   2.100000,   0.380693,   0.073000,   4.690000, 641.201298
Outstanding requests per worker:
5 7 10 7 9 7 6 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  124997.1,      624986,     562574,      62412,     465516,      97058,   0.500076,   1.100000,   1.400000,   2.400000,   0.443606,   0.062000,   5.431000, 659.537835
Outstanding requests per worker:
15 14 10 16 15 14 17 15 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125018.3,      625092,     562426,      62666,     471692,      90734,   0.491021,   0.988100,   1.400000,   2.200000,   0.414904,   0.077000,   3.945000, 671.755600
Outstanding requests per worker:
8 5 6 7 8 8 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125000.5,      625003,     562480,      62523,     476531,      85949,   0.537563,   1.200000,   1.600000,   2.800000,   0.524906,   0.060000,   7.201000, 680.368369
Outstanding requests per worker:
11 14 10 13 9 15 15 10 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:42   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   10:42   0:00 /usr/lib/linux
memcache      7  275  0.0 426688 130816 pts/0   Sl+  10:42   2:06 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  10:43   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

         399138474      L1-dcache-load-misses:u   # [35m  10.69%[m of all L1-dcache hits  
        3732718042      L1-dcache-loads:u                                           
        1871897830      armv8_pmuv3_0/l2d_cache/:u                                   
         613056134      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      46.431040330 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 124500 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 124500 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 124500 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3,4 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 124500 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 124500 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 124500 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 124500 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 124500 cpus 8
meanInterarrival 64
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2146300416
starting receive base loop
num_worker_connections 64
Creating worker on tid 1553789440
starting receive base loop
num_worker_connections 64
Creating worker on tid 957870592
starting receive base loop
num_worker_connections 64
Creating worker on tid 364573184
starting receive base loop
num_worker_connections 64
Creating worker on tid 4063621632
starting receive base loop
num_worker_connections 64
Creating worker on tid 3467702784
starting receive base loop
num_worker_connections 64
Creating worker on tid 2871783936
starting receive base loop
Created 512 connections total
Creating worker on tid 2275865088
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575889811.888236,       0.0,      301604,     271509,      30095,     179271,      92238,   0.947397,   1.400000,   2.800000,   6.800000,   5.148688,   0.000000, 135.021999, 474.634027
Outstanding requests per worker:
7 7 7 6 5 6 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125010.3,      625052,     562596,      62456,     420502,     142094,   0.395665,   0.742100,   0.980100,   1.600000,   0.293311,   0.060000,   4.196000, 570.747968
Outstanding requests per worker:
5 8 4 4 5 7 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125014.1,      625071,     563001,      62070,     443453,     119548,   0.446046,   0.865100,   1.200000,   2.000000,   0.403636,   0.057000,   6.905000, 615.017455
Outstanding requests per worker:
4 6 6 6 5 4 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125010.5,      625053,     562914,      62139,     456420,     106494,   0.443207,   0.863100,   1.200000,   2.000000,   0.367326,   0.077000,   4.383000, 640.857783
Outstanding requests per worker:
6 8 8 11 7 8 7 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125009.5,      625048,     562609,      62439,     464884,      97725,   0.453717,   0.875100,   1.200000,   1.900000,   0.362347,   0.078000,   4.428000, 657.776449
Outstanding requests per worker:
6 6 6 5 4 7 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125009.1,      625046,     562976,      62070,     471612,      91364,   0.481510,   0.946100,   1.300000,   2.100000,   0.400614,   0.075000,   4.944000, 670.310205
Outstanding requests per worker:
5 8 7 6 5 11 8 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125011.5,      625058,     562636,      62422,     476560,      86076,   0.488790,   0.947100,   1.400000,   2.300000,   0.449762,   0.072000,   6.377000, 680.432260
Outstanding requests per worker:
8 4 9 7 7 10 8 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:43   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   10:43   0:00 /usr/lib/linux
memcache      7  276  0.0 426688 130304 pts/0   Sl+  10:43   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  10:44   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

         399564254      L1-dcache-load-misses:u   # [35m  10.71%[m of all L1-dcache hits  
        3730342627      L1-dcache-loads:u                                           
        1884912291      armv8_pmuv3_0/l2d_cache/:u                                   
         635163607      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      46.691075557 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 125000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 125000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3,4 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 125000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 125000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 125000 cpus 8
meanInterarrival 64
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1974727168
starting receive base loop
num_worker_connections 64
Creating worker on tid 1379267072
starting receive base loop
num_worker_connections 64
Creating worker on tid 783348224
starting receive base loop
num_worker_connections 64
Creating worker on tid 187429376
starting receive base loop
num_worker_connections 64
Creating worker on tid 3886477824
starting receive base loop
num_worker_connections 64
Creating worker on tid 3290558976
starting receive base loop
num_worker_connections 64
Creating worker on tid 2694640128
starting receive base loop
Created 512 connections total
Creating worker on tid 2098721280
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575889861.888286,       0.0,      300996,     270834,      30162,     178665,      92169,   0.844759,   1.100000,   1.800000,   7.700000,   4.882619,   0.000000, 129.654005, 475.211713
Outstanding requests per worker:
7 5 7 6 7 9 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125005.7,      625029,     562631,      62398,     419882,     142749,   0.409344,   0.775100,   0.998100,   1.700000,   0.321187,   0.075000,   5.410000, 570.098693
Outstanding requests per worker:
6 6 5 7 10 4 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125008.5,      625043,     562490,      62553,     442841,     119649,   0.490309,   0.923100,   1.300000,   2.700000,   0.636488,   0.059000,  22.195000, 615.086322
Outstanding requests per worker:
7 7 8 7 8 10 8 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.3,      625032,     562606,      62426,     455689,     106917,   0.490537,   0.981100,   1.400000,   2.500000,   0.529787,   0.059000,  17.649001, 639.898440
Outstanding requests per worker:
8 13 10 8 11 8 11 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125019.1,      625096,     562583,      62513,     464785,      97798,   0.445827,   0.866100,   1.200000,   1.900000,   0.368138,   0.076000,   4.864000, 658.028188
Outstanding requests per worker:
7 7 8 10 8 5 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.5,      625033,     562297,      62736,     471506,      90791,   0.515221,   1.100000,   1.400000,   2.400000,   0.458313,   0.076000,   4.798000, 670.999755
Outstanding requests per worker:
9 5 6 8 4 7 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125004.3,      625022,     562296,      62726,     475821,      86475,   0.550021,   1.200000,   1.600000,   2.700000,   0.509982,   0.077000,   5.164000, 680.227455
Outstanding requests per worker:
8 10 9 11 10 10 10 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:44   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   10:44   0:00 /usr/lib/linux
memcache      7  276  0.0 426688 122880 pts/0   Sl+  10:44   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  10:45   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

         398399640      L1-dcache-load-misses:u   # [35m  10.67%[m of all L1-dcache hits  
        3732682098      L1-dcache-loads:u                                           
        1876043331      armv8_pmuv3_0/l2d_cache/:u                                   
         630286964      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      46.661127702 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 125500 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 125500 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125500 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3,4 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 125500 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 125500 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125500 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125500 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 125500 cpus 8
meanInterarrival 63
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1866658304
starting receive base loop
num_worker_connections 64
Creating worker on tid 1269232128
starting receive base loop
num_worker_connections 64
Creating worker on tid 673313280
starting receive base loop
num_worker_connections 64
Creating worker on tid 77394432
starting receive base loop
num_worker_connections 64
Creating worker on tid 3776442880
starting receive base loop
num_worker_connections 64
Creating worker on tid 3183145472
starting receive base loop
num_worker_connections 64
Creating worker on tid 2587226624
starting receive base loop
Created 512 connections total
Creating worker on tid 1991307776
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575889911.888336,       0.0,      305419,     275082,      30337,     181297,      93785,   0.972662,   1.300000,   2.400000,   8.000000,   5.190620,   0.000000, 135.410994, 473.694273
Outstanding requests per worker:
10 9 7 9 7 6 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126986.7,      634934,     571448,      63486,     427184,     144264,   0.507851,   0.992100,   1.400000,   2.200000,   0.540324,   0.074000,  15.867000, 570.844782
Outstanding requests per worker:
10 11 7 11 9 8 13 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126998.7,      634994,     571452,      63542,     450421,     121031,   0.529420,   1.100000,   1.500000,   2.300000,   0.451639,   0.073000,   5.687000, 615.905177
Outstanding requests per worker:
8 7 6 8 6 7 8 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126990.9,      634955,     571346,      63609,     463613,     107733,   0.628941,   1.300000,   1.800000,   3.200000,   0.591678,   0.076000,   6.907000, 641.070682
Outstanding requests per worker:
6 7 7 5 7 8 9 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126979.1,      634896,     571170,      63726,     472046,      99124,   0.746842,   1.700000,   2.400000,   3.600000,   0.727678,   0.076000,   7.472000, 657.821790
Outstanding requests per worker:
16 19 18 17 11 17 20 17 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  127003.1,      635016,     571222,      63794,     478853,      92369,   0.853647,   2.100000,   2.800000,   4.200000,   0.866691,   0.074000,   8.157000, 672.355189
Outstanding requests per worker:
10 12 8 12 11 11 8 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126993.3,      634967,     571428,      63539,     484693,      86735,   0.839897,   2.000000,   2.600000,   3.900000,   0.805730,   0.073000,   6.958000, 681.175740
Outstanding requests per worker:
7 12 9 10 9 7 12 8 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:45   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   10:45   0:00 /usr/lib/linux
memcache      7  278  0.0 426688 126208 pts/0   Sl+  10:45   2:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  10:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

         398596554      L1-dcache-load-misses:u   # [35m  10.52%[m of all L1-dcache hits  
        3787625524      L1-dcache-loads:u                                           
        1868515293      armv8_pmuv3_0/l2d_cache/:u                                   
         613317063      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      46.501316292 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 126000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 126000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 126000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 256155173e345ef8ee43e304dcbadd23d92a80180ef2d9c451c28d6a2a7e8b48 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3,4 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 126000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 126000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 126000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 126000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.176.2
Loading key value file...created uniform distribution 65536
rps 126000 cpus 8
meanInterarrival 63
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1954607616
starting receive base loop
num_worker_connections 64
Creating worker on tid 1360523776
starting receive base loop
num_worker_connections 64
Creating worker on tid 767226368
starting receive base loop
num_worker_connections 64
Creating worker on tid 171307520
starting receive base loop
num_worker_connections 64
Creating worker on tid 3870355968
starting receive base loop
num_worker_connections 64
Creating worker on tid 3274437120
starting receive base loop
num_worker_connections 64
Creating worker on tid 2678518272
starting receive base loop
Created 512 connections total
Creating worker on tid 2082599424
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575889962.888387,       0.0,      381563,     343452,      38111,     230793,     112659,   0.609833,   0.797100,   1.300000,   3.600000,   3.348940,   0.000000, 109.002002, 488.075679
Outstanding requests per worker:
17 12 14 9 15 13 11 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126998.1,      634991,     572122,      62869,     431079,     141043,   0.511133,   1.100000,   1.400000,   2.200000,   0.436989,   0.076000,   5.136000, 577.287196
Outstanding requests per worker:
8 8 7 7 7 8 7 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126986.3,      634932,     571489,      63443,     451904,     119585,   0.572483,   1.200000,   1.700000,   2.700000,   0.533058,   0.071000,   7.590000, 618.783726
Outstanding requests per worker:
9 10 15 14 8 9 7 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126995.5,      634978,     571482,      63496,     464759,     106723,   0.539539,   1.200000,   1.500000,   2.300000,   0.447002,   0.076000,   4.385000, 643.845029
Outstanding requests per worker:
7 9 9 7 8 5 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126989.5,      634948,     571675,      63273,     473265,      98410,   0.590188,   1.300000,   1.700000,   2.700000,   0.545250,   0.078000,   8.902000, 660.587148
Outstanding requests per worker:
6 7 8 6 9 6 9 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126991.5,      634958,     571464,      63494,     480283,      91181,   0.623212,   1.400000,   1.900000,   3.100000,   0.584303,   0.060000,   5.386000, 674.328259
Outstanding requests per worker:
8 8 8 6 5 7 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126984.1,      634921,     571422,      63499,     485152,      86270,   0.733375,   1.700000,   2.400000,   3.700000,   0.721735,   0.076000,   6.203000, 683.105572
Outstanding requests per worker:
11 10 10 11 10 10 11 12 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  10:46   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   10:46   0:00 /usr/lib/linux
memcache      7  277  0.0 429760 125632 pts/0   Sl+  10:46   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  10:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

         409032089      L1-dcache-load-misses:u   # [35m  10.60%[m of all L1-dcache hits  
        3857277215      L1-dcache-loads:u                                           
        1916153238      armv8_pmuv3_0/l2d_cache/:u                                   
         627737864      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      47.251577486 seconds time elapsed

