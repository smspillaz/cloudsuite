+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 25000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 25000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 25000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 25000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 25000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 25000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 25000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 25000 cpus 8
meanInterarrival 320
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1972957696
starting receive base loop
num_worker_connections 64
Creating worker on tid 1379267072
starting receive base loop
num_worker_connections 64
Creating worker on tid 783348224
starting receive base loop
num_worker_connections 64
Creating worker on tid 187429376
starting receive base loop
num_worker_connections 64
Creating worker on tid 3886477824
starting receive base loop
num_worker_connections 64
Creating worker on tid 3290558976
starting receive base loop
num_worker_connections 64
Creating worker on tid 2694640128
starting receive base loop
Created 512 connections total
Creating worker on tid 2098721280
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576118291.116715,       0.0,       61331,      55168,       6163,      32568,      22600,   0.313217,   0.102100,   0.105100,   0.169100,   4.091526,   0.000000, 122.377999, 399.854173
Outstanding requests per worker:
0 0 1 0 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25001.6,      125008,     112490,      12518,      74471,      38019,   0.087162,   0.101100,   0.104100,   0.131000,   0.017285,   0.067000,   1.311000, 476.191493
Outstanding requests per worker:
0 0 1 0 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25001.0,      125005,     112522,      12483,      78678,      33844,   0.087293,   0.101100,   0.104100,   0.142100,   0.021278,   0.067000,   1.711000, 517.745543
Outstanding requests per worker:
0 1 0 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25002.4,      125012,     112474,      12538,      81364,      31110,   0.087235,   0.101100,   0.104100,   0.142100,   0.017982,   0.066000,   1.109000, 543.307813
Outstanding requests per worker:
1 0 0 1 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25001.2,      125006,     112457,      12549,      82838,      29619,   0.087112,   0.101100,   0.104100,   0.142100,   0.016451,   0.061000,   0.835000, 560.154317
Outstanding requests per worker:
0 0 0 0 0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25001.6,      125008,     112519,      12489,      84487,      28032,   0.087232,   0.102100,   0.104100,   0.141100,   0.016704,   0.068000,   1.201000, 575.577502
Outstanding requests per worker:
0 0 0 0 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25001.8,      125009,     112601,      12408,      85594,      27007,   0.087368,   0.102100,   0.105100,   0.145100,   0.015286,   0.061000,   1.025000, 585.394846
Outstanding requests per worker:
0 0 1 1 0 0 1 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:11   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6272 pts/0    S+   02:11   0:00 /usr/lib/linux
memcache      7 71.8  0.0 343744 46848 pts/0    Sl+  02:11   0:33 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  02:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

        3179651558      instructions:u            #    0.45  insn per cycle         
        7037033338      cycles:u                                                    

      46.680671120 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 30000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 30000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 30000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 30000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 30000 cpus 8
meanInterarrival 266
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2232676864
starting receive base loop
num_worker_connections 64
Creating worker on tid 1639641600
starting receive base loop
num_worker_connections 64
Creating worker on tid 1043722752
starting receive base loop
num_worker_connections 64
Creating worker on tid 447803904
starting receive base loop
num_worker_connections 64
Creating worker on tid 4146852352
starting receive base loop
num_worker_connections 64
Creating worker on tid 3550933504
starting receive base loop
num_worker_connections 64
Creating worker on tid 2955014656
starting receive base loop
Created 512 connections total
Creating worker on tid 2359095808
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576118341.116765,       0.0,       75727,      68137,       7590,      40817,      27320,   0.415314,   0.106100,   0.124100,   0.188100,   5.218425,   0.000000, 141.330004, 407.514023
Outstanding requests per worker:
0 0 0 1 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.8,      150384,     135364,      15020,      90467,      44897,   0.090663,   0.106100,   0.123100,   0.148100,   0.018040,   0.068000,   0.939000, 484.075722
Outstanding requests per worker:
0 0 0 0 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.4,      150387,     135401,      14986,      95641,      39760,   0.090685,   0.106100,   0.123100,   0.148100,   0.017159,   0.070000,   0.698000, 525.745600
Outstanding requests per worker:
0 0 0 1 1 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.8,      150389,     135442,      14947,      98808,      36634,   0.090671,   0.106100,   0.123100,   0.148100,   0.017948,   0.069000,   1.099000, 552.003212
Outstanding requests per worker:
0 0 0 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.6,      150393,     135539,      14854,     101360,      34179,   0.090883,   0.106100,   0.123100,   0.150100,   0.018229,   0.068000,   1.017000, 571.294085
Outstanding requests per worker:
0 0 0 1 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.6,      150383,     135291,      15092,     103003,      32288,   0.090920,   0.106100,   0.123100,   0.149100,   0.018204,   0.070000,   1.025000, 586.185363
Outstanding requests per worker:
0 0 0 0 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.8,      150384,     135147,      15237,     104050,      31097,   0.090727,   0.106100,   0.123100,   0.149100,   0.018934,   0.068000,   1.238000, 596.106417
Outstanding requests per worker:
0 0 0 1 0 0 0 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:12   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6272 pts/0    S+   02:12   0:00 /usr/lib/linux
memcache      7 84.6  0.0 350912 54784 pts/0    Sl+  02:12   0:39 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  02:13   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

        3817707910      instructions:u            #    0.45  insn per cycle         
        8394402015      cycles:u                                                    

      46.931054491 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 35000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 35000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 35000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 35000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 35000 cpus 8
meanInterarrival 228
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1793520128
starting receive base loop
num_worker_connections 64
Creating worker on tid 1202123264
starting receive base loop
num_worker_connections 64
Creating worker on tid 606204416
starting receive base loop
num_worker_connections 64
Creating worker on tid 10285568
starting receive base loop
num_worker_connections 64
Creating worker on tid 3709334016
starting receive base loop
num_worker_connections 64
Creating worker on tid 3116036608
starting receive base loop
num_worker_connections 64
Creating worker on tid 2520117760
starting receive base loop
Created 512 connections total
Creating worker on tid 1924198912
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576118392.116816,       0.0,       87334,      78457,       8877,      47328,      31129,   0.647026,   0.105100,   0.122100,   0.305100,   7.169134,   0.000000, 168.413997, 414.002027
Outstanding requests per worker:
1 0 0 0 0 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35091.0,      175455,     157945,      17510,     106769,      51176,   0.089349,   0.104100,   0.120100,   0.145100,   0.016866,   0.064000,   1.423000, 493.693191
Outstanding requests per worker:
0 1 1 1 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35091.2,      175456,     158007,      17449,     113823,      44184,   0.089338,   0.104100,   0.120100,   0.145100,   0.016777,   0.067000,   0.955000, 539.886689
Outstanding requests per worker:
0 1 0 0 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35091.6,      175458,     157897,      17561,     116934,      40963,   0.089464,   0.105100,   0.120100,   0.146100,   0.016702,   0.066000,   1.045000, 563.569213
Outstanding requests per worker:
1 0 0 0 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35090.0,      175450,     157967,      17483,     119444,      38523,   0.089398,   0.105100,   0.120100,   0.146100,   0.017865,   0.067000,   1.087000, 580.878696
Outstanding requests per worker:
1 0 0 0 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35090.4,      175452,     158031,      17421,     121229,      36802,   0.089411,   0.104100,   0.120100,   0.146100,   0.016514,   0.067000,   0.591000, 592.611962
Outstanding requests per worker:
0 1 0 1 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35090.8,      175454,     157842,      17612,     123063,      34779,   0.089362,   0.104100,   0.120100,   0.146100,   0.016800,   0.065000,   1.061000, 605.562867
Outstanding requests per worker:
0 1 1 0 1 0 0 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:13   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6272 pts/0    S+   02:13   0:00 /usr/lib/linux
memcache      7  101  0.0 355008 55616 pts/0    Sl+  02:13   0:46 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  02:14   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

        4482677329      instructions:u            #    0.46  insn per cycle         
        9775437554      cycles:u                                                    

      46.829883814 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 40000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 40000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 40000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 40000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 40000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 40000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 40000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 40000 cpus 8
meanInterarrival 200
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2190602752
starting receive base loop
num_worker_connections 64
Creating worker on tid 1596715520
starting receive base loop
num_worker_connections 64
Creating worker on tid 1000796672
starting receive base loop
num_worker_connections 64
Creating worker on tid 404877824
starting receive base loop
num_worker_connections 64
Creating worker on tid 4103926272
starting receive base loop
num_worker_connections 64
Creating worker on tid 3508007424
starting receive base loop
num_worker_connections 64
Creating worker on tid 2914710016
starting receive base loop
Created 512 connections total
Creating worker on tid 2318791168
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576118442.116866,       0.0,       97763,      88053,       9710,      53619,      34434,   0.385098,   0.106100,   0.124100,   0.173000,   4.693718,   0.000000, 126.482993, 419.914392
Outstanding requests per worker:
0 1 1 0 0 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40001.6,      200008,     180114,      19894,     123287,      56827,   0.090706,   0.106100,   0.124100,   0.148100,   0.017546,   0.063000,   0.875000, 501.202994
Outstanding requests per worker:
1 0 1 0 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40002.4,      200012,     180085,      19927,     130449,      49636,   0.090660,   0.106100,   0.124100,   0.148100,   0.017594,   0.062000,   0.911000, 545.699464
Outstanding requests per worker:
0 1 0 1 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40003.4,      200017,     180191,      19826,     134059,      46132,   0.090983,   0.107100,   0.124100,   0.150100,   0.019948,   0.061000,   1.260000, 568.555660
Outstanding requests per worker:
0 1 0 1 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40004.2,      200021,     179996,      20025,     137452,      42544,   0.090867,   0.107100,   0.124100,   0.149100,   0.018012,   0.061000,   0.990000, 588.887581
Outstanding requests per worker:
1 0 1 0 1 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40001.6,      200008,     180019,      19989,     139661,      40358,   0.090862,   0.107100,   0.124100,   0.150100,   0.018140,   0.061000,   0.875000, 601.649193
Outstanding requests per worker:
1 0 1 0 1 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40002.4,      200012,     179912,      20100,     141494,      38418,   0.090933,   0.107100,   0.124100,   0.151100,   0.018230,   0.067000,   0.669000, 614.209514
Outstanding requests per worker:
0 1 0 1 0 0 1 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:14   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   02:14   0:00 /usr/lib/linux
memcache      7  111  0.0 359104 57792 pts/0    Sl+  02:14   0:52 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  02:14   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

        5086213276      instructions:u            #    0.46  insn per cycle         
       11166955463      cycles:u                                                    

      46.920116864 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 45000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 45000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 45000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 45000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 45000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 45000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 45000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 45000 cpus 8
meanInterarrival 177
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2003628544
starting receive base loop
num_worker_connections 64
Creating worker on tid 1411510784
starting receive base loop
num_worker_connections 64
Creating worker on tid 815591936
starting receive base loop
num_worker_connections 64
Creating worker on tid 219673088
starting receive base loop
num_worker_connections 64
Creating worker on tid 3921342976
starting receive base loop
num_worker_connections 64
Creating worker on tid 3325424128
starting receive base loop
num_worker_connections 64
Creating worker on tid 2729505280
starting receive base loop
Created 512 connections total
Creating worker on tid 2133586432
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576118493.116917,       0.0,      138313,     124350,      13963,      77127,      47223,   0.592311,   0.112100,   0.126100,   0.656100,   6.506096,   0.000000, 166.307002, 431.508621
Outstanding requests per worker:
1 0 0 1 0 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   45199.8,      225999,     203638,      22361,     141838,      61800,   0.092802,   0.118100,   0.126100,   0.152000,   0.020471,   0.062000,   1.165000, 514.986039
Outstanding requests per worker:
1 0 0 1 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   45201.0,      226005,     203157,      22848,     149496,      53661,   0.093101,   0.119100,   0.126100,   0.154100,   0.021979,   0.064000,   1.040000, 557.817619
Outstanding requests per worker:
0 1 0 0 1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   45201.2,      226006,     203728,      22278,     153569,      50159,   0.093086,   0.119100,   0.126100,   0.154100,   0.021576,   0.065000,   1.224000, 578.811990
Outstanding requests per worker:
0 1 0 0 1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   45202.6,      226013,     203498,      22515,     157105,      46393,   0.093003,   0.119100,   0.126100,   0.153100,   0.023467,   0.061000,   1.342000, 598.234921
Outstanding requests per worker:
1 1 1 1 0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   45199.4,      225997,     203620,      22377,     159843,      43777,   0.092957,   0.119100,   0.126100,   0.153100,   0.022033,   0.061000,   1.301000, 612.531657
Outstanding requests per worker:
0 1 1 0 1 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   45200.8,      226004,     203411,      22593,     161959,      41452,   0.092761,   0.119100,   0.126100,   0.152000,   0.019441,   0.061000,   0.683000, 623.212658
Outstanding requests per worker:
1 0 0 1 0 0 1 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:14   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   02:15   0:00 /usr/lib/linux
memcache      7  123  0.0 364224 63296 pts/0    Sl+  02:15   0:59 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  02:15   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

        5855323289      instructions:u            #    0.46  insn per cycle         
       12639443644      cycles:u                                                    

      47.589877672 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 50000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 50000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 50000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 50000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 50000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 50000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 50000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 50000 cpus 8
meanInterarrival 160
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1708126720
starting receive base loop
num_worker_connections 64
Creating worker on tid 1110831616
starting receive base loop
num_worker_connections 64
Creating worker on tid 514912768
starting receive base loop
num_worker_connections 64
Creating worker on tid 4213961216
starting receive base loop
num_worker_connections 64
Creating worker on tid 3618042368
starting receive base loop
num_worker_connections 64
Creating worker on tid 3022123520
starting receive base loop
num_worker_connections 64
Creating worker on tid 2426204672
starting receive base loop
Created 512 connections total
Creating worker on tid 1830285824
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576118545.116969,       0.0,      154399,     138903,      15496,      87077,      51826,   0.324619,   0.124100,   0.130100,   0.225100,   3.630201,   0.000000, 114.595003, 439.616934
Outstanding requests per worker:
1 1 0 1 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   50005.3,      250027,     224954,      25073,     158328,      66626,   0.097886,   0.126100,   0.134100,   0.205100,   0.027146,   0.060000,   0.909000, 522.470358
Outstanding requests per worker:
0 0 1 0 1 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   50001.9,      250010,     225274,      24736,     166442,      58832,   0.097770,   0.126100,   0.133100,   0.204100,   0.029790,   0.061000,   2.528000, 562.707174
Outstanding requests per worker:
1 1 0 0 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   50001.9,      250010,     224980,      25030,     171445,      53535,   0.097277,   0.125100,   0.132100,   0.204100,   0.025491,   0.059000,   1.177000, 587.372335
Outstanding requests per worker:
0 0 0 1 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   50002.3,      250012,     225085,      24927,     174985,      50100,   0.097373,   0.125100,   0.132100,   0.204100,   0.026101,   0.060000,   1.185000, 603.974654
Outstanding requests per worker:
0 0 0 0 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   50002.1,      250011,     225047,      24964,     177800,      47247,   0.097296,   0.125100,   0.132100,   0.204100,   0.026302,   0.058000,   1.343000, 617.917004
Outstanding requests per worker:
1 1 0 0 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   50002.1,      250011,     224961,      25050,     180397,      44564,   0.097166,   0.125100,   0.132100,   0.203100,   0.024694,   0.060000,   0.700000, 630.275706
Outstanding requests per worker:
1 1 0 1 1 1 0 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:15   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   02:15   0:00 /usr/lib/linux
memcache      7  133  0.0 370368 66048 pts/0    Sl+  02:15   1:04 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  02:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

        6447140284      instructions:u            #    0.47  insn per cycle         
       13672446829      cycles:u                                                    

      47.660203805 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 55000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 55000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 55000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 55000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 55000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 55000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 55000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 55000 cpus 8
meanInterarrival 145
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2603479552
starting receive base loop
num_worker_connections 64
Creating worker on tid 2007429632
starting receive base loop
num_worker_connections 64
Creating worker on tid 1411510784
starting receive base loop
num_worker_connections 64
Creating worker on tid 815591936
starting receive base loop
num_worker_connections 64
Creating worker on tid 219673088
starting receive base loop
num_worker_connections 64
Creating worker on tid 3921342976
starting receive base loop
num_worker_connections 64
Creating worker on tid 3325424128
starting receive base loop
Created 512 connections total
Creating worker on tid 2729505280
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576118596.117020,       0.0,      170205,     153138,      17067,      97091,      56047,   0.343813,   0.126100,   0.174100,   0.215100,   3.870901,   0.000000, 121.188000, 444.798430
Outstanding requests per worker:
0 1 0 1 1 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   55177.7,      275889,     248242,      27647,     175945,      72297,   0.101147,   0.127100,   0.176100,   0.202100,   0.029217,   0.061000,   1.241000, 527.511489
Outstanding requests per worker:
1 1 2 1 1 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   55177.7,      275889,     248446,      27443,     185018,      63428,   0.101514,   0.128100,   0.176100,   0.203100,   0.030585,   0.062000,   1.060000, 568.233455
Outstanding requests per worker:
0 1 1 0 1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   55174.7,      275874,     248206,      27668,     190613,      57593,   0.101394,   0.127100,   0.176100,   0.202100,   0.031748,   0.059000,   1.227000, 594.163783
Outstanding requests per worker:
0 1 0 0 1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   55175.9,      275880,     248313,      27567,     194526,      53787,   0.101117,   0.127100,   0.176100,   0.202100,   0.029388,   0.061000,   1.011000, 610.922102
Outstanding requests per worker:
1 1 1 0 0 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   55177.1,      275886,     248372,      27514,     197523,      50849,   0.101379,   0.127100,   0.176100,   0.202100,   0.030569,   0.062000,   1.370000, 624.198352
Outstanding requests per worker:
1 1 0 1 1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   55177.9,      275890,     248474,      27416,     200133,      48341,   0.101382,   0.127100,   0.176100,   0.202100,   0.029810,   0.063000,   0.846000, 635.266893
Outstanding requests per worker:
0 1 1 0 0 0 1 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:16   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   02:16   0:00 /usr/lib/linux
memcache      7  147  0.0 374464 71232 pts/0    Sl+  02:16   1:09 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  02:17   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

        7119833588      instructions:u            #    0.48  insn per cycle         
       14975902509      cycles:u                                                    

      47.789369351 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 60000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 60000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 60000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 60000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 60000 cpus 8
meanInterarrival 133
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1694495232
starting receive base loop
num_worker_connections 64
Creating worker on tid 1102770688
starting receive base loop
num_worker_connections 64
Creating worker on tid 506851840
starting receive base loop
num_worker_connections 64
Creating worker on tid 4205900288
starting receive base loop
num_worker_connections 64
Creating worker on tid 3609981440
starting receive base loop
num_worker_connections 64
Creating worker on tid 3014062592
starting receive base loop
num_worker_connections 64
Creating worker on tid 2418143744
starting receive base loop
Created 512 connections total
Creating worker on tid 1822224896
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576118647.117071,       0.0,      184383,     166023,      18360,     105596,      60427,   0.411629,   0.153100,   0.175000,   0.487100,   4.032755,   0.000000,  95.986001, 449.140583
Outstanding requests per worker:
0 1 1 0 1 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60154.9,      300775,     270581,      30194,     193116,      77465,   0.103204,   0.157100,   0.177100,   0.197100,   0.032396,   0.059000,   0.982000, 533.389170
Outstanding requests per worker:
0 1 0 1 2 2 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60155.1,      300776,     270789,      29987,     203216,      67573,   0.102996,   0.157100,   0.177100,   0.196000,   0.032648,   0.061000,   1.022000, 573.939093
Outstanding requests per worker:
1 1 1 1 0 0 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60156.3,      300782,     270892,      29890,     209251,      61641,   0.103331,   0.157100,   0.177100,   0.197100,   0.035649,   0.059000,   1.301000, 597.211066
Outstanding requests per worker:
1 0 2 1 1 0 2 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60152.9,      300765,     270641,      30124,     213169,      57472,   0.103325,   0.157100,   0.177100,   0.197100,   0.034247,   0.058000,   1.279000, 614.612487
Outstanding requests per worker:
1 1 1 0 1 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60154.1,      300771,     270649,      30122,     216571,      54078,   0.103326,   0.157100,   0.177100,   0.198100,   0.034278,   0.060000,   1.381000, 628.072304
Outstanding requests per worker:
1 0 0 1 1 2 2 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60154.9,      300775,     270851,      29924,     219160,      51691,   0.103386,   0.158100,   0.177100,   0.197100,   0.033420,   0.061000,   0.906000, 639.314180
Outstanding requests per worker:
1 0 0 1 1 0 1 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  02:17   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   02:17   0:00 /usr/lib/linux
memcache      7  157  0.0 378560 79296 pts/0    Sl+  02:17   1:15 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  02:18   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

        7745396757      instructions:u            #    0.48  insn per cycle         
       16159380294      cycles:u                                                    

      47.540876501 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 65000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 65000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 65000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 65000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 65000 cpus 8
meanInterarrival 123
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2094330368
starting receive base loop
num_worker_connections 64
Creating worker on tid 1502802432
starting receive base loop
num_worker_connections 64
Creating worker on tid 909505024
starting receive base loop
num_worker_connections 64
Creating worker on tid 313586176
starting receive base loop
num_worker_connections 64
Creating worker on tid 4012634624
starting receive base loop
num_worker_connections 64
Creating worker on tid 3416715776
starting receive base loop
num_worker_connections 64
Creating worker on tid 2820796928
starting receive base loop
Created 512 connections total
Creating worker on tid 2224878080
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576118699.117123,       0.0,      196188,     176786,      19402,     112591,      64195,   0.451343,   0.162100,   0.179100,   0.552100,   4.896664,   0.000000, 142.491996, 449.847765
Outstanding requests per worker:
1 0 2 2 1 2 2 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65045.9,      325230,     292817,      32413,     210132,      82685,   0.109096,   0.165100,   0.179100,   0.193100,   0.036913,   0.059000,   0.948000, 537.911405
Outstanding requests per worker:
0 2 1 1 0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65043.7,      325219,     293079,      32140,     220778,      72301,   0.109264,   0.165100,   0.179100,   0.194000,   0.037014,   0.058000,   1.685000, 577.217470
Outstanding requests per worker:
1 1 1 1 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65046.7,      325234,     292806,      32428,     227385,      65421,   0.109292,   0.165100,   0.179100,   0.195100,   0.038801,   0.060000,   1.204000, 602.746969
Outstanding requests per worker:
1 1 1 0 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65047.7,      325239,     292667,      32572,     231676,      60991,   0.109466,   0.166100,   0.179100,   0.195100,   0.038974,   0.059000,   1.762000, 618.988810
Outstanding requests per worker:
0 1 0 0 1 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65044.5,      325223,     292713,      32510,     235359,      57354,   0.109249,   0.165100,   0.179100,   0.195100,   0.037082,   0.059000,   0.811000, 634.696389
Outstanding requests per worker:
1 1 1 1 1 1 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65044.9,      325225,     292885,      32340,     238268,      54617,   0.109511,   0.166100,   0.179100,   0.196000,   0.038088,   0.061000,   0.835000, 644.239548
Outstanding requests per worker:
1 0 1 0 1 0 0 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:18   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6272 pts/0    S+   02:18   0:00 /usr/lib/linux
memcache      8  166  0.0 383680 84160 pts/0    Sl+  02:18   1:20 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  02:19   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

        8352710728      instructions:u            #    0.49  insn per cycle         
       17198353511      cycles:u                                                    

      47.760410021 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 70000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 70000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 70000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 70000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 70000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 70000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 70000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 70000 cpus 8
meanInterarrival 114
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1899950592
starting receive base loop
num_worker_connections 64
Creating worker on tid 1304097280
starting receive base loop
num_worker_connections 64
Creating worker on tid 708178432
starting receive base loop
num_worker_connections 64
Creating worker on tid 112259584
starting receive base loop
num_worker_connections 64
Creating worker on tid 3811308032
starting receive base loop
num_worker_connections 64
Creating worker on tid 3215389184
starting receive base loop
num_worker_connections 64
Creating worker on tid 2619470336
starting receive base loop
Created 512 connections total
Creating worker on tid 2023551488
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576118749.117173,       0.0,      170695,     153469,      17226,      97297,      56172,   0.320603,   0.160100,   0.171100,   0.262000,   3.737405,   0.000000, 111.314997, 445.988128
Outstanding requests per worker:
1 0 0 0 1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   70178.5,      350893,     315774,      35119,     225694,      90080,   0.111032,   0.160100,   0.171100,   0.205100,   0.042610,   0.060000,   1.274000, 534.778243
Outstanding requests per worker:
0 1 1 0 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   70178.3,      350892,     315972,      34920,     239100,      76872,   0.110931,   0.160100,   0.171100,   0.203100,   0.041426,   0.060000,   1.518000, 581.293877
Outstanding requests per worker:
1 0 0 1 1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   70178.1,      350891,     315729,      35162,     246070,      69659,   0.111502,   0.160100,   0.172100,   0.211100,   0.045453,   0.060000,   1.457000, 606.424535
Outstanding requests per worker:
0 0 1 0 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   70177.9,      350890,     316042,      34848,     251516,      64526,   0.111087,   0.160100,   0.172100,   0.205100,   0.043834,   0.059000,   1.555000, 624.365863
Outstanding requests per worker:
1 0 1 1 1 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   70178.3,      350892,     315670,      35222,     255097,      60573,   0.111353,   0.161100,   0.172100,   0.207100,   0.041862,   0.059000,   1.168000, 638.364384
Outstanding requests per worker:
1 1 1 1 2 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   70178.9,      350895,     315681,      35214,     258050,      57631,   0.111492,   0.161100,   0.173000,   0.202100,   0.041499,   0.058000,   1.625000, 648.448044
Outstanding requests per worker:
1 0 2 0 1 2 0 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:19   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6272 pts/0    S+   02:19   0:00 /usr/lib/linux
memcache      7  179  0.0 386752 86144 pts/0    Sl+  02:19   1:24 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  02:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

        8872008645      instructions:u            #    0.50  insn per cycle         
       17886347821      cycles:u                                                    

      47.160738406 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 75000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 75000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 75000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 75000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 75000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 75000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 75000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 75000 cpus 8
meanInterarrival 106
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2550919680
starting receive base loop
num_worker_connections 64
Creating worker on tid 1956442624
starting receive base loop
num_worker_connections 64
Creating worker on tid 1360523776
starting receive base loop
num_worker_connections 64
Creating worker on tid 767226368
starting receive base loop
num_worker_connections 64
Creating worker on tid 171307520
starting receive base loop
num_worker_connections 64
Creating worker on tid 3870355968
starting receive base loop
num_worker_connections 64
Creating worker on tid 3274437120
starting receive base loop
Created 512 connections total
Creating worker on tid 2678518272
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576118800.117224,       0.0,      183252,     164792,      18460,     105289,      59503,   0.734613,   0.162100,   0.170100,   0.562000,   8.626161,   0.000000, 199.569002, 451.733598
Outstanding requests per worker:
0 0 0 0 1 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75477.5,      377388,     339704,      37684,     244321,      95383,   0.119237,   0.162100,   0.169100,   0.261100,   0.048484,   0.059000,   1.088000, 539.268866
Outstanding requests per worker:
1 1 1 1 0 2 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75477.1,      377386,     339680,      37706,     258038,      81642,   0.121169,   0.163100,   0.170100,   0.274100,   0.061695,   0.059000,   1.850000, 583.777791
Outstanding requests per worker:
4 3 3 3 2 2 1 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75481.9,      377410,     339766,      37644,     265998,      73768,   0.120332,   0.163100,   0.170100,   0.268100,   0.054877,   0.060000,   1.550000, 609.932498
Outstanding requests per worker:
2 0 1 0 2 1 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75476.3,      377382,     339707,      37675,     271562,      68145,   0.120045,   0.163100,   0.170100,   0.260100,   0.051425,   0.060000,   1.545000, 628.457833
Outstanding requests per worker:
1 0 0 1 1 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75476.7,      377384,     339722,      37662,     275455,      64267,   0.120510,   0.163100,   0.170100,   0.268100,   0.050338,   0.059000,   1.309000, 641.188166
Outstanding requests per worker:
2 0 1 0 1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75478.9,      377395,     339720,      37675,     279147,      60573,   0.121830,   0.163100,   0.170100,   0.275100,   0.066044,   0.061000,   1.983000, 652.569975
Outstanding requests per worker:
0 1 0 1 0 1 2 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:20   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   02:20   0:00 /usr/lib/linux
memcache      7  194  0.0 390848 91904 pts/0    Sl+  02:20   1:29 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  02:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

        9504541911      instructions:u            #    0.49  insn per cycle         
       19326296612      cycles:u                                                    

      46.630483000 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 80000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 80000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 80000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 80000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 80000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 80000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 80000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 80000 cpus 8
meanInterarrival 100
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1748627968
starting receive base loop
num_worker_connections 64
Creating worker on tid 1151136256
starting receive base loop
num_worker_connections 64
Creating worker on tid 555217408
starting receive base loop
num_worker_connections 64
Creating worker on tid 4256887296
starting receive base loop
num_worker_connections 64
Creating worker on tid 3660968448
starting receive base loop
num_worker_connections 64
Creating worker on tid 3065049600
starting receive base loop
num_worker_connections 64
Creating worker on tid 2469130752
starting receive base loop
Created 512 connections total
Creating worker on tid 1873211904
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576118851.117275,       0.0,      252647,     227468,      25179,     148044,      79424,   1.282864,   0.161100,   0.170100,  31.300000,  12.222955,   0.000000, 249.783993, 465.156132
Outstanding requests per worker:
0 1 0 1 1 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80004.1,      400021,     360137,      39884,     263377,      96760,   0.129449,   0.163100,   0.170100,   0.354100,   0.075616,   0.059000,   1.849000, 553.023924
Outstanding requests per worker:
0 1 1 1 0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80003.7,      400019,     359971,      40048,     276254,      83717,   0.129620,   0.163100,   0.170100,   0.348100,   0.077263,   0.057000,   2.227000, 592.624795
Outstanding requests per worker:
0 0 1 2 1 2 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80005.3,      400027,     360141,      39886,     284142,      75999,   0.138235,   0.163100,   0.171100,   0.434100,   0.193029,   0.058000,   6.446000, 616.024871
Outstanding requests per worker:
1 1 1 1 2 1 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80002.9,      400015,     360274,      39741,     289662,      70612,   0.133339,   0.163100,   0.172100,   0.376100,   0.112931,   0.060000,   3.246000, 632.541566
Outstanding requests per worker:
1 2 2 1 2 1 1 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80005.5,      400028,     359926,      40102,     293550,      66376,   0.129411,   0.163100,   0.171100,   0.353100,   0.069300,   0.058000,   1.669000, 645.420448
Outstanding requests per worker:
2 1 1 2 1 1 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80003.7,      400019,     360327,      39692,     297380,      62947,   0.130880,   0.164100,   0.172100,   0.378100,   0.077089,   0.059000,   1.855000, 656.455803
Outstanding requests per worker:
1 1 1 0 1 2 2 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:20   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   02:20   0:00 /usr/lib/linux
memcache      7  200  0.0 395968 95040 pts/0    Sl+  02:20   1:36 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  02:21   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       10278802791      instructions:u            #    0.50  insn per cycle         
       20581441885      cycles:u                                                    

      48.070510968 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 85000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 85000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 85000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 85000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 85000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 85000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 85000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 85000 cpus 8
meanInterarrival 94
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1604055552
starting receive base loop
num_worker_connections 64
Creating worker on tid 1008857600
starting receive base loop
num_worker_connections 64
Creating worker on tid 412938752
starting receive base loop
num_worker_connections 64
Creating worker on tid 4111987200
starting receive base loop
num_worker_connections 64
Creating worker on tid 3518689792
starting receive base loop
num_worker_connections 64
Creating worker on tid 2922770944
starting receive base loop
num_worker_connections 64
Creating worker on tid 2326852096
starting receive base loop
Created 512 connections total
Creating worker on tid 1730933248
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576118901.117325,       0.0,      206465,     185633,      20832,     118735,      66898,   0.812717,   0.164100,   0.218100,   9.900000,   8.533849,   0.000000, 205.944002, 452.907026
Outstanding requests per worker:
1 1 1 1 2 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   85076.9,      425385,     382901,      42484,     277112,     105789,   0.183774,   0.165100,   0.221100,   1.600000,   0.558872,   0.059000,  16.052000, 544.800160
Outstanding requests per worker:
28 29 21 22 11 25 19 24 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   85143.5,      425718,     383281,      42437,     293314,      89967,   0.212390,   0.165100,   0.221100,   2.800000,   0.765442,   0.059000,  18.766001, 590.587217
Outstanding requests per worker:
1 2 1 2 1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   85110.3,      425552,     383082,      42470,     302171,      80911,   0.206327,   0.165100,   0.219100,   3.100000,   0.671026,   0.060000,  17.326999, 616.482583
Outstanding requests per worker:
0 2 1 2 1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   85110.7,      425554,     383017,      42537,     308784,      74233,   0.224627,   0.165100,   0.221100,   3.300000,   0.842462,   0.060000,  20.383000, 635.831370
Outstanding requests per worker:
1 1 1 1 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   85115.7,      425579,     383186,      42393,     313634,      69552,   0.217098,   0.165100,   0.221100,   3.000000,   0.818145,   0.059000,  19.035000, 649.272695
Outstanding requests per worker:
1 2 1 1 1 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   85110.5,      425553,     382852,      42701,     317534,      65318,   0.242906,   0.165100,   0.223100,   4.500000,   0.985100,   0.060000,  21.694999, 660.612814
Outstanding requests per worker:
1 1 1 1 1 1 1 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:21   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   02:21   0:00 /usr/lib/linux
memcache      7  209  0.0 398016 102144 pts/0   Sl+  02:21   1:38 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  02:22   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       10671032848      instructions:u            #    0.51  insn per cycle         
       21037081820      cycles:u                                                    

      46.550881903 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 90000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 90000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 90000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 90000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 90000 cpus 8
meanInterarrival 88
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2078929408
starting receive base loop
num_worker_connections 64
Creating worker on tid 1486680576
starting receive base loop
num_worker_connections 64
Creating worker on tid 890761728
starting receive base loop
num_worker_connections 64
Creating worker on tid 297464320
starting receive base loop
num_worker_connections 64
Creating worker on tid 3996512768
starting receive base loop
num_worker_connections 64
Creating worker on tid 3400593920
starting receive base loop
num_worker_connections 64
Creating worker on tid 2804675072
starting receive base loop
Created 512 connections total
Creating worker on tid 2208756224
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576118952.117376,       0.0,      274037,     246819,      27218,     161834,      84985,   0.447549,   0.163100,   0.226100,   6.700000,   3.832401,   0.000000, 116.149999, 470.484938
Outstanding requests per worker:
1 1 1 1 2 2 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90918.9,      454595,     409243,      45352,     301982,     107261,   0.221532,   0.198100,   0.231100,   3.000000,   0.794701,   0.061000,  20.453000, 559.670172
Outstanding requests per worker:
2 1 1 1 1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90913.5,      454568,     409382,      45186,     316555,      92827,   0.245266,   0.201100,   0.234100,   3.800000,   0.977620,   0.060000,  23.034999, 599.487051
Outstanding requests per worker:
1 1 1 1 1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90912.9,      454565,     409151,      45414,     325184,      83967,   0.307640,   0.204100,   0.235100,   6.900000,   1.434583,   0.058000,  32.076001, 623.367302
Outstanding requests per worker:
1 1 1 3 2 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90917.1,      454586,     409374,      45212,     331572,      77802,   0.278688,   0.203100,   0.235100,   5.000000,   1.231118,   0.059000,  28.853999, 640.312450
Outstanding requests per worker:
1 0 1 1 1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90912.5,      454563,     409132,      45431,     336382,      72750,   0.293853,   0.206100,   0.236100,   6.200000,   1.313690,   0.061000,  27.331000, 653.761319
Outstanding requests per worker:
1 2 1 3 1 1 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90914.1,      454571,     409301,      45270,     340464,      68837,   0.296565,   0.207100,   0.237100,   6.200000,   1.360867,   0.059000,  34.182001, 664.065851
Outstanding requests per worker:
1 1 1 1 1 2 2 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:22   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6272 pts/0    S+   02:22   0:00 /usr/lib/linux
memcache      7  219  0.0 404160 98688 pts/0    Sl+  02:22   1:45 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  02:23   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       11602083856      instructions:u            #    0.52  insn per cycle         
       22522706086      cycles:u                                                    

      47.560975407 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 95000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 95000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 95000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 95000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 95000 cpus 8
meanInterarrival 84
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1738469888
starting receive base loop
num_worker_connections 64
Creating worker on tid 1143075328
starting receive base loop
num_worker_connections 64
Creating worker on tid 547156480
starting receive base loop
num_worker_connections 64
Creating worker on tid 4246204928
starting receive base loop
num_worker_connections 64
Creating worker on tid 3652907520
starting receive base loop
num_worker_connections 64
Creating worker on tid 3056988672
starting receive base loop
num_worker_connections 64
Creating worker on tid 2461069824
starting receive base loop
Created 512 connections total
Creating worker on tid 1865150976
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576119003.117427,       0.0,      237063,     213400,      23663,     137881,      75519,   0.517262,   0.207100,   0.233100,  10.400000,   4.299220,   0.000000, 121.936001, 460.517737
Outstanding requests per worker:
1 1 1 2 3 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95245.5,      476228,     428930,      47298,     313631,     115299,   0.349411,   0.217100,   0.240100,   8.300000,   1.726944,   0.060000,  40.312000, 553.013914
Outstanding requests per worker:
1 1 1 1 1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95246.5,      476233,     428715,      47518,     331263,      97452,   0.344996,   0.218100,   0.242100,   7.900000,   1.692943,   0.061000,  39.781000, 598.484105
Outstanding requests per worker:
2 3 1 2 1 1 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95250.1,      476251,     428712,      47539,     341238,      87474,   0.354796,   0.219100,   0.246100,   8.300000,   1.735785,   0.060000,  40.642001, 623.830212
Outstanding requests per worker:
1 1 1 1 1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95243.1,      476216,     428203,      48013,     347918,      80285,   0.300470,   0.219100,   0.244100,   6.000000,   1.361720,   0.061000,  29.964000, 642.064255
Outstanding requests per worker:
2 1 2 1 2 3 3 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95204.7,      476024,     428630,      47394,     352867,      75763,   0.401461,   0.221100,   0.279100,   9.800000,   2.018905,   0.061000,  46.243999, 655.179413
Outstanding requests per worker:
34 16 18 26 25 29 30 37 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95287.7,      476439,     428850,      47589,     357761,      71089,   0.431063,   0.222100,   0.280100,  11.400000,   2.133630,   0.061000,  44.146001, 666.369546
Outstanding requests per worker:
2 1 2 2 1 1 1 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:23   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   02:23   0:00 /usr/lib/linux
memcache      7  227  0.0 406208 109376 pts/0   Sl+  02:23   1:46 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  02:24   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       11903656834      instructions:u            #    0.52  insn per cycle         
       23009049372      cycles:u                                                    

      46.989829045 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 100000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 100000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 100000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 100000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 100000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 100000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 100000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 100000 cpus 8
meanInterarrival 80
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2586374656
starting receive base loop
num_worker_connections 64
Creating worker on tid 1991307776
starting receive base loop
num_worker_connections 64
Creating worker on tid 1395388928
starting receive base loop
num_worker_connections 64
Creating worker on tid 799470080
starting receive base loop
num_worker_connections 64
Creating worker on tid 203551232
starting receive base loop
num_worker_connections 64
Creating worker on tid 3902599680
starting receive base loop
num_worker_connections 64
Creating worker on tid 3306680832
starting receive base loop
Created 512 connections total
Creating worker on tid 2713383424
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576119053.117477,       0.0,      247371,     222638,      24733,     144578,      78060,   0.628653,   0.224100,   0.289100,  15.900000,   4.510155,   0.000000, 116.833001, 463.194576
Outstanding requests per worker:
1 2 2 2 1 1 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  100009.5,      500048,     450517,      49531,     331191,     119326,   0.441183,   0.227100,   0.295100,  11.300000,   2.343058,   0.061000,  54.497000, 556.864673
Outstanding requests per worker:
2 1 2 2 1 3 1 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  100013.5,      500068,     449960,      50108,     348891,     101069,   0.437544,   0.229100,   0.297100,  11.200000,   2.297127,   0.061000,  51.853999, 601.355483
Outstanding requests per worker:
1 1 1 1 1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  100005.5,      500028,     450041,      49987,     359535,      90506,   0.459199,   0.228100,   0.296100,  11.900000,   2.462313,   0.061000,  62.868997, 627.087928
Outstanding requests per worker:
1 1 1 2 1 1 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   99969.3,      499847,     450088,      49759,     366849,      83239,   0.490487,   0.230100,   0.300100,  13.200000,   2.591102,   0.061000,  57.262000, 645.389939
Outstanding requests per worker:
23 28 34 25 25 22 27 24 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   99969.9,      499850,     449469,      50381,     371546,      77923,   0.533965,   0.233100,   0.305100,  15.000000,   2.761408,   0.061000,  55.803001, 658.442860
Outstanding requests per worker:
63 48 45 76 40 52 34 49 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  100089.3,      500447,     450042,      50405,     376238,      73804,   0.468871,   0.233100,   0.305100,  12.300000,   2.412036,   0.060000,  53.105999, 668.818764
Outstanding requests per worker:
1 1 3 3 2 3 1 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:24   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   02:24   0:00 /usr/lib/linux
memcache      7  241  0.0 410304 115072 pts/0   Sl+  02:24   1:51 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  02:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       12407321094      instructions:u            #    0.53  insn per cycle         
       23413856850      cycles:u                                                    

      46.370734029 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 105000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 105000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 105000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 105000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 105000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 105000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 105000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 105000 cpus 8
meanInterarrival 76
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2005463552
starting receive base loop
num_worker_connections 64
Creating worker on tid 1411510784
starting receive base loop
num_worker_connections 64
Creating worker on tid 815591936
starting receive base loop
num_worker_connections 64
Creating worker on tid 219673088
starting receive base loop
num_worker_connections 64
Creating worker on tid 3921342976
starting receive base loop
num_worker_connections 64
Creating worker on tid 3325424128
starting receive base loop
num_worker_connections 64
Creating worker on tid 2729505280
starting receive base loop
Created 512 connections total
Creating worker on tid 2133586432
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576119103.117527,       0.0,      252234,     227160,      25074,     147334,      79826,   0.708061,   0.258000,   0.298100,  17.800000,   5.795362,   0.000000, 141.085997, 462.894330
Outstanding requests per worker:
3 3 2 3 2 2 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  105270.3,      526352,     473808,      52544,     348238,     125570,   0.167025,   0.255100,   0.283100,   0.373100,   0.063188,   0.061000,   1.502000, 557.630806
Outstanding requests per worker:
2 2 1 2 3 2 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  105271.1,      526356,     473954,      52402,     368534,     105420,   0.168340,   0.257100,   0.285000,   0.392000,   0.064634,   0.059000,   1.811000, 604.035537
Outstanding requests per worker:
1 2 2 1 1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  105272.7,      526364,     473942,      52422,     378974,      94968,   0.169420,   0.258000,   0.287100,   0.404100,   0.067378,   0.060000,   2.272000, 628.576020
Outstanding requests per worker:
1 3 3 2 2 2 3 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  105276.1,      526381,     473625,      52756,     386955,      86670,   0.170248,   0.259100,   0.288100,   0.405100,   0.065891,   0.062000,   1.940000, 647.785184
Outstanding requests per worker:
2 1 3 1 2 1 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  105269.3,      526347,     473535,      52812,     392488,      81047,   0.170293,   0.259100,   0.288100,   0.407100,   0.066305,   0.061000,   1.929000, 660.497672
Outstanding requests per worker:
1 1 2 2 1 2 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  105271.1,      526356,     474119,      52237,     397715,      76404,   0.171249,   0.260100,   0.289100,   0.408100,   0.072238,   0.062000,   2.378000, 671.648474
Outstanding requests per worker:
1 2 1 2 1 1 1 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:25   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6272 pts/0    S+   02:25   0:00 /usr/lib/linux
memcache      7  246  0.0 413376 116544 pts/0   Sl+  02:25   1:53 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  02:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       12986828734      instructions:u            #    0.54  insn per cycle         
       24067617907      cycles:u                                                    

      46.570581565 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 110000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 110000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 110000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 110000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 110000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 110000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 110000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 110000 cpus 8
meanInterarrival 72
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2106716672
starting receive base loop
num_worker_connections 64
Creating worker on tid 1513484800
starting receive base loop
num_worker_connections 64
Creating worker on tid 917565952
starting receive base loop
num_worker_connections 64
Creating worker on tid 321647104
starting receive base loop
num_worker_connections 64
Creating worker on tid 4020695552
starting receive base loop
num_worker_connections 64
Creating worker on tid 3424776704
starting receive base loop
num_worker_connections 64
Creating worker on tid 2828857856
starting receive base loop
Created 512 connections total
Creating worker on tid 2232939008
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576119153.117577,       0.0,      266575,     240118,      26457,     156511,      83607,   0.573106,   0.272100,   0.337100,   0.615100,   5.847682,   0.000000, 150.098994, 465.585312
Outstanding requests per worker:
4 3 3 2 2 1 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  111116.5,      555583,     500008,      55575,     369089,     130919,   0.185672,   0.275100,   0.335100,   0.464100,   0.080812,   0.060000,   1.831000, 560.700985
Outstanding requests per worker:
2 1 3 2 2 3 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  111115.5,      555578,     500082,      55496,     390407,     109675,   0.187396,   0.278100,   0.338100,   0.472100,   0.081319,   0.060000,   2.356000, 607.838470
Outstanding requests per worker:
2 3 2 3 4 2 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  111119.3,      555597,     499901,      55696,     401652,      98249,   0.189464,   0.282100,   0.342100,   0.474100,   0.082748,   0.061000,   1.998000, 633.372626
Outstanding requests per worker:
2 2 2 2 3 1 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  111116.5,      555583,     500153,      55430,     410228,      89925,   0.190894,   0.283100,   0.343100,   0.486100,   0.088616,   0.057000,   2.528000, 650.693184
Outstanding requests per worker:
2 2 2 2 2 1 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  111115.5,      555578,     499561,      56017,     415469,      84092,   0.191459,   0.300100,   0.344100,   0.480100,   0.086269,   0.062000,   2.274000, 663.812471
Outstanding requests per worker:
2 2 3 3 3 2 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  111115.7,      555579,     499980,      55599,     420643,      79337,   0.192170,   0.302100,   0.345100,   0.482100,   0.091130,   0.061000,   2.286000, 674.470499
Outstanding requests per worker:
3 2 1 3 2 3 3 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:26   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6272 pts/0    S+   02:26   0:00 /usr/lib/linux
memcache      7  250  0.0 418496 118336 pts/0   Sl+  02:26   1:57 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  02:26   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       13614105785      instructions:u            #    0.54  insn per cycle         
       25016964866      cycles:u                                                    

      46.631826739 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 115000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 115000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 115000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 115000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 115000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 115000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 115000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 115000 cpus 8
meanInterarrival 69
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2373841408
starting receive base loop
num_worker_connections 64
Creating worker on tid 1781920256
starting receive base loop
num_worker_connections 64
Creating worker on tid 1186001408
starting receive base loop
num_worker_connections 64
Creating worker on tid 590082560
starting receive base loop
num_worker_connections 64
Creating worker on tid 4289131008
starting receive base loop
num_worker_connections 64
Creating worker on tid 3693212160
starting receive base loop
num_worker_connections 64
Creating worker on tid 3097293312
starting receive base loop
Created 512 connections total
Creating worker on tid 2501374464
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576119204.117628,       0.0,      360039,     323787,      36252,     216045,     107742,   0.617014,   0.314100,   0.392000,   1.900000,   5.620359,   0.000000, 151.557997, 483.749400
Outstanding requests per worker:
7 4 6 7 5 6 9 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  115955.1,      579776,     521974,      57802,     391966,     130008,   0.217094,   0.335100,   0.408100,   0.596100,   0.110356,   0.060000,   2.248000, 575.024290
Outstanding requests per worker:
2 2 1 3 3 4 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  115954.5,      579773,     522277,      57496,     411573,     110704,   0.219355,   0.351100,   0.434100,   0.602100,   0.106234,   0.060000,   1.907000, 615.798469
Outstanding requests per worker:
2 1 3 2 2 4 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  115946.3,      579732,     521688,      58044,     422263,      99425,   0.222018,   0.364100,   0.439100,   0.614100,   0.113160,   0.059000,   2.183000, 639.644981
Outstanding requests per worker:
2 4 2 3 4 3 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  115951.3,      579757,     521677,      58080,     429658,      92019,   0.224002,   0.371100,   0.443100,   0.606100,   0.114363,   0.061000,   3.017000, 655.140186
Outstanding requests per worker:
2 2 2 3 1 2 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  115945.5,      579728,     521575,      58153,     435729,      85846,   0.226926,   0.374100,   0.448100,   0.655100,   0.116409,   0.059000,   1.804000, 668.185762
Outstanding requests per worker:
3 3 5 3 2 2 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  115955.3,      579777,     521858,      57919,     441135,      80723,   0.229402,   0.376100,   0.449100,   0.633100,   0.128235,   0.061000,   3.075000, 679.110714
Outstanding requests per worker:
3 2 3 3 3 3 2 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:26   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   02:26   0:00 /usr/lib/linux
memcache      7  257  0.0 422592 121856 pts/0   Sl+  02:26   2:03 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  02:27   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       14464087308      instructions:u            #    0.56  insn per cycle         
       25945696256      cycles:u                                                    

      47.460533450 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 12000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 12000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 12000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 12000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 12000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 12000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 12000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 12000 cpus 8
meanInterarrival 666
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2242966016
starting receive base loop
num_worker_connections 64
Creating worker on tid 1647702528
starting receive base loop
num_worker_connections 64
Creating worker on tid 1051783680
starting receive base loop
num_worker_connections 64
Creating worker on tid 455864832
starting receive base loop
num_worker_connections 64
Creating worker on tid 4154913280
starting receive base loop
num_worker_connections 64
Creating worker on tid 3558994432
starting receive base loop
num_worker_connections 64
Creating worker on tid 2963075584
starting receive base loop
Created 512 connections total
Creating worker on tid 2367156736
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576119255.117679,       0.0,       29196,      26307,       2889,      14840,      11467,   0.383306,   0.102100,   0.115100,   0.191100,   4.627756,   0.000000, 121.266998, 370.271601
Outstanding requests per worker:
0 0 0 0 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12012.4,       60062,      53920,       6142,      33666,      20254,   0.087346,   0.101100,   0.107100,   0.137100,   0.016316,   0.068000,   1.108000, 436.230657
Outstanding requests per worker:
0 0 0 0 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12012.8,       60064,      54046,       6018,      35539,      18507,   0.087358,   0.101100,   0.105100,   0.145100,   0.018163,   0.067000,   0.983000, 473.344262
Outstanding requests per worker:
0 1 0 0 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12013.4,       60067,      54069,       5998,      36619,      17450,   0.087072,   0.101100,   0.105100,   0.139100,   0.016032,   0.070000,   0.362000, 495.136270
Outstanding requests per worker:
0 0 0 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12013.4,       60067,      54027,       6040,      37619,      16408,   0.087195,   0.101100,   0.105100,   0.144100,   0.017031,   0.067000,   0.880000, 514.415144
Outstanding requests per worker:
0 0 0 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12012.4,       60062,      54157,       5905,      38449,      15708,   0.087010,   0.101100,   0.105100,   0.137100,   0.016590,   0.067000,   0.794000, 529.211108
Outstanding requests per worker:
1 0 0 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12012.8,       60064,      53942,       6122,      38844,      15098,   0.087168,   0.101100,   0.105100,   0.146100,   0.016733,   0.069000,   0.412000, 540.281636
Outstanding requests per worker:
1 0 1 0 0 0 0 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:27   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   02:27   0:00 /usr/lib/linux
memcache      7 36.3  0.0 328384 30016 pts/0    Sl+  02:27   0:16 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  02:28   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

        1508703532      instructions:u            #    0.45  insn per cycle         
        3387949850      cycles:u                                                    

      46.619282742 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 125000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 125000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 125000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 125000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 125000 cpus 8
meanInterarrival 64
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2479026688
starting receive base loop
num_worker_connections 64
Creating worker on tid 1881272832
starting receive base loop
num_worker_connections 64
Creating worker on tid 1285353984
starting receive base loop
num_worker_connections 64
Creating worker on tid 689435136
starting receive base loop
num_worker_connections 64
Creating worker on tid 96137728
starting receive base loop
num_worker_connections 64
Creating worker on tid 3795186176
starting receive base loop
num_worker_connections 64
Creating worker on tid 3199267328
starting receive base loop
Created 512 connections total
Creating worker on tid 2603348480
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576119305.117729,       0.0,      298684,     268685,      29999,     177295,      91390,   1.293085,   1.700000,   3.700000,  10.900000,   7.724942,   0.000000, 192.038998, 475.114599
Outstanding requests per worker:
4 5 7 7 5 5 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125009.7,      625049,     562674,      62375,     419350,     143324,   0.456408,   0.876100,   1.300000,   2.400000,   0.420891,   0.072000,   4.957000, 568.463858
Outstanding requests per worker:
10 5 6 9 4 9 12 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.9,      625035,     563003,      62032,     442374,     120629,   0.528380,   1.100000,   1.600000,   3.000000,   0.569521,   0.076000,   7.597000, 613.233429
Outstanding requests per worker:
9 14 9 13 10 16 17 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125012.3,      625062,     562459,      62603,     455873,     106586,   0.568472,   1.200000,   1.800000,   3.100000,   0.583365,   0.069000,   6.126000, 640.753072
Outstanding requests per worker:
10 7 12 10 7 11 8 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125013.1,      625066,     562727,      62339,     464858,      97869,   0.535703,   1.100000,   1.600000,   2.700000,   0.509486,   0.071000,   5.536000, 658.029076
Outstanding requests per worker:
7 7 8 4 7 7 8 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.9,      625040,     562418,      62622,     471353,      91065,   0.537410,   1.100000,   1.500000,   2.600000,   0.492922,   0.075000,   6.618000, 670.330329
Outstanding requests per worker:
7 6 9 5 8 6 7 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125018.5,      625093,     562517,      62576,     476385,      86132,   0.595231,   1.300000,   1.800000,   3.200000,   0.616391,   0.076000,   8.551000, 680.140268
Outstanding requests per worker:
4 4 4 5 3 4 6 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:28   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   02:28   0:00 /usr/lib/linux
memcache      7  276  0.0 426688 129472 pts/0   Sl+  02:28   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  02:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       14975718055      instructions:u            #    0.58  insn per cycle         
       25638212205      cycles:u                                                    

      46.260756687 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 130000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 130000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 130000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 130000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 130000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 130000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 130000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 130000 cpus 8
meanInterarrival 61
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2423976448
starting receive base loop
num_worker_connections 64
Creating worker on tid 1830285824
starting receive base loop
num_worker_connections 64
Creating worker on tid 1236988416
starting receive base loop
num_worker_connections 64
Creating worker on tid 641069568
starting receive base loop
num_worker_connections 64
Creating worker on tid 45150720
starting receive base loop
num_worker_connections 64
Creating worker on tid 3744199168
starting receive base loop
num_worker_connections 64
Creating worker on tid 3148280320
starting receive base loop
Created 512 connections total
Creating worker on tid 2552361472
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576119356.117780,       0.0,      394348,     355131,      39217,     239175,     115956,   2.621236,   5.200000,   7.100000,  27.400000,   8.604013,   0.000000, 194.435000, 489.508196
Outstanding requests per worker:
36 38 27 41 20 43 31 30 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131152.9,      655765,     590932,      64833,     446563,     144369,   2.327204,   4.700000,   5.600000,   7.500000,   1.673645,   0.074000,  12.060000, 579.845045
Outstanding requests per worker:
38 39 34 47 42 37 37 39 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131152.9,      655765,     590071,      65694,     468072,     121999,   2.592583,   5.100000,   6.000000,   8.000000,   1.772857,   0.077000,  12.753000, 620.883311
Outstanding requests per worker:
42 41 48 47 43 41 55 54 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131151.5,      655758,     589932,      65826,     480938,     108994,   2.776610,   5.500000,   6.400000,   8.300000,   1.869331,   0.084000,  12.563000, 645.546139
Outstanding requests per worker:
47 45 46 58 41 44 55 50 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131156.5,      655783,     590064,      65719,     489580,     100484,   2.903523,   5.600000,   6.600000,   8.500000,   1.906611,   0.073000,  13.520000, 661.814781
Outstanding requests per worker:
55 46 45 44 45 58 46 53 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131158.1,      655791,     590225,      65566,     496558,      93667,   3.112924,   5.800000,   6.600000,   8.500000,   1.926151,   0.092000,  21.333000, 674.062652
Outstanding requests per worker:
54 57 46 44 57 42 48 59 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131162.7,      655814,     590162,      65652,     501862,      88300,   3.134654,   5.900000,   6.900000,   8.900000,   1.948406,   0.087000,  13.044000, 684.252398
Outstanding requests per worker:
58 57 43 53 49 50 51 51 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:29   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   02:29   0:00 /usr/lib/linux
memcache      7  282  0.0 432832 135808 pts/0   Sl+  02:29   2:12 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  02:30   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       16112573597      instructions:u            #    0.64  insn per cycle         
       24984622486      cycles:u                                                    

      47.561111741 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 135000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 135000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 135000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 135000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 135000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 135000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 135000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 135000 cpus 8
meanInterarrival 59
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1834807808
starting receive base loop
num_worker_connections 64
Creating worker on tid 1236988416
starting receive base loop
num_worker_connections 64
Creating worker on tid 641069568
starting receive base loop
num_worker_connections 64
Creating worker on tid 45150720
starting receive base loop
num_worker_connections 64
Creating worker on tid 3744199168
starting receive base loop
num_worker_connections 64
Creating worker on tid 3148280320
starting receive base loop
num_worker_connections 64
Creating worker on tid 2552361472
starting receive base loop
Created 512 connections total
Creating worker on tid 1956442624
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576119406.117830,       0.0,      325063,     292356,      32707,     194827,      97529,   4.707015,   8.900000,  11.800000,  23.100000,   8.910606,   0.000000, 190.364003, 481.347703
Outstanding requests per worker:
63 66 64 57 70 70 62 68 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  135604.9,      678025,     610477,      67548,     458828,     151649,   3.953252,   7.200000,   8.400000,  10.600000,   2.367659,   0.145000,  15.133000, 575.588273
Outstanding requests per worker:
64 67 67 72 61 71 73 69 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  135598.7,      677994,     610193,      67801,     483149,     127044,   4.140084,   7.700000,   8.800000,  10.800000,   2.471713,   0.102000,  17.015001, 620.592126
Outstanding requests per worker:
67 66 84 72 67 72 66 71 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  135600.3,      678002,     610227,      67775,     497324,     112903,   4.272762,   7.800000,   9.000000,  11.500000,   2.565898,   0.148000,  18.076001, 645.642705
Outstanding requests per worker:
75 70 71 60 78 70 73 82 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  135608.5,      678043,     610293,      67750,     506916,     103377,   4.375827,   8.100000,   9.300000,  11.900000,   2.657860,   0.158000,  18.185999, 662.433713
Outstanding requests per worker:
79 62 71 70 85 67 69 70 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  135595.7,      677979,     610329,      67650,     514316,      96013,   4.481368,   8.300000,   9.600000,  12.100000,   2.728068,   0.106000,  18.513000, 675.906885
Outstanding requests per worker:
76 79 81 72 78 85 74 79 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  135602.9,      678015,     610248,      67767,     519346,      90902,   4.504567,   8.300000,   9.500000,  11.600000,   2.671130,   0.150000,  16.248999, 685.296302
Outstanding requests per worker:
75 75 71 74 81 84 77 79 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:30   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   02:30   0:00 /usr/lib/linux
memcache      7  282  0.0 432832 134272 pts/0   Sl+  02:30   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  02:31   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       16441749302      instructions:u            #    0.66  insn per cycle         
       24894221922      cycles:u                                                    

      46.569765431 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 140000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 140000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 140000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 140000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 140000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 140000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 140000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 140000 cpus 8
meanInterarrival 57
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2132668928
starting receive base loop
num_worker_connections 64
Creating worker on tid 1537667584
starting receive base loop
num_worker_connections 64
Creating worker on tid 941748736
starting receive base loop
num_worker_connections 64
Creating worker on tid 345829888
starting receive base loop
num_worker_connections 64
Creating worker on tid 4044878336
starting receive base loop
num_worker_connections 64
Creating worker on tid 3451580928
starting receive base loop
num_worker_connections 64
Creating worker on tid 2855662080
starting receive base loop
Created 512 connections total
Creating worker on tid 2259743232
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576119456.117880,       0.0,      335735,     301884,      33851,     199833,     102051,   5.903019,  12.400000,  15.700000,  27.200000,   6.893468,   0.000000, 133.411005, 477.844907
Outstanding requests per worker:
102 97 89 95 91 85 107 103 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  140357.7,      701789,     631812,      69977,     475438,     156374,   5.644828,  10.600000,  12.200000,  15.400000,   3.484102,   0.143000,  23.360999, 576.493636
Outstanding requests per worker:
94 98 107 88 109 100 107 100 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  140359.9,      701800,     631561,      70239,     501474,     130087,   5.906906,  11.000000,  12.900000,  16.700000,   3.705456,   0.160000,  24.745001, 622.301565
Outstanding requests per worker:
108 102 115 100 94 111 108 108 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  140351.9,      701760,     631426,      70334,     516228,     115198,   6.092345,  11.400000,  13.300000,  16.700000,   3.784284,   0.161000,  22.981999, 647.840113
Outstanding requests per worker:
98 96 112 116 111 108 122 122 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  140363.5,      701818,     631277,      70541,     525341,     105936,   6.255890,  11.800000,  13.700000,  17.500000,   3.935724,   0.147000,  30.239001, 664.589511
Outstanding requests per worker:
102 101 107 120 95 120 106 125 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  140365.5,      701828,     631548,      70280,     533119,      98429,   6.337956,  12.000000,  13.800000,  17.800000,   3.974535,   0.164000,  24.721000, 677.336983
Outstanding requests per worker:
94 108 119 125 105 104 120 103 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  140364.3,      701822,     631539,      70283,     538274,      93265,   6.407607,  12.200000,  14.000000,  17.400000,   3.995982,   0.159000,  27.995000, 686.244740
Outstanding requests per worker:
98 118 105 111 111 115 117 117 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:31   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6272 pts/0    S+   02:31   0:00 /usr/lib/linux
memcache      7  282  0.0 437952 143296 pts/0   Sl+  02:31   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  02:31   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       17192321021      instructions:u            #    0.69  insn per cycle         
       25029429833      cycles:u                                                    

      46.380736884 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 145000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 145000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 145000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 145000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 145000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 145000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 145000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 145000 cpus 8
meanInterarrival 55
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2559046144
starting receive base loop
num_worker_connections 64
Creating worker on tid 1964503552
starting receive base loop
num_worker_connections 64
Creating worker on tid 1371206144
starting receive base loop
num_worker_connections 64
Creating worker on tid 775287296
starting receive base loop
num_worker_connections 64
Creating worker on tid 179368448
starting receive base loop
num_worker_connections 64
Creating worker on tid 3878416896
starting receive base loop
num_worker_connections 64
Creating worker on tid 3282498048
starting receive base loop
Created 512 connections total
Creating worker on tid 2686579200
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576119507.117931,       0.0,      441366,     397427,      43939,     269504,     127923,   5.688619,  12.900000,  16.000000,  33.900000,   8.715324,   0.000000, 165.417001, 495.421637
Outstanding requests per worker:
134 118 142 146 122 120 156 124 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  145463.3,      727317,     654655,      72662,     498842,     155813,   7.118011,  13.600000,  15.800000,  19.500000,   4.441960,   0.128000,  28.066000, 587.298815
Outstanding requests per worker:
131 151 147 125 124 143 133 119 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  145464.1,      727321,     654789,      72532,     523747,     131042,   7.377484,  14.000000,  16.500000,  20.600000,   4.652089,   0.160000,  29.033000, 628.737873
Outstanding requests per worker:
149 127 130 126 134 146 145 129 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  145452.5,      727263,     654669,      72594,     537476,     117193,   7.589969,  14.500000,  17.000000,  21.200000,   4.772917,   0.185000,  31.876002, 652.352816
Outstanding requests per worker:
150 156 149 137 158 137 158 124 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  145477.1,      727386,     654980,      72406,     547763,     107217,   7.752937,  14.900000,  17.500000,  21.400000,   4.863797,   0.159000,  32.536000, 668.984928
Outstanding requests per worker:
162 157 138 112 148 138 148 146 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  145469.3,      727347,     654475,      72872,     554121,     100354,   7.869567,  15.000000,  17.700000,  21.800000,   4.948370,   0.192000,  29.118000, 680.237322
Outstanding requests per worker:
140 158 141 148 130 128 129 147 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  145466.3,      727332,     655028,      72304,     560546,      94482,   7.936085,  15.100000,  17.900000,  22.100000,   5.001714,   0.189000,  38.095001, 690.224213
Outstanding requests per worker:
118 153 160 145 144 158 131 114 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:31   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6272 pts/0    S+   02:31   0:00 /usr/lib/linux
memcache      7  283  0.0 442048 139840 pts/0   Sl+  02:31   2:13 memcached -t 4
memcache     19  0.0  0.0   6656  4416 pts/1    Rs+  02:32   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       18297474548      instructions:u            #    0.69  insn per cycle         
       26438004729      cycles:u                                                    

      47.340781012 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 150000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 150000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 150000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 150000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 150000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 150000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 150000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 150000 cpus 8
meanInterarrival 53
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2536370688
starting receive base loop
num_worker_connections 64
Creating worker on tid 1940320768
starting receive base loop
num_worker_connections 64
Creating worker on tid 1344401920
starting receive base loop
num_worker_connections 64
Creating worker on tid 748483072
starting receive base loop
num_worker_connections 64
Creating worker on tid 152564224
starting receive base loop
num_worker_connections 64
Creating worker on tid 3854234112
starting receive base loop
num_worker_connections 64
Creating worker on tid 3258315264
starting receive base loop
Created 512 connections total
Creating worker on tid 2662396416
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576119557.117981,       0.0,      361979,     325940,      36039,     218070,     107870,  10.598830,  23.300000,  29.400000,  52.300000,  10.848711,   0.000000, 180.484995, 484.610484
Outstanding requests per worker:
204 169 149 186 164 184 214 179 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150944.8,      754725,     679708,      75017,     513891,     165817,   9.933235,  18.500000,  22.700000,  28.400000,   6.301099,   0.190000,  42.957000, 579.984605
Outstanding requests per worker:
197 209 199 170 204 197 181 183 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150944.6,      754724,     679472,      75252,     541832,     137640,  10.461285,  19.300000,  23.800000,  30.800000,   6.687019,   0.201000,  51.169999, 626.106147
Outstanding requests per worker:
199 182 173 189 233 213 188 201 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150943.2,      754717,     679442,      75275,     557845,     121597,  10.777276,  20.100000,  24.400000,  31.900000,   6.940052,   0.192000,  60.557000, 652.257413
Outstanding requests per worker:
227 210 216 194 195 197 209 195 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150935.6,      754679,     679174,      75505,     568404,     110770,  11.174379,  20.600000,  25.200000,  33.600000,   7.219680,   0.189000,  68.075001, 669.488384
Outstanding requests per worker:
222 228 219 209 256 203 235 186 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150965.4,      754828,     679344,      75484,     575950,     103394,  11.428608,  21.100000,  25.700000,  34.800000,   7.399004,   0.190000,  69.251999, 682.034554
Outstanding requests per worker:
194 231 261 198 187 224 204 236 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150939.8,      754700,     679320,      75380,     581862,      97458,  11.497780,  21.200000,  25.900000,  34.800000,   7.451866,   0.228000,  72.095998, 690.127271
Outstanding requests per worker:
202 195 215 258 230 222 235 240 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:32   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   02:32   0:00 /usr/lib/linux
memcache      7  283  0.0 444096 142144 pts/0   Sl+  02:32   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  02:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       18576588119      instructions:u            #    0.70  insn per cycle         
       26447863192      cycles:u                                                    

      46.790668775 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 155000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 155000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 155000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 155000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 155000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 155000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 155000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 155000 cpus 8
meanInterarrival 51
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2136666624
starting receive base loop
num_worker_connections 64
Creating worker on tid 1537667584
starting receive base loop
num_worker_connections 64
Creating worker on tid 941748736
starting receive base loop
num_worker_connections 64
Creating worker on tid 345829888
starting receive base loop
num_worker_connections 64
Creating worker on tid 4044878336
starting receive base loop
num_worker_connections 64
Creating worker on tid 3451580928
starting receive base loop
num_worker_connections 64
Creating worker on tid 2855662080
starting receive base loop
Created 512 connections total
Creating worker on tid 2259743232
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576119607.118031,       0.0,      374821,     337449,      37372,     225966,     111483,  17.441571,  38.300000,  55.700000,  89.700000,  19.547023,   0.000000, 288.576007, 486.259565
Outstanding requests per worker:
215 246 244 239 283 290 241 279 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156846.0,      784231,     705723,      78508,     536428,     169295,  13.545339,  24.800000,  30.000000,  42.400000,   8.887343,   0.233000,  82.350001, 584.540470
Outstanding requests per worker:
265 286 268 282 254 290 257 281 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156865.6,      784329,     706034,      78295,     565059,     140975,  14.324478,  25.900000,  31.700000,  44.600000,   9.310646,   0.237000,  90.612002, 629.060826
Outstanding requests per worker:
305 293 280 268 241 304 264 287 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156855.2,      784277,     705460,      78817,     580733,     124727,  14.865490,  26.800000,  32.600000,  47.000000,   9.733086,   0.227000,  90.191998, 654.685821
Outstanding requests per worker:
310 281 308 255 302 310 316 294 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156860.4,      784303,     705474,      78829,     591281,     114193,  15.301214,  27.100000,  33.900000,  47.600000,   9.938794,   0.226000,  91.627002, 670.808043
Outstanding requests per worker:
299 290 278 311 308 309 283 344 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156854.2,      784272,     705681,      78591,     600122,     105559,  15.760491,  28.000000,  35.000000,  49.200000,  10.285563,   0.231000,  98.436996, 684.606193
Outstanding requests per worker:
310 344 345 322 326 304 304 269 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156810.8,      784055,     705649,      78406,     606210,      99439,  16.320553,  29.600000,  36.800000,  53.900000,  11.048165,   0.274000, 114.381999, 694.179235
Outstanding requests per worker:
399 339 359 366 332 340 369 358 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:33   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   02:33   0:00 /usr/lib/linux
memcache      7  283  0.0 449216 155584 pts/0   Sl+  02:33   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  02:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19376836010      instructions:u            #    0.74  insn per cycle         
       26289561404      cycles:u                                                    

      46.470967265 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 160000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 160000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 160000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 160000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 160000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 160000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 160000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 160000 cpus 8
meanInterarrival 50
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2441015808
starting receive base loop
num_worker_connections 64
Creating worker on tid 1849029120
starting receive base loop
num_worker_connections 64
Creating worker on tid 1253110272
starting receive base loop
num_worker_connections 64
Creating worker on tid 657191424
starting receive base loop
num_worker_connections 64
Creating worker on tid 61272576
starting receive base loop
num_worker_connections 64
Creating worker on tid 3760321024
starting receive base loop
num_worker_connections 64
Creating worker on tid 3164402176
starting receive base loop
Created 512 connections total
Creating worker on tid 2568483328
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576119657.118081,       0.0,      379565,     341734,      37831,     229383,     112351,  32.122396,  74.700000,  87.700000, 132.200000,  34.390974,   0.000000, 501.414001, 486.829405
Outstanding requests per worker:
637 649 614 597 732 587 618 701 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159829.2,      799147,     719221,      79926,     546020,     173201,  34.481843,  95.600000, 117.500000, 151.400000,  37.109858,   0.230000, 268.568993, 584.030607
Outstanding requests per worker:
746 880 719 797 704 715 749 759 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159893.2,      799467,     719223,      80244,     576134,     143089,  38.871234, 111.800000, 136.700000, 175.700000,  43.308042,   0.377000, 268.932015, 629.670600
Outstanding requests per worker:
933 826 854 853 800 877 718 847 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159767.6,      798839,     719366,      79473,     591689,     127677,  44.709763, 134.800000, 158.800000, 206.600000,  52.537935,   0.385000, 325.327992, 653.789705
Outstanding requests per worker:
1053 914 962 1039 929 1032 1023 977 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159818.2,      799092,     718865,      80227,     603092,     115773,  51.940280, 161.100000, 193.400000, 243.700000,  63.800821,   0.287000, 389.580011, 671.609285
Outstanding requests per worker:
1117 1115 1001 1041 1216 1140 1078 1172 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159600.0,      798001,     718108,      79893,     610823,     107285,  60.293588, 174.600000, 208.200000, 264.400000,  68.598101,   0.338000, 432.224005, 684.196324
Outstanding requests per worker:
1326 1437 1415 1312 1370 1329 1417 1367 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159525.0,      797626,     718290,      79336,     616490,     101800,  76.720628, 191.800000, 224.200000, 283.600000,  74.439759,   0.428000, 470.290989, 693.225609
Outstanding requests per worker:
1658 1659 1633 1707 1527 1797 1682 1786 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:34   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6272 pts/0    S+   02:34   0:00 /usr/lib/linux
memcache      7  277  0.0 449216 160768 pts/0   Sl+  02:34   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  02:35   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19840540427      instructions:u            #    0.72  insn per cycle         
       27607334581      cycles:u                                                    

      46.911853627 seconds time elapsed

