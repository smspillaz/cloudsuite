+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 25000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 25000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 25000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 25000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 25000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 25000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 25000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 25000 cpus 8
meanInterarrival 320
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2206200320
starting receive base loop
num_worker_connections 64
Creating worker on tid 1612837376
starting receive base loop
num_worker_connections 64
Creating worker on tid 1016918528
starting receive base loop
num_worker_connections 64
Creating worker on tid 420999680
starting receive base loop
num_worker_connections 64
Creating worker on tid 4122669568
starting receive base loop
num_worker_connections 64
Creating worker on tid 3526750720
starting receive base loop
num_worker_connections 64
Creating worker on tid 2930831872
starting receive base loop
Created 512 connections total
Creating worker on tid 2334913024
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576101168.099592,       0.0,       79756,      71672,       8084,      43039,      28633,   0.691761,   0.102100,   0.106100,   0.577100,   7.777579,   0.000000, 189.910993, 410.407244
Outstanding requests per worker:
1 0 0 0 1 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25003.0,      125015,     112574,      12441,      75109,      37465,   0.087440,   0.102100,   0.105100,   0.144100,   0.015147,   0.068000,   0.749000, 483.449438
Outstanding requests per worker:
0 1 0 0 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25002.8,      125014,     112512,      12502,      78921,      33591,   0.087372,   0.102100,   0.105100,   0.145100,   0.015666,   0.066000,   0.814000, 520.532397
Outstanding requests per worker:
0 1 0 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25001.2,      125006,     112662,      12344,      81586,      31076,   0.087303,   0.102100,   0.105100,   0.144100,   0.015641,   0.068000,   0.849000, 545.385125
Outstanding requests per worker:
0 1 0 1 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25002.4,      125012,     112377,      12635,      83154,      29223,   0.087579,   0.102100,   0.105100,   0.144100,   0.016884,   0.066000,   1.023000, 562.600452
Outstanding requests per worker:
0 0 0 0 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25002.0,      125010,     112614,      12396,      84500,      28114,   0.087302,   0.102100,   0.105100,   0.143100,   0.015168,   0.068000,   1.011000, 574.265304
Outstanding requests per worker:
0 0 0 1 0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25003.2,      125016,     112564,      12452,      85855,      26709,   0.087343,   0.102100,   0.105100,   0.140100,   0.015925,   0.067000,   1.114000, 587.734738
Outstanding requests per worker:
0 0 0 0 1 1 1 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:26   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6272 pts/0    S+   21:26   0:00 /usr/lib/linux
memcache      7 72.0  0.0 343744 45440 pts/0    Sl+  21:26   0:34 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:27   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

        3253264075      instructions:u            #    0.45  insn per cycle         
        7207702593      cycles:u                                                    

      48.040343218 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 30000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 30000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 30000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 30000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 30000 cpus 8
meanInterarrival 266
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1873211904
starting receive base loop
num_worker_connections 64
Creating worker on tid 1277293056
starting receive base loop
num_worker_connections 64
Creating worker on tid 681374208
starting receive base loop
num_worker_connections 64
Creating worker on tid 85455360
starting receive base loop
num_worker_connections 64
Creating worker on tid 3787125248
starting receive base loop
num_worker_connections 64
Creating worker on tid 3191206400
starting receive base loop
num_worker_connections 64
Creating worker on tid 2595287552
starting receive base loop
Created 512 connections total
Creating worker on tid 1999368704
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576101219.099643,       0.0,       73802,      66414,       7388,      39684,      26730,   0.398963,   0.103100,   0.113100,   0.179100,   4.714944,   0.000000, 125.624999, 406.791219
Outstanding requests per worker:
0 0 0 0 1 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.4,      150382,     135416,      14966,      90688,      44728,   0.088043,   0.103100,   0.107100,   0.138100,   0.015874,   0.066000,   1.542000, 485.342604
Outstanding requests per worker:
0 0 0 0 1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.6,      150383,     135411,      14972,      96242,      39169,   0.088111,   0.103100,   0.107100,   0.139100,   0.016344,   0.067000,   1.514000, 529.951703
Outstanding requests per worker:
0 0 0 0 1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.6,      150383,     135207,      15176,      99142,      36065,   0.087990,   0.103100,   0.107100,   0.139100,   0.015679,   0.067000,   0.869000, 554.239854
Outstanding requests per worker:
0 0 0 1 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.8,      150384,     135561,      14823,     101266,      34295,   0.088113,   0.103100,   0.107100,   0.143100,   0.017115,   0.062000,   1.104000, 570.994062
Outstanding requests per worker:
0 0 0 1 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.4,      150382,     135414,      14968,     102757,      32657,   0.088011,   0.103100,   0.107100,   0.140100,   0.016046,   0.065000,   1.046000, 584.738247
Outstanding requests per worker:
0 0 1 1 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.8,      150384,     135296,      15088,     103866,      31430,   0.088151,   0.103100,   0.107100,   0.142100,   0.017022,   0.068000,   1.123000, 593.823210
Outstanding requests per worker:
0 0 1 1 0 0 0 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:27   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6272 pts/0    S+   21:27   0:00 /usr/lib/linux
memcache      7 86.6  0.0 350912 53696 pts/0    Sl+  21:27   0:39 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:27   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

        3826125542      instructions:u            #    0.46  insn per cycle         
        8355044909      cycles:u                                                    

      46.571508161 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 35000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 35000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 35000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 35000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 35000 cpus 8
meanInterarrival 228
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2065494528
starting receive base loop
num_worker_connections 64
Creating worker on tid 1470558720
starting receive base loop
num_worker_connections 64
Creating worker on tid 874639872
starting receive base loop
num_worker_connections 64
Creating worker on tid 278721024
starting receive base loop
num_worker_connections 64
Creating worker on tid 3977769472
starting receive base loop
num_worker_connections 64
Creating worker on tid 3384472064
starting receive base loop
num_worker_connections 64
Creating worker on tid 2788553216
starting receive base loop
Created 512 connections total
Creating worker on tid 2192634368
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576101270.099694,       0.0,      107237,      96509,      10728,      58785,      37724,   0.894917,   0.104100,   0.123100,  24.800000,   8.324119,   0.000000, 138.280004, 420.183589
Outstanding requests per worker:
0 0 1 1 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35090.4,      175452,     158129,      17323,     108097,      50032,   0.088661,   0.104100,   0.120100,   0.139100,   0.016338,   0.067000,   1.113000, 499.109050
Outstanding requests per worker:
1 1 0 0 0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35090.6,      175453,     157850,      17603,     113419,      44431,   0.088643,   0.104100,   0.120100,   0.139100,   0.015543,   0.061000,   0.852000, 538.771143
Outstanding requests per worker:
0 0 1 1 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35091.0,      175455,     157964,      17491,     116932,      41032,   0.088769,   0.104100,   0.120100,   0.140100,   0.016396,   0.067000,   1.083000, 562.803740
Outstanding requests per worker:
0 0 1 1 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35092.2,      175461,     157929,      17532,     119657,      38272,   0.088760,   0.104100,   0.120100,   0.140100,   0.016769,   0.067000,   1.073000, 581.605639
Outstanding requests per worker:
1 1 0 0 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35089.6,      175448,     157803,      17645,     121456,      36347,   0.088851,   0.104100,   0.120100,   0.140100,   0.017297,   0.067000,   1.205000, 595.804978
Outstanding requests per worker:
0 1 0 0 1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35090.4,      175452,     157970,      17482,     123527,      34443,   0.088940,   0.104100,   0.121100,   0.142100,   0.016947,   0.062000,   1.093000, 607.806716
Outstanding requests per worker:
0 0 1 1 0 0 1 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:27   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6272 pts/0    S+   21:27   0:00 /usr/lib/linux
memcache      7 99.7  0.0 355008 58176 pts/0    Sl+  21:27   0:46 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:28   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

        4546181682      instructions:u            #    0.46  insn per cycle         
        9861643374      cycles:u                                                    

      47.650217867 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 40000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 40000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 40000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 40000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 40000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 40000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 40000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 40000 cpus 8
meanInterarrival 200
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2518872576
starting receive base loop
num_worker_connections 64
Creating worker on tid 1924198912
starting receive base loop
num_worker_connections 64
Creating worker on tid 1328280064
starting receive base loop
num_worker_connections 64
Creating worker on tid 732361216
starting receive base loop
num_worker_connections 64
Creating worker on tid 136442368
starting receive base loop
num_worker_connections 64
Creating worker on tid 3835490816
starting receive base loop
num_worker_connections 64
Creating worker on tid 3239571968
starting receive base loop
Created 512 connections total
Creating worker on tid 2646274560
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576101320.099744,       0.0,       97120,      87323,       9797,      53301,      34022,   0.519864,   0.107100,   0.125100,   0.175000,   6.421447,   0.000000, 158.328995, 419.822590
Outstanding requests per worker:
0 1 0 1 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40004.0,      200020,     180024,      19996,     123541,      56483,   0.091030,   0.107100,   0.124100,   0.148100,   0.018558,   0.068000,   1.040000, 503.696218
Outstanding requests per worker:
1 0 1 0 1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40004.6,      200023,     179945,      20078,     130207,      49738,   0.091215,   0.107100,   0.124100,   0.149100,   0.018595,   0.067000,   1.522000, 545.734041
Outstanding requests per worker:
1 0 1 0 1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40002.2,      200011,     180195,      19816,     134991,      45204,   0.091055,   0.107100,   0.124100,   0.148100,   0.018668,   0.067000,   1.050000, 572.901013
Outstanding requests per worker:
0 1 0 1 0 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40003.2,      200016,     180116,      19900,     137207,      42909,   0.090861,   0.106100,   0.124100,   0.148100,   0.017002,   0.068000,   1.035000, 587.999545
Outstanding requests per worker:
0 1 1 1 0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40003.6,      200018,     180095,      19923,     140148,      39947,   0.090965,   0.107100,   0.124100,   0.148100,   0.017861,   0.068000,   1.065000, 604.109914
Outstanding requests per worker:
1 0 0 0 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40004.8,      200024,     180182,      19842,     141737,      38445,   0.090888,   0.107100,   0.124100,   0.148100,   0.017396,   0.068000,   1.064000, 615.034382
Outstanding requests per worker:
0 0 0 1 1 0 1 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:28   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   21:28   0:00 /usr/lib/linux
memcache      7  112  0.0 359104 58624 pts/0    Sl+  21:28   0:51 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  21:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

        5081234459      instructions:u            #    0.46  insn per cycle         
       11015135247      cycles:u                                                    

      46.710388542 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 45000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 45000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 45000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 45000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 45000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 45000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 45000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 45000 cpus 8
meanInterarrival 177
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1623716352
starting receive base loop
num_worker_connections 64
Creating worker on tid 1024979456
starting receive base loop
num_worker_connections 64
Creating worker on tid 431682048
starting receive base loop
num_worker_connections 64
Creating worker on tid 4130730496
starting receive base loop
num_worker_connections 64
Creating worker on tid 3534811648
starting receive base loop
num_worker_connections 64
Creating worker on tid 2938892800
starting receive base loop
num_worker_connections 64
Creating worker on tid 2342973952
starting receive base loop
Created 512 connections total
Creating worker on tid 1747055104
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576101371.099795,       0.0,      136361,     122754,      13607,      76209,      46545,   0.839009,   0.119100,   0.127100,   0.747100,  10.501936,   0.000000, 245.612994, 432.279470
Outstanding requests per worker:
0 0 1 1 0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   45200.8,      226004,     203663,      22341,     141735,      61928,   0.094142,   0.122100,   0.128100,   0.157100,   0.020975,   0.061000,   0.926000, 514.959595
Outstanding requests per worker:
0 1 0 1 1 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   45201.0,      226005,     203496,      22509,     149377,      54119,   0.093921,   0.122100,   0.127100,   0.157100,   0.021206,   0.059000,   1.562000, 555.839166
Outstanding requests per worker:
1 0 1 0 1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   45202.0,      226010,     203415,      22595,     153941,      49474,   0.093930,   0.122100,   0.127100,   0.155100,   0.020829,   0.066000,   1.115000, 581.041437
Outstanding requests per worker:
0 1 0 0 1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   45203.4,      226017,     203302,      22715,     157110,      46192,   0.094075,   0.122100,   0.127100,   0.156100,   0.021336,   0.064000,   1.530000, 598.867444
Outstanding requests per worker:
1 1 0 0 1 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   45200.0,      226000,     203543,      22457,     159829,      43714,   0.094120,   0.122100,   0.128100,   0.157100,   0.021573,   0.065000,   1.352000, 611.520146
Outstanding requests per worker:
1 1 1 0 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   45201.6,      226008,     203584,      22424,     161903,      41681,   0.093926,   0.122100,   0.127100,   0.155100,   0.019823,   0.065000,   1.016000, 623.250840
Outstanding requests per worker:
1 1 0 0 1 0 1 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:29   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6208 pts/0    S+   21:29   0:00 /usr/lib/linux
memcache      8  123  0.0 366272 65792 pts/0    Sl+  21:29   0:58 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  21:30   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

        5837467255      instructions:u            #    0.47  insn per cycle         
       12356678840      cycles:u                                                    

      47.440916823 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 50000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 50000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 50000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 50000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 50000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 50000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 50000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 50000 cpus 8
meanInterarrival 160
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2478567936
starting receive base loop
num_worker_connections 64
Creating worker on tid 1881272832
starting receive base loop
num_worker_connections 64
Creating worker on tid 1285353984
starting receive base loop
num_worker_connections 64
Creating worker on tid 689435136
starting receive base loop
num_worker_connections 64
Creating worker on tid 96137728
starting receive base loop
num_worker_connections 64
Creating worker on tid 3795186176
starting receive base loop
num_worker_connections 64
Creating worker on tid 3199267328
starting receive base loop
Created 512 connections total
Creating worker on tid 2603348480
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576101422.099846,       0.0,      153644,     138461,      15183,      86352,      52109,   0.315774,   0.119100,   0.126100,   0.205100,   3.611022,   0.000000, 114.872001, 436.266060
Outstanding requests per worker:
0 0 0 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   50003.3,      250017,     225071,      24946,     158652,      66419,   0.094622,   0.121100,   0.127100,   0.188100,   0.023527,   0.061000,   1.854000, 523.301736
Outstanding requests per worker:
2 0 1 1 1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   50004.9,      250025,     225137,      24888,     166677,      58460,   0.094400,   0.121100,   0.127100,   0.184100,   0.022000,   0.062000,   1.026000, 563.377583
Outstanding requests per worker:
0 0 1 1 1 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   50004.9,      250025,     225093,      24932,     171139,      53954,   0.094592,   0.122100,   0.127100,   0.185100,   0.022569,   0.061000,   1.085000, 585.696872
Outstanding requests per worker:
1 0 0 0 1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   50002.1,      250011,     225225,      24786,     174899,      50326,   0.094367,   0.121100,   0.127100,   0.184100,   0.022645,   0.065000,   1.821000, 602.579301
Outstanding requests per worker:
0 1 1 0 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   50003.5,      250018,     225023,      24995,     177659,      47364,   0.094355,   0.121100,   0.127100,   0.184100,   0.022785,   0.060000,   1.341000, 617.596975
Outstanding requests per worker:
0 1 1 1 0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   50003.9,      250020,     225092,      24928,     179718,      45374,   0.094615,   0.122100,   0.127100,   0.187100,   0.022680,   0.060000,   0.866000, 627.604428
Outstanding requests per worker:
1 0 0 0 0 0 1 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:30   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   21:30   0:00 /usr/lib/linux
memcache      7  133  0.0 370368 66944 pts/0    Sl+  21:30   1:04 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:31   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

        6484115148      instructions:u            #    0.47  insn per cycle         
       13726153846      cycles:u                                                    

      47.700346187 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 55000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 55000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 55000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 55000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 55000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 55000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 55000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 55000 cpus 8
meanInterarrival 145
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1865216512
starting receive base loop
num_worker_connections 64
Creating worker on tid 1269232128
starting receive base loop
num_worker_connections 64
Creating worker on tid 673313280
starting receive base loop
num_worker_connections 64
Creating worker on tid 77394432
starting receive base loop
num_worker_connections 64
Creating worker on tid 3776442880
starting receive base loop
num_worker_connections 64
Creating worker on tid 3183145472
starting receive base loop
num_worker_connections 64
Creating worker on tid 2587226624
starting receive base loop
Created 512 connections total
Creating worker on tid 1991307776
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576101472.099896,       0.0,      135300,     121734,      13566,      75698,      46036,   0.779716,   0.123100,   0.130100,   1.100000,   8.343278,   0.000000, 182.742998, 433.254539
Outstanding requests per worker:
1 0 1 0 0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   55177.3,      275887,     248262,      27625,     174063,      74199,   0.094875,   0.121100,   0.127100,   0.185100,   0.023928,   0.062000,   1.686000, 519.616313
Outstanding requests per worker:
1 1 0 0 0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   55178.5,      275893,     248448,      27445,     184190,      64258,   0.094972,   0.122100,   0.127100,   0.186100,   0.025775,   0.059000,   1.084000, 563.749767
Outstanding requests per worker:
0 1 0 1 1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   55175.1,      275876,     248216,      27660,     190062,      58154,   0.094621,   0.122100,   0.127100,   0.184100,   0.022609,   0.061000,   1.205000, 590.868743
Outstanding requests per worker:
1 1 1 0 0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   55175.9,      275880,     248472,      27408,     194361,      54111,   0.094504,   0.121100,   0.127100,   0.182100,   0.025238,   0.060000,   1.277000, 608.702079
Outstanding requests per worker:
1 0 1 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   55177.7,      275889,     248132,      27757,     196972,      51160,   0.094511,   0.121100,   0.126100,   0.184100,   0.023633,   0.060000,   1.289000, 621.942547
Outstanding requests per worker:
0 0 1 1 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   55178.7,      275894,     248439,      27455,     199669,      48770,   0.094584,   0.122100,   0.127100,   0.183100,   0.023600,   0.060000,   1.382000, 633.363506
Outstanding requests per worker:
0 0 1 0 0 0 1 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:31   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6272 pts/0    S+   21:31   0:00 /usr/lib/linux
memcache      7  146  0.0 373440 77568 pts/0    Sl+  21:31   1:08 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:32   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

        7033813199      instructions:u            #    0.47  insn per cycle         
       14842121875      cycles:u                                                    

      46.480005290 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 60000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 60000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 60000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 60000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 60000 cpus 8
meanInterarrival 133
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2161832448
starting receive base loop
num_worker_connections 64
Creating worker on tid 1569911296
starting receive base loop
num_worker_connections 64
Creating worker on tid 976613888
starting receive base loop
num_worker_connections 64
Creating worker on tid 380695040
starting receive base loop
num_worker_connections 64
Creating worker on tid 4079743488
starting receive base loop
num_worker_connections 64
Creating worker on tid 3483824640
starting receive base loop
num_worker_connections 64
Creating worker on tid 2887905792
starting receive base loop
Created 512 connections total
Creating worker on tid 2291986944
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576101522.099946,       0.0,      145728,     131136,      14592,      81604,      49532,   0.320347,   0.131000,   0.171100,   0.204100,   3.762809,   0.000000, 110.986002, 434.699434
Outstanding requests per worker:
0 1 1 1 1 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60153.9,      300770,     270532,      30238,     190556,      79976,   0.100202,   0.152000,   0.171100,   0.194000,   0.030149,   0.061000,   1.815000, 524.003682
Outstanding requests per worker:
0 1 1 0 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60155.1,      300776,     270893,      29883,     202267,      68626,   0.100078,   0.152000,   0.171100,   0.195100,   0.031046,   0.058000,   1.053000, 569.821668
Outstanding requests per worker:
0 1 1 0 1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60155.9,      300780,     270973,      29807,     208298,      62675,   0.100228,   0.152000,   0.171100,   0.194000,   0.032932,   0.061000,   1.278000, 594.427913
Outstanding requests per worker:
1 0 0 0 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60157.5,      300788,     270763,      30025,     212986,      57777,   0.100000,   0.152000,   0.171100,   0.195100,   0.033261,   0.061000,   1.373000, 613.468484
Outstanding requests per worker:
0 1 1 2 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60153.5,      300768,     270393,      30375,     215852,      54541,   0.100225,   0.152000,   0.172100,   0.195100,   0.032639,   0.060000,   1.786000, 626.834766
Outstanding requests per worker:
0 1 1 2 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60154.3,      300772,     270698,      30074,     219435,      51263,   0.100027,   0.152000,   0.172100,   0.195100,   0.030680,   0.060000,   0.914000, 639.377177
Outstanding requests per worker:
1 1 0 0 1 1 0 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:32   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6272 pts/0    S+   21:32   0:00 /usr/lib/linux
memcache      7  160  0.0 378560 77184 pts/0    Sl+  21:32   1:13 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  21:32   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

        7626042790      instructions:u            #    0.48  insn per cycle         
       15869253064      cycles:u                                                    

      46.379737854 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 65000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 65000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 65000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 65000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 65000 cpus 8
meanInterarrival 123
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2465001984
starting receive base loop
num_worker_connections 64
Creating worker on tid 1873211904
starting receive base loop
num_worker_connections 64
Creating worker on tid 1277293056
starting receive base loop
num_worker_connections 64
Creating worker on tid 681374208
starting receive base loop
num_worker_connections 64
Creating worker on tid 85455360
starting receive base loop
num_worker_connections 64
Creating worker on tid 3787125248
starting receive base loop
num_worker_connections 64
Creating worker on tid 3191206400
starting receive base loop
Created 512 connections total
Creating worker on tid 2595287552
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576101572.099996,       0.0,      156463,     140711,      15752,      88660,      52051,   0.385139,   0.156100,   0.173000,   0.216100,   4.548117,   0.000000, 124.550998, 441.315078
Outstanding requests per worker:
0 1 1 1 0 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65045.7,      325229,     292738,      32491,     207832,      84906,   0.103586,   0.156100,   0.173000,   0.189100,   0.039419,   0.058000,   1.831000, 528.772961
Outstanding requests per worker:
1 0 0 1 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65047.9,      325240,     292719,      32521,     219722,      72997,   0.103753,   0.156100,   0.173000,   0.190100,   0.039213,   0.060000,   1.916000, 573.994609
Outstanding requests per worker:
1 2 0 1 1 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65043.5,      325218,     292835,      32383,     226437,      66398,   0.103656,   0.156100,   0.173000,   0.190100,   0.039747,   0.058000,   1.344000, 599.437017
Outstanding requests per worker:
0 1 0 0 0 0 2 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65045.1,      325226,     292611,      32615,     231087,      61524,   0.103730,   0.156100,   0.173000,   0.190100,   0.038255,   0.059000,   1.952000, 617.792592
Outstanding requests per worker:
1 0 1 1 0 1 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65044.7,      325224,     292800,      32424,     234474,      58326,   0.103917,   0.157100,   0.174100,   0.191100,   0.037798,   0.058000,   1.410000, 629.893210
Outstanding requests per worker:
0 1 1 1 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65047.1,      325236,     292596,      32640,     237605,      54991,   0.103225,   0.156100,   0.173000,   0.189100,   0.033028,   0.058000,   1.908000, 642.310466
Outstanding requests per worker:
1 0 0 1 0 2 0 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:32   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6272 pts/0    S+   21:33   0:00 /usr/lib/linux
memcache      7  167  0.0 381632 80256 pts/0    Sl+  21:33   1:18 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  21:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

        8254102001      instructions:u            #    0.48  insn per cycle         
       17049017349      cycles:u                                                    

      46.781081417 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 70000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 70000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 70000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 70000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 70000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 70000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 70000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 70000 cpus 8
meanInterarrival 114
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2661544448
starting receive base loop
num_worker_connections 64
Creating worker on tid 2066477568
starting receive base loop
num_worker_connections 64
Creating worker on tid 1470558720
starting receive base loop
num_worker_connections 64
Creating worker on tid 874639872
starting receive base loop
num_worker_connections 64
Creating worker on tid 278721024
starting receive base loop
num_worker_connections 64
Creating worker on tid 3977769472
starting receive base loop
num_worker_connections 64
Creating worker on tid 3384472064
starting receive base loop
Created 512 connections total
Creating worker on tid 2788553216
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576101622.100046,       0.0,      170380,     153168,      17212,      97061,      56107,   0.370933,   0.164100,   0.175000,   0.267100,   4.366068,   0.000000, 126.947001, 446.130563
Outstanding requests per worker:
0 0 1 0 0 0 2 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   70179.5,      350898,     316149,      34749,     225208,      90941,   0.113746,   0.164100,   0.175000,   0.202100,   0.040580,   0.059000,   1.199000, 532.212023
Outstanding requests per worker:
1 2 0 2 0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   70179.9,      350900,     316171,      34729,     238407,      77764,   0.114330,   0.164100,   0.176100,   0.212100,   0.042504,   0.059000,   1.104000, 578.039229
Outstanding requests per worker:
0 2 0 0 2 2 2 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   70180.3,      350902,     315819,      35083,     245296,      70523,   0.114197,   0.164100,   0.175000,   0.209100,   0.042487,   0.059000,   1.207000, 603.600132
Outstanding requests per worker:
1 0 0 0 0 0 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   70183.9,      350920,     315844,      35076,     251246,      64598,   0.114251,   0.164100,   0.175000,   0.207100,   0.041183,   0.059000,   1.428000, 623.559694
Outstanding requests per worker:
1 1 0 1 0 2 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   70179.5,      350898,     315802,      35096,     255014,      60788,   0.114967,   0.165100,   0.176100,   0.211100,   0.047252,   0.059000,   1.619000, 637.096342
Outstanding requests per worker:
0 1 0 1 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   70180.5,      350903,     315730,      35173,     258136,      57594,   0.114416,   0.164100,   0.175000,   0.209100,   0.042092,   0.058000,   1.161000, 648.074776
Outstanding requests per worker:
1 1 0 0 0 1 1 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:33   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6208 pts/0    S+   21:33   0:00 /usr/lib/linux
memcache      8  178  0.0 388800 90496 pts/0    Sl+  21:33   1:23 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  21:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

        8827330681      instructions:u            #    0.49  insn per cycle         
       17962387639      cycles:u                                                    

      46.719131631 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 75000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 75000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 75000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 75000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 75000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 75000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 75000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 75000 cpus 8
meanInterarrival 106
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1965552128
starting receive base loop
num_worker_connections 64
Creating worker on tid 1371206144
starting receive base loop
num_worker_connections 64
Creating worker on tid 775287296
starting receive base loop
num_worker_connections 64
Creating worker on tid 179368448
starting receive base loop
num_worker_connections 64
Creating worker on tid 3878416896
starting receive base loop
num_worker_connections 64
Creating worker on tid 3282498048
starting receive base loop
num_worker_connections 64
Creating worker on tid 2686579200
starting receive base loop
Created 512 connections total
Creating worker on tid 2090660352
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576101673.100097,       0.0,      232958,     209623,      23335,     135762,      73861,   0.693713,   0.162100,   0.170100,   1.500000,   7.588941,   0.000000, 195.706993, 460.776680
Outstanding requests per worker:
0 1 1 0 2 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75478.5,      377393,     339910,      37483,     246562,      93348,   0.122198,   0.164100,   0.171100,   0.263100,   0.048005,   0.060000,   1.736000, 546.329728
Outstanding requests per worker:
2 1 1 1 1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75475.3,      377377,     339987,      37390,     259116,      80871,   0.122863,   0.164100,   0.172100,   0.267100,   0.054553,   0.058000,   1.727000, 587.282843
Outstanding requests per worker:
0 1 1 1 1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75476.7,      377384,     339825,      37559,     266101,      73724,   0.123973,   0.164100,   0.172100,   0.271100,   0.064503,   0.060000,   2.042000, 610.719950
Outstanding requests per worker:
0 1 0 1 0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75477.3,      377387,     339632,      37755,     271544,      68088,   0.124610,   0.164100,   0.173000,   0.282100,   0.067892,   0.059000,   1.945000, 628.893547
Outstanding requests per worker:
0 1 1 0 1 2 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75479.7,      377399,     339726,      37673,     276142,      63584,   0.122782,   0.164100,   0.173000,   0.267100,   0.049117,   0.057000,   1.678000, 642.804154
Outstanding requests per worker:
1 1 0 0 1 0 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75474.9,      377375,     339660,      37715,     279432,      60228,   0.122314,   0.164100,   0.172100,   0.263100,   0.046833,   0.061000,   1.838000, 654.314017
Outstanding requests per worker:
2 1 0 0 1 2 1 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:34   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6272 pts/0    S+   21:34   0:00 /usr/lib/linux
memcache      8  188  0.0 390848 94912 pts/0    Sl+  21:34   1:30 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  21:35   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

        9681035918      instructions:u            #    0.50  insn per cycle         
       19298511365      cycles:u                                                    

      47.801246059 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 80000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 80000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 80000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 80000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 80000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 80000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 80000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 80000 cpus 8
meanInterarrival 100
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2105733632
starting receive base loop
num_worker_connections 64
Creating worker on tid 1513484800
starting receive base loop
num_worker_connections 64
Creating worker on tid 917565952
starting receive base loop
num_worker_connections 64
Creating worker on tid 321647104
starting receive base loop
num_worker_connections 64
Creating worker on tid 4020695552
starting receive base loop
num_worker_connections 64
Creating worker on tid 3424776704
starting receive base loop
num_worker_connections 64
Creating worker on tid 2828857856
starting receive base loop
Created 512 connections total
Creating worker on tid 2232939008
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576101723.100147,       0.0,      194596,     175136,      19460,     111974,      63162,   0.489959,   0.162100,   0.169100,   2.900000,   5.289304,   0.000000, 142.988995, 452.119718
Outstanding requests per worker:
1 1 0 1 0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80004.9,      400025,     360129,      39896,     260268,      99861,   0.127705,   0.162100,   0.169100,   0.336100,   0.075470,   0.060000,   2.469000, 543.547187
Outstanding requests per worker:
0 1 2 3 1 1 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80008.5,      400043,     360009,      40034,     275434,      84575,   0.126430,   0.162100,   0.169100,   0.278100,   0.059794,   0.060000,   2.084000, 589.411706
Outstanding requests per worker:
1 0 1 2 0 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80006.5,      400033,     359944,      40089,     283019,      76925,   0.126825,   0.162100,   0.170100,   0.317100,   0.060238,   0.060000,   1.970000, 613.251184
Outstanding requests per worker:
2 4 1 5 2 3 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80007.5,      400038,     359927,      40111,     288508,      71419,   0.134385,   0.163100,   0.171100,   0.485100,   0.131133,   0.059000,   3.957000, 630.396961
Outstanding requests per worker:
1 1 1 2 1 2 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80006.1,      400031,     359678,      40353,     292913,      66765,   0.130337,   0.163100,   0.170100,   0.347100,   0.101149,   0.059000,   3.464000, 644.086828
Outstanding requests per worker:
0 0 1 1 1 2 2 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80007.3,      400037,     359873,      40164,     296322,      63551,   0.130744,   0.163100,   0.170100,   0.334100,   0.107747,   0.059000,   3.548000, 654.933296
Outstanding requests per worker:
2 1 2 1 1 1 1 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  21:35   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   21:35   0:00 /usr/lib/linux
memcache      7  203  0.0 394944 94400 pts/0    Sl+  21:35   1:33 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:36   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       10109986257      instructions:u            #    0.50  insn per cycle         
       20196732549      cycles:u                                                    

      46.511665552 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 85000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 85000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 85000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 85000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 85000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 85000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 85000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 85000 cpus 8
meanInterarrival 94
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2523787776
starting receive base loop
num_worker_connections 64
Creating worker on tid 1932259840
starting receive base loop
num_worker_connections 64
Creating worker on tid 1336340992
starting receive base loop
num_worker_connections 64
Creating worker on tid 740422144
starting receive base loop
num_worker_connections 64
Creating worker on tid 144503296
starting receive base loop
num_worker_connections 64
Creating worker on tid 3843551744
starting receive base loop
num_worker_connections 64
Creating worker on tid 3250254336
starting receive base loop
Created 512 connections total
Creating worker on tid 2654335488
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576101773.100197,       0.0,      204200,     183899,      20301,     117716,      66183,   0.367787,   0.164100,   0.214100,   1.300000,   3.894468,   0.000000, 117.439002, 453.738264
Outstanding requests per worker:
1 2 1 0 0 0 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   85116.3,      425582,     382995,      42587,     277295,     105700,   0.222742,   0.165100,   0.219100,   3.600000,   0.809716,   0.060000,  20.749001, 545.589227
Outstanding requests per worker:
1 2 1 1 1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   85111.7,      425559,     382863,      42696,     292984,      89879,   0.152310,   0.165100,   0.216100,   0.986100,   0.194140,   0.060000,   4.194000, 590.732954
Outstanding requests per worker:
1 1 1 0 1 1 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   85109.9,      425550,     383181,      42369,     302044,      81137,   0.141544,   0.165100,   0.218100,   0.525100,   0.093470,   0.060000,   2.511000, 616.247455
Outstanding requests per worker:
6 4 3 3 3 3 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   85118.3,      425592,     383042,      42550,     308574,      74468,   0.192275,   0.166100,   0.224100,   2.300000,   0.520050,   0.059000,  11.167000, 635.056537
Outstanding requests per worker:
1 1 1 1 1 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   85112.9,      425565,     383296,      42269,     313071,      70225,   0.187586,   0.165100,   0.220100,   1.900000,   0.584510,   0.057000,  17.821001, 647.665804
Outstanding requests per worker:
1 2 1 1 1 1 2 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   85111.9,      425560,     382811,      42749,     316541,      66270,   0.181396,   0.165100,   0.220100,   1.900000,   0.461630,   0.061000,  11.359000, 658.548900
Outstanding requests per worker:
1 0 1 1 1 1 1 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  21:36   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   21:36   0:00 /usr/lib/linux
memcache      7  213  0.0 399040 97856 pts/0    Sl+  21:36   1:38 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       10656289907      instructions:u            #    0.51  insn per cycle         
       20792323048      cycles:u                                                    

      46.451349149 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 90000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 90000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 90000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 90000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 90000 cpus 8
meanInterarrival 88
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2247553536
starting receive base loop
num_worker_connections 64
Creating worker on tid 1655763456
starting receive base loop
num_worker_connections 64
Creating worker on tid 1059844608
starting receive base loop
num_worker_connections 64
Creating worker on tid 463925760
starting receive base loop
num_worker_connections 64
Creating worker on tid 4162974208
starting receive base loop
num_worker_connections 64
Creating worker on tid 3567055360
starting receive base loop
num_worker_connections 64
Creating worker on tid 2971136512
starting receive base loop
Created 512 connections total
Creating worker on tid 2377839104
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576101824.100248,       0.0,      220891,     198918,      21973,     128372,      70546,   0.502917,   0.195100,   0.230100,   9.900000,   4.137851,   0.000000, 112.703003, 458.294855
Outstanding requests per worker:
1 1 1 2 1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90916.1,      454581,     409185,      45396,     298473,     110712,   0.290374,   0.204100,   0.234100,   5.900000,   1.297928,   0.060000,  31.796001, 550.561460
Outstanding requests per worker:
1 1 1 1 2 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90888.3,      454442,     408944,      45498,     314712,      94232,   0.259449,   0.209100,   0.237100,   4.500000,   1.010921,   0.059000,  24.527000, 594.991011
Outstanding requests per worker:
22 19 19 20 12 20 26 17 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90949.1,      454746,     409428,      45318,     325124,      84304,   0.315680,   0.210100,   0.239100,   7.100000,   1.351671,   0.060000,  31.479001, 622.147530
Outstanding requests per worker:
1 1 1 1 2 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90914.3,      454572,     409178,      45394,     330963,      78215,   0.295705,   0.210100,   0.236100,   6.200000,   1.340608,   0.060000,  33.521000, 638.378427
Outstanding requests per worker:
1 2 0 2 1 1 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90915.5,      454578,     409128,      45450,     335849,      73279,   0.299881,   0.211100,   0.237100,   6.500000,   1.339597,   0.060000,  31.844001, 651.837337
Outstanding requests per worker:
1 1 2 1 1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90918.3,      454592,     409173,      45419,     340183,      68990,   0.275644,   0.212100,   0.238100,   5.100000,   1.143172,   0.060000,  27.508000, 663.764237
Outstanding requests per worker:
1 1 1 1 1 1 1 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:37   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   21:37   0:00 /usr/lib/linux
memcache      7  223  0.0 402112 101248 pts/0   Sl+  21:37   1:42 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  21:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       11340012370      instructions:u            #    0.52  insn per cycle         
       21870717801      cycles:u                                                    

      46.431168214 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 95000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 95000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 95000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 95000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 95000 cpus 8
meanInterarrival 84
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2071065088
starting receive base loop
num_worker_connections 64
Creating worker on tid 1478619648
starting receive base loop
num_worker_connections 64
Creating worker on tid 882700800
starting receive base loop
num_worker_connections 64
Creating worker on tid 286781952
starting receive base loop
num_worker_connections 64
Creating worker on tid 3988451840
starting receive base loop
num_worker_connections 64
Creating worker on tid 3392532992
starting receive base loop
num_worker_connections 64
Creating worker on tid 2796614144
starting receive base loop
Created 512 connections total
Creating worker on tid 2200695296
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576101874.100298,       0.0,      238299,     214574,      23725,     139011,      75563,   0.496529,   0.205100,   0.231100,   8.900000,   4.181299,   0.000000, 118.987001, 461.913512
Outstanding requests per worker:
1 1 1 1 1 1 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95192.1,      475961,     428418,      47543,     313247,     115171,   0.339501,   0.217100,   0.243100,   7.800000,   1.573352,   0.057000,  34.387998, 553.257702
Outstanding requests per worker:
30 25 29 31 34 30 51 35 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95294.9,      476475,     429124,      47351,     331730,      97394,   0.542291,   0.223100,   0.301100,  14.000000,   2.847857,   0.060000,  64.723998, 599.252135
Outstanding requests per worker:
1 1 1 2 1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95244.1,      476221,     428370,      47851,     340249,      88121,   0.349360,   0.218100,   0.243100,   8.300000,   1.701521,   0.060000,  38.885001, 622.617961
Outstanding requests per worker:
2 1 3 1 1 2 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95247.9,      476240,     428565,      47675,     347813,      80752,   0.350342,   0.219100,   0.247100,   8.400000,   1.705087,   0.061000,  40.725999, 642.101936
Outstanding requests per worker:
1 2 2 1 1 1 1 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95242.7,      476214,     428707,      47507,     353375,      75332,   0.355198,   0.220100,   0.249100,   8.200000,   1.757080,   0.059000,  39.135002, 655.605292
Outstanding requests per worker:
1 1 1 1 1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95243.9,      476220,     428783,      47437,     357340,      71443,   0.367073,   0.220100,   0.256100,   8.900000,   1.812532,   0.060000,  40.465001, 665.874783
Outstanding requests per worker:
1 1 1 1 1 1 1 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:38   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   21:38   0:00 /usr/lib/linux
memcache      7  232  0.0 407232 108352 pts/0   Sl+  21:38   1:46 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  21:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       11882128408      instructions:u            #    0.51  insn per cycle         
       23117181905      cycles:u                                                    

      46.760480934 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 100000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 100000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 100000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 100000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 100000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 100000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 100000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 100000 cpus 8
meanInterarrival 80
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1859056128
starting receive base loop
num_worker_connections 64
Creating worker on tid 1261171200
starting receive base loop
num_worker_connections 64
Creating worker on tid 665252352
starting receive base loop
num_worker_connections 64
Creating worker on tid 69333504
starting receive base loop
num_worker_connections 64
Creating worker on tid 3768381952
starting receive base loop
num_worker_connections 64
Creating worker on tid 3172463104
starting receive base loop
num_worker_connections 64
Creating worker on tid 2579165696
starting receive base loop
Created 512 connections total
Creating worker on tid 1983246848
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576101924.100348,       0.0,      244406,     219886,      24520,     142497,      77389,   1.563084,   0.226100,   0.413100,  39.200000,  11.045898,   0.000000, 208.758995, 462.013375
Outstanding requests per worker:
35 31 19 38 34 39 33 25 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  100052.9,      500265,     450243,      50022,     330677,     119566,   0.401342,   0.223100,   0.289100,  10.000000,   1.991230,   0.061000,  44.546001, 557.112970
Outstanding requests per worker:
1 1 1 1 2 2 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  100005.3,      500027,     450182,      49845,     349421,     100761,   0.435418,   0.224100,   0.288100,  11.500000,   2.306574,   0.060000,  52.474000, 601.835022
Outstanding requests per worker:
2 2 3 1 2 1 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  100006.1,      500031,     449896,      50135,     359304,      90592,   0.425926,   0.225100,   0.290100,  10.900000,   2.229550,   0.060000,  54.198999, 627.375756
Outstanding requests per worker:
1 1 1 1 1 1 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  100006.1,      500031,     449943,      50088,     366663,      83280,   0.388152,   0.227100,   0.294100,   9.100000,   1.951726,   0.059000,  46.982002, 645.338152
Outstanding requests per worker:
1 1 1 2 1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  100004.7,      500024,     449594,      50430,     371579,      78015,   0.408939,   0.227100,   0.293100,  10.200000,   2.133066,   0.060000,  53.102002, 658.132740
Outstanding requests per worker:
1 1 1 1 1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  100005.9,      500030,     450310,      49720,     376272,      74038,   0.404186,   0.227100,   0.294100,   9.800000,   2.072358,   0.059000,  45.651000, 667.974555
Outstanding requests per worker:
1 3 2 1 2 1 1 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:38   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   21:38   0:00 /usr/lib/linux
memcache      7  240  0.0 409280 113984 pts/0   Sl+  21:38   1:50 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  21:39   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       12445831031      instructions:u            #    0.53  insn per cycle         
       23495650324      cycles:u                                                    

      46.760664083 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 105000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 105000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 105000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 105000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 105000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 105000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 105000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 105000 cpus 8
meanInterarrival 76
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1932849664
starting receive base loop
num_worker_connections 64
Creating worker on tid 1336340992
starting receive base loop
num_worker_connections 64
Creating worker on tid 740422144
starting receive base loop
num_worker_connections 64
Creating worker on tid 144503296
starting receive base loop
num_worker_connections 64
Creating worker on tid 3843551744
starting receive base loop
num_worker_connections 64
Creating worker on tid 3250254336
starting receive base loop
num_worker_connections 64
Creating worker on tid 2654335488
starting receive base loop
Created 512 connections total
Creating worker on tid 2058416640
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576101975.100399,       0.0,      325517,     292885,      32632,     194193,      98692,   1.006849,   0.256100,   0.336100,  25.200000,   7.793546,   0.000000, 181.771994, 478.719907
Outstanding requests per worker:
1 3 3 3 3 1 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  105270.7,      526354,     473647,      52707,     352569,     121078,   0.521816,   0.267100,   0.340100,  14.300000,   2.790018,   0.059000,  60.095999, 568.084886
Outstanding requests per worker:
1 1 2 2 1 2 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  105272.9,      526365,     473807,      52558,     370378,     103429,   0.522625,   0.268100,   0.341100,  14.200000,   2.781795,   0.060000,  64.718001, 609.592847
Outstanding requests per worker:
1 1 1 3 1 1 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  105273.7,      526369,     473589,      52780,     380731,      92858,   0.478473,   0.271100,   0.345100,  12.400000,   2.456871,   0.061000,  54.299999, 633.007133
Outstanding requests per worker:
2 1 1 1 3 2 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  105188.7,      525944,     473310,      52634,     387550,      85760,   0.554573,   0.277100,   0.359100,  14.800000,   2.820163,   0.062000,  62.902004, 649.665648
Outstanding requests per worker:
70 65 34 50 49 64 75 43 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  105356.9,      526785,     474104,      52681,     393369,      80735,   0.579934,   0.278100,   0.364100,  15.800000,   2.950825,   0.058000,  62.052999, 661.181969
Outstanding requests per worker:
2 2 3 2 1 2 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  105271.5,      526358,     473657,      52701,     397542,      76115,   0.516971,   0.277100,   0.353100,  13.500000,   2.689401,   0.060000,  60.091000, 671.852672
Outstanding requests per worker:
2 2 1 1 2 3 2 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:39   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6272 pts/0    S+   21:39   0:00 /usr/lib/linux
memcache      7  248  0.0 415424 116672 pts/0   Sl+  21:39   1:56 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  21:40   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       13269630887      instructions:u            #    0.53  insn per cycle         
       24996710001      cycles:u                                                    

      47.690630644 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 110000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 110000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 110000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 110000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 110000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 110000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 110000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 110000 cpus 8
meanInterarrival 72
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2120479232
starting receive base loop
num_worker_connections 64
Creating worker on tid 1521545728
starting receive base loop
num_worker_connections 64
Creating worker on tid 925626880
starting receive base loop
num_worker_connections 64
Creating worker on tid 329708032
starting receive base loop
num_worker_connections 64
Creating worker on tid 4028756480
starting receive base loop
num_worker_connections 64
Creating worker on tid 3432837632
starting receive base loop
num_worker_connections 64
Creating worker on tid 2836918784
starting receive base loop
Created 512 connections total
Creating worker on tid 2243621376
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576102025.100449,       0.0,      269552,     242443,      27109,     158012,      84431,   0.808808,   0.316100,   0.408100,  22.100000,   5.515660,   0.000000, 130.161002, 465.883206
Outstanding requests per worker:
2 2 3 2 1 4 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  111116.1,      555581,     500168,      55413,     370651,     129517,   0.566524,   0.322100,   0.412100,  14.700000,   2.896838,   0.061000,  67.299999, 563.556329
Outstanding requests per worker:
2 2 3 3 1 3 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  111118.5,      555593,     499933,      55660,     390501,     109432,   0.566351,   0.325100,   0.418100,  14.900000,   2.891955,   0.060000,  64.644001, 607.938450
Outstanding requests per worker:
3 2 2 3 3 4 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  111012.3,      555062,     499340,      55722,     401347,      97993,   0.664070,   0.333100,   0.466100,  17.700000,   3.301099,   0.060000,  69.611996, 632.912975
Outstanding requests per worker:
65 61 70 46 97 72 78 74 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  111204.7,      556024,     500569,      55455,     410068,      90501,   0.713463,   0.341100,   0.490100,  19.700000,   3.535166,   0.061000,  69.231004, 650.431813
Outstanding requests per worker:
15 23 23 21 13 20 22 19 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  111144.1,      555721,     499952,      55769,     415686,      84266,   0.636849,   0.337100,   0.467100,  17.300000,   3.270467,   0.057000,  71.298003, 663.145830
Outstanding requests per worker:
3 3 4 1 2 2 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  111119.3,      555597,     499530,      56067,     419986,      79544,   0.673557,   0.342100,   0.475100,  18.200000,   3.440762,   0.061000,  73.559999, 674.525468
Outstanding requests per worker:
1 2 2 1 2 1 1 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:40   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   21:40   0:00 /usr/lib/linux
memcache      7  252  0.0 418496 119936 pts/0   Sl+  21:40   1:58 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       13622848794      instructions:u            #    0.54  insn per cycle         
       25122424003      cycles:u                                                    

      47.080418590 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 115000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 115000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 115000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 115000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 115000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 115000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 115000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 115000 cpus 8
meanInterarrival 69
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1731064320
starting receive base loop
num_worker_connections 64
Creating worker on tid 1135014400
starting receive base loop
num_worker_connections 64
Creating worker on tid 539095552
starting receive base loop
num_worker_connections 64
Creating worker on tid 4238144000
starting receive base loop
num_worker_connections 64
Creating worker on tid 3642225152
starting receive base loop
num_worker_connections 64
Creating worker on tid 3048927744
starting receive base loop
num_worker_connections 64
Creating worker on tid 2453008896
starting receive base loop
Created 512 connections total
Creating worker on tid 1857090048
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576102075.100499,       0.0,      279479,     251590,      27889,     164594,      86996,   1.222044,   0.384100,   0.543100,  32.700000,   8.396925,   0.000000, 178.010002, 467.884558
Outstanding requests per worker:
5 5 5 4 3 1 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  115935.7,      579679,     521899,      57780,     386994,     134905,   0.748326,   0.393100,   0.576100,  20.300000,   3.763801,   0.061000,  78.988999, 563.948814
Outstanding requests per worker:
9 9 13 11 12 17 16 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  115795.9,      578980,     520965,      58015,     408429,     112536,   0.799823,   0.402100,   0.599100,  21.600000,   3.904424,   0.062000,  80.013998, 611.090655
Outstanding requests per worker:
170 102 65 90 108 168 87 94 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  116096.7,      580484,     522382,      58102,     421505,     100877,   0.957784,   0.434100,   0.712100,  26.300000,   4.627625,   0.061000,  88.373996, 636.480533
Outstanding requests per worker:
20 24 23 27 19 19 15 26 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  115977.1,      579886,     521697,      58189,     429183,      92514,   0.783861,   0.434100,   0.653100,  20.400000,   3.839901,   0.061000,  84.284000, 654.196398
Outstanding requests per worker:
3 4 3 4 4 3 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  115948.3,      579742,     521517,      58225,     435519,      85998,   0.736722,   0.436100,   0.611100,  19.200000,   3.648502,   0.062000,  83.309002, 667.299559
Outstanding requests per worker:
3 4 4 3 4 6 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  115948.5,      579743,     521678,      58065,     440693,      80985,   0.785107,   0.449100,   0.687100,  20.800000,   3.886830,   0.063000,  86.859003, 678.119050
Outstanding requests per worker:
4 4 3 2 3 2 2 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  21:41   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6272 pts/0    S+   21:41   0:00 /usr/lib/linux
memcache      7  258  0.0 421568 123072 pts/0   Sl+  21:41   2:01 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       14208714274      instructions:u            #    0.56  insn per cycle         
       25298618478      cycles:u                                                    

      46.690654623 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 12000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 12000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 12000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 12000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 12000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 12000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 12000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 12000 cpus 8
meanInterarrival 666
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1873867264
starting receive base loop
num_worker_connections 64
Creating worker on tid 1277293056
starting receive base loop
num_worker_connections 64
Creating worker on tid 681374208
starting receive base loop
num_worker_connections 64
Creating worker on tid 85455360
starting receive base loop
num_worker_connections 64
Creating worker on tid 3787125248
starting receive base loop
num_worker_connections 64
Creating worker on tid 3191206400
starting receive base loop
num_worker_connections 64
Creating worker on tid 2595287552
starting receive base loop
Created 512 connections total
Creating worker on tid 1999368704
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576102126.100550,       0.0,       29272,      26364,       2908,      14855,      11509,   0.773362,   0.124100,   0.131000,   0.300100,   8.268648,   0.000000, 171.278000, 371.051358
Outstanding requests per worker:
1 0 1 0 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12012.0,       60060,      54069,       5991,      33705,      20364,   0.094663,   0.123100,   0.128100,   0.171100,   0.022049,   0.068000,   0.467000, 433.451238
Outstanding requests per worker:
0 1 0 0 1 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12012.8,       60064,      53928,       6136,      35603,      18325,   0.093974,   0.122100,   0.127100,   0.170100,   0.022551,   0.068000,   0.939000, 474.795765
Outstanding requests per worker:
0 0 0 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12012.8,       60064,      54157,       5907,      36962,      17195,   0.093982,   0.122100,   0.127100,   0.173000,   0.022561,   0.069000,   0.750000, 498.962018
Outstanding requests per worker:
0 0 0 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12012.8,       60064,      54047,       6017,      37636,      16411,   0.093893,   0.122100,   0.127100,   0.170100,   0.022721,   0.066000,   0.896000, 514.171554
Outstanding requests per worker:
0 1 0 1 1 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12013.8,       60069,      54145,       5924,      38254,      15891,   0.093952,   0.122100,   0.127100,   0.173000,   0.022052,   0.066000,   0.394000, 527.334361
Outstanding requests per worker:
0 0 0 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12012.2,       60061,      54072,       5989,      38938,      15134,   0.093971,   0.122100,   0.127100,   0.169100,   0.022008,   0.068000,   0.625000, 540.120857
Outstanding requests per worker:
1 0 1 0 0 0 0 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:42   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   21:42   0:00 /usr/lib/linux
memcache      7 34.1  0.0 328384 27840 pts/0    Sl+  21:42   0:16 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:43   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

        1486793412      instructions:u            #    0.45  insn per cycle         
        3281145978      cycles:u                                                    

      46.820539330 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 125000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 125000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 125000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 125000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 125000 cpus 8
meanInterarrival 64
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2141581824
starting receive base loop
num_worker_connections 64
Creating worker on tid 1545728512
starting receive base loop
num_worker_connections 64
Creating worker on tid 949809664
starting receive base loop
num_worker_connections 64
Creating worker on tid 353890816
starting receive base loop
num_worker_connections 64
Creating worker on tid 4055560704
starting receive base loop
num_worker_connections 64
Creating worker on tid 3459641856
starting receive base loop
num_worker_connections 64
Creating worker on tid 2863723008
starting receive base loop
Created 512 connections total
Creating worker on tid 2267804160
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576102176.100600,       0.0,      300849,     270852,      29997,     178649,      92203,   2.011919,   1.300000,   3.900000,  51.100000,  11.042127,   0.000000, 195.611000, 475.070910
Outstanding requests per worker:
7 10 8 8 8 9 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.9,      625040,     562393,      62647,     419689,     142704,   1.102578,   0.948100,   1.700000,  25.600000,   4.574503,   0.061000,  94.701998, 569.780262
Outstanding requests per worker:
8 10 8 8 16 10 10 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125019.7,      625099,     562628,      62471,     443319,     119309,   1.192991,   1.200000,   2.100000,  26.800000,   4.829292,   0.061000, 103.729002, 614.966146
Outstanding requests per worker:
5 6 5 5 8 4 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  124938.9,      624695,     562158,      62537,     455041,     107117,   1.224296,   1.200000,   2.400000,  26.700000,   4.854603,   0.060000,  93.234003, 639.513752
Outstanding requests per worker:
66 55 46 48 49 57 65 44 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  124886.7,      624434,     561696,      62738,     463621,      98075,   1.360664,   1.300000,   2.700000,  30.700000,   5.312436,   0.074000, 106.040001, 657.093725
Outstanding requests per worker:
125 110 126 116 119 126 157 155 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125130.5,      625653,     562985,      62668,     472121,      90864,   1.411206,   1.400000,   2.900000,  30.800000,   5.466508,   0.073000, 103.719003, 671.504472
Outstanding requests per worker:
57 60 51 56 49 47 49 52 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125082.9,      625415,     562994,      62421,     476043,      86951,   1.301875,   1.500000,   2.900000,  26.500000,   4.834119,   0.075000,  92.960998, 680.005282
Outstanding requests per worker:
7 8 12 10 9 10 14 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  21:43   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6272 pts/0    S+   21:43   0:00 /usr/lib/linux
memcache      7  270  0.0 425664 129600 pts/0   Sl+  21:43   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:43   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       15014605840      instructions:u            #    0.59  insn per cycle         
       25584894119      cycles:u                                                    

      46.951223090 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 130000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 130000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 130000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 130000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 130000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 130000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 130000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 130000 cpus 8
meanInterarrival 61
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1706095104
starting receive base loop
num_worker_connections 64
Creating worker on tid 1110831616
starting receive base loop
num_worker_connections 64
Creating worker on tid 514912768
starting receive base loop
num_worker_connections 64
Creating worker on tid 4213961216
starting receive base loop
num_worker_connections 64
Creating worker on tid 3618042368
starting receive base loop
num_worker_connections 64
Creating worker on tid 3022123520
starting receive base loop
num_worker_connections 64
Creating worker on tid 2426204672
starting receive base loop
Created 512 connections total
Creating worker on tid 1830285824
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576102226.100650,       0.0,      318080,     286445,      31635,     190103,      96342,   4.147827,   7.700000,  12.500000,  55.600000,  10.620411,   0.000000, 187.900007, 478.455588
Outstanding requests per worker:
105 109 107 112 91 99 112 94 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131066.5,      655333,     590232,      65101,     441159,     149073,   3.432932,   5.300000,   7.200000,  38.700000,   6.453890,   0.077000, 119.053997, 571.488222
Outstanding requests per worker:
187 144 194 139 152 138 152 169 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131272.9,      656365,     590266,      66099,     466555,     123711,   3.604353,   5.900000,   8.100000,  35.600000,   6.108517,   0.076000, 113.046996, 618.040251
Outstanding requests per worker:
98 97 86 73 99 81 92 69 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131210.7,      656054,     590538,      65516,     480548,     109990,   3.788452,   6.100000,   7.600000,  32.900000,   5.855129,   0.079000, 108.934000, 644.318140
Outstanding requests per worker:
47 51 54 44 64 53 54 49 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131160.9,      655805,     590011,      65794,     488817,     101194,   3.932576,   6.200000,   7.900000,  35.700000,   6.138416,   0.088000, 109.424002, 660.039994
Outstanding requests per worker:
49 52 55 48 53 42 46 43 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131148.1,      655741,     590038,      65703,     495635,      94403,   4.166404,   6.500000,   8.300000,  39.200000,   6.609864,   0.087000, 115.465000, 673.340475
Outstanding requests per worker:
52 53 53 50 55 52 56 47 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131159.1,      655796,     590229,      65567,     501791,      88438,   4.114142,   6.600000,   8.600000,  36.200000,   6.295392,   0.088000, 111.429997, 684.123318
Outstanding requests per worker:
52 52 49 55 55 39 47 49 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:43   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   21:43   0:00 /usr/lib/linux
memcache      7  276  0.0 430784 136960 pts/0   Sl+  21:43   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:44   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       15806404796      instructions:u            #    0.64  insn per cycle         
       24641644302      cycles:u                                                    

      46.871057980 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 135000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 135000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 135000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 135000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 135000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 135000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 135000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 135000 cpus 8
meanInterarrival 59
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1740435968
starting receive base loop
num_worker_connections 64
Creating worker on tid 1143075328
starting receive base loop
num_worker_connections 64
Creating worker on tid 547156480
starting receive base loop
num_worker_connections 64
Creating worker on tid 4246204928
starting receive base loop
num_worker_connections 64
Creating worker on tid 3652907520
starting receive base loop
num_worker_connections 64
Creating worker on tid 3056988672
starting receive base loop
num_worker_connections 64
Creating worker on tid 2461069824
starting receive base loop
Created 512 connections total
Creating worker on tid 1865150976
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576102276.100700,       0.0,      325347,     292885,      32462,     194539,      98346,   5.632502,   9.900000,  16.900000,  68.800000,  11.969183,   0.000000, 176.695004, 479.670065
Outstanding requests per worker:
202 192 205 193 175 198 190 141 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  135636.1,      678181,     610678,      67503,     457676,     153002,   4.821205,   7.400000,   9.600000,  44.500000,   7.301336,   0.104000, 116.815001, 573.796747
Outstanding requests per worker:
150 199 131 204 140 236 145 140 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  135714.3,      678572,     610752,      67820,     484127,     126625,   4.896089,   7.700000,  10.100000,  41.500000,   6.918539,   0.085000, 120.917000, 620.862556
Outstanding requests per worker:
100 101 99 111 106 102 109 88 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  135644.1,      678221,     610313,      67908,     497320,     112993,   5.062809,   8.000000,  10.200000,  41.400000,   6.915279,   0.136000, 125.885993, 645.732826
Outstanding requests per worker:
68 79 74 80 74 78 78 72 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  135613.9,      678070,     610202,      67868,     506515,     103687,   5.137320,   8.100000,  10.300000,  42.100000,   6.995077,   0.137000, 116.383001, 662.231582
Outstanding requests per worker:
69 67 63 68 67 67 76 54 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  135602.9,      678015,     610063,      67952,     514028,      96035,   5.253558,   8.300000,  10.300000,  43.500000,   7.143906,   0.151000, 117.712997, 676.119858
Outstanding requests per worker:
69 63 80 65 66 74 70 61 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  135609.7,      678049,     610131,      67918,     519844,      90287,   5.293067,   8.600000,  10.900000,  41.700000,   7.033176,   0.114000, 114.605002, 686.180027
Outstanding requests per worker:
68 64 74 63 63 66 69 72 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:44   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   21:44   0:00 /usr/lib/linux
memcache      7  276  0.0 433856 139200 pts/0   Sl+  21:44   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:45   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       16485752977      instructions:u            #    0.67  insn per cycle         
       24640861094      cycles:u                                                    

      46.601189997 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 140000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 140000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 140000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 140000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 140000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 140000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 140000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 140000 cpus 8
meanInterarrival 57
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2037576192
starting receive base loop
num_worker_connections 64
Creating worker on tid 1438315008
starting receive base loop
num_worker_connections 64
Creating worker on tid 842396160
starting receive base loop
num_worker_connections 64
Creating worker on tid 246477312
starting receive base loop
num_worker_connections 64
Creating worker on tid 3945525760
starting receive base loop
num_worker_connections 64
Creating worker on tid 3349606912
starting receive base loop
num_worker_connections 64
Creating worker on tid 2753688064
starting receive base loop
Created 512 connections total
Creating worker on tid 2157769216
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576102327.100751,       0.0,      337351,     303563,      33788,     201877,     101686,   5.916770,  11.900000,  15.200000,  27.500000,   8.436288,   0.000000, 195.943996, 480.375675
Outstanding requests per worker:
100 84 83 86 87 91 98 97 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  140347.5,      701738,     631914,      69824,     475296,     156618,   5.470670,  10.200000,  11.800000,  14.900000,   3.356459,   0.156000,  20.764001, 576.285862
Outstanding requests per worker:
89 92 97 120 99 94 109 82 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  140359.5,      701798,     631429,      70369,     501021,     130408,   5.692111,  10.700000,  12.300000,  15.000000,   3.465701,   0.156000,  20.717001, 622.227866
Outstanding requests per worker:
99 98 113 112 112 88 89 92 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  140356.5,      701783,     632009,      69774,     516857,     115152,   5.874479,  11.100000,  12.700000,  15.800000,   3.615861,   0.151000,  23.275999, 648.422377
Outstanding requests per worker:
103 109 103 96 109 111 107 108 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  140364.3,      701822,     631360,      70462,     525445,     105915,   5.988823,  11.300000,  13.100000,  16.000000,   3.690196,   0.110000,  23.635000, 665.001894
Outstanding requests per worker:
112 104 111 109 105 105 102 116 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  140357.5,      701788,     631459,      70329,     533062,      98397,   6.111118,  11.600000,  13.400000,  16.500000,   3.792093,   0.148000,  25.226999, 678.085006
Outstanding requests per worker:
82 120 128 100 125 107 115 95 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  140359.3,      701797,     631489,      70308,     538797,      92692,   6.206011,  11.700000,  13.500000,  16.900000,   3.863216,   0.150000,  33.677999, 688.051583
Outstanding requests per worker:
90 105 104 130 107 117 110 116 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  21:45   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   21:45   0:00 /usr/lib/linux
memcache      7  276  0.0 435904 140736 pts/0   Sl+  21:45   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       17179789146      instructions:u            #    0.68  insn per cycle         
       25127670633      cycles:u                                                    

      46.871696650 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 145000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 145000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 145000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 145000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 145000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 145000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 145000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 145000 cpus 8
meanInterarrival 55
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2142499328
starting receive base loop
num_worker_connections 64
Creating worker on tid 1545728512
starting receive base loop
num_worker_connections 64
Creating worker on tid 949809664
starting receive base loop
num_worker_connections 64
Creating worker on tid 353890816
starting receive base loop
num_worker_connections 64
Creating worker on tid 4055560704
starting receive base loop
num_worker_connections 64
Creating worker on tid 3459641856
starting receive base loop
num_worker_connections 64
Creating worker on tid 2863723008
starting receive base loop
Created 512 connections total
Creating worker on tid 2267804160
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576102377.100801,       0.0,      345005,     310393,      34612,     206803,     103590,   8.423290,  17.500000,  22.000000,  43.300000,  10.821518,   0.000000, 200.247005, 482.370869
Outstanding requests per worker:
153 145 132 135 110 135 140 139 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  145472.3,      727362,     654944,      72418,     493974,     160970,   7.516996,  14.300000,  16.800000,  20.900000,   4.731268,   0.178000,  29.393001, 577.628974
Outstanding requests per worker:
134 149 149 128 135 116 132 134 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  145454.1,      727271,     654752,      72519,     521149,     133603,   7.806887,  14.800000,  17.500000,  22.400000,   4.963567,   0.189000,  31.916000, 625.133412
Outstanding requests per worker:
104 141 162 159 126 150 156 167 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  145465.7,      727329,     654738,      72591,     536193,     118545,   7.997056,  15.200000,  17.900000,  22.900000,   5.080850,   0.194000,  37.487999, 649.568134
Outstanding requests per worker:
138 141 140 140 157 136 144 157 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  145462.1,      727311,     654298,      73013,     545686,     108612,   8.124460,  15.500000,  18.300000,  22.900000,   5.143454,   0.160000,  33.971999, 666.371979
Outstanding requests per worker:
154 159 126 126 145 139 142 194 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  145467.9,      727340,     655036,      72304,     553392,     101644,   8.216170,  15.600000,  18.500000,  23.400000,   5.223192,   0.160000,  34.676000, 677.947919
Outstanding requests per worker:
155 141 143 138 138 161 161 152 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  145462.5,      727313,     654577,      72736,     559293,      95284,   8.369579,  15.900000,  18.900000,  23.600000,   5.306192,   0.189000,  41.097999, 689.074300
Outstanding requests per worker:
127 166 139 134 156 155 164 165 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:46   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6272 pts/0    S+   21:46   0:00 /usr/lib/linux
memcache      7  282  0.0 438976 142400 pts/0   Sl+  21:46   2:09 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:47   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       17824445765      instructions:u            #    0.71  insn per cycle         
       25253474384      cycles:u                                                    

      46.311583486 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 150000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 150000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 150000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 150000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 150000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 150000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 150000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 150000 cpus 8
meanInterarrival 53
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1885336064
starting receive base loop
num_worker_connections 64
Creating worker on tid 1293414912
starting receive base loop
num_worker_connections 64
Creating worker on tid 700117504
starting receive base loop
num_worker_connections 64
Creating worker on tid 104198656
starting receive base loop
num_worker_connections 64
Creating worker on tid 3803247104
starting receive base loop
num_worker_connections 64
Creating worker on tid 3207328256
starting receive base loop
num_worker_connections 64
Creating worker on tid 2611409408
starting receive base loop
Created 512 connections total
Creating worker on tid 2015490560
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576102427.100851,       0.0,      364685,     328365,      36320,     219832,     108533,  10.329868,  21.900000,  27.700000,  51.700000,  11.979151,   0.000000, 205.252007, 485.336239
Outstanding requests per worker:
182 184 171 169 209 176 159 161 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150930.2,      754652,     679155,      75497,     514150,     165005,   9.637692,  18.200000,  21.800000,  28.200000,   6.182377,   0.188000,  44.284001, 581.357457
Outstanding requests per worker:
192 193 205 203 167 170 200 198 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150941.2,      754707,     679737,      74970,     542788,     136949,  10.214488,  19.400000,  23.000000,  30.600000,   6.644763,   0.193000,  66.536002, 627.131554
Outstanding requests per worker:
192 205 180 206 184 209 225 184 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150945.4,      754728,     679292,      75436,     557878,     121414,  10.471502,  19.600000,  23.500000,  31.600000,   6.780028,   0.190000,  64.383000, 652.312278
Outstanding requests per worker:
225 212 220 178 184 181 195 227 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150952.8,      754765,     679181,      75584,     567528,     111653,  10.678681,  19.900000,  24.200000,  32.000000,   6.893616,   0.187000,  68.884999, 668.478045
Outstanding requests per worker:
177 200 175 207 218 206 192 238 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150943.6,      754719,     678874,      75845,     575186,     103688,  10.980749,  20.500000,  24.600000,  33.000000,   7.099430,   0.207000,  70.693001, 680.876677
Outstanding requests per worker:
216 196 192 221 219 191 202 226 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  150951.4,      754758,     679378,      75380,     581500,      97878,  11.045877,  20.800000,  24.900000,  33.100000,   7.186208,   0.193000,  69.557004, 690.575253
Outstanding requests per worker:
187 184 207 220 222 211 242 223 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  21:47   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6272 pts/0    S+   21:47   0:00 /usr/lib/linux
memcache      7  283  0.0 443072 148992 pts/0   Sl+  21:47   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  21:48   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       18654821662      instructions:u            #    0.72  insn per cycle         
       26073972505      cycles:u                                                    

      46.470825774 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 155000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 155000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 155000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 155000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 155000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 155000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 155000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 155000 cpus 8
meanInterarrival 51
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1810428416
starting receive base loop
num_worker_connections 64
Creating worker on tid 1218245120
starting receive base loop
num_worker_connections 64
Creating worker on tid 622326272
starting receive base loop
num_worker_connections 64
Creating worker on tid 29028864
starting receive base loop
num_worker_connections 64
Creating worker on tid 3728077312
starting receive base loop
num_worker_connections 64
Creating worker on tid 3132158464
starting receive base loop
num_worker_connections 64
Creating worker on tid 2536239616
starting receive base loop
Created 512 connections total
Creating worker on tid 1940320768
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576102477.100901,       0.0,      370079,     333330,      36749,     223374,     109956,  19.655649,  44.700000,  65.400000, 100.300000,  22.330539,   0.000000, 301.382989, 485.647682
Outstanding requests per worker:
283 252 248 235 215 263 243 288 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156832.8,      784165,     706097,      78068,     535337,     170760,  13.729544,  24.600000,  30.400000,  41.800000,   8.814201,   0.269000,  79.732001, 582.665474
Outstanding requests per worker:
263 270 272 277 265 246 313 311 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156845.8,      784230,     705592,      78638,     563724,     141868,  14.570315,  25.800000,  32.100000,  45.000000,   9.357365,   0.242000,  94.846003, 627.939658
Outstanding requests per worker:
278 278 358 272 276 283 279 342 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156855.8,      784280,     705386,      78894,     580390,     124996,  15.157942,  26.000000,  33.800000,  45.700000,   9.602922,   0.316000,  81.720002, 654.131385
Outstanding requests per worker:
305 351 315 323 308 290 316 280 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156889.2,      784447,     706137,      78310,     591857,     114280,  15.611931,  27.400000,  34.800000,  48.200000,  10.142467,   0.246000, 100.924999, 670.410423
Outstanding requests per worker:
289 299 372 306 302 292 307 275 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156870.8,      784355,     705983,      78372,     599588,     106395,  15.861657,  27.400000,  35.300000,  48.500000,  10.161752,   0.341000,  93.805000, 683.109405
Outstanding requests per worker:
288 296 304 318 337 280 341 285 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  156863.6,      784319,     705917,      78402,     605871,     100046,  16.114694,  27.900000,  35.900000,  49.600000,  10.354683,   0.284000,  98.210998, 693.189253
Outstanding requests per worker:
317 317 309 326 342 330 285 275 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  21:48   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   21:48   0:00 /usr/lib/linux
memcache      7  276  0.0 447168 150912 pts/0   Sl+  21:48   2:10 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:48   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       19359539766      instructions:u            #    0.73  insn per cycle         
       26482073671      cycles:u                                                    

      46.840806308 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 160000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 160000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 160000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 4 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 4 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 160000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 160000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 160000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 160000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 160000 cpus 8
meanInterarrival 50
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2635985408
starting receive base loop
num_worker_connections 64
Creating worker on tid 2042294784
starting receive base loop
num_worker_connections 64
Creating worker on tid 1446375936
starting receive base loop
num_worker_connections 64
Creating worker on tid 850457088
starting receive base loop
num_worker_connections 64
Creating worker on tid 254538240
starting receive base loop
num_worker_connections 64
Creating worker on tid 3953586688
starting receive base loop
num_worker_connections 64
Creating worker on tid 3357667840
starting receive base loop
Created 512 connections total
Creating worker on tid 2761748992
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576102529.100953,       0.0,      478944,     431180,      47764,     294922,     136258,  14.899950,  35.800000,  51.000000,  86.500000,  19.988862,   0.000000, 278.284013, 500.949678
Outstanding requests per worker:
391 470 385 450 417 341 397 354 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159518.2,      797592,     718045,      79547,     550689,     167356,  24.839102,  61.000000,  80.400000, 110.100000,  24.130343,   0.280000, 209.527001, 592.959008
Outstanding requests per worker:
739 744 724 710 671 676 676 717 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159673.4,      798368,     718084,      80284,     577882,     140202,  40.183783, 119.900000, 145.600000, 189.700000,  46.861197,   0.278000, 297.417015, 633.922622
Outstanding requests per worker:
873 798 941 926 914 947 1061 873 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159775.6,      798879,     718882,      79997,     593473,     125409,  48.820399, 152.400000, 180.600000, 228.900000,  60.235490,   0.245000, 355.832011, 656.906182
Outstanding requests per worker:
1103 1002 1090 1064 1065 1011 1047 1110 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159826.2,      799132,     719472,      79660,     604459,     115013,  56.370599, 182.300000, 215.700000, 275.000000,  73.105601,   0.275000, 478.480011, 673.583931
Outstanding requests per worker:
1136 1318 1151 1152 1105 1132 1224 1181 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  159834.8,      799175,     719308,      79867,     611870,     107438,  61.364513, 204.600000, 239.100000, 298.300000,  81.174641,   0.284000, 477.212995, 685.068663
Outstanding requests per worker:
1331 1416 1204 1274 1300 1189 1259 1293 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  158822.4,      794113,     714671,      79442,     614297,     100374,  67.497032, 212.300000, 249.800000, 333.700000,  86.120544,   0.381000, 524.038970, 694.840923
Outstanding requests per worker:
2074 2076 1977 1934 2086 1988 1958 2097 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:48   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   21:48   0:00 /usr/lib/linux
memcache      7  277  0.0 516224 155840 pts/0   Sl+  21:48   2:13 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  21:49   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 640':

       20263696183      instructions:u            #    0.73  insn per cycle         
       27820209029      cycles:u                                                    

      48.161934315 seconds time elapsed

