+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 25000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 25000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 25000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 25000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 25000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 25000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 25000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 25000 cpus 8
meanInterarrival 320
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1724248576
starting receive base loop
num_worker_connections 64
Creating worker on tid 1126953472
starting receive base loop
num_worker_connections 64
Creating worker on tid 531034624
starting receive base loop
num_worker_connections 64
Creating worker on tid 4230083072
starting receive base loop
num_worker_connections 64
Creating worker on tid 3634164224
starting receive base loop
num_worker_connections 64
Creating worker on tid 3038245376
starting receive base loop
num_worker_connections 64
Creating worker on tid 2444947968
starting receive base loop
Created 512 connections total
Creating worker on tid 1849029120
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576104018.102442,       0.0,       75915,      68376,       7539,      40723,      27653,   0.945192,   0.123100,   0.147100,  33.700000,   8.428515,   0.000000, 169.340998, 405.764815
Outstanding requests per worker:
1 0 0 0 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25001.6,      125008,     112592,      12416,      74953,      37639,   0.095810,   0.123100,   0.143100,   0.252100,   0.032276,   0.068000,   0.813000, 481.311798
Outstanding requests per worker:
1 0 0 0 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25001.8,      125009,     112621,      12388,      78765,      33856,   0.096041,   0.123100,   0.143100,   0.259100,   0.034508,   0.067000,   1.101000, 517.731391
Outstanding requests per worker:
1 0 0 0 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25002.4,      125012,     112581,      12431,      81114,      31467,   0.095806,   0.123100,   0.142100,   0.255100,   0.033033,   0.067000,   0.887000, 542.852391
Outstanding requests per worker:
0 1 1 0 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25002.8,      125014,     112736,      12278,      82961,      29775,   0.096200,   0.123100,   0.144100,   0.259100,   0.034192,   0.066000,   1.026000, 559.199768
Outstanding requests per worker:
0 0 0 1 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25001.4,      125007,     112540,      12467,      84523,      28017,   0.096605,   0.124100,   0.144100,   0.262000,   0.034373,   0.067000,   0.659000, 575.052017
Outstanding requests per worker:
1 0 0 0 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25001.8,      125009,     112481,      12528,      85637,      26844,   0.096194,   0.123100,   0.144100,   0.257100,   0.033697,   0.064000,   1.021000, 585.589051
Outstanding requests per worker:
1 0 0 0 1 0 0 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:13   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   22:13   0:00 /usr/lib/linux
memcache      7 68.2  0.0 196032 45056 pts/0    Sl+  22:13   0:32 memcached -t 2
memcache     16  0.0  0.0   6656  4416 pts/1    Rs+  22:14   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        3203605880      instructions:u            #    0.46  insn per cycle         
        6920809274      cycles:u                                                    

      47.710279151 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 30000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 30000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 30000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 30000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 30000 cpus 8
meanInterarrival 266
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2502554112
starting receive base loop
num_worker_connections 64
Creating worker on tid 1908077056
starting receive base loop
num_worker_connections 64
Creating worker on tid 1312158208
starting receive base loop
num_worker_connections 64
Creating worker on tid 716239360
starting receive base loop
num_worker_connections 64
Creating worker on tid 120320512
starting receive base loop
num_worker_connections 64
Creating worker on tid 3819368960
starting receive base loop
num_worker_connections 64
Creating worker on tid 3223450112
starting receive base loop
Created 512 connections total
Creating worker on tid 2627531264
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576104070.102494,       0.0,       92583,      83192,       9391,      50148,      33044,   1.199558,   0.128100,   0.152000,  49.100000,  10.219477,   0.000000, 196.919993, 411.895050
Outstanding requests per worker:
0 0 0 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.8,      150384,     135420,      14964,      91202,      44218,   0.101751,   0.127100,   0.147100,   0.246100,   0.034508,   0.063000,   0.868000, 490.295614
Outstanding requests per worker:
0 0 1 0 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.2,      150386,     135247,      15139,      96153,      39094,   0.101959,   0.127100,   0.148100,   0.255100,   0.035110,   0.066000,   0.897000, 530.441341
Outstanding requests per worker:
0 0 0 0 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.4,      150387,     135241,      15146,      98798,      36443,   0.101914,   0.127100,   0.148100,   0.249100,   0.034632,   0.065000,   0.756000, 553.644132
Outstanding requests per worker:
1 0 1 0 0 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.8,      150394,     135390,      15004,     101407,      33983,   0.102407,   0.127100,   0.148100,   0.256100,   0.037881,   0.066000,   0.958000, 573.522431
Outstanding requests per worker:
1 0 1 0 0 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.4,      150382,     135364,      15018,     103192,      32172,   0.102330,   0.127100,   0.148100,   0.253100,   0.036068,   0.064000,   1.315000, 587.528693
Outstanding requests per worker:
1 0 1 1 1 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.0,      150385,     135409,      14976,     104541,      30868,   0.103032,   0.128100,   0.149100,   0.259100,   0.036154,   0.068000,   1.101000, 597.130028
Outstanding requests per worker:
1 0 1 0 0 0 1 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:14   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6208 pts/0    S+   22:14   0:00 /usr/lib/linux
memcache      8 79.8  0.0 202176 50112 pts/0    Sl+  22:14   0:37 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  22:15   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        3826331700      instructions:u            #    0.48  insn per cycle         
        7980013534      cycles:u                                                    

      47.600718762 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 35000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 35000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 35000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 35000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 35000 cpus 8
meanInterarrival 228
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2028401152
starting receive base loop
num_worker_connections 64
Creating worker on tid 1435693568
starting receive base loop
num_worker_connections 64
Creating worker on tid 842396160
starting receive base loop
num_worker_connections 64
Creating worker on tid 246477312
starting receive base loop
num_worker_connections 64
Creating worker on tid 3945525760
starting receive base loop
num_worker_connections 64
Creating worker on tid 3349606912
starting receive base loop
num_worker_connections 64
Creating worker on tid 2753688064
starting receive base loop
Created 512 connections total
Creating worker on tid 2157769216
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576104121.102545,       0.0,      107849,      97031,      10818,      58953,      38078,   0.672721,   0.146100,   0.172100,  15.800000,   6.033490,   0.000000, 131.444007, 417.588276
Outstanding requests per worker:
0 0 1 0 0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35091.4,      175457,     157857,      17600,     107616,      50241,   0.110473,   0.147100,   0.168100,   0.289100,   0.046178,   0.064000,   1.196000, 499.243854
Outstanding requests per worker:
0 0 0 0 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35092.0,      175460,     158026,      17434,     113724,      44302,   0.110187,   0.147100,   0.168100,   0.287100,   0.044387,   0.067000,   1.046000, 540.375698
Outstanding requests per worker:
0 1 0 1 1 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35089.4,      175447,     157911,      17536,     117092,      40819,   0.109855,   0.147100,   0.168100,   0.286100,   0.039606,   0.064000,   0.946000, 563.688774
Outstanding requests per worker:
0 1 0 1 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35090.2,      175451,     157930,      17521,     119659,      38271,   0.110260,   0.147100,   0.169100,   0.283100,   0.040252,   0.066000,   1.004000, 582.017755
Outstanding requests per worker:
1 0 1 0 0 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35091.2,      175456,     157900,      17556,     121503,      36397,   0.110450,   0.148100,   0.169100,   0.283100,   0.040391,   0.068000,   1.012000, 594.879265
Outstanding requests per worker:
1 0 1 1 1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35091.4,      175457,     157921,      17536,     123324,      34597,   0.111030,   0.148100,   0.170100,   0.288100,   0.043060,   0.065000,   1.077000, 607.546938
Outstanding requests per worker:
0 0 1 0 0 1 0 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:15   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   22:15   0:00 /usr/lib/linux
memcache      7 88.9  0.0 207296 56128 pts/0    Sl+  22:15   0:42 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  22:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        4440261157      instructions:u            #    0.49  insn per cycle         
        9089372359      cycles:u                                                    

      47.971388289 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 40000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 40000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 40000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 40000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 40000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 40000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 40000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 40000 cpus 8
meanInterarrival 200
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1849029120
starting receive base loop
num_worker_connections 64
Creating worker on tid 1253110272
starting receive base loop
num_worker_connections 64
Creating worker on tid 657191424
starting receive base loop
num_worker_connections 64
Creating worker on tid 61272576
starting receive base loop
num_worker_connections 64
Creating worker on tid 3760321024
starting receive base loop
num_worker_connections 64
Creating worker on tid 3164402176
starting receive base loop
num_worker_connections 64
Creating worker on tid 2568483328
starting receive base loop
Created 512 connections total
Creating worker on tid 1975185920
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576104172.102596,       0.0,      121423,     109257,      12166,      67312,      41945,   0.756432,   0.167100,   0.247100,  18.300000,   6.740269,   0.000000, 152.055994, 427.573858
Outstanding requests per worker:
1 0 1 1 1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40003.4,      200017,     180048,      19969,     124309,      55739,   0.124646,   0.167100,   0.221100,   0.431100,   0.080667,   0.068000,   2.056000, 509.207650
Outstanding requests per worker:
0 1 1 0 1 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40002.2,      200011,     179989,      20022,     131100,      48889,   0.124413,   0.167100,   0.223100,   0.436100,   0.074637,   0.061000,   1.579000, 550.952758
Outstanding requests per worker:
1 1 0 0 0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40001.8,      200009,     180082,      19927,     134781,      45301,   0.126634,   0.168100,   0.226100,   0.502100,   0.083554,   0.066000,   1.518000, 573.112493
Outstanding requests per worker:
1 0 0 1 0 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40002.4,      200012,     180253,      19759,     138097,      42156,   0.125829,   0.168100,   0.229100,   0.470100,   0.074953,   0.063000,   1.287000, 592.119055
Outstanding requests per worker:
0 1 1 0 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40003.4,      200017,     179933,      20084,     140059,      39874,   0.129498,   0.168100,   0.232100,   0.587100,   0.102549,   0.067000,   1.877000, 604.055804
Outstanding requests per worker:
0 1 0 0 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40002.8,      200014,     180132,      19882,     142144,      37988,   0.126698,   0.168100,   0.229100,   0.468100,   0.082991,   0.066000,   1.825000, 616.956793
Outstanding requests per worker:
0 0 1 1 1 1 1 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:16   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   22:16   0:00 /usr/lib/linux
memcache      7 99.3  0.0 212416 61440 pts/0    Sl+  22:16   0:46 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  22:17   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        4985519415      instructions:u            #    0.50  insn per cycle         
       10004820846      cycles:u                                                    

      47.521460440 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 45000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 45000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 45000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 45000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 45000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 45000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 45000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 45000 cpus 8
meanInterarrival 177
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2592272896
starting receive base loop
num_worker_connections 64
Creating worker on tid 1999368704
starting receive base loop
num_worker_connections 64
Creating worker on tid 1403449856
starting receive base loop
num_worker_connections 64
Creating worker on tid 807531008
starting receive base loop
num_worker_connections 64
Creating worker on tid 211612160
starting receive base loop
num_worker_connections 64
Creating worker on tid 3910660608
starting receive base loop
num_worker_connections 64
Creating worker on tid 3317363200
starting receive base loop
Created 512 connections total
Creating worker on tid 2721444352
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576104223.102647,       0.0,      140267,     126170,      14097,      78466,      47704,   0.930653,   0.157100,   0.249100,  21.900000,   7.482754,   0.000000, 173.407003, 433.179710
Outstanding requests per worker:
0 1 1 1 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   45201.4,      226007,     203662,      22345,     142206,      61456,   0.300457,   0.171100,   0.237100,   7.000000,   1.433704,   0.060000,  26.303001, 516.623239
Outstanding requests per worker:
0 1 0 0 1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   45200.4,      226002,     203553,      22449,     149483,      54070,   0.336886,   0.198100,   0.247100,   7.900000,   1.426248,   0.061000,  22.368999, 556.217501
Outstanding requests per worker:
1 1 0 1 1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   45145.6,      225728,     203512,      22216,     153837,      49675,   0.437669,   0.202100,   0.987000,  10.500000,   1.817843,   0.061000,  24.529999, 580.446588
Outstanding requests per worker:
38 38 31 35 28 42 30 52 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   45258.0,      226290,     203690,      22600,     157448,      46242,   0.461865,   0.201100,   0.819100,  12.000000,   2.015395,   0.061000,  26.876001, 598.119471
Outstanding requests per worker:
1 0 0 0 0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   45201.4,      226007,     203513,      22494,     159529,      43984,   0.393305,   0.199100,   0.261100,   9.500000,   1.755363,   0.059000,  26.826000, 611.451160
Outstanding requests per worker:
1 0 0 0 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   45202.4,      226012,     203387,      22625,     161660,      41727,   0.409156,   0.200100,   0.254100,  10.100000,   1.813880,   0.063000,  28.183000, 623.983057
Outstanding requests per worker:
0 1 1 0 0 0 0 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  22:17   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6272 pts/0    S+   22:17   0:00 /usr/lib/linux
memcache      7  113  0.0 217536 68800 pts/0    Sl+  22:17   0:53 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  22:17   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        5695036634      instructions:u            #    0.51  insn per cycle         
       11150392313      cycles:u                                                    

      47.651140298 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 50000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 50000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 50000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 50000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 50000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 50000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 50000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 50000 cpus 8
meanInterarrival 160
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2357391872
starting receive base loop
num_worker_connections 64
Creating worker on tid 1763176960
starting receive base loop
num_worker_connections 64
Creating worker on tid 1169879552
starting receive base loop
num_worker_connections 64
Creating worker on tid 573960704
starting receive base loop
num_worker_connections 64
Creating worker on tid 4273009152
starting receive base loop
num_worker_connections 64
Creating worker on tid 3677090304
starting receive base loop
num_worker_connections 64
Creating worker on tid 3081171456
starting receive base loop
Created 512 connections total
Creating worker on tid 2485252608
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576104274.102698,       0.0,      152045,     137009,      15036,      85658,      51351,   1.153366,   0.211100,   0.917100,  33.100000,   7.377956,   0.000000, 155.920997, 437.155793
Outstanding requests per worker:
1 1 1 0 0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   50002.7,      250014,     225030,      24984,     158340,      66690,   0.823842,   0.217100,   2.000000,  21.900000,   3.856973,   0.059000,  53.856000, 523.063827
Outstanding requests per worker:
1 1 0 0 0 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   50002.9,      250015,     224975,      25040,     167026,      57949,   0.858437,   0.222100,   2.400000,  22.800000,   3.969206,   0.062000,  55.615000, 564.445041
Outstanding requests per worker:
1 0 0 0 1 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   50004.7,      250024,     225204,      24820,     172080,      53124,   0.839121,   0.221100,   2.000000,  22.400000,   3.897827,   0.059000,  52.777000, 589.591282
Outstanding requests per worker:
1 0 1 1 1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   50005.9,      250030,     225141,      24889,     174995,      50146,   0.851183,   0.222100,   2.400000,  22.400000,   3.951709,   0.059000,  55.569001, 604.598310
Outstanding requests per worker:
1 0 0 0 1 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   50003.1,      250016,     225201,      24815,     177732,      47469,   0.728172,   0.222100,   1.500000,  19.500000,   3.356179,   0.059000,  44.907000, 616.781608
Outstanding requests per worker:
1 0 0 0 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   49992.8,      249964,     224907,      25057,     180104,      44803,   0.782664,   0.223100,   1.700000,  21.100000,   3.683520,   0.062000,  55.461001, 630.281018
Outstanding requests per worker:
8 10 8 7 8 7 7 8 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:17   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   22:18   0:00 /usr/lib/linux
memcache      7  121  0.0 221632 70080 pts/0    Sl+  22:18   0:56 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  22:18   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        6230215249      instructions:u            #    0.53  insn per cycle         
       11832616654      cycles:u                                                    

      47.750852724 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 55000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 55000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 55000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 55000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 55000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 55000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 55000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 55000 cpus 8
meanInterarrival 145
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2594435584
starting receive base loop
num_worker_connections 64
Creating worker on tid 1999368704
starting receive base loop
num_worker_connections 64
Creating worker on tid 1403449856
starting receive base loop
num_worker_connections 64
Creating worker on tid 807531008
starting receive base loop
num_worker_connections 64
Creating worker on tid 211612160
starting receive base loop
num_worker_connections 64
Creating worker on tid 3910660608
starting receive base loop
num_worker_connections 64
Creating worker on tid 3317363200
starting receive base loop
Created 512 connections total
Creating worker on tid 2721444352
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576104325.102749,       0.0,      173141,     155794,      17347,      98655,      57139,   1.851179,   0.270100,   4.500000,  45.600000,  12.376581,   0.000000, 290.113002, 445.199847
Outstanding requests per worker:
1 1 1 1 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   55178.5,      275893,     248305,      27588,     176217,      72088,   1.188426,   0.262000,   5.400000,  29.200000,   5.221855,   0.058000,  68.232998, 528.886168
Outstanding requests per worker:
1 1 1 1 1 1 2 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   55174.9,      275875,     248200,      27675,     185121,      63079,   1.226167,   0.267100,   5.800000,  30.300000,   5.363043,   0.062000,  71.675003, 569.197953
Outstanding requests per worker:
0 1 2 0 1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   55177.3,      275887,     248381,      27506,     190381,      58000,   1.231952,   0.273100,   5.500000,  30.800000,   5.453708,   0.060000,  75.629003, 592.317343
Outstanding requests per worker:
2 0 1 1 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   55177.5,      275888,     248433,      27455,     194780,      53653,   1.221608,   0.306100,   5.600000,  30.200000,   5.289605,   0.061000,  66.751003, 610.701932
Outstanding requests per worker:
1 1 0 0 0 2 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   55178.7,      275894,     248310,      27584,     197539,      50771,   1.280305,   0.281000,   6.300000,  31.000000,   5.515582,   0.062000,  71.369998, 623.947811
Outstanding requests per worker:
1 1 1 1 1 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   55175.5,      275878,     248096,      27782,     199174,      48922,   1.311981,   0.315100,   6.500000,  31.600000,   5.662653,   0.058000,  75.378001, 632.420007
Outstanding requests per worker:
2 2 1 0 1 1 1 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:18   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   22:18   0:00 /usr/lib/linux
memcache      7  127  0.0 226752 78720 pts/0    Sl+  22:18   1:01 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  22:19   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        6893768576      instructions:u            #    0.53  insn per cycle         
       12989561933      cycles:u                                                    

      47.490975639 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 60000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 60000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 60000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 60000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 60000 cpus 8
meanInterarrival 133
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1838805504
starting receive base loop
num_worker_connections 64
Creating worker on tid 1245049344
starting receive base loop
num_worker_connections 64
Creating worker on tid 649130496
starting receive base loop
num_worker_connections 64
Creating worker on tid 53211648
starting receive base loop
num_worker_connections 64
Creating worker on tid 3752260096
starting receive base loop
num_worker_connections 64
Creating worker on tid 3156341248
starting receive base loop
num_worker_connections 64
Creating worker on tid 2560422400
starting receive base loop
Created 512 connections total
Creating worker on tid 1964503552
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576104376.102800,       0.0,      183135,     164616,      18519,     105252,      59364,   1.844253,   0.923100,   7.500000,  45.500000,   8.412454,   0.000000, 148.059994, 451.635254
Outstanding requests per worker:
1 0 1 0 2 1 3 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60046.3,      300232,     270145,      30087,     192632,      77513,   2.007516,   2.000000,  12.500000,  41.500000,   7.524910,   0.059000,  98.180003, 533.354869
Outstanding requests per worker:
63 77 69 58 82 75 68 73 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60110.9,      300555,     270689,      29866,     203477,      67212,   2.107538,   2.000000,  13.900000,  42.400000,   7.711565,   0.062000,  89.856997, 575.270983
Outstanding requests per worker:
105 104 94 107 109 89 78 92 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60260.9,      301305,     271479,      29826,     210261,      61218,   2.068243,   2.300000,  13.800000,  41.000000,   7.453578,   0.059000,  90.527996, 601.296557
Outstanding requests per worker:
27 32 31 30 35 26 32 30 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60189.5,      300948,     270706,      30242,     213576,      57130,   1.990474,   2.000000,  12.100000,  40.400000,   7.356948,   0.062000,  87.889999, 617.030476
Outstanding requests per worker:
8 11 9 9 11 9 11 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60169.7,      300849,     270823,      30026,     216625,      54198,   1.928751,   1.200000,  11.700000,  41.200000,   7.330918,   0.060000,  92.064001, 629.710265
Outstanding requests per worker:
1 1 0 0 1 2 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60152.5,      300763,     270592,      30171,     219305,      51287,   2.100988,   2.100000,  13.100000,  42.300000,   7.744961,   0.060000,  93.970999, 639.246064
Outstanding requests per worker:
2 2 3 3 1 1 2 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:19   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6272 pts/0    S+   22:19   0:00 /usr/lib/linux
memcache      7  136  0.0 230848 79104 pts/0    Sl+  22:19   1:04 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  22:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        7332798976      instructions:u            #    0.56  insn per cycle         
       13063798032      cycles:u                                                    

      47.479736044 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 65000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 65000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 65000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 65000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 65000 cpus 8
meanInterarrival 123
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2027352576
starting receive base loop
num_worker_connections 64
Creating worker on tid 1435693568
starting receive base loop
num_worker_connections 64
Creating worker on tid 842396160
starting receive base loop
num_worker_connections 64
Creating worker on tid 246477312
starting receive base loop
num_worker_connections 64
Creating worker on tid 3945525760
starting receive base loop
num_worker_connections 64
Creating worker on tid 3349606912
starting receive base loop
num_worker_connections 64
Creating worker on tid 2753688064
starting receive base loop
Created 512 connections total
Creating worker on tid 2157769216
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576104427.102851,       0.0,      196008,     176649,      19359,     112634,      64015,   5.741241,  12.800000,  18.400000,  58.400000,  10.694795,   0.000000, 145.695999, 450.047541
Outstanding requests per worker:
20 22 19 20 16 20 18 16 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65042.7,      325214,     292672,      32542,     209668,      83004,   5.672566,  10.600000,  18.700000,  51.000000,   9.269673,   0.065000, 112.365000, 537.139624
Outstanding requests per worker:
15 19 27 22 21 23 22 19 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65038.9,      325195,     292822,      32373,     220895,      71927,   5.958599,  11.200000,  19.000000,  50.200000,   9.208823,   0.064000, 111.291997, 578.436432
Outstanding requests per worker:
23 22 35 24 25 26 22 33 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65049.7,      325249,     292787,      32462,     227369,      65418,   6.936929,  12.000000,  22.300000,  56.800000,  10.189801,   0.064000, 135.092005, 603.093771
Outstanding requests per worker:
23 29 31 23 28 20 25 23 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65039.1,      325196,     292576,      32620,     231455,      61121,   7.545877,  12.700000,  22.100000,  55.500000,   9.965758,   0.068000, 121.133998, 619.200854
Outstanding requests per worker:
23 36 28 28 28 25 29 30 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65036.5,      325183,     292788,      32395,     235695,      57093,   7.304658,  13.300000,  21.600000,  53.500000,   9.712216,   0.067000, 128.244996, 634.464124
Outstanding requests per worker:
40 28 42 25 28 44 38 27 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65028.5,      325143,     292914,      32229,     238440,      54474,   7.446336,  13.800000,  20.400000,  51.400000,   9.169286,   0.073000, 108.560003, 644.112402
Outstanding requests per worker:
50 41 49 47 44 46 46 43 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:20   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   22:20   0:00 /usr/lib/linux
memcache      7  141  0.0 234944 85376 pts/0    Sl+  22:20   1:06 memcached -t 2
memcache     16  0.0  0.0   6656  4416 pts/1    Rs+  22:21   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        7873879880      instructions:u            #    0.64  insn per cycle         
       12308281308      cycles:u                                                    

      47.629375595 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 70000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 70000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 70000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 70000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 70000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 70000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 70000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 70000 cpus 8
meanInterarrival 114
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2161177088
starting receive base loop
num_worker_connections 64
Creating worker on tid 1561850368
starting receive base loop
num_worker_connections 64
Creating worker on tid 968552960
starting receive base loop
num_worker_connections 64
Creating worker on tid 372634112
starting receive base loop
num_worker_connections 64
Creating worker on tid 4071682560
starting receive base loop
num_worker_connections 64
Creating worker on tid 3475763712
starting receive base loop
num_worker_connections 64
Creating worker on tid 2879844864
starting receive base loop
Created 512 connections total
Creating worker on tid 2283926016
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576104478.102902,       0.0,      219402,     197473,      21929,     126929,      70544,  13.418324,  31.800000,  45.100000,  90.900000,  21.018635,   0.000000, 487.664998, 456.638568
Outstanding requests per worker:
149 139 146 149 133 154 155 150 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   70199.9,      351000,     315632,      35368,     228019,      87613,  16.656164,  31.400000,  42.400000,  79.300000,  15.338830,   0.106000, 172.076002, 543.321910
Outstanding requests per worker:
101 152 124 145 143 137 121 150 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   70189.5,      350948,     315950,      34998,     239975,      75975,  17.811697,  34.600000,  45.700000,  85.800000,  16.469939,   0.144000, 174.326003, 584.200066
Outstanding requests per worker:
133 140 105 138 125 128 135 126 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   70186.7,      350934,     315870,      35064,     246855,      69015,  18.328387,  35.100000,  47.600000,  88.300000,  17.042884,   0.099000, 205.621004, 608.376383
Outstanding requests per worker:
137 109 138 136 116 121 131 129 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   70178.9,      350895,     315490,      35405,     251714,      63776,  19.164483,  37.800000,  49.400000,  91.400000,  17.593605,   0.110000, 202.505007, 626.285055
Outstanding requests per worker:
126 138 119 145 136 128 134 120 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   70177.3,      350887,     315819,      35068,     255532,      60287,  19.471080,  39.000000,  48.700000,  89.400000,  17.376236,   0.147000, 205.495000, 638.752301
Outstanding requests per worker:
129 124 144 138 141 123 134 124 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   70182.3,      350912,     315847,      35065,     258071,      57776,  19.954551,  39.500000,  51.800000,  94.700000,  18.264165,   0.138000, 196.587995, 648.322048
Outstanding requests per worker:
137 135 126 142 121 132 129 134 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:21   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6208 pts/0    S+   22:21   0:00 /usr/lib/linux
memcache      8  139  0.0 241088 93056 pts/0    Sl+  22:21   1:06 memcached -t 2
memcache     18  1.0  0.0   6656  4352 pts/1    Rs+  22:22   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        8665347121      instructions:u            #    0.70  insn per cycle         
       12433905197      cycles:u                                                    

      47.861218404 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 75000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 75000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 75000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 75000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 75000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 75000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 75000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 75000 cpus 8
meanInterarrival 106
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2311844352
starting receive base loop
num_worker_connections 64
Creating worker on tid 1714811392
starting receive base loop
num_worker_connections 64
Creating worker on tid 1118892544
starting receive base loop
num_worker_connections 64
Creating worker on tid 522973696
starting receive base loop
num_worker_connections 64
Creating worker on tid 4222022144
starting receive base loop
num_worker_connections 64
Creating worker on tid 3626103296
starting receive base loop
num_worker_connections 64
Creating worker on tid 3030184448
starting receive base loop
Created 512 connections total
Creating worker on tid 2434265600
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576104529.102953,       0.0,      224965,     202527,      22438,     131092,      71435,  29.354427,  69.300000, 106.600000, 199.100000,  51.627414,   0.000000, 961.189985, 461.041264
Outstanding requests per worker:
243 272 267 245 257 203 268 238 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75569.5,      377848,     339991,      37857,     246377,      93614,  29.301803,  59.100000,  78.200000, 132.500000,  25.829526,   0.172000, 235.192999, 547.020609
Outstanding requests per worker:
167 199 198 156 226 200 177 208 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75461.9,      377310,     339810,      37500,     258977,      80833,  31.342128,  63.200000,  85.200000, 139.400000,  27.406180,   0.152000, 231.769994, 588.021730
Outstanding requests per worker:
200 189 210 176 177 240 206 211 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75375.3,      376877,     339028,      37849,     265914,      73114,  33.820192,  67.300000,  93.800000, 146.100000,  29.333155,   0.141000, 258.349001, 612.458177
Outstanding requests per worker:
281 246 282 288 262 270 227 265 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75171.1,      375856,     338107,      37749,     270218,      67889,  37.852390,  78.800000, 110.700000, 155.200000,  33.038405,   0.172000, 250.959992, 628.862239
Outstanding requests per worker:
481 469 442 433 404 476 432 533 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75355.3,      376777,     338990,      37787,     275747,      63243,  41.479044,  93.800000, 123.500000, 163.300000,  36.628477,   0.172000, 299.576014, 644.186475
Outstanding requests per worker:
558 581 550 545 579 544 461 451 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75428.7,      377144,     339423,      37721,     278523,      60900,  46.046419,  99.500000, 127.600000, 168.400000,  37.525498,   0.252000, 289.108008, 652.581316
Outstanding requests per worker:
613 509 571 521 540 606 597 554 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:22   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6272 pts/0    S+   22:22   0:00 /usr/lib/linux
memcache      8  141  0.0 244160 95808 pts/0    Sl+  22:22   1:06 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:23   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        9336849517      instructions:u            #    0.72  insn per cycle         
       12960824737      cycles:u                                                    

      47.270231700 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 80000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 80000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 80000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 80000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 80000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 80000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 80000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 80000 cpus 8
meanInterarrival 100
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2524639744
starting receive base loop
num_worker_connections 64
Creating worker on tid 1932259840
starting receive base loop
num_worker_connections 64
Creating worker on tid 1336340992
starting receive base loop
num_worker_connections 64
Creating worker on tid 740422144
starting receive base loop
num_worker_connections 64
Creating worker on tid 144503296
starting receive base loop
num_worker_connections 64
Creating worker on tid 3843551744
starting receive base loop
num_worker_connections 64
Creating worker on tid 3250254336
starting receive base loop
Created 512 connections total
Creating worker on tid 2654335488
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576104580.103004,       0.0,      233341,     209885,      23456,     136371,      73514,  56.156092, 140.300000, 181.500000, 687.000000, 122.414202,   0.000000, 1755.952001, 463.179613
Outstanding requests per worker:
1326 1100 1244 1185 1174 1204 1101 3521 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   76996.1,      384981,     346771,      38210,     251680,      95091, 249.147179, 389.000000, 457.400000, 943.700000, 156.295227,   0.741000, 1733.593941, 547.376035
Outstanding requests per worker:
3201 3216 3309 3170 3287 3291 3318 4123 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   77690.1,      388451,     349713,      38738,     267248,      82465, 411.949093, 583.400000, 661.200000, 955.400000, 153.157259,  20.909000, 1642.073035, 589.437633
Outstanding requests per worker:
4673 4595 4699 4762 4899 4560 4817 5508 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   77959.9,      389800,     350873,      38927,     275721,      75152, 548.681657, 782.600000, 889.100000, 1151.800000, 191.121842,  34.343001, 1811.246991, 613.289199
Outstanding requests per worker:
5969 5932 5934 6060 6049 6054 6024 6710 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78125.5,      390628,     351384,      39244,     281582,      69802, 673.538822, 1005.700000, 1141.900000, 1427.700000, 241.694091, 136.832997, 1895.396948, 629.938165
Outstanding requests per worker:
7210 7210 7251 7255 7264 7161 6999 7791 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   77989.3,      389947,     350912,      39035,     285140,      65772, 796.060608, 1202.400000, 1363.000000, 1728.300000, 297.333383, 156.771004, 2350.373030, 643.171923
Outstanding requests per worker:
8358 8285 8654 8331 8505 8543 8482 9085 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   77907.1,      389536,     350653,      38883,     288625,      62028, 924.847861, 1391.200000, 1581.100000, 1972.000000, 349.392276, 181.669995, 2537.067890, 654.916809
Outstanding requests per worker:
9682 9715 9775 9694 9824 9696 9819 10550 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:23   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   22:23   0:00 /usr/lib/linux
memcache      7  139  0.0 246208 108800 pts/0   Sl+  22:23   1:07 memcached -t 2
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  22:23   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        9831826090      instructions:u            #    0.73  insn per cycle         
       13405885662      cycles:u                                                    

      47.609421363 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 85000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 85000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 85000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 85000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 85000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 85000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 85000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 85000 cpus 8
meanInterarrival 94
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1865806336
starting receive base loop
num_worker_connections 64
Creating worker on tid 1269232128
starting receive base loop
num_worker_connections 64
Creating worker on tid 673313280
starting receive base loop
num_worker_connections 64
Creating worker on tid 77394432
starting receive base loop
num_worker_connections 64
Creating worker on tid 3776442880
starting receive base loop
num_worker_connections 64
Creating worker on tid 3183145472
starting receive base loop
num_worker_connections 64
Creating worker on tid 2587226624
starting receive base loop
Created 512 connections total
Creating worker on tid 1991307776
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576104631.103055,       0.0,      233570,     210220,      23350,     136177,      74043,  62.891678, 145.000000, 179.600000, 850.500000, 144.382796,   0.000000, 1966.153026, 461.143412
Outstanding requests per worker:
1605 1547 1518 1454 1467 1416 1537 10689 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78955.5,      394778,     355479,      39299,     258080,      97399, 434.010515, 653.800000, 1261.300000, 2408.000000, 401.314149,   0.776000, 2799.859047, 548.241713
Outstanding requests per worker:
5667 5546 5629 5486 5587 5638 5474 12995 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79650.9,      398255,     358362,      39893,     274093,      84269, 759.513895, 1086.600000, 1459.000000, 2630.200000, 395.785071, 139.758006, 3323.647976, 589.832814
Outstanding requests per worker:
9040 8665 9017 8982 9062 9123 8897 16556 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79528.3,      397642,     357859,      39783,     281183,      76676, 1083.351763, 1519.300000, 1837.500000, 2949.300000, 438.627661, 257.872999, 3778.662920, 613.290461
Outstanding requests per worker:
12642 12305 12275 12528 12545 12436 12427 20127 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79078.7,      395394,     355916,      39478,     285398,      70518, 1427.159604, 1950.900000, 2219.700000, 3295.700000, 477.628318, 311.935991, 4169.301033, 631.399187
Outstanding requests per worker:
16307 15791 16217 16510 16242 16451 16089 23877 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78977.9,      394890,     355678,      39212,     290115,      65563, 1781.671910, 2357.600000, 2691.600000, 3709.300000, 519.520458, 528.901994, 4522.117138, 645.592235
Outstanding requests per worker:
19901 19846 20103 20182 20090 20267 19976 27801 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78675.5,      393378,     353953,      39425,     291993,      61960, 2152.255242, 2823.500000, 3112.000000, 4121.300000, 575.258365, 650.259972, 5477.130890, 655.789407
Outstanding requests per worker:
23976 23692 24166 24441 24011 24242 23957 31889 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:23   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6208 pts/0    S+   22:23   0:00 /usr/lib/linux
memcache      8  139  0.0 248256 115200 pts/0   Sl+  22:23   1:07 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:24   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        9926838527      instructions:u            #    0.74  insn per cycle         
       13464884385      cycles:u                                                    

      47.770430649 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 90000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 90000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 90000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 90000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 90000 cpus 8
meanInterarrival 88
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2275996160
starting receive base loop
num_worker_connections 64
Creating worker on tid 1679946240
starting receive base loop
num_worker_connections 64
Creating worker on tid 1084027392
starting receive base loop
num_worker_connections 64
Creating worker on tid 488108544
starting receive base loop
num_worker_connections 64
Creating worker on tid 4189778432
starting receive base loop
num_worker_connections 64
Creating worker on tid 3593859584
starting receive base loop
num_worker_connections 64
Creating worker on tid 2997940736
starting receive base loop
Created 512 connections total
Creating worker on tid 2402021888
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576104682.103106,       0.0,      243423,     219064,      24359,     142173,      76891,  72.664558, 170.900000, 211.500000, 867.600000, 150.960771,   0.000000, 1973.631024, 463.961440
Outstanding requests per worker:
1844 1763 1872 1827 1795 1889 2135 18205 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78933.1,      394666,     355380,      39286,     259055,      96325, 670.746745, 1073.500000, 2257.100000, 3610.300000, 658.882108,   1.177000, 4261.269093, 550.337079
Outstanding requests per worker:
8863 8785 9167 8841 8832 8915 9152 28686 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79395.5,      396978,     357400,      39578,     273840,      83560, 1324.615980, 1907.000000, 3146.000000, 4322.500000, 729.095919, 274.953008, 5013.209820, 592.193758
Outstanding requests per worker:
15921 16155 16422 16153 15910 16101 16334 35861 
count  390049
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78818.5,      394093,     354854,      39239,     279944,      74910, 1973.746582, 2663.800000, 3736.100000, 6000.000000, 753.025715, 631.684005, 5885.602951, 616.436100
Outstanding requests per worker:
23290 23607 24022 23558 23499 23915 23870 43589 
count  379454
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78604.9,      393025,     353336,      39689,     283775,      69561, 2644.658727, 3428.000000, 4380.500000, 6000.000000, 784.001103, 1042.314053, 6803.684235, 632.980885
Outstanding requests per worker:
31118 31618 31449 31192 31168 31207 31813 51355 
count  370061
count  370061
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78007.7,      390039,     350904,      39135,     285697,      65207, 3329.651988, 4207.000000, 6000.000000, 7000.000000, 806.814154, 1520.807028, 7503.714085, 644.139579
Outstanding requests per worker:
39127 39567 39654 39337 39309 39391 39756 59334 
count  354729
count  354729
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78047.9,      390240,     351536,      38704,     289579,      61957, 4027.538327, 4912.500000, 6000.000000, 8000.000000, 827.727341, 1958.662987, 8040.080070, 654.467275
Outstanding requests per worker:
47169 47539 47788 47259 47253 47580 47798 67439 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:24   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6272 pts/0    S+   22:24   0:00 /usr/lib/linux
memcache      7  140  0.0 248256 115072 pts/0   Sl+  22:24   1:07 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  22:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        9936030998      instructions:u            #    0.73  insn per cycle         
       13564428103      cycles:u                                                    

      47.861402967 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 95000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 95000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 95000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 95000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 95000 cpus 8
meanInterarrival 84
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2313548288
starting receive base loop
num_worker_connections 64
Creating worker on tid 1714811392
starting receive base loop
num_worker_connections 64
Creating worker on tid 1118892544
starting receive base loop
num_worker_connections 64
Creating worker on tid 522973696
starting receive base loop
num_worker_connections 64
Creating worker on tid 4222022144
starting receive base loop
num_worker_connections 64
Creating worker on tid 3626103296
starting receive base loop
num_worker_connections 64
Creating worker on tid 3030184448
starting receive base loop
Created 512 connections total
Creating worker on tid 2434265600
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576104734.103158,       0.0,      257191,     231281,      25910,     150586,      80695,  71.219079, 157.400000, 212.600000, 1149.200000, 181.296510,   0.000000, 1982.125998, 465.620643
Outstanding requests per worker:
1928 1781 1894 1801 1746 1935 6472 23201 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78966.9,      394835,     355129,      39706,     258912,      96217, 793.254331, 1755.600000, 3035.600000, 4601.100000, 888.915280,   1.238000, 5506.927013, 551.424660
Outstanding requests per worker:
10428 10539 10451 10527 10673 10739 14541 44250 
count  386628
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79563.3,      397817,     358351,      39466,     274382,      83969, 1682.124875, 3193.100000, 4423.000000, 6000.000000, 1041.246824, 370.559990, 6474.305153, 591.845612
Outstanding requests per worker:
20165 20430 20137 20379 20664 20578 24144 54076 
count  372360
count  372360
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79197.1,      395986,     356130,      39856,     280817,      75313, 2521.001819, 4095.300000, 6000.000000, 7000.000000, 1065.794772, 968.069971, 7457.910061, 615.993553
Outstanding requests per worker:
30022 30254 30352 30446 30562 30631 34585 63982 
count  355289
count  355289
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78855.7,      394279,     354955,      39324,     285552,      69403, 3376.927637, 4975.000000, 7000.000000, 8000.000000, 1080.817920, 1655.923963, 8280.963898, 633.894604
Outstanding requests per worker:
40573 40459 40708 40640 40808 40771 44721 74143 
count  338641
count  338641
count  338641
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78735.7,      393679,     354622,      39057,     289189,      65433, 4243.231793, 6000.000000, 7000.000000, 9000.000000, 1095.436146, 2452.429056, 9100.584984, 645.975955
Outstanding requests per worker:
50898 50904 50900 50882 51161 51084 55097 84459 
count  234261
count  234261
count  234261
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78543.1,      392716,     353345,      39371,     291702,      61643, 5114.247141, 7000.000000, 8000.000000, 9000.000000, 1104.061604, 3208.684921, 9895.992279, 656.748189
Outstanding requests per worker:
61416 61381 61058 61238 61623 61581 65632 94990 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:25   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   22:25   0:00 /usr/lib/linux
memcache      7  141  0.0 248256 113536 pts/0   Sl+  22:25   1:07 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  22:26   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

       10006316801      instructions:u            #    0.73  insn per cycle         
       13621882778      cycles:u                                                    

      47.921171760 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 100000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 100000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 100000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 100000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 100000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 100000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 100000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 100000 cpus 8
meanInterarrival 80
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2160456192
starting receive base loop
num_worker_connections 64
Creating worker on tid 1561850368
starting receive base loop
num_worker_connections 64
Creating worker on tid 968552960
starting receive base loop
num_worker_connections 64
Creating worker on tid 372634112
starting receive base loop
num_worker_connections 64
Creating worker on tid 4071682560
starting receive base loop
num_worker_connections 64
Creating worker on tid 3475763712
starting receive base loop
num_worker_connections 64
Creating worker on tid 2879844864
starting receive base loop
Created 512 connections total
Creating worker on tid 2283926016
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576104785.103209,       0.0,      251886,     226641,      25245,     147457,      79184,  99.717966, 223.900000, 280.400000, 976.000000, 165.694893,   0.000000, 1952.031970, 465.006177
Outstanding requests per worker:
3140 3120 3103 3212 3102 3135 7525 24297 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79225.7,      396129,     356677,      39452,     259832,      96845, 956.004339, 1839.200000, 3291.700000, 4842.200000, 926.575167,  53.925000, 5793.482780, 550.202800
Outstanding requests per worker:
14517 14603 14386 14590 14525 14547 18213 49182 
count  385852
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79588.5,      397943,     358274,      39669,     274407,      83867, 2011.247707, 3310.500000, 4570.300000, 6000.000000, 977.890153, 665.555000, 6604.905128, 591.970171
Outstanding requests per worker:
27372 27384 26929 27496 27246 27200 31248 61830 
count  363743
count  363743
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79161.1,      395806,     356185,      39621,     281200,      74985, 3072.539936, 4522.700000, 6000.000000, 7000.000000, 1052.744360, 1372.599006, 8067.949295, 617.725600
Outstanding requests per worker:
40322 40588 39863 40495 40170 40362 44207 74939 
count  344278
count  344278
count  344278
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78831.5,      394158,     354971,      39187,     285530,      69441, 4127.888190, 6000.000000, 7000.000000, 9000.000000, 1071.330833, 2122.606993, 9412.368774, 633.055520
Outstanding requests per worker:
53570 53885 53058 53825 53427 53572 57360 88146 
count  220253
count  220253
count  220253
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78672.5,      393363,     354433,      38930,     288785,      65648, 5191.395753, 7000.000000, 8000.000000, 10000.000000, 1092.044125, 3244.381905, 10373.908043, 645.274901
Outstanding requests per worker:
67049 67121 66608 66937 66756 66865 70623 101592 
count  9803
count  9803
count  9803
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78414.7,      392074,     352829,      39245,     291281,      61548, 6268.284812, 8000.000000, 10000.000000, 11000.000000, 1110.435343, 4375.613213, 11654.677391, 656.920347
Outstanding requests per worker:
80681 80656 80134 80599 80322 80478 83617 115072 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:26   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   22:26   0:00 /usr/lib/linux
memcache      7  141  0.0 248256 111872 pts/0   Sl+  22:26   1:07 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  22:27   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        9969321369      instructions:u            #    0.74  insn per cycle         
       13481791050      cycles:u                                                    

      48.111038594 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 105000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 105000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 105000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 105000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 105000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 105000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 105000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 105000 cpus 8
meanInterarrival 76
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1648292352
starting receive base loop
num_worker_connections 64
Creating worker on tid 1051783680
starting receive base loop
num_worker_connections 64
Creating worker on tid 455864832
starting receive base loop
num_worker_connections 64
Creating worker on tid 4154913280
starting receive base loop
num_worker_connections 64
Creating worker on tid 3558994432
starting receive base loop
num_worker_connections 64
Creating worker on tid 2963075584
starting receive base loop
num_worker_connections 64
Creating worker on tid 2367156736
starting receive base loop
Created 512 connections total
Creating worker on tid 1773859328
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576104836.103260,       0.0,      263860,     237182,      26678,     155137,      82045,  96.400113, 215.700000, 281.300000, 1144.800000, 186.234642,   0.000000, 2122.131109, 467.874986
Outstanding requests per worker:
2890 2968 2834 2919 2884 2875 15260 26316 
count  383004
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79257.1,      396286,     356557,      39729,     260571,      95986, 1070.776232, 2346.300000, 4308.400000, 6000.000000, 1171.436334,   5.267000, 6418.445110, 552.280749
Outstanding requests per worker:
15839 15858 16108 16090 15820 15889 29030 56225 
count  371061
count  371061
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78868.3,      394342,     355034,      39308,     271911,      83123, 2353.664333, 4205.500000, 6000.000000, 7000.000000, 1208.248665, 742.130995, 7568.412781, 591.751742
Outstanding requests per worker:
32582 32327 32702 32542 32092 32661 45442 80693 
count  334816
count  334816
count  334816
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78128.3,      390642,     351091,      39551,     277502,      73589, 3657.813395, 6000.000000, 7000.000000, 9000.000000, 1283.765008, 1738.973022, 8965.605736, 617.686873
Outstanding requests per worker:
49337 49588 49883 49336 48954 49322 62449 97902 
count  279744
count  279744
count  279744
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78197.9,      390990,     352180,      38810,     283469,      68711, 4966.908549, 8000.000000, 9000.000000, 10000.000000, 1369.204082, 2836.680889, 10304.628372, 634.005659
Outstanding requests per worker:
66314 66573 66818 66397 66007 66028 79159 114855 
count  29303
count  29303
count  29303
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   77860.9,      389305,     350190,      39115,     286039,      64151, 6258.412354, 9000.000000, 10000.000000, 11000.000000, 1379.336987, 4039.218903, 11519.229889, 647.828756
Outstanding requests per worker:
83373 83629 84233 83543 83017 83053 96338 132025 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   77664.9,      388325,     349382,      38943,     288295,      61087, 7571.243214, 10000.000000, 11000.000000, 13000.000000, 1393.922780, 5360.657215, 13076.931000, 656.755053
Outstanding requests per worker:
100733 100907 101274 100697 100374 100432 113520 149317 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  22:27   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   22:27   0:00 /usr/lib/linux
memcache      7  141  0.0 248256 116224 pts/0   Sl+  22:27   1:08 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  22:28   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        9963672353      instructions:u            #    0.74  insn per cycle         
       13553396808      cycles:u                                                    

      47.830632772 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 110000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 110000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 110000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 110000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 110000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 110000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 110000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 110000 cpus 8
meanInterarrival 72
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2330784256
starting receive base loop
num_worker_connections 64
Creating worker on tid 1738994176
starting receive base loop
num_worker_connections 64
Creating worker on tid 1143075328
starting receive base loop
num_worker_connections 64
Creating worker on tid 547156480
starting receive base loop
num_worker_connections 64
Creating worker on tid 4246204928
starting receive base loop
num_worker_connections 64
Creating worker on tid 3652907520
starting receive base loop
num_worker_connections 64
Creating worker on tid 3056988672
starting receive base loop
Created 512 connections total
Creating worker on tid 2461069824
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576104887.103311,       0.0,      271692,     244627,      27065,     159886,      84741, 100.441198, 229.900000, 290.200000, 1105.200000, 184.579926,   0.000000, 2062.855959, 468.657156
Outstanding requests per worker:
3514 3398 3459 3504 3595 3656 21230 27778 
count  381150
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79126.5,      395633,     356473,      39160,     260837,      95636, 1100.441172, 2186.900000, 3270.600000, 7000.000000, 1154.733622,   1.703000, 6852.282047, 553.414306
Outstanding requests per worker:
18521 18366 18197 18575 18456 18517 37839 53511 
count  369274
count  369274
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80795.5,      403978,     363515,      40463,     278924,      84591, 2663.709281, 4758.300000, 6000.000000, 8000.000000, 1334.971180, 891.057014, 8214.168549, 593.190537
Outstanding requests per worker:
38352 38442 38076 38369 38494 38454 57849 93718 
count  325905
count  325905
count  325905
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79041.9,      395210,     355284,      39926,     280089,      75195, 4051.615482, 7000.000000, 8000.000000, 9000.000000, 1276.042130, 2109.071016, 9198.445320, 616.534541
Outstanding requests per worker:
58523 58310 58258 58312 58501 58569 78035 113684 
count  166663
count  166663
count  166663
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78598.9,      392995,     353399,      39596,     284338,      69061, 5608.720585, 9000.000000, 10000.000000, 11000.000000, 1479.904717, 3340.136051, 11182.006836, 633.638536
Outstanding requests per worker:
79133 78615 78645 78550 78784 78859 98231 134003 
count  467
count  467
count  467
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78312.9,      391565,     352343,      39222,     287899,      64444, 7064.311290, 10000.000000, 11000.000000, 12000.000000, 1478.197048, 4721.432209, 12801.353455, 647.507789
Outstanding requests per worker:
99600 98855 99098 99036 99404 99182 118591 154308 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   77536.7,      387684,     348747,      38937,     287695,      61052, 8569.838785, 12000.000000, 13000.000000, 14000.000000, 1506.866087, 5971.343994, 14548.570633, 656.551658
Outstanding requests per worker:
120773 120070 120239 120059 120250 120187 139536 175729 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:28   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6272 pts/0    S+   22:28   0:00 /usr/lib/linux
memcache      7  142  0.0 248256 111552 pts/0   Sl+  22:28   1:08 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  22:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

       10048498031      instructions:u            #    0.75  insn per cycle         
       13419100506      cycles:u                                                    

      48.150321799 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 115000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 115000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 115000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 115000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 115000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 115000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 115000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 115000 cpus 8
meanInterarrival 69
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2322264576
starting receive base loop
num_worker_connections 64
Creating worker on tid 1722872320
starting receive base loop
num_worker_connections 64
Creating worker on tid 1126953472
starting receive base loop
num_worker_connections 64
Creating worker on tid 531034624
starting receive base loop
num_worker_connections 64
Creating worker on tid 4230083072
starting receive base loop
num_worker_connections 64
Creating worker on tid 3634164224
starting receive base loop
num_worker_connections 64
Creating worker on tid 3038245376
starting receive base loop
Created 512 connections total
Creating worker on tid 2444947968
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576104939.103363,       0.0,      280930,     252923,      28007,     166768,      86155,  96.154689, 212.900000, 286.300000, 1064.800000, 184.956957,   0.000000, 2049.493074, 473.522843
Outstanding requests per worker:
3211 3246 3183 3192 3150 5361 27685 28986 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78502.1,      392511,     353221,      39290,     259057,      94164, 977.930854, 2068.200000, 3025.800000, 4167.800000, 846.386324,  31.916998, 5664.473057, 555.641726
Outstanding requests per worker:
18778 18932 18695 18901 18849 20765 49713 53243 
count  352377
count  352377
count  352377
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   82814.9,      414075,     372804,      41271,     286466,      86338, 2985.669272, 7000.000000, 8000.000000, 9000.000000, 1759.557487, 835.394979, 9328.214645, 594.106305
Outstanding requests per worker:
41225 41251 40917 41608 41345 43253 71995 108935 
count  319726
count  319726
count  319726
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79843.3,      399217,     359542,      39675,     284098,      75444, 4225.681215, 7000.000000, 7000.000000, 8000.000000, 1226.775640, 2179.251909, 9925.358772, 618.033601
Outstanding requests per worker:
63989 63900 63434 64158 63900 65887 94450 131838 
count  109611
count  109611
count  109611
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79181.1,      395906,     356413,      39493,     286709,      69704, 5977.599641, 9000.000000, 10000.000000, 11000.000000, 1547.638444, 3537.992001, 11544.387817, 633.442419
Outstanding requests per worker:
87028 86739 86393 87257 87037 88807 117580 154569 
count  31
count  31
count  31
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78704.1,      393521,     354143,      39378,     289176,      64967, 7662.414902, 11000.000000, 12000.000000, 13000.000000, 1744.961430, 4897.301197, 14029.056549, 646.444332
Outstanding requests per worker:
110259 110200 109564 110525 110310 111934 140770 178102 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   77436.9,      387185,     348484,      38701,     287705,      60779, 9284.745402, 13000.000000, 14000.000000, 15000.000000, 1748.195164, 6439.900875, 15649.766922, 658.061877
Outstanding requests per worker:
134302 134018 133467 134694 134702 136038 164873 202175 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:29   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6272 pts/0    S+   22:29   0:00 /usr/lib/linux
memcache      8  142  0.0 249280 115648 pts/0   Sl+  22:29   1:08 memcached -t 2
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  22:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

       10179179388      instructions:u            #    0.75  insn per cycle         
       13586324198      cycles:u                                                    

      48.141208822 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 12000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 12000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 12000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 12000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 12000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 12000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 12000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 12000 cpus 8
meanInterarrival 666
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2162291200
starting receive base loop
num_worker_connections 64
Creating worker on tid 1569911296
starting receive base loop
num_worker_connections 64
Creating worker on tid 976613888
starting receive base loop
num_worker_connections 64
Creating worker on tid 380695040
starting receive base loop
num_worker_connections 64
Creating worker on tid 4079743488
starting receive base loop
num_worker_connections 64
Creating worker on tid 3483824640
starting receive base loop
num_worker_connections 64
Creating worker on tid 2887905792
starting receive base loop
Created 512 connections total
Creating worker on tid 2291986944
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576104990.103414,       0.0,       37189,      33479,       3710,      19112,      14367,   0.563742,   0.119100,   0.128100,   0.558100,   5.993592,   0.000000, 168.540999, 378.340900
Outstanding requests per worker:
0 0 1 0 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12012.6,       60063,      54027,       6036,      33845,      20182,   0.093680,   0.122100,   0.130100,   0.253100,   0.031613,   0.068000,   0.550000, 439.059896
Outstanding requests per worker:
0 0 1 0 0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12013.0,       60065,      54053,       6012,      35741,      18312,   0.093239,   0.120100,   0.127100,   0.272100,   0.034227,   0.066000,   0.786000, 476.460603
Outstanding requests per worker:
0 0 1 0 0 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12013.2,       60066,      54135,       5931,      36943,      17192,   0.093702,   0.121100,   0.127100,   0.284100,   0.035430,   0.067000,   0.640000, 498.521252
Outstanding requests per worker:
0 0 0 1 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12013.6,       60068,      54036,       6032,      37687,      16349,   0.093371,   0.120100,   0.127100,   0.270100,   0.033884,   0.066000,   0.886000, 516.295026
Outstanding requests per worker:
0 0 0 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12012.6,       60063,      54004,       6059,      38366,      15638,   0.093678,   0.120100,   0.127100,   0.279100,   0.035047,   0.067000,   0.717000, 530.531683
Outstanding requests per worker:
0 0 0 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12012.8,       60064,      54029,       6035,      38846,      15183,   0.093366,   0.120100,   0.127100,   0.272100,   0.033790,   0.067000,   0.781000, 539.477521
Outstanding requests per worker:
0 0 0 0 0 0 0 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:29   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6272 pts/0    S+   22:29   0:00 /usr/lib/linux
memcache      7 34.4  0.0 180672 29376 pts/0    Sl+  22:29   0:16 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  22:30   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        1526177451      instructions:u            #    0.46  insn per cycle         
        3311927308      cycles:u                                                    

      47.720294088 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 125000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 125000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 125000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 125000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 125000 cpus 8
meanInterarrival 64
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2173432320
starting receive base loop
num_worker_connections 64
Creating worker on tid 1580593664
starting receive base loop
num_worker_connections 64
Creating worker on tid 984674816
starting receive base loop
num_worker_connections 64
Creating worker on tid 388755968
starting receive base loop
num_worker_connections 64
Creating worker on tid 4087804416
starting receive base loop
num_worker_connections 64
Creating worker on tid 3491885568
starting receive base loop
num_worker_connections 64
Creating worker on tid 2895966720
starting receive base loop
Created 512 connections total
Creating worker on tid 2300047872
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576105041.103465,       0.0,      281826,     253783,      28043,     166086,      87697, 119.270156, 259.500000, 433.100000, 1115.100000, 202.814507,   0.000000, 2049.179077, 470.129950
Outstanding requests per worker:
3774 3877 3823 3820 4448 13917 32940 31252 
count  395389
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79989.3,      399947,     360049,      39898,     263938,      96111, 1196.364010, 2802.200000, 4186.200000, 6000.000000, 1124.754138,  55.316001, 6871.220112, 555.243761
Outstanding requests per worker:
22431 22471 22276 22538 23384 32827 68741 53778 
count  334984
count  334984
count  334984
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   81126.3,      405632,     365248,      40384,     280832,      84416, 3365.001365, 8000.000000, 9000.000000, 10000.000000, 2001.422976, 971.392989, 10089.853287, 595.023220
Outstanding requests per worker:
50468 50017 49861 50411 51031 60269 96312 100617 
count  268756
count  268756
count  268756
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   77285.7,      386429,     347730,      38699,     274988,      72742, 4798.370010, 7000.000000, 8000.000000, 10000.000000, 1326.754530, 2584.475040, 11200.889587, 619.184465
Outstanding requests per worker:
79598 79140 79154 79467 79776 89418 125060 147625 
count  10401
count  10401
count  10401
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79907.9,      399540,     359815,      39725,     289578,      70237, 6841.102418, 10000.000000, 10000.000000, 11000.000000, 1461.400871, 4342.943192, 11480.340004, 633.610316
Outstanding requests per worker:
108797 108046 108059 108473 109082 118289 154391 149474 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   74253.1,      371266,     334355,      36911,     272807,      61548, 8715.768045, 12000.000000, 12000.000000, 13000.000000, 1526.541944, 6205.158234, 14336.183548, 646.405099
Outstanding requests per worker:
138085 138251 138180 137308 139197 148609 180306 209736 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78311.7,      391559,     351880,      39679,     290318,      61562, 10917.147744, 15000.000000, 15000.000000, 16000.000000, 1865.555117, 8108.346939, 16798.055649, 656.001827
Outstanding requests per worker:
169397 168501 168428 168844 169668 178685 215030 231708 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:30   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6208 pts/0    S+   22:30   0:00 /usr/lib/linux
memcache      8  141  0.0 248256 112576 pts/0   Sl+  22:30   1:08 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:31   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

       10064274101      instructions:u            #    0.75  insn per cycle         
       13429697791      cycles:u                                                    

      48.001128064 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 130000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 130000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 130000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 130000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 130000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 130000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 130000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 130000 cpus 8
meanInterarrival 61
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2411131392
starting receive base loop
num_worker_connections 64
Creating worker on tid 1814163968
starting receive base loop
num_worker_connections 64
Creating worker on tid 1218245120
starting receive base loop
num_worker_connections 64
Creating worker on tid 622326272
starting receive base loop
num_worker_connections 64
Creating worker on tid 29028864
starting receive base loop
num_worker_connections 64
Creating worker on tid 3728077312
starting receive base loop
num_worker_connections 64
Creating worker on tid 3132158464
starting receive base loop
Created 512 connections total
Creating worker on tid 2536239616
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576105093.103517,       0.0,      289756,     260859,      28897,     171731,      89128, 151.916776, 341.400000, 670.800000, 1195.300000, 242.183317,   0.000000, 2121.325016, 472.971072
Outstanding requests per worker:
4670 4559 4587 4551 7337 20277 34957 32790 
count  392098
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80580.5,      402903,     363017,      39886,     266515,      96502, 1334.016232, 2958.900000, 4672.100000, 6000.000000, 1213.202783,  86.675003, 6128.532887, 557.058157
Outstanding requests per worker:
25721 25400 25463 25689 28343 41927 79317 53223 
count  329786
count  329786
count  329786
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80776.9,      403885,     363755,      40130,     279840,      83915, 3614.938188, 8000.000000, 9000.000000, 10000.000000, 2050.574950, 1132.500052, 10288.908005, 595.406430
Outstanding requests per worker:
57127 56808 56798 57323 59788 73193 110650 100022 
count  209688
count  209688
count  209688
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   77856.7,      389284,     350553,      38731,     277046,      73507, 5213.532353, 8000.000000, 9000.000000, 10000.000000, 1406.853807, 2983.238935, 11499.937057, 617.900163
Outstanding requests per worker:
90333 89841 90058 90126 93016 106327 142156 142688 
count  112
count  112
count  112
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   76590.3,      382952,     344554,      38398,     277256,      67298, 7345.672705, 10000.000000, 11000.000000, 12000.000000, 1419.136672, 4911.572933, 12030.232430, 634.147451
Outstanding requests per worker:
123932 123070 123429 122177 125509 140062 176963 155821 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   76219.7,      381099,     342867,      38232,     279855,      63012, 9444.896487, 12000.000000, 13000.000000, 14000.000000, 1443.977867, 6844.048023, 14307.884216, 646.102950
Outstanding requests per worker:
158129 157916 157886 158393 161226 174744 211492 223537 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75656.9,      378285,     340398,      37887,     280964,      59434, 11747.879675, 15000.000000, 16000.000000, 16000.000000, 1681.851916, 8729.054451, 16689.977646, 656.421019
Outstanding requests per worker:
192665 192563 191156 192817 195337 206254 225304 244665 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:31   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6272 pts/0    S+   22:31   0:00 /usr/lib/linux
memcache      7  142  0.0 248256 112640 pts/0   Sl+  22:31   1:08 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  22:32   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

       10021883179      instructions:u            #    0.75  insn per cycle         
       13405357323      cycles:u                                                    

      48.161583063 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 135000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 135000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 135000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 135000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 135000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 135000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 135000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 135000 cpus 8
meanInterarrival 59
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1996616192
starting receive base loop
num_worker_connections 64
Creating worker on tid 1403449856
starting receive base loop
num_worker_connections 64
Creating worker on tid 807531008
starting receive base loop
num_worker_connections 64
Creating worker on tid 211612160
starting receive base loop
num_worker_connections 64
Creating worker on tid 3910660608
starting receive base loop
num_worker_connections 64
Creating worker on tid 3317363200
starting receive base loop
num_worker_connections 64
Creating worker on tid 2721444352
starting receive base loop
Created 512 connections total
Creating worker on tid 2125525504
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576105144.103568,       0.0,      289623,     260661,      28962,     171010,      89651, 176.591245, 397.000000, 782.200000, 1289.300000, 268.716433,   0.000000, 2101.022005, 471.587806
Outstanding requests per worker:
5218 5539 5492 5497 10125 24626 36140 33900 
count  382630
count  382630
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80675.1,      403376,     363008,      40368,     266311,      96697, 1470.454783, 3108.300000, 6000.000000, 6000.000000, 1285.510526, 144.104004, 6861.945152, 556.277380
Outstanding requests per worker:
28489 28556 28561 28428 33338 48986 77706 51077 
count  321060
count  321060
count  321060
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78846.9,      394235,     354504,      39731,     273204,      81300, 3814.962315, 9000.000000, 9000.000000, 10000.000000, 2059.747622, 1257.212996, 10646.841049, 596.582425
Outstanding requests per worker:
63135 63296 63412 62956 67826 83612 120965 85425 
count  165635
count  165635
count  165635
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   76238.5,      381193,     343178,      38015,     271309,      71869, 5411.180015, 8000.000000, 9000.000000, 11000.000000, 1393.482744, 2547.754049, 12204.489708, 618.601224
Outstanding requests per worker:
99628 99745 99925 99592 104339 118719 154616 153307 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75106.9,      375535,     338424,      37111,     272449,      65975, 7792.158652, 11000.000000, 11000.000000, 12000.000000, 1383.521064, 5046.885967, 12822.160721, 634.243029
Outstanding requests per worker:
135744 135256 137337 137105 140146 155449 194982 189452 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   74860.1,      374301,     336572,      37729,     274559,      62013, 10114.075793, 13000.000000, 14000.000000, 14000.000000, 1433.412337, 7249.083042, 15108.524323, 645.948424
Outstanding requests per worker:
173149 172395 175284 174106 179834 195373 232839 221771 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   73042.5,      365213,     328708,      36505,     270828,      57880, 12513.621298, 16000.000000, 16000.000000, 17000.000000, 1615.098733, 9466.073036, 17949.951172, 655.491853
Outstanding requests per worker:
205902 213708 211361 211796 218391 234685 251462 259926 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:32   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   22:32   0:00 /usr/lib/linux
memcache      7  142  0.0 247232 111168 pts/0   Sl+  22:32   1:08 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        9901216416      instructions:u            #    0.75  insn per cycle         
       13253485773      cycles:u                                                    

      48.081804968 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 140000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 140000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 140000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 140000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 140000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 140000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 140000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 140000 cpus 8
meanInterarrival 57
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2280649216
starting receive base loop
num_worker_connections 64
Creating worker on tid 1688007168
starting receive base loop
num_worker_connections 64
Creating worker on tid 1092088320
starting receive base loop
num_worker_connections 64
Creating worker on tid 498790912
starting receive base loop
num_worker_connections 64
Creating worker on tid 4197839360
starting receive base loop
num_worker_connections 64
Creating worker on tid 3601920512
starting receive base loop
num_worker_connections 64
Creating worker on tid 3006001664
starting receive base loop
Created 512 connections total
Creating worker on tid 2410082816
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576105196.103620,       0.0,      288973,     260116,      28857,     170853,      89263, 192.200933, 457.500000, 910.500000, 1459.800000, 302.265478,   0.000000, 2046.638012, 471.344070
Outstanding requests per worker:
5828 5853 5892 5875 13736 28304 36706 35090 
count  375758
count  375758
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80792.7,      403964,     363752,      40212,     267295,      96457, 1540.177108, 3011.900000, 6000.000000, 6000.000000, 1330.887144, 142.878994, 6530.291080, 557.156576
Outstanding requests per worker:
30495 30551 30609 30611 38865 55196 59478 50948 
count  319564
count  319564
count  319564
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78316.7,      391584,     352648,      38936,     271357,      81291, 3924.652135, 9000.000000, 10000.000000, 10000.000000, 2068.938684, 1288.305044, 10891.456604, 595.278606
Outstanding requests per worker:
68049 67877 67731 67836 76746 92743 128018 88586 
count  132897
count  132897
count  132897
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   76852.5,      384263,     345663,      38600,     272996,      72667, 5641.978242, 8000.000000, 9000.000000, 11000.000000, 1405.827629, 2448.071957, 12267.366409, 617.393421
Outstanding requests per worker:
107841 107677 107432 107595 116420 132263 170828 155529 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   72050.1,      360251,     324311,      35940,     260818,      63493, 7960.020146, 10000.000000, 11000.000000, 12000.000000, 1199.611507, 5456.463814, 12055.923462, 632.802748
Outstanding requests per worker:
147626 139188 142380 146141 152882 172008 205268 164438 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   73799.1,      368996,     332085,      36911,     270639,      61446, 10408.768724, 13000.000000, 13000.000000, 14000.000000, 1307.159810, 7817.280769, 16042.259216, 645.649665
Outstanding requests per worker:
190153 176894 187993 187673 189372 214842 240646 210208 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   76979.9,      384900,     346394,      38506,     285387,      61007, 12984.828099, 16000.000000, 17000.000000, 18000.000000, 1599.659972, 10159.261703, 18741.781235, 655.034620
Outstanding requests per worker:
231815 231368 231319 230984 239929 256108 261028 244760 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:33   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6208 pts/0    S+   22:33   0:00 /usr/lib/linux
memcache      8  142  0.0 248256 112128 pts/0   Sl+  22:33   1:08 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  22:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        9867205224      instructions:u            #    0.75  insn per cycle         
       13237762514      cycles:u                                                    

      48.400555063 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 145000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 145000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 145000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 145000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 145000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 145000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 145000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 145000 cpus 8
meanInterarrival 55
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2319380992
starting receive base loop
num_worker_connections 64
Creating worker on tid 1722872320
starting receive base loop
num_worker_connections 64
Creating worker on tid 1126953472
starting receive base loop
num_worker_connections 64
Creating worker on tid 531034624
starting receive base loop
num_worker_connections 64
Creating worker on tid 4230083072
starting receive base loop
num_worker_connections 64
Creating worker on tid 3634164224
starting receive base loop
num_worker_connections 64
Creating worker on tid 3038245376
starting receive base loop
Created 512 connections total
Creating worker on tid 2444947968
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576105249.103673,       0.0,      293865,     264402,      29463,     174389,      90013, 204.002871, 464.800000, 1047.900000, 1625.500000, 334.227424,   0.000000, 2085.844040, 473.657034
Outstanding requests per worker:
6178 6255 6313 6471 17288 31897 38218 36366 
count  380527
count  380527
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   81236.1,      406181,     365493,      40688,     268657,      96836, 1607.112002, 3148.400000, 6000.000000, 7000.000000, 1335.187175, 140.674993, 6591.386795, 557.543302
Outstanding requests per worker:
33045 33419 33062 33167 44448 62235 58150 52966 
count  314635
count  314635
count  314635
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79546.9,      397735,     358221,      39514,     275741,      82480, 4093.618892, 8000.000000, 10000.000000, 10000.000000, 2106.293808, 1388.955951, 10813.581467, 595.020113
Outstanding requests per worker:
72637 72893 72927 72883 83937 102095 138769 87401 
count  112097
count  112097
count  112097
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   74500.5,      372503,     335069,      37434,     264849,      70220, 5849.011550, 8000.000000, 10000.000000, 12000.000000, 1524.777699, 2480.781078, 12792.332649, 618.167297
Outstanding requests per worker:
116163 114920 116228 116289 126913 140889 168353 157488 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   73355.5,      366778,     330052,      36726,     265042,      65010, 8400.651381, 11000.000000, 11000.000000, 12000.000000, 1310.957478, 5726.087093, 12702.106476, 631.909735
Outstanding requests per worker:
153951 158714 156516 151288 171180 180060 196428 168448 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   74633.9,      373170,     335978,      37192,     273794,      62184, 10852.409503, 13000.000000, 14000.000000, 15000.000000, 1261.730955, 8119.370461, 14538.807869, 645.029225
Outstanding requests per worker:
202880 204869 202706 191112 214793 223708 234863 203578 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   74072.5,      370363,     333474,      36889,     274483,      58991, 13588.987584, 17000.000000, 18000.000000, 19000.000000, 1725.656484, 10623.345375, 19015.611649, 653.552652
Outstanding requests per worker:
250369 246285 249712 250205 261420 277258 233537 223553 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:34   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6208 pts/0    S+   22:34   0:00 /usr/lib/linux
memcache      8  142  0.0 247232 112832 pts/0   Sl+  22:34   1:08 memcached -t 2
memcache     17  1.0  0.0   6656  4352 pts/1    Rs+  22:35   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        9861296474      instructions:u            #    0.75  insn per cycle         
       13066343116      cycles:u                                                    

      48.120667194 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 150000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 150000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 150000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 150000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 150000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 150000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 150000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 150000 cpus 8
meanInterarrival 53
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1820389888
starting receive base loop
num_worker_connections 64
Creating worker on tid 1226306048
starting receive base loop
num_worker_connections 64
Creating worker on tid 633008640
starting receive base loop
num_worker_connections 64
Creating worker on tid 37089792
starting receive base loop
num_worker_connections 64
Creating worker on tid 3736138240
starting receive base loop
num_worker_connections 64
Creating worker on tid 3140219392
starting receive base loop
num_worker_connections 64
Creating worker on tid 2544300544
starting receive base loop
Created 512 connections total
Creating worker on tid 1948381696
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576105301.103725,       0.0,      296367,     266887,      29480,     175693,      91194, 231.221468, 525.000000, 1166.900000, 1773.400000, 362.505313,   0.000000, 2159.250021, 471.961276
Outstanding requests per worker:
7269 7258 7168 7204 21555 34912 39852 37736 
count  382380
count  382380
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80578.1,      402891,     362664,      40227,     265845,      96819, 1683.942771, 3196.900000, 6000.000000, 7000.000000, 1311.249540, 196.138993, 6686.740875, 556.013539
Outstanding requests per worker:
36971 37084 36800 36939 51513 68543 56933 52156 
count  303366
count  303366
count  303366
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80531.3,      402657,     362508,      40149,     279054,      83454, 4324.964710, 8000.000000, 10000.000000, 10000.000000, 2106.330790, 1528.800011, 10892.422676, 594.672987
Outstanding requests per worker:
79962 80274 79974 80044 94687 112102 150910 82170 
count  84648
count  84648
count  84648
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75157.5,      375788,     338051,      37737,     267212,      70839, 6119.315222, 8000.000000, 9000.000000, 12000.000000, 1535.062020, 2575.467110, 13317.579269, 618.143168
Outstanding requests per worker:
123365 123414 124726 125217 138853 156752 197153 147800 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   71032.3,      355162,     319784,      35378,     256843,      62941, 8566.578677, 11000.000000, 11000.000000, 12000.000000, 1178.366528, 5706.106186, 12173.724174, 632.165978
Outstanding requests per worker:
170039 169744 163396 166766 180483 198677 224951 171041 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   74953.9,      374770,     337326,      37444,     275273,      62053, 11370.227108, 14000.000000, 15000.000000, 16000.000000, 1487.961425, 8517.808914, 16657.093048, 645.987555
Outstanding requests per worker:
208462 222897 220246 222395 236638 204783 237681 213556 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   73737.3,      368687,     331553,      37134,     273241,      58312, 13796.302956, 17000.000000, 18000.000000, 19000.000000, 1526.404941, 11080.657959, 19374.744415, 654.420566
Outstanding requests per worker:
269476 272264 260050 272161 286170 264729 257220 255198 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:35   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   22:35   0:00 /usr/lib/linux
memcache      7  141  0.0 246208 111680 pts/0   Sl+  22:35   1:08 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  22:35   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        9825735062      instructions:u            #    0.75  insn per cycle         
       13067359878      cycles:u                                                    

      47.980976511 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 155000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 155000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 155000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 155000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 155000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 155000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 155000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 155000 cpus 8
meanInterarrival 51
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1840771584
starting receive base loop
num_worker_connections 64
Creating worker on tid 1245049344
starting receive base loop
num_worker_connections 64
Creating worker on tid 649130496
starting receive base loop
num_worker_connections 64
Creating worker on tid 53211648
starting receive base loop
num_worker_connections 64
Creating worker on tid 3752260096
starting receive base loop
num_worker_connections 64
Creating worker on tid 3156341248
starting receive base loop
num_worker_connections 64
Creating worker on tid 2560422400
starting receive base loop
Created 512 connections total
Creating worker on tid 1964503552
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576105352.103776,       0.0,      300888,     271185,      29703,     178865,      92320, 248.836696, 549.200000, 1250.200000, 1863.000000, 385.010590,   0.000000, 2301.284075, 473.182222
Outstanding requests per worker:
8340 8371 8228 8200 26041 38078 41809 39217 
count  387208
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80760.9,      403805,     363535,      40270,     266848,      96687, 1777.693943, 3277.600000, 4237.800000, 7000.000000, 1287.232145, 185.920000, 6836.598873, 556.520654
Outstanding requests per worker:
41238 40915 40998 41011 58532 76454 54933 54212 
count  295532
count  295532
count  295532
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80330.3,      401652,     361482,      40170,     278427,      83055, 4474.993932, 8000.000000, 10000.000000, 11000.000000, 2080.677597, 1678.091049, 10904.765129, 596.666954
Outstanding requests per worker:
88109 87932 87808 87439 105348 123277 150969 90912 
count  58822
count  58822
count  58822
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   70259.3,      351297,     316004,      35293,     249761,      66243, 6459.258592, 9000.000000, 10000.000000, 12000.000000, 1636.240914, 2476.934910, 13092.249870, 618.913574
Outstanding requests per worker:
132369 137014 130048 134839 145492 160579 188337 130928 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   76011.5,      380058,     342218,      37840,     275441,      66777, 8970.147936, 11000.000000, 12000.000000, 12000.000000, 1336.183039, 6005.585194, 14498.251915, 634.847252
Outstanding requests per worker:
178198 174706 166176 179753 185244 211053 215029 170195 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   69717.7,      348589,     313790,      34799,     256107,      57683, 11803.127133, 14000.000000, 15000.000000, 16000.000000, 1409.419108, 9224.311829, 16175.819397, 646.779352
Outstanding requests per worker:
242810 242802 218644 228299 259925 212330 218922 213565 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   76175.9,      380880,     342521,      38359,     282116,      60405, 14278.861029, 17000.000000, 18000.000000, 18000.000000, 1423.166796, 10593.180656, 19810.894012, 655.137980
Outstanding requests per worker:
290357 296177 296032 295919 313401 228691 243923 243712 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  22:35   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6272 pts/0    S+   22:35   0:00 /usr/lib/linux
memcache      8  141  0.0 246208 108352 pts/0   Sl+  22:35   1:08 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  22:36   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        9823061525      instructions:u            #    0.75  insn per cycle         
       13134565711      cycles:u                                                    

      48.250510948 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 160000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 160000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 160000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 160000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 160000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 160000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 160000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 160000 cpus 8
meanInterarrival 50
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2327704064
starting receive base loop
num_worker_connections 64
Creating worker on tid 1730933248
starting receive base loop
num_worker_connections 64
Creating worker on tid 1135014400
starting receive base loop
num_worker_connections 64
Creating worker on tid 539095552
starting receive base loop
num_worker_connections 64
Creating worker on tid 4238144000
starting receive base loop
num_worker_connections 64
Creating worker on tid 3642225152
starting receive base loop
num_worker_connections 64
Creating worker on tid 3048927744
starting receive base loop
Created 512 connections total
Creating worker on tid 2453008896
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576105404.103828,       0.0,      302915,     272471,      30444,     179644,      92827, 264.713010, 572.900000, 1289.000000, 1963.700000, 402.437209,   0.000000, 2504.782915, 474.610450
Outstanding requests per worker:
9052 8900 9122 9257 29142 39536 42641 40001 
count  387963
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79537.1,      397686,     357972,      39714,     264140,      93832, 1790.776514, 3297.700000, 3909.400000, 7000.000000, 1199.111556, 224.690005, 6951.085091, 559.650143
Outstanding requests per worker:
43486 43463 43535 43808 63418 80673 53290 50560 
count  295575
count  295575
count  295575
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80722.5,      403613,     363315,      40298,     279920,      83395, 4582.612926, 8000.000000, 11000.000000, 11000.000000, 2129.091221, 1734.163046, 11157.172203, 595.666298
Outstanding requests per worker:
91766 91705 92029 92380 108688 123319 131548 80573 
count  53796
count  53796
count  53796
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   73362.1,      366811,     329942,      36869,     260673,      69269, 6515.818109, 9000.000000, 10000.000000, 12000.000000, 1611.898110, 2341.094017, 13771.863937, 617.618648
Outstanding requests per worker:
138610 139390 137975 136220 147222 162968 168620 143672 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   72668.1,      363341,     326710,      36631,     262806,      63904, 9186.613742, 11000.000000, 12000.000000, 13000.000000, 1255.012048, 5375.555992, 12961.379051, 634.538762
Outstanding requests per worker:
184774 176842 179413 176916 191585 204220 207532 154959 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   70688.9,      353445,     317986,      35459,     259368,      58618, 11753.804425, 14000.000000, 15000.000000, 16000.000000, 1305.852002, 8716.951370, 16581.071854, 645.942856
Outstanding requests per worker:
229281 218267 253027 223296 243633 230058 246772 222633 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75359.9,      376800,     339161,      37639,     279468,      59693, 14668.972552, 17000.000000, 18000.000000, 19000.000000, 1453.687992, 11595.158577, 19231.729507, 655.387907
Outstanding requests per worker:
308168 290892 307576 292485 295475 238133 249908 236582 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:36   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6272 pts/0    S+   22:36   0:00 /usr/lib/linux
memcache      7  141  0.0 248256 108928 pts/0   Sl+  22:36   1:08 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  22:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        9830196233      instructions:u            #    0.75  insn per cycle         
       13020557889      cycles:u                                                    

      48.110322421 seconds time elapsed

