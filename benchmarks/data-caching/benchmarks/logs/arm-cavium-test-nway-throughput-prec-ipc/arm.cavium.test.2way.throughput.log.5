+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 25000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 25000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 25000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 25000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 25000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 25000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 25000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 25000 cpus 8
meanInterarrival 320
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2407985664
starting receive base loop
num_worker_connections 64
Creating worker on tid 1814163968
starting receive base loop
num_worker_connections 64
Creating worker on tid 1218245120
starting receive base loop
num_worker_connections 64
Creating worker on tid 622326272
starting receive base loop
num_worker_connections 64
Creating worker on tid 29028864
starting receive base loop
num_worker_connections 64
Creating worker on tid 3728077312
starting receive base loop
num_worker_connections 64
Creating worker on tid 3132158464
starting receive base loop
Created 512 connections total
Creating worker on tid 2536239616
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576115436.113860,       0.0,       76735,      68940,       7795,      41472,      27468,   0.830390,   0.106100,   0.125100,  22.000000,   7.625525,   0.000000, 173.951998, 409.531201
Outstanding requests per worker:
0 1 1 0 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25002.8,      125014,     112593,      12421,      75117,      37476,   0.092637,   0.105100,   0.122100,   0.247100,   0.029297,   0.067000,   0.815000, 482.361630
Outstanding requests per worker:
0 0 0 0 0 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25001.4,      125007,     112375,      12632,      79059,      33316,   0.092680,   0.105100,   0.121100,   0.246100,   0.029877,   0.066000,   0.789000, 522.552605
Outstanding requests per worker:
0 0 0 0 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25001.4,      125007,     112472,      12535,      81393,      31079,   0.092689,   0.105100,   0.122100,   0.249100,   0.029233,   0.067000,   1.501000, 545.537805
Outstanding requests per worker:
1 0 0 1 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25001.8,      125009,     112595,      12414,      83415,      29180,   0.092862,   0.105100,   0.122100,   0.251100,   0.030184,   0.065000,   1.010000, 563.471273
Outstanding requests per worker:
1 0 0 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25002.2,      125011,     112398,      12613,      84547,      27851,   0.092687,   0.105100,   0.122100,   0.242100,   0.029543,   0.066000,   0.944000, 576.760147
Outstanding requests per worker:
0 1 0 0 0 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25002.8,      125014,     112714,      12300,      85861,      26853,   0.092925,   0.105100,   0.122100,   0.254100,   0.030375,   0.061000,   0.941000, 586.756552
Outstanding requests per worker:
0 0 0 0 0 0 1 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  01:24   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6272 pts/0    S+   01:24   0:00 /usr/lib/linux
memcache      7 67.9  0.0 197056 46528 pts/0    Sl+  01:24   0:32 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  01:24   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        3225666776      instructions:u            #    0.48  insn per cycle         
        6790166893      cycles:u                                                    

      47.619756688 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 30000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 30000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 30000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 30000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 30000 cpus 8
meanInterarrival 266
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2036986368
starting receive base loop
num_worker_connections 64
Creating worker on tid 1438315008
starting receive base loop
num_worker_connections 64
Creating worker on tid 842396160
starting receive base loop
num_worker_connections 64
Creating worker on tid 246477312
starting receive base loop
num_worker_connections 64
Creating worker on tid 3945525760
starting receive base loop
num_worker_connections 64
Creating worker on tid 3349606912
starting receive base loop
num_worker_connections 64
Creating worker on tid 2753688064
starting receive base loop
Created 512 connections total
Creating worker on tid 2157769216
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576115488.113912,       0.0,       90914,      81793,       9121,      49326,      32467,   0.655019,   0.129000,   0.150100,   9.000000,   6.223735,   0.000000, 125.190005, 411.445283
Outstanding requests per worker:
1 1 0 0 1 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.2,      150391,     135239,      15152,      91133,      44106,   0.103349,   0.131000,   0.149100,   0.239100,   0.032368,   0.069000,   1.353000, 490.908725
Outstanding requests per worker:
1 1 0 0 1 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.0,      150385,     135393,      14992,      96267,      39126,   0.103278,   0.130100,   0.149100,   0.239100,   0.032045,   0.067000,   0.817000, 530.865746
Outstanding requests per worker:
0 0 1 0 0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.0,      150385,     135307,      15078,      99363,      35944,   0.103539,   0.132100,   0.149100,   0.239100,   0.032849,   0.062000,   1.395000, 556.409469
Outstanding requests per worker:
0 0 1 1 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.0,      150390,     135397,      14993,     101378,      34019,   0.103568,   0.134100,   0.149100,   0.240100,   0.032507,   0.067000,   1.028000, 572.869480
Outstanding requests per worker:
1 1 0 0 1 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.2,      150391,     135507,      14884,     103105,      32402,   0.103532,   0.133100,   0.149100,   0.239100,   0.031742,   0.061000,   1.377000, 584.940247
Outstanding requests per worker:
1 1 0 0 1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.8,      150394,     135410,      14984,     104777,      30633,   0.103472,   0.132100,   0.149100,   0.238100,   0.032608,   0.067000,   1.131000, 599.630404
Outstanding requests per worker:
0 1 1 0 0 0 1 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:24   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   01:24   0:00 /usr/lib/linux
memcache      7 76.8  0.0 203200 51904 pts/0    Sl+  01:24   0:36 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  01:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        3824915051      instructions:u            #    0.49  insn per cycle         
        7756365333      cycles:u                                                    

      47.900733602 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 35000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 35000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 35000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 35000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 35000 cpus 8
meanInterarrival 228
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2245915136
starting receive base loop
num_worker_connections 64
Creating worker on tid 1647702528
starting receive base loop
num_worker_connections 64
Creating worker on tid 1051783680
starting receive base loop
num_worker_connections 64
Creating worker on tid 455864832
starting receive base loop
num_worker_connections 64
Creating worker on tid 4154913280
starting receive base loop
num_worker_connections 64
Creating worker on tid 3558994432
starting receive base loop
num_worker_connections 64
Creating worker on tid 2963075584
starting receive base loop
Created 512 connections total
Creating worker on tid 2367156736
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576115539.113963,       0.0,      108224,      97335,      10889,      59727,      37608,   0.544000,   0.126100,   0.146100,   0.878100,   5.348711,   0.000000, 141.702995, 424.052684
Outstanding requests per worker:
0 1 0 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35090.8,      175454,     158038,      17416,     108354,      49684,   0.101402,   0.127100,   0.145100,   0.203100,   0.027435,   0.060000,   0.765000, 503.236013
Outstanding requests per worker:
1 0 1 0 1 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35089.0,      175445,     157953,      17492,     113661,      44292,   0.101688,   0.127100,   0.146100,   0.209100,   0.027545,   0.066000,   0.835000, 541.408159
Outstanding requests per worker:
0 1 0 0 1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35090.4,      175452,     158059,      17393,     116990,      41069,   0.101937,   0.127100,   0.146100,   0.213100,   0.028686,   0.068000,   0.969000, 564.308435
Outstanding requests per worker:
1 0 1 1 0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35089.2,      175446,     157642,      17804,     119391,      38251,   0.101953,   0.127100,   0.146100,   0.212100,   0.028917,   0.067000,   1.083000, 582.099288
Outstanding requests per worker:
1 0 1 1 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35090.4,      175452,     158100,      17352,     121834,      36266,   0.101772,   0.127100,   0.146100,   0.209100,   0.028587,   0.066000,   1.090000, 596.847805
Outstanding requests per worker:
0 1 0 0 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35089.2,      175446,     157861,      17585,     123469,      34392,   0.102120,   0.127100,   0.146100,   0.212100,   0.030803,   0.062000,   1.267000, 609.265829
Outstanding requests per worker:
1 0 1 1 0 1 1 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:25   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   01:25   0:00 /usr/lib/linux
memcache      7 88.7  0.0 207296 58496 pts/0    Sl+  01:25   0:42 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  01:26   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        4468999829      instructions:u            #    0.50  insn per cycle         
        8913536708      cycles:u                                                    

      47.541388208 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 40000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 40000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 40000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 40000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 40000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 40000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 40000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 40000 cpus 8
meanInterarrival 200
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2607739392
starting receive base loop
num_worker_connections 64
Creating worker on tid 2015490560
starting receive base loop
num_worker_connections 64
Creating worker on tid 1419571712
starting receive base loop
num_worker_connections 64
Creating worker on tid 823652864
starting receive base loop
num_worker_connections 64
Creating worker on tid 230355456
starting receive base loop
num_worker_connections 64
Creating worker on tid 3929403904
starting receive base loop
num_worker_connections 64
Creating worker on tid 3333485056
starting receive base loop
Created 512 connections total
Creating worker on tid 2737566208
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576115591.114015,       0.0,      128331,     115478,      12853,      71370,      44108,   0.602308,   0.127100,   0.148100,   6.700000,   5.870348,   0.000000, 148.693994, 429.804898
Outstanding requests per worker:
1 0 0 1 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40003.0,      200015,     180044,      19971,     124531,      55513,   0.102600,   0.128100,   0.147100,   0.225100,   0.027829,   0.067000,   1.192000, 510.236759
Outstanding requests per worker:
1 1 0 0 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40003.2,      200016,     180071,      19945,     131047,      49024,   0.102774,   0.128100,   0.147100,   0.224100,   0.028810,   0.062000,   1.268000, 549.925818
Outstanding requests per worker:
1 1 0 0 0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40002.4,      200012,     180214,      19798,     135140,      45074,   0.102672,   0.128100,   0.147100,   0.226100,   0.027882,   0.061000,   0.872000, 573.392150
Outstanding requests per worker:
0 0 1 0 1 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40002.2,      200011,     179911,      20100,     137560,      42351,   0.102943,   0.129000,   0.148100,   0.224100,   0.027999,   0.058000,   0.891000, 591.081101
Outstanding requests per worker:
0 1 0 0 1 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40002.2,      200011,     179997,      20014,     140023,      39974,   0.103027,   0.129000,   0.148100,   0.224100,   0.028315,   0.062000,   1.241000, 603.980439
Outstanding requests per worker:
1 0 1 1 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40002.8,      200014,     180004,      20010,     141914,      38090,   0.103041,   0.129000,   0.148100,   0.220100,   0.029121,   0.063000,   1.072000, 615.313315
Outstanding requests per worker:
1 1 0 0 1 1 0 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:26   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6272 pts/0    S+   01:26   0:00 /usr/lib/linux
memcache      7  100  0.0 213440 63168 pts/0    Sl+  01:26   0:48 memcached -t 2
memcache     16  0.0  0.0   6656  4416 pts/1    Rs+  01:27   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        5117787852      instructions:u            #    0.51  insn per cycle         
       10127235486      cycles:u                                                    

      47.990807758 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 45000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 45000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 45000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 45000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 45000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 45000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 45000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 45000 cpus 8
meanInterarrival 177
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2371023360
starting receive base loop
num_worker_connections 64
Creating worker on tid 1773859328
starting receive base loop
num_worker_connections 64
Creating worker on tid 1177940480
starting receive base loop
num_worker_connections 64
Creating worker on tid 582021632
starting receive base loop
num_worker_connections 64
Creating worker on tid 4281070080
starting receive base loop
num_worker_connections 64
Creating worker on tid 3685151232
starting receive base loop
num_worker_connections 64
Creating worker on tid 3089232384
starting receive base loop
Created 512 connections total
Creating worker on tid 2493313536
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576115642.114066,       0.0,      136414,     122848,      13566,      76231,      46617,   1.059513,   0.164100,   0.221100,  28.900000,   9.879376,   0.000000, 208.435997, 433.087230
Outstanding requests per worker:
0 1 0 0 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   45200.4,      226002,     203699,      22303,     141820,      61879,   0.120691,   0.166100,   0.208100,   0.240100,   0.040209,   0.062000,   1.172000, 515.126353
Outstanding requests per worker:
1 0 0 1 1 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   45200.4,      226002,     203514,      22488,     149370,      54144,   0.120378,   0.166100,   0.207100,   0.240100,   0.039119,   0.060000,   1.090000, 557.331835
Outstanding requests per worker:
1 1 0 1 1 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   45199.4,      225997,     203348,      22649,     153924,      49424,   0.120207,   0.166100,   0.207100,   0.239100,   0.039337,   0.064000,   1.036000, 580.677302
Outstanding requests per worker:
0 1 1 1 1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   45200.4,      226002,     203659,      22343,     157315,      46344,   0.120869,   0.167100,   0.210100,   0.241100,   0.040412,   0.061000,   1.117000, 598.424155
Outstanding requests per worker:
1 1 0 0 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   45200.2,      226001,     203622,      22379,     159772,      43850,   0.120596,   0.167100,   0.210100,   0.239100,   0.038761,   0.065000,   0.591000, 612.244816
Outstanding requests per worker:
1 1 0 1 1 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   45200.0,      226000,     203485,      22515,     161444,      42041,   0.121199,   0.167100,   0.211100,   0.241100,   0.042423,   0.065000,   1.306000, 622.120987
Outstanding requests per worker:
0 0 0 1 0 0 0 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:27   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6208 pts/0    S+   01:27   0:00 /usr/lib/linux
memcache      8  108  0.0 217536 65920 pts/0    Sl+  01:27   0:51 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  01:28   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        5647321315      instructions:u            #    0.52  insn per cycle         
       10796149768      cycles:u                                                    

      47.520058076 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 50000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 50000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 50000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 50000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 50000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 50000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 50000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 50000 cpus 8
meanInterarrival 160
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2423386624
starting receive base loop
num_worker_connections 64
Creating worker on tid 1830285824
starting receive base loop
num_worker_connections 64
Creating worker on tid 1236988416
starting receive base loop
num_worker_connections 64
Creating worker on tid 641069568
starting receive base loop
num_worker_connections 64
Creating worker on tid 45150720
starting receive base loop
num_worker_connections 64
Creating worker on tid 3744199168
starting receive base loop
num_worker_connections 64
Creating worker on tid 3148280320
starting receive base loop
Created 512 connections total
Creating worker on tid 2552361472
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576115694.114118,       0.0,      154911,     139623,      15288,      87489,      52134,   0.512331,   0.195100,   0.215100,   2.200000,   4.937632,   0.000000, 127.593994, 439.715068
Outstanding requests per worker:
0 1 1 1 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   50005.7,      250029,     225122,      24907,     158298,      66824,   0.123205,   0.199100,   0.212100,   0.244100,   0.045222,   0.060000,   0.860000, 521.958009
Outstanding requests per worker:
1 1 1 0 1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   50003.1,      250016,     225209,      24807,     167090,      58119,   0.124218,   0.200100,   0.214100,   0.247100,   0.046460,   0.059000,   1.306000, 564.589674
Outstanding requests per worker:
1 1 0 0 1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   50003.5,      250018,     225061,      24957,     171912,      53149,   0.124815,   0.200100,   0.215100,   0.254100,   0.047027,   0.060000,   1.040000, 588.339846
Outstanding requests per worker:
1 1 1 0 1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   50004.5,      250023,     224932,      25091,     175098,      49834,   0.125303,   0.201100,   0.216100,   0.251100,   0.048559,   0.060000,   1.174000, 605.414934
Outstanding requests per worker:
1 1 0 1 1 2 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   50005.9,      250030,     224936,      25094,     177570,      47366,   0.126234,   0.201100,   0.217100,   0.257100,   0.051209,   0.059000,   1.412000, 617.451693
Outstanding requests per worker:
0 1 0 1 1 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   50002.1,      250011,     224861,      25150,     180239,      44622,   0.126207,   0.202100,   0.217100,   0.250100,   0.049596,   0.061000,   1.352000, 629.993907
Outstanding requests per worker:
0 1 1 1 0 1 1 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  01:28   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   01:28   0:00 /usr/lib/linux
memcache      7  120  0.0 221632 72960 pts/0    Sl+  01:28   0:56 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  01:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        6294990448      instructions:u            #    0.53  insn per cycle         
       11937255847      cycles:u                                                    

      47.481069740 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 55000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 55000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 55000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 55000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 55000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 55000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 55000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 55000 cpus 8
meanInterarrival 145
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1961947648
starting receive base loop
num_worker_connections 64
Creating worker on tid 1368584704
starting receive base loop
num_worker_connections 64
Creating worker on tid 775287296
starting receive base loop
num_worker_connections 64
Creating worker on tid 179368448
starting receive base loop
num_worker_connections 64
Creating worker on tid 3878416896
starting receive base loop
num_worker_connections 64
Creating worker on tid 3282498048
starting receive base loop
num_worker_connections 64
Creating worker on tid 2686579200
starting receive base loop
Created 512 connections total
Creating worker on tid 2090660352
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576115745.114169,       0.0,      172348,     155174,      17174,      97713,      57461,   0.854151,   0.209100,   0.262000,  18.700000,   7.677360,   0.000000, 174.075007, 441.867671
Outstanding requests per worker:
0 1 1 1 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   55178.1,      275891,     248191,      27700,     176107,      72084,   0.147566,   0.213100,   0.249100,   0.350000,   0.062101,   0.060000,   1.418000, 528.985676
Outstanding requests per worker:
1 0 1 2 0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   55177.9,      275890,     248414,      27476,     185247,      63167,   0.149224,   0.215100,   0.252100,   0.351100,   0.063934,   0.059000,   1.107000, 569.864013
Outstanding requests per worker:
1 0 0 1 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   55175.9,      275880,     248165,      27715,     190477,      57688,   0.149719,   0.215100,   0.254100,   0.353100,   0.064696,   0.061000,   1.559000, 592.202337
Outstanding requests per worker:
1 1 1 1 0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   55176.7,      275884,     248575,      27309,     194476,      54099,   0.151215,   0.219100,   0.259100,   0.357100,   0.065899,   0.060000,   1.131000, 609.449659
Outstanding requests per worker:
1 1 0 1 1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   55176.1,      275881,     248123,      27758,     197003,      51120,   0.152202,   0.222100,   0.261100,   0.359100,   0.064861,   0.063000,   1.417000, 622.009560
Outstanding requests per worker:
1 1 1 2 0 1 2 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   55179.3,      275897,     248361,      27536,     200033,      48328,   0.150964,   0.216100,   0.255100,   0.355100,   0.065053,   0.058000,   1.301000, 633.891412
Outstanding requests per worker:
1 1 1 2 0 1 0 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:29   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6208 pts/0    S+   01:29   0:00 /usr/lib/linux
memcache      8  127  0.0 227776 75008 pts/0    Sl+  01:29   1:01 memcached -t 2
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  01:30   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        6881147105      instructions:u            #    0.53  insn per cycle         
       12863911701      cycles:u                                                    

      47.730206437 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 60000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 60000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 60000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 60000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 60000 cpus 8
meanInterarrival 133
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1952772608
starting receive base loop
num_worker_connections 64
Creating worker on tid 1360523776
starting receive base loop
num_worker_connections 64
Creating worker on tid 767226368
starting receive base loop
num_worker_connections 64
Creating worker on tid 171307520
starting receive base loop
num_worker_connections 64
Creating worker on tid 3870355968
starting receive base loop
num_worker_connections 64
Creating worker on tid 3274437120
starting receive base loop
num_worker_connections 64
Creating worker on tid 2678518272
starting receive base loop
Created 512 connections total
Creating worker on tid 2082599424
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576115796.114220,       0.0,      181762,     163586,      18176,     104106,      59480,   1.046347,   0.383100,   1.300000,  23.200000,   7.721165,   0.000000, 150.609002, 448.877551
Outstanding requests per worker:
1 1 1 1 1 0 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60156.5,      300783,     270512,      30271,     192428,      78084,   0.200416,   0.328100,   0.379100,   0.525100,   0.097914,   0.062000,   1.535000, 532.423305
Outstanding requests per worker:
1 0 1 2 1 2 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60158.1,      300791,     270550,      30241,     202962,      67588,   0.208445,   0.336100,   0.431100,   0.596100,   0.110944,   0.059000,   1.290000, 574.514463
Outstanding requests per worker:
2 1 1 2 1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60153.3,      300767,     270735,      30032,     209301,      61434,   0.212054,   0.342100,   0.446100,   0.605100,   0.115382,   0.061000,   1.397000, 599.202693
Outstanding requests per worker:
1 1 2 2 2 2 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60155.1,      300776,     270773,      30003,     213539,      57234,   0.216807,   0.349100,   0.447100,   0.626100,   0.120237,   0.060000,   1.684000, 616.481632
Outstanding requests per worker:
3 1 1 3 1 1 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60157.5,      300788,     270524,      30264,     216120,      54404,   0.225408,   0.366100,   0.467100,   0.765100,   0.146320,   0.059000,   2.590000, 628.933950
Outstanding requests per worker:
1 2 1 1 1 2 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60155.7,      300779,     270503,      30276,     219107,      51396,   0.218767,   0.361100,   0.456100,   0.616100,   0.118414,   0.061000,   1.545000, 639.694288
Outstanding requests per worker:
0 1 1 2 1 0 1 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:30   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   01:30   0:00 /usr/lib/linux
memcache      7  135  0.0 231872 81152 pts/0    Sl+  01:30   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  01:30   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        7330771378      instructions:u            #    0.56  insn per cycle         
       13012009486      cycles:u                                                    

      47.311183952 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 65000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 65000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 65000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 65000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 65000 cpus 8
meanInterarrival 123
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2651058688
starting receive base loop
num_worker_connections 64
Creating worker on tid 2058416640
starting receive base loop
num_worker_connections 64
Creating worker on tid 1462497792
starting receive base loop
num_worker_connections 64
Creating worker on tid 866578944
starting receive base loop
num_worker_connections 64
Creating worker on tid 270660096
starting receive base loop
num_worker_connections 64
Creating worker on tid 3969708544
starting receive base loop
num_worker_connections 64
Creating worker on tid 3373789696
starting receive base loop
Created 512 connections total
Creating worker on tid 2780492288
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576115847.114271,       0.0,      196226,     176885,      19341,     113248,      63637,   3.688716,  10.400000,  12.600000,  17.100000,   7.536291,   0.000000, 137.820005, 453.614557
Outstanding requests per worker:
4 4 2 3 1 3 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65031.5,      325158,     292674,      32484,     209911,      82763,   0.867026,   2.300000,   3.400000,   5.200000,   1.058594,   0.060000,   8.068000, 537.391002
Outstanding requests per worker:
11 12 13 13 15 10 12 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65051.1,      325256,     292926,      32330,     220935,      71991,   1.486097,   4.400000,   5.700000,   7.700000,   1.806553,   0.058000,  10.597000, 579.197176
Outstanding requests per worker:
8 6 7 13 5 4 8 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65026.1,      325131,     292986,      32145,     227177,      65809,   2.088444,   6.500000,   8.000000,  10.600000,   2.612187,   0.064000,  14.214000, 601.798161
Outstanding requests per worker:
14 23 15 25 17 19 17 22 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65030.7,      325154,     292574,      32580,     231918,      60656,   2.955775,   7.800000,   9.000000,  10.700000,   3.000899,   0.065000,  13.272000, 619.712278
Outstanding requests per worker:
26 28 27 37 27 24 22 28 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65048.1,      325241,     292774,      32467,     235514,      57260,   3.215574,   7.900000,   9.400000,  12.300000,   3.077065,   0.064000,  17.415000, 633.684569
Outstanding requests per worker:
26 27 22 30 28 22 21 26 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65033.1,      325166,     292751,      32415,     238367,      54384,   3.299812,   8.800000,  10.200000,  12.800000,   3.440704,   0.065000,  17.426999, 645.127549
Outstanding requests per worker:
37 36 26 34 36 31 23 35 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:30   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   01:30   0:00 /usr/lib/linux
memcache      7  137  0.0 234944 84288 pts/0    Sl+  01:30   1:06 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  01:31   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        7808154866      instructions:u            #    0.63  insn per cycle         
       12492978208      cycles:u                                                    

      47.449942850 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 70000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 70000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 70000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 70000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 70000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 70000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 70000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 70000 cpus 8
meanInterarrival 114
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1923215872
starting receive base loop
num_worker_connections 64
Creating worker on tid 1328280064
starting receive base loop
num_worker_connections 64
Creating worker on tid 732361216
starting receive base loop
num_worker_connections 64
Creating worker on tid 136442368
starting receive base loop
num_worker_connections 64
Creating worker on tid 3835490816
starting receive base loop
num_worker_connections 64
Creating worker on tid 3239571968
starting receive base loop
num_worker_connections 64
Creating worker on tid 2646274560
starting receive base loop
Created 512 connections total
Creating worker on tid 2050355712
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576115899.114323,       0.0,      215196,     193896,      21300,     124819,      69077,  11.242314,  27.700000,  34.200000,  56.600000,  16.702390,   0.000000, 396.528006, 456.947704
Outstanding requests per worker:
124 110 111 129 110 128 124 136 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   70185.7,      350929,     315789,      35140,     228181,      87608,  13.557259,  26.800000,  30.700000,  36.600000,   8.792746,   0.138000,  44.415999, 543.167615
Outstanding requests per worker:
125 120 114 115 124 110 120 112 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   70170.3,      350852,     315497,      35355,     239263,      76234,  14.161082,  27.700000,  32.000000,  40.000000,   9.290252,   0.139000,  49.649999, 583.763751
Outstanding requests per worker:
104 125 124 128 128 129 138 117 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   70175.1,      350876,     315746,      35130,     246421,      69325,  14.440459,  28.500000,  32.600000,  40.100000,   9.434300,   0.153000,  46.907999, 607.082544
Outstanding requests per worker:
131 136 132 146 131 126 129 101 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   70176.1,      350881,     315640,      35241,     251861,      63779,  15.103911,  29.500000,  34.900000,  42.700000,   9.976898,   0.135000,  50.329000, 626.074233
Outstanding requests per worker:
130 138 141 135 136 138 130 108 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   70171.3,      350857,     315736,      35121,     255533,      60203,  15.507337,  29.300000,  35.600000,  47.100000,  10.478500,   0.101000,  61.377998, 638.690913
Outstanding requests per worker:
122 136 152 129 126 117 145 169 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   70179.7,      350899,     315953,      34946,     258281,      57672,  15.641603,  30.300000,  36.100000,  45.200000,  10.370140,   0.148000,  79.876997, 648.068953
Outstanding requests per worker:
149 139 147 138 143 139 118 125 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:31   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6208 pts/0    S+   01:31   0:00 /usr/lib/linux
memcache      8  138  0.0 241088 90368 pts/0    Sl+  01:31   1:06 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  01:32   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        8666917855      instructions:u            #    0.70  insn per cycle         
       12331031289      cycles:u                                                    

      47.811044457 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 75000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 75000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 75000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 75000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 75000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 75000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 75000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 75000 cpus 8
meanInterarrival 106
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1724772864
starting receive base loop
num_worker_connections 64
Creating worker on tid 1126953472
starting receive base loop
num_worker_connections 64
Creating worker on tid 531034624
starting receive base loop
num_worker_connections 64
Creating worker on tid 4230083072
starting receive base loop
num_worker_connections 64
Creating worker on tid 3634164224
starting receive base loop
num_worker_connections 64
Creating worker on tid 3038245376
starting receive base loop
num_worker_connections 64
Creating worker on tid 2444947968
starting receive base loop
Created 512 connections total
Creating worker on tid 1849029120
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576115950.114374,       0.0,      229915,     206816,      23099,     134044,      72772,  22.070730,  51.000000,  62.600000, 130.900000,  39.940311,   0.000000, 837.060988, 461.385942
Outstanding requests per worker:
239 215 195 230 242 189 255 259 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75514.3,      377572,     339879,      37693,     246150,      93729,  21.157304,  38.500000,  51.100000,  61.300000,  13.977337,   0.174000, 113.301001, 546.301987
Outstanding requests per worker:
206 178 214 196 205 221 209 202 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75447.9,      377240,     339732,      37508,     258833,      80899,  21.866685,  39.200000,  52.600000,  63.700000,  14.413792,   0.159000, 104.489997, 587.184307
Outstanding requests per worker:
182 232 232 197 215 265 247 209 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75488.7,      377444,     339696,      37748,     266107,      73589,  22.699231,  40.500000,  54.500000,  67.200000,  15.020609,   0.184000, 114.170000, 611.276232
Outstanding requests per worker:
206 225 251 252 187 171 203 229 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75381.9,      376910,     339501,      37409,     271955,      67546,  26.238779,  50.400000,  59.100000,  88.300000,  18.385314,   0.174000, 167.218998, 629.944292
Outstanding requests per worker:
257 271 245 261 270 290 291 316 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75446.1,      377231,     339567,      37664,     275460,      64107,  29.939390,  57.600000,  64.800000, 107.900000,  21.739169,   0.156000, 193.413004, 641.704992
Outstanding requests per worker:
302 311 308 273 298 269 298 287 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75481.3,      377407,     339784,      37623,     279397,      60387,  30.338437,  58.100000,  66.000000, 108.600000,  21.935968,   0.185000, 195.337996, 652.571354
Outstanding requests per worker:
299 283 257 271 314 336 314 249 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:32   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6272 pts/0    S+   01:32   0:00 /usr/lib/linux
memcache      7  142  0.0 244160 91904 pts/0    Sl+  01:32   1:06 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  01:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        9332951569      instructions:u            #    0.72  insn per cycle         
       13011915684      cycles:u                                                    

      47.312927068 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 80000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 80000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 80000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 80000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 80000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 80000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 80000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 80000 cpus 8
meanInterarrival 100
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1909256704
starting receive base loop
num_worker_connections 64
Creating worker on tid 1312158208
starting receive base loop
num_worker_connections 64
Creating worker on tid 716239360
starting receive base loop
num_worker_connections 64
Creating worker on tid 120320512
starting receive base loop
num_worker_connections 64
Creating worker on tid 3819368960
starting receive base loop
num_worker_connections 64
Creating worker on tid 3223450112
starting receive base loop
num_worker_connections 64
Creating worker on tid 2627531264
starting receive base loop
Created 512 connections total
Creating worker on tid 2031612416
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576116001.114425,       0.0,      234670,     210996,      23674,     136397,      74599,  45.581212,  99.400000, 150.100000, 554.700000, 111.959904,   0.000000, 1933.379054, 461.097523
Outstanding requests per worker:
818 772 695 778 773 751 926 3241 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78131.1,      390656,     351684,      38972,     255358,      96326, 168.610388, 276.100000, 326.000000, 1007.500000, 153.933652,   0.469000, 1926.892996, 547.950109
Outstanding requests per worker:
2183 2186 2221 2145 2295 2243 2017 2853 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78410.7,      392054,     352976,      39078,     270206,      82770, 278.911942, 435.600000, 493.200000, 665.100000, 133.970165,   0.835000, 1455.613971, 590.780402
Outstanding requests per worker:
3198 3231 3151 3155 3267 3138 3314 3694 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78596.5,      392983,     353913,      39070,     278136,      75777, 372.282276, 555.500000, 619.800000, 831.700000, 148.879378,   1.171000, 1544.370055, 613.599060
Outstanding requests per worker:
4167 4209 4018 4010 4135 4059 4234 4355 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78734.5,      393673,     354452,      39221,     284517,      69935, 452.167457, 671.200000, 751.300000, 1004.400000, 173.692263,  10.616000, 1674.234033, 631.751724
Outstanding requests per worker:
4948 4910 4810 4705 4949 4874 5138 5219 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78810.7,      394054,     354505,      39549,     288799,      65706, 529.917583, 796.400000, 900.900000, 1150.700000, 204.315661,  23.589000, 1696.656942, 645.379966
Outstanding requests per worker:
5565 5641 5488 5604 5578 5872 5918 5877 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78738.5,      393693,     354316,      39377,     291902,      62414, 606.213418, 935.000000, 1069.300000, 1384.800000, 243.808803,  43.033000, 1740.769982, 656.050291
Outstanding requests per worker:
6498 6289 6379 6177 6609 6458 6627 6864 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:33   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6272 pts/0    S+   01:33   0:00 /usr/lib/linux
memcache      8  142  0.0 248256 114112 pts/0   Sl+  01:33   1:06 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  01:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        9941381434      instructions:u            #    0.72  insn per cycle         
       13874699315      cycles:u                                                    

      47.400764943 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 85000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 85000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 85000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 85000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 85000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 85000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 85000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 85000 cpus 8
meanInterarrival 94
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2621501952
starting receive base loop
num_worker_connections 64
Creating worker on tid 2023551488
starting receive base loop
num_worker_connections 64
Creating worker on tid 1427632640
starting receive base loop
num_worker_connections 64
Creating worker on tid 834335232
starting receive base loop
num_worker_connections 64
Creating worker on tid 238416384
starting receive base loop
num_worker_connections 64
Creating worker on tid 3937464832
starting receive base loop
num_worker_connections 64
Creating worker on tid 3341545984
starting receive base loop
Created 512 connections total
Creating worker on tid 2745627136
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576116052.114476,       0.0,      240812,     216711,      24101,     140665,      76046,  55.959971, 125.200000, 176.000000, 891.300000, 146.333519,   0.000000, 1976.009965, 463.435723
Outstanding requests per worker:
1263 1188 1231 1252 1163 1178 1166 10521 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79059.9,      395300,     355823,      39477,     259244,      96579, 415.029102, 609.300000, 1253.900000, 2374.300000, 397.549752,   0.723000, 3019.689083, 550.371848
Outstanding requests per worker:
5194 5276 5242 5197 5425 5149 5078 12675 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80064.3,      400322,     360188,      40134,     275848,      84340, 723.984308, 1001.700000, 1370.000000, 2635.000000, 388.989780, 124.521002, 3381.063938, 591.418617
Outstanding requests per worker:
8493 8474 8458 8339 8459 8505 8190 15580 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79857.3,      399287,     359488,      39799,     282904,      76584, 1026.541591, 1406.700000, 1726.400000, 2894.600000, 419.745141, 195.767999, 3703.543901, 614.370430
Outstanding requests per worker:
11827 11758 11790 11590 11899 11831 11385 18722 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79606.1,      398031,     357933,      40098,     287395,      70538, 1340.792693, 1810.000000, 2149.900000, 3161.200000, 454.734188, 306.198001, 3945.017099, 633.686271
Outstanding requests per worker:
15258 15130 15091 15101 15640 15098 14811 22210 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79276.7,      396384,     357093,      39291,     291287,      65806, 1673.709642, 2235.900000, 2516.600000, 3405.000000, 487.823527, 528.339982, 4636.325836, 646.415892
Outstanding requests per worker:
19215 18721 18735 18803 19239 18883 18284 25648 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79181.3,      395907,     356356,      39551,     294407,      61949, 2017.892885, 2635.400000, 2887.700000, 3862.600000, 529.294365, 668.992996, 4890.798092, 656.642164
Outstanding requests per worker:
22661 22588 22627 22329 22931 22694 21796 29581 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:34   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6272 pts/0    S+   01:34   0:00 /usr/lib/linux
memcache      8  142  0.0 248256 116096 pts/0   Sl+  01:34   1:07 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  01:35   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

       10017028707      instructions:u            #    0.73  insn per cycle         
       13646506891      cycles:u                                                    

      47.680325188 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 90000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 90000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 90000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 90000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 90000 cpus 8
meanInterarrival 88
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2026566144
starting receive base loop
num_worker_connections 64
Creating worker on tid 1427632640
starting receive base loop
num_worker_connections 64
Creating worker on tid 834335232
starting receive base loop
num_worker_connections 64
Creating worker on tid 238416384
starting receive base loop
num_worker_connections 64
Creating worker on tid 3937464832
starting receive base loop
num_worker_connections 64
Creating worker on tid 3341545984
starting receive base loop
num_worker_connections 64
Creating worker on tid 2745627136
starting receive base loop
Created 512 connections total
Creating worker on tid 2149708288
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576116103.114527,       0.0,      246031,     221305,      24726,     143947,      77358,  67.826478, 166.400000, 220.100000, 896.000000, 153.766789,   0.000000, 1978.929043, 464.985165
Outstanding requests per worker:
1610 1755 1734 1675 1554 1661 2147 16529 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80373.3,      401867,     361958,      39909,     264082,      97876, 605.067939, 992.400000, 2025.200000, 3289.400000, 606.313573,   1.017000, 4381.823063, 551.694426
Outstanding requests per worker:
8050 8099 7982 8135 8044 8020 8339 24722 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80952.1,      404761,     364505,      40256,     279027,      85478, 1163.143020, 1663.600000, 2816.000000, 3903.900000, 654.305452, 225.448996, 4816.731930, 590.675511
Outstanding requests per worker:
14121 14073 14343 14464 14509 14237 14587 30899 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80547.9,      402740,     362770,      39970,     286371,      76399, 1721.720604, 2320.500000, 3313.400000, 4493.400000, 684.207616, 578.745008, 5630.369186, 616.666284
Outstanding requests per worker:
20837 20502 20796 20906 20985 20848 21043 37196 
count  396800
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80334.7,      401674,     361466,      40208,     290786,      70680, 2297.035464, 2997.100000, 3856.500000, 6000.000000, 713.547516, 873.079002, 6324.052811, 633.923691
Outstanding requests per worker:
27477 26963 27637 27660 27479 27422 27617 43765 
count  387587
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80047.7,      400239,     360104,      40135,     294150,      65954, 2893.152735, 3660.900000, 4462.300000, 6000.000000, 740.607233, 1297.409058, 6508.619785, 647.243282
Outstanding requests per worker:
34348 33790 34285 34265 34289 34331 34559 50516 
count  377519
count  377519
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79673.5,      398368,     358373,      39995,     295584,      62789, 3498.514384, 4297.800000, 6000.000000, 7000.000000, 763.733581, 1693.850040, 7002.532959, 657.025875
Outstanding requests per worker:
41273 40755 41624 41156 41168 41581 41742 57319 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:35   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6208 pts/0    S+   01:35   0:00 /usr/lib/linux
memcache      8  140  0.0 249280 114624 pts/0   Sl+  01:35   1:07 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  01:35   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

       10123654526      instructions:u            #    0.75  insn per cycle         
       13439867594      cycles:u                                                    

      47.850427061 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 95000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 95000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 95000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 95000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 95000 cpus 8
meanInterarrival 84
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2101080576
starting receive base loop
num_worker_connections 64
Creating worker on tid 1505423872
starting receive base loop
num_worker_connections 64
Creating worker on tid 909505024
starting receive base loop
num_worker_connections 64
Creating worker on tid 313586176
starting receive base loop
num_worker_connections 64
Creating worker on tid 4012634624
starting receive base loop
num_worker_connections 64
Creating worker on tid 3416715776
starting receive base loop
num_worker_connections 64
Creating worker on tid 2820796928
starting receive base loop
Created 512 connections total
Creating worker on tid 2224878080
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576116154.114578,       0.0,      249310,     224416,      24894,     145656,      78760,  72.350326, 169.200000, 217.800000, 977.900000, 159.129141,   0.000000, 1962.201953, 462.369960
Outstanding requests per worker:
2036 2036 1971 1908 2038 2039 3616 21915 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80265.9,      401330,     361582,      39748,     263860,      97722, 756.889951, 1469.700000, 2721.200000, 4082.600000, 779.496749,   1.226000, 5083.232880, 550.526320
Outstanding requests per worker:
10533 10497 10289 10829 10361 10500 11461 37979 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80651.3,      403257,     363235,      40022,     277747,      85488, 1556.296442, 2658.500000, 3885.700000, 4893.900000, 882.195856, 340.398014, 5972.205162, 590.389332
Outstanding requests per worker:
19468 19480 19332 19923 19883 19448 20701 47191 
count  386274
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80129.7,      400649,     360554,      40095,     284436,      76118, 2337.481309, 3441.000000, 4672.500000, 6000.000000, 902.712881, 874.737024, 6788.836956, 616.125232
Outstanding requests per worker:
28876 28934 28805 29311 29106 29052 30468 56479 
count  371986
count  371986
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79901.5,      399508,     359577,      39931,     289020,      70557, 3140.095686, 4210.200000, 6000.000000, 7000.000000, 920.867719, 1373.937011, 7652.192116, 632.551262
Outstanding requests per worker:
38301 38758 38300 38931 38782 38564 39957 66175 
count  357032
count  357032
count  357032
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79504.5,      397523,     357666,      39857,     291675,      65991, 3955.316423, 6000.000000, 7000.000000, 8000.000000, 940.771001, 2188.426018, 8574.331284, 645.904839
Outstanding requests per worker:
48262 48593 47921 48806 48435 48596 49890 75968 
count  292725
count  292725
count  292725
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79444.9,      397225,     357202,      40023,     294758,      62444, 4783.195492, 6000.000000, 8000.000000, 9000.000000, 960.499057, 2943.936110, 9498.617172, 656.222104
Outstanding requests per worker:
58209 58403 58107 58829 58117 58173 59644 85993 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:36   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   01:36   0:00 /usr/lib/linux
memcache      7  140  0.0 248256 115136 pts/0   Sl+  01:36   1:07 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  01:36   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

       10113092924      instructions:u            #    0.75  insn per cycle         
       13417882601      cycles:u                                                    

      47.850990789 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 100000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 100000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 100000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 100000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 100000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 100000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 100000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 100000 cpus 8
meanInterarrival 80
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1617097216
starting receive base loop
num_worker_connections 64
Creating worker on tid 1024979456
starting receive base loop
num_worker_connections 64
Creating worker on tid 431682048
starting receive base loop
num_worker_connections 64
Creating worker on tid 4130730496
starting receive base loop
num_worker_connections 64
Creating worker on tid 3534811648
starting receive base loop
num_worker_connections 64
Creating worker on tid 2938892800
starting receive base loop
num_worker_connections 64
Creating worker on tid 2342973952
starting receive base loop
Created 512 connections total
Creating worker on tid 1747055104
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576116206.114630,       0.0,      261181,     235066,      26115,     153171,      81895,  89.583768, 212.300000, 269.500000, 1021.600000, 172.850209,   0.000000, 2108.124018, 465.672654
Outstanding requests per worker:
2544 2746 2693 2694 2575 2680 7177 23698 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80535.7,      402679,     362497,      40182,     264623,      97874, 898.456336, 1793.800000, 3079.100000, 4626.000000, 888.405144,   1.574000, 5632.368088, 552.070903
Outstanding requests per worker:
13331 13372 13183 13295 13310 13321 17693 46659 
count  393672
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80828.9,      404145,     363891,      40254,     279029,      84862, 1895.462628, 3207.800000, 4400.800000, 6000.000000, 979.943029, 558.381021, 6574.618816, 592.909162
Outstanding requests per worker:
25384 25238 25416 25340 25110 25306 29486 58776 
count  372467
count  372467
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80394.7,      401974,     361785,      40189,     285900,      75885, 2885.638134, 4308.800000, 6000.000000, 7000.000000, 1036.789912, 1312.890053, 8057.992935, 618.316102
Outstanding requests per worker:
37694 37561 37660 37589 37565 37562 41644 70869 
count  356487
count  356487
count  356487
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80128.7,      400644,     360354,      40290,     290227,      70127, 3871.437897, 6000.000000, 7000.000000, 8000.000000, 1052.001609, 1948.690057, 9189.171791, 635.474245
Outstanding requests per worker:
50174 49903 50057 49929 50154 49990 54049 83297 
count  290536
count  290536
count  290536
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79828.1,      399141,     358960,      40181,     293270,      65690, 4880.325479, 7000.000000, 8000.000000, 9000.000000, 1065.517938, 2793.029070, 10229.734421, 647.753920
Outstanding requests per worker:
62682 62513 62702 62675 62791 62528 66654 95907 
count  47117
count  47117
count  47117
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79644.9,      398225,     358522,      39703,     296064,      62458, 5888.017768, 8000.000000, 9000.000000, 10000.000000, 1075.765252, 3734.931946, 11178.896904, 656.835784
Outstanding requests per worker:
75398 75237 75366 75423 75498 75275 79456 108640 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:36   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   01:36   0:00 /usr/lib/linux
memcache      7  144  0.0 248256 111040 pts/0   Sl+  01:36   1:07 memcached -t 2
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  01:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

       10179045508      instructions:u            #    0.75  insn per cycle         
       13525730676      cycles:u                                                    

      47.751604235 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 105000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 105000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 105000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 105000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 105000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 105000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 105000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 105000 cpus 8
meanInterarrival 76
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1843720704
starting receive base loop
num_worker_connections 64
Creating worker on tid 1245049344
starting receive base loop
num_worker_connections 64
Creating worker on tid 649130496
starting receive base loop
num_worker_connections 64
Creating worker on tid 53211648
starting receive base loop
num_worker_connections 64
Creating worker on tid 3752260096
starting receive base loop
num_worker_connections 64
Creating worker on tid 3156341248
starting receive base loop
num_worker_connections 64
Creating worker on tid 2560422400
starting receive base loop
Created 512 connections total
Creating worker on tid 1964503552
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576116257.114681,       0.0,      269512,     242855,      26657,     158484,      84371,  86.910486, 195.500000, 251.800000, 1106.800000, 182.830830,   0.000000, 2141.628027, 466.562723
Outstanding requests per worker:
2693 2783 2685 2755 2739 2665 14700 26318 
count  390475
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80589.9,      402950,     362698,      40252,     265053,      97645, 1038.023270, 2305.700000, 4282.400000, 6000.000000, 1159.938028,   1.724000, 6349.381924, 552.977645
Outstanding requests per worker:
15408 15291 15346 15255 15107 15170 27158 61895 
count  381070
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80216.9,      401085,     361108,      39977,     277390,      83718, 2233.036215, 4010.900000, 4997.900000, 7000.000000, 1152.389470, 756.235003, 7767.186165, 593.565244
Outstanding requests per worker:
30774 31037 31148 31004 30851 30944 42949 77383 
count  346758
count  346758
count  346758
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79863.3,      399317,     359368,      39949,     284220,      75148, 3486.532833, 6000.000000, 7000.000000, 8000.000000, 1263.437618, 1702.299953, 8955.363274, 618.372418
Outstanding requests per worker:
46666 47033 46989 47042 46719 46670 58851 93177 
count  312132
count  312132
count  312132
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79595.3,      397977,     358006,      39971,     288482,      69524, 4714.892485, 7000.000000, 8000.000000, 10000.000000, 1320.388322, 2686.193943, 10328.808784, 634.716650
Outstanding requests per worker:
62691 63005 63151 62801 62606 63003 74847 109446 
count  72031
count  72031
count  72031
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79356.9,      396785,     357063,      39722,     291586,      65477, 5943.670562, 9000.000000, 10000.000000, 11000.000000, 1335.816784, 3768.039942, 11594.373703, 647.724813
Outstanding requests per worker:
78640 79407 79394 79026 78644 79322 90984 125738 
count  52
count  52
count  52
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78981.1,      394906,     355367,      39539,     293801,      61566, 7188.014961, 10000.000000, 11000.000000, 12000.000000, 1357.064347, 4923.320770, 12841.066360, 658.277457
Outstanding requests per worker:
95104 95603 95733 95477 95486 95814 107325 142115 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:37   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   01:37   0:00 /usr/lib/linux
memcache      7  141  0.0 248256 113280 pts/0   Sl+  01:37   1:08 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  01:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

       10141616352      instructions:u            #    0.76  insn per cycle         
       13371949805      cycles:u                                                    

      47.891312575 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 110000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 110000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 110000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 110000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 110000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 110000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 110000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 110000 cpus 8
meanInterarrival 72
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1766191616
starting receive base loop
num_worker_connections 64
Creating worker on tid 1169879552
starting receive base loop
num_worker_connections 64
Creating worker on tid 573960704
starting receive base loop
num_worker_connections 64
Creating worker on tid 4273009152
starting receive base loop
num_worker_connections 64
Creating worker on tid 3677090304
starting receive base loop
num_worker_connections 64
Creating worker on tid 3081171456
starting receive base loop
num_worker_connections 64
Creating worker on tid 2485252608
starting receive base loop
Created 512 connections total
Creating worker on tid 1889333760
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576116308.114732,       0.0,      266148,     239339,      26809,     156733,      82606,  94.142693, 219.900000, 275.000000, 1055.600000, 176.220503,   0.000000, 2025.199890, 469.409871
Outstanding requests per worker:
3233 3309 3226 3297 3296 3457 20174 27779 
count  382487
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79835.7,      399179,     359296,      39883,     263120,      96176, 1089.539456, 2183.800000, 3398.100000, 7000.000000, 1192.049054,   7.468000, 6661.680222, 554.186228
Outstanding requests per worker:
17839 18210 17965 18095 18057 17959 36823 54687 
count  374097
count  374097
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   81124.3,      405622,     365079,      40543,     280050,      85029, 2599.556282, 4645.500000, 6000.000000, 8000.000000, 1318.788531, 809.966028, 8050.798416, 593.106695
Outstanding requests per worker:
37329 37512 37351 37592 37433 37361 56412 93242 
count  329618
count  329618
count  329618
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79683.7,      398419,     358480,      39939,     283315,      75165, 3988.256277, 7000.000000, 7000.000000, 9000.000000, 1299.821982, 2098.741055, 9317.650795, 618.916525
Outstanding requests per worker:
57048 57267 56786 57164 57285 56953 76098 112811 
count  191936
count  191936
count  191936
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79227.3,      396137,     356411,      39726,     286810,      69601, 5495.604872, 8000.000000, 10000.000000, 11000.000000, 1482.806111, 3372.792006, 11196.739197, 634.635763
Outstanding requests per worker:
77037 77110 76677 77176 77194 76980 95849 132869 
count  1286
count  1286
count  1286
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78974.7,      394874,     355329,      39545,     290164,      65165, 6937.471102, 10000.000000, 11000.000000, 12000.000000, 1495.415917, 4631.566048, 12784.964561, 646.697596
Outstanding requests per worker:
97153 97250 97000 97266 97429 96849 115856 152850 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78159.9,      390800,     351699,      39101,     290632,      61067, 8392.904911, 11000.000000, 13000.000000, 14000.000000, 1500.936243, 5725.843906, 14295.577049, 658.157123
Outstanding requests per worker:
117582 117867 117474 118017 117889 117636 136590 173448 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:38   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6208 pts/0    S+   01:38   0:00 /usr/lib/linux
memcache      8  141  0.0 249280 114688 pts/0   Sl+  01:38   1:08 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  01:39   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

       10130842470      instructions:u            #    0.76  insn per cycle         
       13278212338      cycles:u                                                    

      47.680597755 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 115000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 115000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 115000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 115000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 115000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 115000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 115000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 115000 cpus 8
meanInterarrival 69
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1837232640
starting receive base loop
num_worker_connections 64
Creating worker on tid 1245049344
starting receive base loop
num_worker_connections 64
Creating worker on tid 649130496
starting receive base loop
num_worker_connections 64
Creating worker on tid 53211648
starting receive base loop
num_worker_connections 64
Creating worker on tid 3752260096
starting receive base loop
num_worker_connections 64
Creating worker on tid 3156341248
starting receive base loop
num_worker_connections 64
Creating worker on tid 2560422400
starting receive base loop
Created 512 connections total
Creating worker on tid 1964503552
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576116359.114783,       0.0,      273025,     245705,      27320,     160476,      85229,  89.617672, 192.400000, 310.200000, 1142.300000, 187.486556,   0.000000, 2054.815054, 467.595535
Outstanding requests per worker:
2720 2697 2784 2751 2615 6254 28238 28987 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78842.3,      394212,     354843,      39369,     259516,      95327, 960.089401, 2164.400000, 3223.300000, 4358.800000, 913.426706,   1.427000, 5845.486164, 553.051194
Outstanding requests per worker:
17868 17527 17912 17996 17804 20939 52260 53192 
count  347362
count  347362
count  347362
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   81796.5,      408983,     368293,      40690,     282664,      85629, 2943.266658, 7000.000000, 8000.000000, 9000.000000, 1879.055331, 705.281973, 9349.382401, 592.890489
Outstanding requests per worker:
39863 39985 40019 40114 39758 43310 74220 111767 
count  321916
count  321916
count  321916
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80283.7,      401419,     361497,      39922,     285270,      76227, 4172.937974, 7000.000000, 7000.000000, 8000.000000, 1251.741660, 1975.342989, 10013.506889, 617.118114
Outstanding requests per worker:
62548 62739 62719 62688 62435 65901 96830 135896 
count  125119
count  125119
count  125119
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79143.9,      395720,     355987,      39733,     286146,      69841, 5931.978734, 9000.000000, 10000.000000, 11000.000000, 1584.697531, 3406.631947, 11407.926559, 633.316691
Outstanding requests per worker:
85643 85702 85784 85639 85412 88836 119919 158883 
count  62
count  62
count  62
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78766.9,      393835,     354424,      39411,     289184,      65240, 7641.129806, 11000.000000, 12000.000000, 13000.000000, 1819.156485, 4908.650875, 14249.938011, 646.464015
Outstanding requests per worker:
108815 108824 108999 108908 108645 112216 143053 182306 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   77908.3,      389542,     350670,      38872,     289170,      61500, 9278.581359, 13000.000000, 14000.000000, 15000.000000, 1866.346044, 6402.772903, 15719.620705, 656.448236
Outstanding requests per worker:
132910 132723 132471 132695 132378 136049 166717 206072 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:39   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6208 pts/0    S+   01:39   0:00 /usr/lib/linux
memcache      8  141  0.0 249280 112832 pts/0   Sl+  01:39   1:08 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  01:40   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

       10117767470      instructions:u            #    0.76  insn per cycle         
       13383134588      cycles:u                                                    

      47.921210202 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 12000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 12000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 12000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 12000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 12000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 12000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 12000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 12000 cpus 8
meanInterarrival 666
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2352738816
starting receive base loop
num_worker_connections 64
Creating worker on tid 1755116032
starting receive base loop
num_worker_connections 64
Creating worker on tid 1159197184
starting receive base loop
num_worker_connections 64
Creating worker on tid 565899776
starting receive base loop
num_worker_connections 64
Creating worker on tid 4264948224
starting receive base loop
num_worker_connections 64
Creating worker on tid 3669029376
starting receive base loop
num_worker_connections 64
Creating worker on tid 3073110528
starting receive base loop
Created 512 connections total
Creating worker on tid 2477191680
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576116411.114835,       0.0,       36547,      32947,       3600,      18771,      14176,   0.514367,   0.114100,   0.126100,   0.504100,   5.256554,   0.000000, 132.476002, 378.466871
Outstanding requests per worker:
1 0 0 0 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12013.0,       60065,      54066,       5999,      33921,      20145,   0.092952,   0.113100,   0.124100,   0.248100,   0.030800,   0.069000,   0.857000, 439.358303
Outstanding requests per worker:
0 0 0 0 0 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12013.6,       60068,      54044,       6024,      35752,      18292,   0.093052,   0.105100,   0.123100,   0.284100,   0.034699,   0.069000,   0.601000, 476.920528
Outstanding requests per worker:
0 0 0 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12012.8,       60064,      53975,       6089,      36865,      17110,   0.093260,   0.106100,   0.123100,   0.284100,   0.035371,   0.068000,   0.647000, 500.742381
Outstanding requests per worker:
0 0 0 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12012.8,       60064,      54011,       6053,      37690,      16321,   0.093033,   0.105100,   0.123100,   0.281000,   0.034507,   0.068000,   0.698000, 516.524652
Outstanding requests per worker:
0 0 1 1 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12012.8,       60064,      54227,       5837,      38340,      15887,   0.093198,   0.106100,   0.123100,   0.280100,   0.034654,   0.066000,   0.928000, 529.259483
Outstanding requests per worker:
0 0 1 1 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12013.2,       60066,      54105,       5961,      38901,      15204,   0.093255,   0.106100,   0.123100,   0.287100,   0.034868,   0.068000,   0.651000, 540.516736
Outstanding requests per worker:
0 1 0 0 0 0 0 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:40   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6272 pts/0    S+   01:40   0:00 /usr/lib/linux
memcache      8 35.1  0.0 181696 30144 pts/0    Sl+  01:40   0:16 memcached -t 2
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  01:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        1535986806      instructions:u            #    0.46  insn per cycle         
        3348786779      cycles:u                                                    

      47.630118990 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 125000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 125000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 125000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 125000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 125000 cpus 8
meanInterarrival 64
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2341728768
starting receive base loop
num_worker_connections 64
Creating worker on tid 1747055104
starting receive base loop
num_worker_connections 64
Creating worker on tid 1151136256
starting receive base loop
num_worker_connections 64
Creating worker on tid 555217408
starting receive base loop
num_worker_connections 64
Creating worker on tid 4256887296
starting receive base loop
num_worker_connections 64
Creating worker on tid 3660968448
starting receive base loop
num_worker_connections 64
Creating worker on tid 3065049600
starting receive base loop
Created 512 connections total
Creating worker on tid 2469130752
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576116462.114886,       0.0,      286040,     257360,      28680,     169355,      88005, 121.377613, 263.300000, 410.800000, 1165.800000, 205.033257,   0.000000, 2089.245081, 473.227790
Outstanding requests per worker:
4103 4011 4048 4072 4546 13107 33329 31253 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79799.1,      398996,     359305,      39691,     263209,      96096, 1190.374274, 2734.900000, 4056.700000, 4844.000000, 1076.523173,  45.451999, 5694.287777, 554.705916
Outstanding requests per worker:
22958 23114 22956 22963 23494 31998 67878 53522 
count  335588
count  335588
count  335588
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   81098.9,      405495,     365180,      40315,     280804,      84376, 3360.363948, 8000.000000, 8000.000000, 9000.000000, 1957.944069, 998.036027, 9943.369865, 594.465529
Outstanding requests per worker:
50583 50727 50526 50430 50919 59583 95579 112974 
count  275246
count  275246
count  275246
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79582.9,      397915,     358446,      39469,     283149,      75297, 4823.026791, 7000.000000, 8000.000000, 10000.000000, 1313.235366, 2639.143944, 10568.083763, 617.344908
Outstanding requests per worker:
79424 79644 79493 79198 79764 88629 124211 160924 
count  9632
count  9632
count  9632
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78493.1,      392466,     353144,      39322,     283972,      69172, 6791.481725, 10000.000000, 10000.000000, 11000.000000, 1436.230711, 4292.049885, 11799.575806, 632.795075
Outstanding requests per worker:
108661 108259 108477 108160 108579 117903 149423 190325 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   76239.3,      381197,     342822,      38375,     280017,      62805, 8812.753764, 12000.000000, 13000.000000, 14000.000000, 1668.068960, 5980.199814, 14544.146538, 646.736834
Outstanding requests per worker:
138808 138223 138125 138255 138612 147401 177106 218691 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   76415.5,      382078,     343801,      38277,     283631,      60170, 11018.666351, 15000.000000, 16000.000000, 17000.000000, 2108.834519, 7792.194843, 17893.499374, 656.358329
Outstanding requests per worker:
169236 167727 168762 168045 169398 178103 213947 232582 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:41   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   01:41   0:00 /usr/lib/linux
memcache      7  142  0.0 249280 110912 pts/0   Sl+  01:41   1:08 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  01:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

       10074034267      instructions:u            #    0.76  insn per cycle         
       13185945096      cycles:u                                                    

      47.920706369 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 130000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 130000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 130000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 130000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 130000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 130000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 130000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 130000 cpus 8
meanInterarrival 61
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1692856832
starting receive base loop
num_worker_connections 64
Creating worker on tid 1100149248
starting receive base loop
num_worker_connections 64
Creating worker on tid 506851840
starting receive base loop
num_worker_connections 64
Creating worker on tid 4205900288
starting receive base loop
num_worker_connections 64
Creating worker on tid 3609981440
starting receive base loop
num_worker_connections 64
Creating worker on tid 3014062592
starting receive base loop
num_worker_connections 64
Creating worker on tid 2418143744
starting receive base loop
Created 512 connections total
Creating worker on tid 1822224896
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576116513.114937,       0.0,      284820,     256330,      28490,     168071,      88259, 150.954932, 327.700000, 647.400000, 1201.700000, 237.676377,   0.000000, 2060.008049, 470.449230
Outstanding requests per worker:
4689 4656 4614 4642 7273 20805 34790 32790 
count  382687
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80326.5,      401633,     361703,      39930,     265597,      96106, 1362.088847, 2910.800000, 4964.500000, 6000.000000, 1265.602129,  57.139002, 6100.656033, 556.849374
Outstanding requests per worker:
25728 25907 25795 25900 28348 41961 68105 53277 
count  329919
count  329919
count  329919
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80008.7,      400044,     359983,      40061,     277151,      82832, 3619.936788, 8000.000000, 9000.000000, 10000.000000, 2058.274390, 1132.686019, 10345.527649, 595.413764
Outstanding requests per worker:
57352 57865 57577 57774 60221 73732 111609 96993 
count  201485
count  201485
count  201485
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75793.3,      378967,     340989,      37978,     269863,      71126, 5180.652509, 7000.000000, 9000.000000, 11000.000000, 1374.016297, 2602.767944, 11644.001007, 620.127438
Outstanding requests per worker:
91070 91653 91360 91257 94000 107455 145156 166701 
count  271
count  271
count  271
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75671.5,      378358,     340292,      38066,     274225,      66067, 7390.831575, 10000.000000, 11000.000000, 12000.000000, 1380.725751, 4733.756065, 12407.030106, 635.166971
Outstanding requests per worker:
124815 125323 125141 125061 126985 140880 178687 165114 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   76153.5,      380768,     342780,      37988,     280179,      62601, 9568.918131, 12000.000000, 13000.000000, 14000.000000, 1447.102093, 6805.613041, 14622.097015, 648.186178
Outstanding requests per worker:
158189 160390 160141 160001 163188 175296 213480 209248 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   74624.1,      373121,     335680,      37441,     276747,      58933, 11869.965843, 15000.000000, 16000.000000, 17000.000000, 1699.579272, 8831.067085, 17336.261749, 656.829099
Outstanding requests per worker:
194666 195635 195248 194707 198097 210977 241385 223793 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  01:41   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6208 pts/0    S+   01:42   0:00 /usr/lib/linux
memcache      8  142  0.0 248256 111808 pts/0   Sl+  01:42   1:08 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  01:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        9958464827      instructions:u            #    0.75  insn per cycle         
       13233446014      cycles:u                                                    

      48.000580776 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 135000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 135000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 135000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 135000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 135000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 135000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 135000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 135000 cpus 8
meanInterarrival 59
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2225795584
starting receive base loop
num_worker_connections 64
Creating worker on tid 1628959232
starting receive base loop
num_worker_connections 64
Creating worker on tid 1035661824
starting receive base loop
num_worker_connections 64
Creating worker on tid 439742976
starting receive base loop
num_worker_connections 64
Creating worker on tid 4138791424
starting receive base loop
num_worker_connections 64
Creating worker on tid 3542872576
starting receive base loop
num_worker_connections 64
Creating worker on tid 2946953728
starting receive base loop
Created 512 connections total
Creating worker on tid 2351034880
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576116565.114989,       0.0,      291602,     262465,      29137,     172745,      89720, 177.194285, 407.500000, 809.100000, 1323.000000, 273.836149,   0.000000, 2120.321035, 473.040036
Outstanding requests per worker:
5440 5424 5277 5405 10304 24788 36650 33901 
count  384352
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80787.5,      403938,     363632,      40306,     266928,      96704, 1460.973490, 3107.100000, 4975.300000, 6000.000000, 1270.812972, 140.985996, 6334.187031, 556.513085
Outstanding requests per worker:
28563 28358 28243 28630 33367 48763 80730 54772 
count  323486
count  323486
count  323486
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80062.7,      400314,     360543,      39771,     276319,      84224, 3818.317948, 9000.000000, 9000.000000, 10000.000000, 2070.608524, 1164.327979, 10606.079102, 592.024813
Outstanding requests per worker:
62962 62553 62343 62850 67782 82990 120882 100215 
count  158832
count  158832
count  158832
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   74662.5,      373313,     335848,      37465,     264777,      71071, 5456.499935, 8000.000000, 9000.000000, 11000.000000, 1423.993250, 2589.755058, 12452.193260, 615.938192
Outstanding requests per worker:
99511 99119 99120 99445 103798 119795 141933 163742 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   74403.7,      372019,     334647,      37372,     268672,      65975, 7764.812303, 10000.000000, 11000.000000, 12000.000000, 1413.137769, 5121.931076, 12901.043892, 632.066873
Outstanding requests per worker:
134108 134482 135069 135449 140652 156564 193372 179008 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75760.1,      378801,     340945,      37856,     277925,      63020, 10194.161040, 13000.000000, 14000.000000, 15000.000000, 1534.494266, 7240.705967, 14889.475822, 645.713065
Outstanding requests per worker:
173346 173521 172715 175142 175559 195031 230175 219217 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   74303.7,      371519,     334379,      37140,     275643,      58736, 12561.428187, 16000.000000, 16000.000000, 17000.000000, 1710.240257, 9481.054306, 17796.827316, 655.207372
Outstanding requests per worker:
213416 213184 212964 213742 218369 233518 228995 225133 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:42   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6272 pts/0    S+   01:42   0:00 /usr/lib/linux
memcache      7  142  0.0 247232 110528 pts/0   Sl+  01:42   1:08 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  01:43   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        9909006995      instructions:u            #    0.76  insn per cycle         
       13084319443      cycles:u                                                    

      48.142303669 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 140000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 140000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 140000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 140000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 140000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 140000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 140000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 140000 cpus 8
meanInterarrival 57
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2402480640
starting receive base loop
num_worker_connections 64
Creating worker on tid 1806103040
starting receive base loop
num_worker_connections 64
Creating worker on tid 1210184192
starting receive base loop
num_worker_connections 64
Creating worker on tid 614265344
starting receive base loop
num_worker_connections 64
Creating worker on tid 18346496
starting receive base loop
num_worker_connections 64
Creating worker on tid 3720016384
starting receive base loop
num_worker_connections 64
Creating worker on tid 3124097536
starting receive base loop
Created 512 connections total
Creating worker on tid 2528178688
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576116616.115040,       0.0,      291647,     262501,      29146,     172883,      89618, 192.084288, 432.100000, 924.400000, 1454.700000, 299.913532,   0.000000, 2104.811907, 473.458554
Outstanding requests per worker:
5664 5749 6034 5586 13241 27916 37055 35091 
count  379992
count  379992
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   81421.9,      407110,     366717,      40393,     269514,      97203, 1544.622853, 3140.000000, 6000.000000, 6000.000000, 1319.430736, 136.199996, 6470.027924, 557.112692
Outstanding requests per worker:
30813 30728 30656 30595 38302 54259 65247 53163 
count  323361
count  323361
count  323361
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78919.9,      394600,     355275,      39325,     273306,      81969, 3883.908098, 8000.000000, 10000.000000, 10000.000000, 2037.063317, 1236.639977, 10819.583893, 595.290398
Outstanding requests per worker:
67316 67852 67732 67640 74962 91550 129551 87532 
count  141161
count  141161
count  141161
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   74539.5,      372698,     335371,      37327,     264885,      70486, 5580.392568, 8000.000000, 9000.000000, 11000.000000, 1414.031506, 2937.316895, 12278.229713, 618.480850
Outstanding requests per worker:
106808 106453 107541 107239 114324 125155 156438 150309 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75148.7,      375744,     338075,      37669,     271647,      66428, 7986.434607, 10000.000000, 11000.000000, 12000.000000, 1252.689695, 5396.042824, 12137.455940, 633.456943
Outstanding requests per worker:
146129 146783 145631 144933 149016 163845 207297 168442 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75601.9,      378010,     340051,      37959,     277543,      62508, 10508.065252, 13000.000000, 14000.000000, 15000.000000, 1491.252346, 7744.705200, 15814.902306, 646.625474
Outstanding requests per worker:
188280 188971 185439 188557 195808 200813 245062 205441 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   72194.3,      360972,     324605,      36367,     267792,      56813, 12819.749071, 15000.000000, 16000.000000, 18000.000000, 1457.250463, 10019.288063, 18708.259583, 656.589683
Outstanding requests per worker:
230304 231183 229442 230561 238079 248425 256232 225694 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:43   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6272 pts/0    S+   01:43   0:00 /usr/lib/linux
memcache      7  141  0.0 248256 111232 pts/0   Sl+  01:43   1:08 memcached -t 2
memcache     16  0.0  0.0   6656  4416 pts/1    Rs+  01:44   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        9892729740      instructions:u            #    0.75  insn per cycle         
       13111531388      cycles:u                                                    

      48.170230988 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 145000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 145000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 145000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 145000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 145000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 145000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 145000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 145000 cpus 8
meanInterarrival 55
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2398482944
starting receive base loop
num_worker_connections 64
Creating worker on tid 1806103040
starting receive base loop
num_worker_connections 64
Creating worker on tid 1210184192
starting receive base loop
num_worker_connections 64
Creating worker on tid 614265344
starting receive base loop
num_worker_connections 64
Creating worker on tid 18346496
starting receive base loop
num_worker_connections 64
Creating worker on tid 3720016384
starting receive base loop
num_worker_connections 64
Creating worker on tid 3124097536
starting receive base loop
Created 512 connections total
Creating worker on tid 2528178688
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576116667.115091,       0.0,      294867,     265129,      29738,     175087,      90042, 210.712851, 514.900000, 1040.000000, 1569.100000, 327.177422,   0.000000, 2067.686081, 476.072946
Outstanding requests per worker:
6453 6633 6505 6468 16405 31217 38584 36365 
count  381612
count  381612
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   81658.5,      408293,     367640,      40653,     271149,      96491, 1617.889296, 3174.300000, 6000.000000, 6000.000000, 1320.976217, 151.669994, 6533.151150, 559.060823
Outstanding requests per worker:
33396 33750 33641 33381 44077 61112 59811 53701 
count  317250
count  317250
count  317250
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79888.7,      399444,     359381,      40063,     276533,      82848, 4078.895906, 9000.000000, 10000.000000, 10000.000000, 2041.372516, 1421.008945, 10798.891068, 595.458054
Outstanding requests per worker:
73256 73721 73552 73274 83683 100646 137992 90375 
count  110076
count  110076
count  110076
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   77066.7,      385334,     346957,      38377,     274380,      72577, 5844.319873, 8000.000000, 9000.000000, 12000.000000, 1444.444290, 2418.081999, 12174.820900, 618.322527
Outstanding requests per worker:
115597 116218 116127 113954 126315 143101 181605 162543 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   73859.5,      369298,     332418,      36880,     267632,      64786, 8300.409207, 11000.000000, 11000.000000, 12000.000000, 1223.985415, 5826.630116, 12648.660660, 634.254105
Outstanding requests per worker:
149617 157907 157098 151084 167076 186519 219629 171615 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   71742.9,      358715,     322887,      35828,     263482,      59405, 10903.220322, 14000.000000, 14000.000000, 16000.000000, 1448.491812, 8028.664589, 16281.578064, 647.136952
Outstanding requests per worker:
201559 204133 202142 199835 213328 226175 247562 199483 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75326.1,      376631,     338803,      37828,     278895,      59908, 13524.292997, 17000.000000, 17000.000000, 19000.000000, 1669.151256, 10392.903328, 19388.019562, 654.920895
Outstanding requests per worker:
248708 249184 244814 245336 259561 276399 255675 206566 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:44   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6272 pts/0    S+   01:44   0:00 /usr/lib/linux
memcache      7  141  0.0 248256 110784 pts/0   Sl+  01:44   1:08 memcached -t 2
memcache     16  0.0  0.0   6656  4416 pts/1    Rs+  01:45   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        9983313456      instructions:u            #    0.76  insn per cycle         
       13173483400      cycles:u                                                    

      47.870372704 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 150000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 150000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 150000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 150000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 150000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 150000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 150000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 150000 cpus 8
meanInterarrival 53
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1795617280
starting receive base loop
num_worker_connections 64
Creating worker on tid 1202123264
starting receive base loop
num_worker_connections 64
Creating worker on tid 606204416
starting receive base loop
num_worker_connections 64
Creating worker on tid 10285568
starting receive base loop
num_worker_connections 64
Creating worker on tid 3709334016
starting receive base loop
num_worker_connections 64
Creating worker on tid 3116036608
starting receive base loop
num_worker_connections 64
Creating worker on tid 2520117760
starting receive base loop
Created 512 connections total
Creating worker on tid 1924198912
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576116719.115143,       0.0,      296863,     267410,      29453,     175557,      91853, 227.112064, 516.900000, 1130.400000, 1737.400000, 358.397837,   0.000000, 2272.947073, 471.412666
Outstanding requests per worker:
7178 7279 7264 7177 21501 34781 39852 37736 
count  384269
count  384269
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   81106.3,      405532,     365272,      40260,     268339,      96933, 1698.100582, 3213.000000, 6000.000000, 7000.000000, 1327.417559, 205.264002, 6787.849903, 556.745518
Outstanding requests per worker:
36963 36830 36774 36487 51159 69138 56793 53514 
count  300299
count  300299
count  300299
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79672.5,      398363,     358776,      39587,     275994,      82782, 4308.099665, 8000.000000, 10000.000000, 10000.000000, 2073.224660, 1522.071958, 10844.465256, 594.836424
Outstanding requests per worker:
80294 80192 80037 79927 94786 112572 151554 87963 
count  78986
count  78986
count  78986
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   74697.9,      373490,     336171,      37319,     265119,      71052, 6207.417844, 9000.000000, 9000.000000, 12000.000000, 1545.416700, 2678.056002, 12974.822044, 616.751561
Outstanding requests per worker:
123682 124072 126031 123121 133920 150709 181879 132689 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   72416.1,      362081,     325659,      36422,     261432,      64227, 8681.539777, 11000.000000, 12000.000000, 12000.000000, 1261.439303, 5830.584049, 12201.560020, 632.088427
Outstanding requests per worker:
158452 169698 160263 158798 182494 192199 213840 160910 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   72645.3,      363227,     327020,      36207,     266384,      60636, 11425.618583, 14000.000000, 15000.000000, 16000.000000, 1517.903289, 8595.188141, 16553.489685, 644.921127
Outstanding requests per worker:
219417 212443 209173 201023 237414 236512 226709 191926 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   74107.5,      370538,     332999,      37539,     274137,      58862, 13857.449068, 16000.000000, 17000.000000, 18000.000000, 1471.236970, 10999.615669, 19732.862473, 654.703747
Outstanding requests per worker:
273010 272769 272675 272665 287455 281350 247429 220080 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:45   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6272 pts/0    S+   01:45   0:00 /usr/lib/linux
memcache      7  141  0.0 245184 107904 pts/0   Sl+  01:45   1:08 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  01:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        9802987148      instructions:u            #    0.75  insn per cycle         
       13123318290      cycles:u                                                    

      48.260711186 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 155000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 155000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 155000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 155000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 155000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 155000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 155000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 155000 cpus 8
meanInterarrival 51
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2461135360
starting receive base loop
num_worker_connections 64
Creating worker on tid 1865150976
starting receive base loop
num_worker_connections 64
Creating worker on tid 1269232128
starting receive base loop
num_worker_connections 64
Creating worker on tid 673313280
starting receive base loop
num_worker_connections 64
Creating worker on tid 77394432
starting receive base loop
num_worker_connections 64
Creating worker on tid 3776442880
starting receive base loop
num_worker_connections 64
Creating worker on tid 3183145472
starting receive base loop
Created 512 connections total
Creating worker on tid 2587226624
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576116771.115195,       0.0,      306401,     275614,      30787,     181783,      93831, 257.155281, 562.800000, 1284.700000, 1926.000000, 397.138724,   0.000000, 2457.515955, 474.836852
Outstanding requests per worker:
8516 8482 8479 8423 26985 38605 42591 39216 
count  386364
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80629.9,      403150,     363079,      40071,     267910,      95169, 1808.392217, 3352.600000, 4336.400000, 7000.000000, 1307.414653, 185.203001, 6894.944191, 560.331388
Outstanding requests per worker:
41412 41375 41683 41326 59922 77080 54677 52825 
count  292678
count  292678
count  292678
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79982.1,      399911,     359949,      39962,     277138,      82811, 4506.990205, 8000.000000, 10000.000000, 10000.000000, 2061.583574, 1768.905044, 10987.259865, 596.394859
Outstanding requests per worker:
88089 87974 88368 88296 104955 123694 112335 85441 
count  59700
count  59700
count  59700
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   74691.3,      373457,     335958,      37499,     265809,      70149, 6476.884222, 9000.000000, 10000.000000, 12000.000000, 1592.360442, 2550.180912, 13080.390930, 618.997339
Outstanding requests per worker:
132988 133286 129156 136965 146369 159875 192100 150300 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   72578.7,      362894,     326530,      36364,     262354,      64176, 8963.433145, 11000.000000, 11000.000000, 12000.000000, 1138.407593, 5916.976929, 12810.752869, 633.484816
Outstanding requests per worker:
172413 188735 170085 182390 193962 213198 234621 163261 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   71695.5,      358478,     322747,      35731,     263381,      59366, 11640.385101, 14000.000000, 15000.000000, 16000.000000, 1275.015202, 8726.696968, 16470.769882, 646.956777
Outstanding requests per worker:
242812 242134 218989 242563 255298 225046 253518 189750 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   72428.3,      362142,     325920,      36222,     268614,      57306, 14294.255351, 17000.000000, 17000.000000, 19000.000000, 1385.614328, 11106.840134, 19321.474075, 655.916271
Outstanding requests per worker:
295864 295142 281500 295575 311885 229357 260594 211715 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:46   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6272 pts/0    S+   01:46   0:00 /usr/lib/linux
memcache      7  142  0.0 247232 109504 pts/0   Sl+  01:46   1:08 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  01:47   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        9869379926      instructions:u            #    0.76  insn per cycle         
       12954059748      cycles:u                                                    

      48.240964017 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 160000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 160000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 160000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 160000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 160000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 160000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 160000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 160000 cpus 8
meanInterarrival 50
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2151084544
starting receive base loop
num_worker_connections 64
Creating worker on tid 1553789440
starting receive base loop
num_worker_connections 64
Creating worker on tid 957870592
starting receive base loop
num_worker_connections 64
Creating worker on tid 364573184
starting receive base loop
num_worker_connections 64
Creating worker on tid 4063621632
starting receive base loop
num_worker_connections 64
Creating worker on tid 3467702784
starting receive base loop
num_worker_connections 64
Creating worker on tid 2871783936
starting receive base loop
Created 512 connections total
Creating worker on tid 2275865088
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576116823.115247,       0.0,      304841,     274163,      30678,     181063,      93100, 266.561354, 604.500000, 1296.700000, 2009.600000, 405.986373,   0.000000, 2424.324036, 476.233281
Outstanding requests per worker:
9179 9118 9076 9265 29830 39808 42838 40001 
count  387553
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78350.3,      391752,     352616,      39136,     259244,      93372, 1725.104660, 3204.700000, 3730.500000, 7000.000000, 1051.210113, 203.182995, 6747.402191, 557.757379
Outstanding requests per worker:
43666 43505 43346 43378 63945 80935 53793 52031 
count  289407
count  289407
count  289407
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   82996.1,      414981,     373632,      41349,     287846,      85786, 4702.170089, 9000.000000, 10000.000000, 11000.000000, 2172.175161, 1309.833050, 11203.854561, 596.585571
Outstanding requests per worker:
92038 91897 92126 91961 112229 110372 93205 79348 
count  55810
count  55810
count  55810
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   70985.5,      354928,     319585,      35343,     253082,      66503, 6419.054446, 9000.000000, 10000.000000, 12000.000000, 1582.883592, 2081.079960, 13326.281548, 619.391170
Outstanding requests per worker:
137198 142672 143350 142728 156308 171741 194249 122761 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   73939.1,      369696,     332490,      37206,     267674,      64816, 8954.054247, 11000.000000, 11000.000000, 12000.000000, 1104.160210, 5994.808197, 12456.191063, 634.201594
Outstanding requests per worker:
183200 184048 179057 188803 214813 223430 247685 144266 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   72851.3,      364257,     328103,      36154,     267977,      60126, 11717.996148, 14000.000000, 14000.000000, 15000.000000, 1147.799761, 8413.348198, 15167.620659, 646.650884
Outstanding requests per worker:
254143 252753 254265 254499 274500 234456 295316 187024 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68694.5,      343473,     309147,      34326,     254821,      54326, 14301.014710, 17000.000000, 17000.000000, 18000.000000, 1256.221132, 11051.673889, 17984.666824, 655.595817
Outstanding requests per worker:
309399 309084 309659 309415 329876 236947 314825 218251 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:47   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6208 pts/0    S+   01:47   0:00 /usr/lib/linux
memcache      8  142  0.0 247232 110272 pts/0   Sl+  01:47   1:08 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  01:47   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        9812919684      instructions:u            #    0.75  insn per cycle         
       13045205744      cycles:u                                                    

      48.050348577 seconds time elapsed

