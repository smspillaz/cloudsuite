+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 25000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 25000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 25000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 25000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 25000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 25000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 25000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 25000 cpus 8
meanInterarrival 320
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2559963648
starting receive base loop
num_worker_connections 64
Creating worker on tid 1964503552
starting receive base loop
num_worker_connections 64
Creating worker on tid 1371206144
starting receive base loop
num_worker_connections 64
Creating worker on tid 775287296
starting receive base loop
num_worker_connections 64
Creating worker on tid 179368448
starting receive base loop
num_worker_connections 64
Creating worker on tid 3878416896
starting receive base loop
num_worker_connections 64
Creating worker on tid 3282498048
starting receive base loop
Created 512 connections total
Creating worker on tid 2686579200
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576098314.096738,       0.0,       76967,      69101,       7866,      41364,      27737,   0.767803,   0.107100,   0.128100,  21.200000,   7.143416,   0.000000, 151.668996, 408.491512
Outstanding requests per worker:
1 0 0 1 1 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25001.6,      125008,     112717,      12291,      75178,      37539,   0.092261,   0.107100,   0.125100,   0.237100,   0.028108,   0.068000,   0.922000, 482.128011
Outstanding requests per worker:
0 0 0 1 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25001.2,      125006,     112446,      12560,      78931,      33515,   0.092364,   0.107100,   0.125100,   0.237100,   0.028469,   0.067000,   0.940000, 520.176974
Outstanding requests per worker:
0 0 0 0 0 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25002.0,      125010,     112489,      12521,      80986,      31503,   0.092350,   0.107100,   0.125100,   0.237100,   0.028696,   0.066000,   0.832000, 539.934394
Outstanding requests per worker:
1 0 1 0 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25001.4,      125007,     112684,      12323,      83322,      29362,   0.092508,   0.107100,   0.125100,   0.238100,   0.029779,   0.058000,   1.120000, 562.234656
Outstanding requests per worker:
1 0 0 1 1 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25001.4,      125007,     112460,      12547,      84576,      27884,   0.092528,   0.107100,   0.125100,   0.239100,   0.029024,   0.067000,   0.912000, 576.393998
Outstanding requests per worker:
0 0 0 0 1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   25001.6,      125008,     112448,      12560,      85652,      26796,   0.092497,   0.107100,   0.125100,   0.237100,   0.029314,   0.067000,   1.013000, 587.288551
Outstanding requests per worker:
0 0 0 0 0 0 0 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:38   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6208 pts/0    S+   20:38   0:00 /usr/lib/linux
memcache      8 69.5  0.0 197056 46208 pts/0    Sl+  20:38   0:32 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:39   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        3222029712      instructions:u            #    0.48  insn per cycle         
        6752468094      cycles:u                                                    

      47.679282360 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 30000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 30000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 30000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 30000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 30000 cpus 8
meanInterarrival 266
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2648961536
starting receive base loop
num_worker_connections 64
Creating worker on tid 2050355712
starting receive base loop
num_worker_connections 64
Creating worker on tid 1454436864
starting receive base loop
num_worker_connections 64
Creating worker on tid 858518016
starting receive base loop
num_worker_connections 64
Creating worker on tid 262599168
starting receive base loop
num_worker_connections 64
Creating worker on tid 3961647616
starting receive base loop
num_worker_connections 64
Creating worker on tid 3365728768
starting receive base loop
Created 512 connections total
Creating worker on tid 2769809920
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576098365.096789,       0.0,       90931,      81835,       9096,      49402,      32433,   0.602216,   0.147100,   0.171100,   5.500000,   6.146314,   0.000000, 171.423003, 413.031906
Outstanding requests per worker:
0 0 0 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.4,      150382,     135588,      14794,      91406,      44182,   0.109404,   0.148100,   0.169100,   0.236100,   0.034968,   0.065000,   0.759000, 490.372688
Outstanding requests per worker:
0 0 0 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.8,      150384,     135310,      15074,      95842,      39468,   0.109729,   0.148100,   0.169100,   0.234100,   0.035597,   0.068000,   1.001000, 528.991486
Outstanding requests per worker:
0 0 1 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.4,      150382,     135230,      15152,      99138,      36092,   0.109798,   0.148100,   0.169100,   0.236100,   0.035725,   0.067000,   1.557000, 556.398824
Outstanding requests per worker:
0 1 0 0 0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.8,      150384,     135399,      14985,     101387,      34012,   0.109901,   0.148100,   0.169100,   0.239100,   0.035830,   0.067000,   1.093000, 573.696017
Outstanding requests per worker:
0 1 0 1 1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.6,      150383,     135470,      14913,     102863,      32607,   0.109902,   0.148100,   0.170100,   0.237100,   0.035721,   0.069000,   1.052000, 585.186861
Outstanding requests per worker:
1 1 0 1 1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.6,      150383,     135483,      14900,     104322,      31161,   0.109727,   0.148100,   0.169100,   0.240100,   0.035076,   0.068000,   0.505000, 596.770060
Outstanding requests per worker:
1 0 0 0 0 0 0 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  20:39   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   20:39   0:00 /usr/lib/linux
memcache      7 77.1  0.0 203200 52352 pts/0    Sl+  20:39   0:36 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  20:40   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        3766286720      instructions:u            #    0.49  insn per cycle         
        7611312411      cycles:u                                                    

      47.540590765 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 35000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 35000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 35000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 35000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 35000 cpus 8
meanInterarrival 228
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1749414400
starting receive base loop
num_worker_connections 64
Creating worker on tid 1151136256
starting receive base loop
num_worker_connections 64
Creating worker on tid 555217408
starting receive base loop
num_worker_connections 64
Creating worker on tid 4256887296
starting receive base loop
num_worker_connections 64
Creating worker on tid 3660968448
starting receive base loop
num_worker_connections 64
Creating worker on tid 3065049600
starting receive base loop
num_worker_connections 64
Creating worker on tid 2469130752
starting receive base loop
Created 512 connections total
Creating worker on tid 1873211904
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576098416.096840,       0.0,      105404,      94904,      10500,      57727,      37177,   0.930997,   0.124100,   0.144100,  29.900000,   8.369216,   0.000000, 147.590995, 419.706388
Outstanding requests per worker:
1 0 0 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35091.6,      175458,     157791,      17667,     108267,      49524,   0.097726,   0.124100,   0.128100,   0.210100,   0.026866,   0.060000,   0.793000, 501.375509
Outstanding requests per worker:
0 1 0 1 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35092.0,      175460,     157886,      17574,     113930,      43956,   0.097778,   0.124100,   0.129000,   0.203100,   0.026271,   0.063000,   0.795000, 542.824494
Outstanding requests per worker:
1 0 0 0 0 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35089.8,      175449,     157975,      17474,     117179,      40796,   0.097925,   0.124100,   0.129000,   0.210100,   0.026820,   0.064000,   1.101000, 565.538636
Outstanding requests per worker:
1 0 0 0 0 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35090.8,      175454,     157815,      17639,     119595,      38220,   0.097921,   0.124100,   0.129000,   0.208100,   0.027155,   0.061000,   1.033000, 582.255711
Outstanding requests per worker:
0 0 1 1 1 1 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35091.2,      175456,     158019,      17437,     121538,      36481,   0.097866,   0.124100,   0.129000,   0.205100,   0.027375,   0.061000,   1.114000, 595.260500
Outstanding requests per worker:
0 0 1 1 0 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35092.0,      175460,     157948,      17512,     122986,      34962,   0.098002,   0.124100,   0.129000,   0.207100,   0.027248,   0.065000,   1.028000, 605.988028
Outstanding requests per worker:
1 1 0 0 0 0 0 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:40   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6208 pts/0    S+   20:40   0:00 /usr/lib/linux
memcache      8 91.2  0.0 207296 56448 pts/0    Sl+  20:40   0:42 memcached -t 2
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  20:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        4503832535      instructions:u            #    0.49  insn per cycle         
        9189226639      cycles:u                                                    

      47.440233131 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 40000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 40000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 40000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 40000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 40000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 40000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 40000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 40000 cpus 8
meanInterarrival 200
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1799090688
starting receive base loop
num_worker_connections 64
Creating worker on tid 1202123264
starting receive base loop
num_worker_connections 64
Creating worker on tid 606204416
starting receive base loop
num_worker_connections 64
Creating worker on tid 10285568
starting receive base loop
num_worker_connections 64
Creating worker on tid 3709334016
starting receive base loop
num_worker_connections 64
Creating worker on tid 3116036608
starting receive base loop
num_worker_connections 64
Creating worker on tid 2520117760
starting receive base loop
Created 512 connections total
Creating worker on tid 1924198912
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576098467.096891,       0.0,      122306,     110032,      12274,      67751,      42281,   0.912071,   0.125100,   0.147100,  23.800000,   8.768405,   0.000000, 197.857007, 426.662516
Outstanding requests per worker:
0 1 1 0 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40003.4,      200017,     180080,      19937,     124174,      55906,   0.099803,   0.125100,   0.144100,   0.224100,   0.027178,   0.061000,   0.859000, 508.359018
Outstanding requests per worker:
1 1 1 0 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40003.4,      200017,     180180,      19837,     130853,      49327,   0.099963,   0.126100,   0.144100,   0.225100,   0.027582,   0.066000,   1.449000, 547.261128
Outstanding requests per worker:
0 0 1 0 1 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40004.8,      200024,     180168,      19856,     134856,      45312,   0.100401,   0.126100,   0.145100,   0.223100,   0.028212,   0.062000,   1.099000, 572.206624
Outstanding requests per worker:
0 0 1 1 0 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40002.0,      200010,     180090,      19920,     137544,      42546,   0.100423,   0.126100,   0.145100,   0.221100,   0.028461,   0.061000,   1.032000, 589.401222
Outstanding requests per worker:
0 0 0 1 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40002.8,      200014,     180209,      19805,     139914,      40295,   0.100596,   0.126100,   0.146100,   0.222100,   0.028383,   0.060000,   1.311000, 602.670272
Outstanding requests per worker:
0 0 0 1 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   40004.4,      200022,     180222,      19800,     141665,      38557,   0.100552,   0.126100,   0.146100,   0.219100,   0.028089,   0.066000,   1.173000, 613.393875
Outstanding requests per worker:
1 1 1 0 1 0 0 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:41   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6272 pts/0    S+   20:41   0:00 /usr/lib/linux
memcache      8  101  0.0 213440 62656 pts/0    Sl+  20:41   0:47 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  20:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        5115002957      instructions:u            #    0.50  insn per cycle         
       10210064167      cycles:u                                                    

      47.631387497 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 45000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 45000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 45000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 45000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 45000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 45000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 45000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 45000 cpus 8
meanInterarrival 177
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1651175936
starting receive base loop
num_worker_connections 64
Creating worker on tid 1051783680
starting receive base loop
num_worker_connections 64
Creating worker on tid 455864832
starting receive base loop
num_worker_connections 64
Creating worker on tid 4154913280
starting receive base loop
num_worker_connections 64
Creating worker on tid 3558994432
starting receive base loop
num_worker_connections 64
Creating worker on tid 2963075584
starting receive base loop
num_worker_connections 64
Creating worker on tid 2367156736
starting receive base loop
Created 512 connections total
Creating worker on tid 1773859328
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576098518.096942,       0.0,      136148,     122442,      13706,      75989,      46453,   0.824563,   0.149100,   0.203100,  13.300000,   7.791713,   0.000000, 167.693004, 430.988166
Outstanding requests per worker:
0 1 0 1 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   45203.2,      226016,     203412,      22604,     141640,      61772,   0.111698,   0.149100,   0.171100,   0.235100,   0.035420,   0.064000,   0.920000, 515.052991
Outstanding requests per worker:
0 1 0 1 0 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   45200.6,      226003,     203523,      22480,     149293,      54230,   0.112299,   0.149100,   0.196000,   0.235100,   0.035668,   0.061000,   0.780000, 554.668784
Outstanding requests per worker:
1 0 1 1 0 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   45200.6,      226003,     203449,      22554,     153966,      49483,   0.112599,   0.150100,   0.196000,   0.235100,   0.036952,   0.061000,   0.958000, 581.184769
Outstanding requests per worker:
0 1 0 0 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   45203.0,      226015,     203559,      22456,     157255,      46304,   0.112790,   0.150100,   0.197100,   0.235100,   0.037785,   0.062000,   1.161000, 599.201121
Outstanding requests per worker:
1 0 1 0 1 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   45199.8,      225999,     203353,      22646,     159872,      43481,   0.113210,   0.150100,   0.198100,   0.236100,   0.039059,   0.061000,   1.162000, 613.184738
Outstanding requests per worker:
1 0 0 1 1 0 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   45200.2,      226001,     203505,      22496,     161402,      42103,   0.112675,   0.150100,   0.197100,   0.235100,   0.035386,   0.061000,   0.744000, 621.752090
Outstanding requests per worker:
1 0 1 0 1 1 0 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:42   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6272 pts/0    S+   20:42   0:00 /usr/lib/linux
memcache      8  111  0.0 216512 64960 pts/0    Sl+  20:42   0:52 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  20:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        5715262358      instructions:u            #    0.51  insn per cycle         
       11114442628      cycles:u                                                    

      47.660389893 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 50000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 50000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 50000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 50000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 50000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 50000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 50000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 50000 cpus 8
meanInterarrival 160
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2627334656
starting receive base loop
num_worker_connections 64
Creating worker on tid 2031612416
starting receive base loop
num_worker_connections 64
Creating worker on tid 1438315008
starting receive base loop
num_worker_connections 64
Creating worker on tid 842396160
starting receive base loop
num_worker_connections 64
Creating worker on tid 246477312
starting receive base loop
num_worker_connections 64
Creating worker on tid 3945525760
starting receive base loop
num_worker_connections 64
Creating worker on tid 3349606912
starting receive base loop
Created 512 connections total
Creating worker on tid 2753688064
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576098569.096993,       0.0,      153353,     138110,      15243,      86864,      51246,   0.588520,   0.193100,   0.216100,   3.300000,   5.551660,   0.000000, 137.480006, 440.433061
Outstanding requests per worker:
0 1 0 1 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   50006.3,      250032,     224790,      25242,     158052,      66738,   0.122683,   0.199100,   0.212100,   0.247100,   0.044628,   0.061000,   1.078000, 521.591668
Outstanding requests per worker:
0 1 1 0 1 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   50003.3,      250017,     225148,      24869,     167103,      58045,   0.123242,   0.199100,   0.213100,   0.250100,   0.045563,   0.059000,   1.020000, 564.503322
Outstanding requests per worker:
0 1 1 1 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   50003.5,      250018,     225112,      24906,     171988,      53124,   0.123576,   0.199100,   0.212100,   0.243100,   0.046330,   0.060000,   1.501000, 588.625155
Outstanding requests per worker:
1 0 1 0 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   50004.5,      250023,     225101,      24922,     175010,      50091,   0.124130,   0.200100,   0.215100,   0.252100,   0.047806,   0.064000,   1.217000, 603.569380
Outstanding requests per worker:
1 1 1 1 0 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   50006.5,      250033,     224994,      25039,     177408,      47586,   0.124120,   0.200100,   0.214100,   0.250100,   0.048585,   0.060000,   1.346000, 617.723939
Outstanding requests per worker:
1 0 1 1 0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   50002.9,      250015,     224864,      25151,     179698,      45166,   0.124648,   0.201100,   0.216100,   0.257100,   0.046859,   0.060000,   1.103000, 628.002748
Outstanding requests per worker:
1 0 1 1 0 0 0 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:42   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   20:42   0:00 /usr/lib/linux
memcache      7  118  0.0 221632 68992 pts/0    Sl+  20:42   0:57 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  20:43   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        6299050207      instructions:u            #    0.52  insn per cycle         
       12160966903      cycles:u                                                    

      48.332178326 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 55000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 55000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 55000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 55000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 55000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 55000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 55000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 55000 cpus 8
meanInterarrival 145
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2147611136
starting receive base loop
num_worker_connections 64
Creating worker on tid 1553789440
starting receive base loop
num_worker_connections 64
Creating worker on tid 957870592
starting receive base loop
num_worker_connections 64
Creating worker on tid 364573184
starting receive base loop
num_worker_connections 64
Creating worker on tid 4063621632
starting receive base loop
num_worker_connections 64
Creating worker on tid 3467702784
starting receive base loop
num_worker_connections 64
Creating worker on tid 2871783936
starting receive base loop
Created 512 connections total
Creating worker on tid 2275865088
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576098621.097045,       0.0,      166878,     150218,      16660,      94808,      55410,   0.995501,   0.210100,   0.278100,  29.300000,   8.184754,   0.000000, 190.035000, 443.129731
Outstanding requests per worker:
2 1 1 1 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   55178.9,      275895,     248486,      27409,     175924,      72562,   0.142953,   0.208100,   0.230100,   0.333100,   0.057860,   0.059000,   1.584000, 526.660085
Outstanding requests per worker:
1 1 1 1 0 2 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   55175.7,      275879,     248342,      27537,     184708,      63634,   0.143998,   0.210100,   0.234100,   0.335100,   0.057024,   0.060000,   1.512000, 567.549569
Outstanding requests per worker:
0 1 1 2 1 2 0 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   55176.7,      275884,     248316,      27568,     190659,      57657,   0.146578,   0.211100,   0.241100,   0.345100,   0.061970,   0.060000,   1.220000, 593.090687
Outstanding requests per worker:
1 0 0 0 0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   55178.7,      275894,     248441,      27453,     194561,      53880,   0.147683,   0.212100,   0.245100,   0.345100,   0.062939,   0.059000,   1.428000, 610.780660
Outstanding requests per worker:
0 1 1 1 1 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   55178.7,      275894,     248581,      27313,     197865,      50716,   0.145686,   0.211100,   0.237100,   0.338100,   0.057368,   0.060000,   0.613000, 624.579425
Outstanding requests per worker:
0 1 0 0 1 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   55174.7,      275874,     248386,      27488,     200042,      48344,   0.147627,   0.212100,   0.242100,   0.345100,   0.062735,   0.059000,   1.251000, 635.172566
Outstanding requests per worker:
2 0 1 1 1 2 1 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:43   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6272 pts/0    S+   20:43   0:00 /usr/lib/linux
memcache      8  125  0.0 226752 72960 pts/0    Sl+  20:43   1:00 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:44   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        6838123336      instructions:u            #    0.53  insn per cycle         
       12958885358      cycles:u                                                    

      47.970773224 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 60000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 60000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 60000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 60000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 60000 cpus 8
meanInterarrival 133
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2552427008
starting receive base loop
num_worker_connections 64
Creating worker on tid 1956442624
starting receive base loop
num_worker_connections 64
Creating worker on tid 1360523776
starting receive base loop
num_worker_connections 64
Creating worker on tid 767226368
starting receive base loop
num_worker_connections 64
Creating worker on tid 171307520
starting receive base loop
num_worker_connections 64
Creating worker on tid 3870355968
starting receive base loop
num_worker_connections 64
Creating worker on tid 3274437120
starting receive base loop
Created 512 connections total
Creating worker on tid 2678518272
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576098672.097096,       0.0,      180427,     162441,      17986,     103339,      59102,   1.220813,   0.355100,   1.800000,  34.100000,   8.857052,   0.000000, 200.659007, 448.524264
Outstanding requests per worker:
1 3 2 2 3 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60156.5,      300783,     270718,      30065,     193141,      77577,   0.193414,   0.320100,   0.361100,   0.497100,   0.093402,   0.063000,   1.146000, 533.393273
Outstanding requests per worker:
2 2 2 2 1 4 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60158.3,      300792,     270808,      29984,     203062,      67746,   0.196726,   0.323000,   0.364100,   0.512100,   0.096286,   0.060000,   1.403000, 573.973261
Outstanding requests per worker:
1 2 1 0 1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60153.3,      300767,     270893,      29874,     209221,      61672,   0.203580,   0.330100,   0.394100,   0.590100,   0.105827,   0.060000,   1.271000, 598.324383
Outstanding requests per worker:
1 2 1 2 1 1 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60155.1,      300776,     270960,      29816,     213640,      57320,   0.206057,   0.330100,   0.388000,   0.596100,   0.114249,   0.058000,   1.620000, 616.082890
Outstanding requests per worker:
1 1 1 1 1 1 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60155.7,      300779,     270695,      30084,     216836,      53859,   0.210585,   0.344100,   0.442100,   0.590100,   0.114141,   0.059000,   1.483000, 628.887696
Outstanding requests per worker:
2 2 1 2 2 1 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60157.5,      300788,     270636,      30152,     218988,      51648,   0.209292,   0.336100,   0.433100,   0.594100,   0.111012,   0.059000,   1.413000, 638.310709
Outstanding requests per worker:
1 1 2 1 0 1 1 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:44   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   20:44   0:00 /usr/lib/linux
memcache      7  132  0.0 230848 81216 pts/0    Sl+  20:44   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4416 pts/1    Rs+  20:45   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        7359302440      instructions:u            #    0.55  insn per cycle         
       13354661011      cycles:u                                                    

      47.880843587 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 65000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 65000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 65000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 65000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 65000 cpus 8
meanInterarrival 123
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2035806720
starting receive base loop
num_worker_connections 64
Creating worker on tid 1438315008
starting receive base loop
num_worker_connections 64
Creating worker on tid 842396160
starting receive base loop
num_worker_connections 64
Creating worker on tid 246477312
starting receive base loop
num_worker_connections 64
Creating worker on tid 3945525760
starting receive base loop
num_worker_connections 64
Creating worker on tid 3349606912
starting receive base loop
num_worker_connections 64
Creating worker on tid 2753688064
starting receive base loop
Created 512 connections total
Creating worker on tid 2157769216
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576098723.097147,       0.0,      196820,     177336,      19484,     113309,      64027,   4.855119,  12.400000,  15.700000,  21.800000,   7.119394,   0.000000, 131.693006, 452.141263
Outstanding requests per worker:
37 41 38 32 39 31 33 38 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65039.7,      325199,     292663,      32536,     210141,      82522,   3.428200,   7.800000,   8.900000,  10.700000,   2.890077,   0.065000,  15.226000, 537.918059
Outstanding requests per worker:
39 47 41 41 41 39 42 36 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65069.9,      325350,     292716,      32634,     220964,      71752,   4.670249,  10.000000,  11.600000,  14.200000,   3.586561,   0.065000,  17.287999, 580.200133
Outstanding requests per worker:
31 30 20 27 19 25 31 34 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65020.7,      325104,     292684,      32420,     227721,      64963,   5.258798,  10.900000,  12.500000,  15.000000,   3.708790,   0.074000,  18.534999, 604.428008
Outstanding requests per worker:
40 45 35 41 35 51 40 43 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65017.5,      325088,     292510,      32578,     231943,      60567,   5.098299,  11.100000,  12.900000,  15.400000,   3.997661,   0.067000,  19.966001, 620.662931
Outstanding requests per worker:
57 64 56 64 49 58 60 60 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65060.9,      325305,     292954,      32351,     235589,      57365,   6.054534,  11.500000,  13.300000,  16.000000,   3.800045,   0.099000,  19.168001, 633.930651
Outstanding requests per worker:
40 52 48 59 40 50 59 48 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65040.3,      325202,     292798,      32404,     238435,      54363,   6.074221,  11.800000,  13.400000,  16.200000,   3.880880,   0.069000,  20.998999, 644.242546
Outstanding requests per worker:
50 57 53 53 52 53 55 60 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:45   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6272 pts/0    S+   20:45   0:00 /usr/lib/linux
memcache      8  138  0.0 235968 86016 pts/0    Sl+  20:45   1:06 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  20:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        7870214784      instructions:u            #    0.65  insn per cycle         
       12180192057      cycles:u                                                    

      47.589418765 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 70000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 70000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 70000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 70000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 70000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 70000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 70000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 70000 cpus 8
meanInterarrival 114
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1696002560
starting receive base loop
num_worker_connections 64
Creating worker on tid 1102770688
starting receive base loop
num_worker_connections 64
Creating worker on tid 506851840
starting receive base loop
num_worker_connections 64
Creating worker on tid 4205900288
starting receive base loop
num_worker_connections 64
Creating worker on tid 3609981440
starting receive base loop
num_worker_connections 64
Creating worker on tid 3014062592
starting receive base loop
num_worker_connections 64
Creating worker on tid 2418143744
starting receive base loop
Created 512 connections total
Creating worker on tid 1822224896
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576098775.097199,       0.0,      215965,     194478,      21487,     125003,      69475,   9.776925,  24.600000,  30.500000,  49.700000,  14.354344,   0.000000, 364.751995, 456.821815
Outstanding requests per worker:
100 123 111 109 111 94 112 110 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   70178.7,      350894,     316012,      34882,     227378,      88634,  12.374451,  24.600000,  27.700000,  32.000000,   7.909790,   0.102000,  37.939999, 540.708226
Outstanding requests per worker:
90 110 115 108 131 112 107 102 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   70172.1,      350861,     316014,      34847,     239770,      76244,  12.923320,  25.700000,  28.800000,  34.000000,   8.290951,   0.135000,  42.238999, 583.698403
Outstanding requests per worker:
118 107 119 112 147 94 114 114 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   70174.5,      350873,     315918,      34955,     246670,      69248,  13.128039,  26.500000,  29.600000,  33.500000,   8.406046,   0.110000,  40.410001, 608.082224
Outstanding requests per worker:
118 130 123 109 113 131 100 126 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   70179.7,      350899,     315517,      35382,     251198,      64319,  13.565254,  27.000000,  30.700000,  36.000000,   8.767103,   0.107000,  44.865001, 624.995224
Outstanding requests per worker:
111 119 116 125 135 121 114 110 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   70178.1,      350891,     315679,      35212,     255410,      60269,  14.031773,  27.100000,  32.000000,  39.900000,   9.237818,   0.107000,  46.705000, 639.624368
Outstanding requests per worker:
132 106 128 108 123 122 121 120 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   70176.1,      350881,     315716,      35165,     258456,      57260,  14.123149,  27.800000,  32.000000,  39.400000,   9.233980,   0.131000,  47.058001, 649.048449
Outstanding requests per worker:
125 123 128 116 132 126 122 111 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:46   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   20:46   0:00 /usr/lib/linux
memcache      7  139  0.0 241088 92480 pts/0    Sl+  20:46   1:06 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  20:47   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        8637706064      instructions:u            #    0.70  insn per cycle         
       12416621706      cycles:u                                                    

      47.981345411 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 75000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 75000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 75000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 75000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 75000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 75000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 75000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 75000 cpus 8
meanInterarrival 106
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2386883072
starting receive base loop
num_worker_connections 64
Creating worker on tid 1789981184
starting receive base loop
num_worker_connections 64
Creating worker on tid 1194062336
starting receive base loop
num_worker_connections 64
Creating worker on tid 598143488
starting receive base loop
num_worker_connections 64
Creating worker on tid 2224640
starting receive base loop
num_worker_connections 64
Creating worker on tid 3701273088
starting receive base loop
num_worker_connections 64
Creating worker on tid 3105354240
starting receive base loop
Created 512 connections total
Creating worker on tid 2512056832
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576098826.097250,       0.0,      231724,     208752,      22972,     134879,      73873,  19.759731,  47.300000,  58.800000, 109.400000,  32.259887,   0.000000, 717.583001, 460.299417
Outstanding requests per worker:
206 227 169 181 229 193 204 219 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75469.1,      377346,     339480,      37866,     246229,      93251,  21.137568,  38.600000,  49.900000,  63.700000,  14.083483,   0.126000,  97.484000, 546.630623
Outstanding requests per worker:
235 201 211 183 212 192 208 233 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75415.9,      377080,     339447,      37633,     259149,      80298,  23.110451,  43.400000,  53.400000,  71.800000,  15.678436,   0.185000, 150.784999, 588.253247
Outstanding requests per worker:
265 221 259 225 248 267 258 243 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75429.1,      377146,     339660,      37486,     266347,      73313,  27.742024,  53.500000,  60.400000,  99.600000,  20.137097,   0.175000, 182.042003, 611.474148
Outstanding requests per worker:
310 285 279 279 260 283 272 273 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75442.5,      377213,     339416,      37797,     271482,      67934,  30.083528,  58.900000,  66.500000, 114.100000,  22.921961,   0.168000, 207.513005, 627.959678
Outstanding requests per worker:
347 267 259 296 311 278 320 331 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75500.7,      377504,     339913,      37591,     276102,      63811,  30.704366,  59.900000,  66.500000, 116.000000,  23.106587,   0.147000, 203.859001, 642.444390
Outstanding requests per worker:
293 299 303 257 252 284 266 338 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75440.5,      377203,     339274,      37929,     278890,      60384,  32.272981,  63.400000,  72.300000, 125.300000,  25.178594,   0.160000, 212.283000, 653.559253
Outstanding requests per worker:
320 361 250 304 326 309 326 283 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:47   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   20:47   0:00 /usr/lib/linux
memcache      7  136  0.0 245184 99008 pts/0    Sl+  20:47   1:06 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  20:48   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        9350178052      instructions:u            #    0.72  insn per cycle         
       12931766407      cycles:u                                                    

      48.300305602 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 80000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 80000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 80000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 80000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 80000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 80000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 80000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 80000 cpus 8
meanInterarrival 100
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2093609472
starting receive base loop
num_worker_connections 64
Creating worker on tid 1494741504
starting receive base loop
num_worker_connections 64
Creating worker on tid 901444096
starting receive base loop
num_worker_connections 64
Creating worker on tid 305525248
starting receive base loop
num_worker_connections 64
Creating worker on tid 4004573696
starting receive base loop
num_worker_connections 64
Creating worker on tid 3408654848
starting receive base loop
num_worker_connections 64
Creating worker on tid 2812736000
starting receive base loop
Created 512 connections total
Creating worker on tid 2216817152
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576098878.097302,       0.0,      249052,     223847,      25205,     146031,      77816,  43.538691,  86.600000, 146.300000, 460.900000,  96.865753,   0.000000, 1493.767023, 466.901795
Outstanding requests per worker:
667 619 743 703 637 605 721 1947 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78784.7,      393924,     354601,      39323,     259004,      95597, 117.567692, 227.600000, 275.100000, 412.200000,  99.134620,   0.276000, 1251.955986, 551.699820
Outstanding requests per worker:
1584 1616 1513 1655 1557 1589 1660 1576 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78630.1,      393151,     353969,      39182,     270831,      83138, 203.079936, 363.400000, 413.300000, 494.600000, 114.855370,   0.346000, 726.849020, 591.220805
Outstanding requests per worker:
2540 2324 2410 2402 2429 2474 2504 2553 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78792.3,      393962,     354651,      39311,     279278,      75373, 285.169606, 462.700000, 520.800000, 627.900000, 128.910942,   0.840000, 909.388006, 615.521482
Outstanding requests per worker:
3287 3098 3233 3114 3402 3190 3161 3231 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78957.7,      394789,     355164,      39625,     285271,      69893, 356.007651, 555.800000, 622.300000, 753.700000, 144.937660,   2.070000, 1198.120952, 632.422512
Outstanding requests per worker:
3919 3849 3912 3606 4003 3909 3892 3892 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79073.7,      395369,     355687,      39682,     289682,      66005, 417.092728, 643.000000, 722.200000, 910.400000, 167.895204,   0.695000, 1414.777040, 645.496675
Outstanding requests per worker:
4442 4354 4352 4535 4404 4349 4735 4471 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79138.9,      395695,     355987,      39708,     293762,      62225, 469.418251, 732.900000, 831.800000, 1039.300000, 196.247248,  10.631000, 1483.072042, 656.846022
Outstanding requests per worker:
4939 5086 4965 4828 4981 5100 5148 4936 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:48   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6272 pts/0    S+   20:48   0:00 /usr/lib/linux
memcache      7  139  0.0 248256 111040 pts/0   Sl+  20:48   1:07 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  20:48   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

       10032000036      instructions:u            #    0.74  insn per cycle         
       13632919116      cycles:u                                                    

      48.129387843 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 85000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 85000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 85000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 85000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 85000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 85000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 85000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 85000 cpus 8
meanInterarrival 94
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1666773504
starting receive base loop
num_worker_connections 64
Creating worker on tid 1067905536
starting receive base loop
num_worker_connections 64
Creating worker on tid 471986688
starting receive base loop
num_worker_connections 64
Creating worker on tid 4171035136
starting receive base loop
num_worker_connections 64
Creating worker on tid 3575116288
starting receive base loop
num_worker_connections 64
Creating worker on tid 2981818880
starting receive base loop
num_worker_connections 64
Creating worker on tid 2385900032
starting receive base loop
Created 512 connections total
Creating worker on tid 1789981184
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576098929.097353,       0.0,      244850,     220529,      24321,     143132,      77397,  59.019630, 141.000000, 188.600000, 849.800000, 144.109235,   0.000000, 1989.308953, 464.199157
Outstanding requests per worker:
1382 1366 1384 1281 1365 1277 1176 9792 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79167.1,      395836,     356401,      39435,     258837,      97564, 414.658554, 635.800000, 1144.900000, 2256.500000, 371.533237,   0.641000, 2827.493906, 548.908931
Outstanding requests per worker:
5180 5634 5329 5165 5178 5448 5271 11573 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79919.7,      399599,     359723,      39876,     274986,      84737, 724.368937, 1036.200000, 1340.800000, 2529.400000, 369.218122,  97.026996, 3087.692976, 590.246982
Outstanding requests per worker:
8771 8513 8691 8276 8460 8678 8646 14706 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79735.5,      398678,     358916,      39762,     282579,      76337, 1032.932818, 1474.500000, 1714.500000, 2937.500000, 422.299481, 107.399002, 3478.971004, 615.694174
Outstanding requests per worker:
12321 12066 11965 11839 11665 11967 12065 17750 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79479.5,      397398,     357463,      39935,     287390,      70073, 1353.377446, 1892.600000, 2158.300000, 3272.400000, 476.344030, 283.919007, 3997.775078, 633.108294
Outstanding requests per worker:
15829 15682 15252 15532 15403 15343 15399 21388 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79278.7,      396394,     356932,      39462,     291482,      65450, 1689.008097, 2329.700000, 2643.000000, 3661.200000, 544.461061, 406.230986, 4602.548122, 646.573020
Outstanding requests per worker:
19639 19279 18820 18871 19002 19069 19067 25276 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79050.3,      395252,     355868,      39384,     293041,      62827, 2041.007323, 2765.600000, 3046.600000, 4108.600000, 603.004434, 526.329994, 4936.182022, 654.791279
Outstanding requests per worker:
23512 23080 22653 22554 22458 23204 22857 29023 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:48   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   20:48   0:00 /usr/lib/linux
memcache      7  140  0.0 248256 113472 pts/0   Sl+  20:48   1:07 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  20:49   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

       10031464033      instructions:u            #    0.76  insn per cycle         
       13283085923      cycles:u                                                    

      47.870133890 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 90000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 90000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 90000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 90000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 90000 cpus 8
meanInterarrival 88
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1860497920
starting receive base loop
num_worker_connections 64
Creating worker on tid 1261171200
starting receive base loop
num_worker_connections 64
Creating worker on tid 665252352
starting receive base loop
num_worker_connections 64
Creating worker on tid 69333504
starting receive base loop
num_worker_connections 64
Creating worker on tid 3768381952
starting receive base loop
num_worker_connections 64
Creating worker on tid 3172463104
starting receive base loop
num_worker_connections 64
Creating worker on tid 2579165696
starting receive base loop
Created 512 connections total
Creating worker on tid 1983246848
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576098980.097404,       0.0,      245641,     221148,      24493,     143730,      77418,  62.825596, 152.300000, 203.600000, 884.800000, 149.562979,   0.000000, 1962.260962, 464.446339
Outstanding requests per worker:
1673 1633 1554 1593 1485 1533 1637 17045 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80593.9,      402970,     362805,      40165,     264269,      98536, 595.635295, 952.700000, 2091.000000, 3291.300000, 604.275325,   0.677000, 4007.717133, 550.119888
Outstanding requests per worker:
8017 7842 7844 8048 7589 7914 7979 24526 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   81132.3,      405662,     365190,      40472,     280214,      84976, 1137.634345, 1583.000000, 2750.100000, 3868.900000, 642.608027, 199.191004, 4615.508080, 593.145982
Outstanding requests per worker:
14031 13955 13818 13828 13872 14140 14090 30937 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80676.9,      403385,     362948,      40437,     286033,      76915, 1688.697258, 2254.000000, 3354.400000, 4465.500000, 681.291821, 413.190991, 5117.257118, 615.801906
Outstanding requests per worker:
20205 20333 20199 20321 20278 20435 20572 37522 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80461.7,      402309,     362147,      40162,     291296,      70851, 2259.371331, 2928.100000, 3861.300000, 4993.900000, 703.738124, 736.447990, 5712.397099, 633.054205
Outstanding requests per worker:
26855 27041 26693 26986 26720 26816 27206 43839 
count  389729
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80215.5,      401078,     361055,      40023,     294645,      66410, 2838.617613, 3582.400000, 4436.300000, 6000.000000, 730.895162, 1176.259041, 6546.104908, 646.527346
Outstanding requests per worker:
33634 34012 33092 33758 33417 33465 33723 50589 
count  380248
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80029.9,      400150,     359939,      40211,     297436,      62503, 3434.309669, 4238.500000, 4994.400000, 7000.000000, 762.163510, 1771.958947, 7382.873058, 657.494320
Outstanding requests per worker:
40335 41001 39916 40330 40240 40139 40687 57505 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:49   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6272 pts/0    S+   20:49   0:00 /usr/lib/linux
memcache      8  140  0.0 248256 112960 pts/0   Sl+  20:49   1:07 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:50   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

       10134658316      instructions:u            #    0.75  insn per cycle         
       13545996716      cycles:u                                                    

      47.871033023 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 95000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 95000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 95000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 95000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 95000 cpus 8
meanInterarrival 84
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2197156352
starting receive base loop
num_worker_connections 64
Creating worker on tid 1604776448
starting receive base loop
num_worker_connections 64
Creating worker on tid 1008857600
starting receive base loop
num_worker_connections 64
Creating worker on tid 412938752
starting receive base loop
num_worker_connections 64
Creating worker on tid 4111987200
starting receive base loop
num_worker_connections 64
Creating worker on tid 3518689792
starting receive base loop
num_worker_connections 64
Creating worker on tid 2922770944
starting receive base loop
Created 512 connections total
Creating worker on tid 2326852096
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576099031.097455,       0.0,      257633,     231767,      25866,     151067,      80700,  78.594041, 189.000000, 243.300000, 958.000000, 161.181349,   0.000000, 1943.135977, 465.248793
Outstanding requests per worker:
2209 2191 2160 2388 2287 2315 4418 20923 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79876.9,      399385,     359626,      39759,     263168,      96458, 778.453395, 1435.700000, 2632.200000, 4076.700000, 764.853525,   1.039000, 5421.844006, 552.533682
Outstanding requests per worker:
10939 11120 10689 11134 11074 11046 12850 36897 
count  394914
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79984.9,      399925,     359650,      40275,     275907,      83743, 1607.456020, 2527.900000, 3780.500000, 6000.000000, 868.352089, 408.134997, 6325.067997, 592.548909
Outstanding requests per worker:
20475 20784 20073 20644 20542 20571 22324 46673 
count  383270
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79524.9,      397625,     357416,      40209,     282594,      74822, 2421.367235, 3351.900000, 4586.300000, 6000.000000, 893.392460, 928.582013, 7644.017220, 618.170804
Outstanding requests per worker:
30099 30373 30073 30589 30551 30389 32036 56574 
count  370278
count  370278
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79347.1,      396736,     357228,      39508,     287599,      69629, 3254.667372, 4203.000000, 6000.000000, 7000.000000, 914.564182, 1536.216974, 8632.287979, 634.411026
Outstanding requests per worker:
39951 40506 40076 40442 40240 40288 42234 66459 
count  353238
count  353238
count  353238
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78958.7,      394794,     354681,      40113,     289674,      65007, 4099.919424, 6000.000000, 7000.000000, 8000.000000, 940.770604, 2083.750963, 9468.672752, 646.678362
Outstanding requests per worker:
50148 50558 50200 50435 50656 50523 52436 76698 
count  264651
count  264651
count  264651
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78886.5,      394433,     355160,      39273,     293206,      61954, 4955.804209, 6000.000000, 8000.000000, 9000.000000, 968.075013, 2977.453947, 10287.708282, 657.282915
Outstanding requests per worker:
60367 60906 60325 61040 60716 60649 62738 86740 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:50   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6208 pts/0    S+   20:50   0:00 /usr/lib/linux
memcache      8  141  0.0 248256 113728 pts/0   Sl+  20:50   1:07 memcached -t 2
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  20:51   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

       10089051957      instructions:u            #    0.74  insn per cycle         
       13583654941      cycles:u                                                    

      47.741169560 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 100000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 100000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 100000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 100000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 100000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 100000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 100000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 100000 cpus 8
meanInterarrival 80
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2125459968
starting receive base loop
num_worker_connections 64
Creating worker on tid 1529606656
starting receive base loop
num_worker_connections 64
Creating worker on tid 933687808
starting receive base loop
num_worker_connections 64
Creating worker on tid 337768960
starting receive base loop
num_worker_connections 64
Creating worker on tid 4036817408
starting receive base loop
num_worker_connections 64
Creating worker on tid 3440898560
starting receive base loop
num_worker_connections 64
Creating worker on tid 2847601152
starting receive base loop
Created 512 connections total
Creating worker on tid 2251682304
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576099083.097507,       0.0,      255977,     230179,      25798,     150222,      79957,  88.783097, 210.200000, 269.900000, 1018.700000, 171.154970,   0.000000, 1963.232994, 467.144896
Outstanding requests per worker:
2615 2610 2711 2666 2381 2645 7474 24555 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79811.5,      399058,     359448,      39610,     262737,      96711, 925.778939, 1849.700000, 3370.500000, 4889.600000, 956.752800,   1.332000, 5595.004082, 552.821209
Outstanding requests per worker:
13377 13673 13430 13777 13385 13759 18047 49194 
count  388785
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80177.1,      400886,     360917,      39969,     276838,      84079, 1938.736477, 3298.800000, 4497.700000, 6000.000000, 997.274939, 496.609986, 6845.069885, 592.072654
Outstanding requests per worker:
25747 25878 25567 26260 25666 26307 30601 61767 
count  366796
count  366796
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79817.5,      399088,     358935,      40153,     283250,      75685, 2975.410641, 4561.800000, 6000.000000, 7000.000000, 1083.262779, 1293.053985, 8175.010681, 616.640581
Outstanding requests per worker:
38528 38528 38409 38910 38375 38823 43066 74116 
count  347755
count  347755
count  347755
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79440.5,      397203,     357430,      39773,     287018,      70412, 3993.720405, 6000.000000, 7000.000000, 8000.000000, 1099.825026, 1999.340057, 9240.685463, 632.492768
Outstanding requests per worker:
51624 51406 50978 51751 51072 51804 55811 87161 
count  252217
count  252217
count  252217
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79221.9,      396110,     356445,      39665,     290870,      65575, 5029.523347, 7000.000000, 8000.000000, 9000.000000, 1116.949438, 2889.471054, 10189.901352, 646.676079
Outstanding requests per worker:
64696 64469 63975 64667 64157 64802 68696 100088 
count  38266
count  38266
count  38266
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79070.7,      395354,     355705,      39649,     293080,      62625, 6071.013734, 8000.000000, 9000.000000, 10000.000000, 1138.117317, 3770.987034, 11087.778091, 655.667193
Outstanding requests per worker:
77546 77575 77010 77796 77207 77943 82045 113128 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:51   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6272 pts/0    S+   20:51   0:00 /usr/lib/linux
memcache      8  141  0.0 248256 113088 pts/0   Sl+  20:51   1:07 memcached -t 2
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  20:52   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

       10082251149      instructions:u            #    0.74  insn per cycle         
       13549068080      cycles:u                                                    

      48.059612018 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 105000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 105000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 105000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 105000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 105000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 105000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 105000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 105000 cpus 8
meanInterarrival 76
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2404905472
starting receive base loop
num_worker_connections 64
Creating worker on tid 1806103040
starting receive base loop
num_worker_connections 64
Creating worker on tid 1210184192
starting receive base loop
num_worker_connections 64
Creating worker on tid 614265344
starting receive base loop
num_worker_connections 64
Creating worker on tid 18346496
starting receive base loop
num_worker_connections 64
Creating worker on tid 3720016384
starting receive base loop
num_worker_connections 64
Creating worker on tid 3124097536
starting receive base loop
Created 512 connections total
Creating worker on tid 2528178688
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576099135.097559,       0.0,      268403,     241538,      26865,     158293,      83245,  84.363667, 191.500000, 244.500000, 1024.900000, 176.224231,   0.000000, 2090.751886, 468.966573
Outstanding requests per worker:
2748 2763 2699 2706 2612 2715 15329 26318 
count  391497
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80506.3,      402532,     362680,      39852,     264866,      97814, 1019.964576, 2310.900000, 4161.100000, 6000.000000, 1137.713090,   1.255000, 6319.826126, 552.913039
Outstanding requests per worker:
15126 15114 15196 15194 15140 14886 27840 63225 
count  377780
count  377780
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80391.7,      401959,     361583,      40376,     277458,      84125, 2249.089444, 4149.200000, 6000.000000, 7000.000000, 1207.663931, 608.730972, 7448.255062, 593.259985
Outstanding requests per worker:
30453 30658 30738 30817 30947 30533 43003 78985 
count  345575
count  345575
count  345575
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80018.5,      400093,     360344,      39749,     284363,      75981, 3492.120118, 6000.000000, 7000.000000, 8000.000000, 1308.926554, 1658.352971, 8875.559807, 617.270922
Outstanding requests per worker:
46329 46411 46683 46693 46734 46367 58509 94695 
count  313044
count  313044
count  313044
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79755.7,      398779,     359049,      39730,     288660,      70389, 4705.807282, 8000.000000, 9000.000000, 10000.000000, 1357.187068, 2606.030941, 10173.336983, 633.223680
Outstanding requests per worker:
62278 62412 62483 62529 62588 62369 74652 110740 
count  82445
count  82445
count  82445
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79471.5,      397358,     357698,      39660,     291589,      66109, 5926.990461, 9000.000000, 10000.000000, 11000.000000, 1374.490834, 3521.651030, 11479.766846, 645.958459
Outstanding requests per worker:
78012 78555 78641 78901 78622 78491 90895 126935 
count  394
count  394
count  394
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79419.1,      397096,     357626,      39470,     295118,      62508, 7156.432338, 10000.000000, 11000.000000, 12000.000000, 1380.294430, 4371.249199, 12618.180275, 655.781165
Outstanding requests per worker:
94130 94934 94713 95047 94983 94610 106841 143086 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:52   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6272 pts/0    S+   20:52   0:00 /usr/lib/linux
memcache      8  141  0.0 247232 110720 pts/0   Sl+  20:52   1:08 memcached -t 2
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  20:53   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

       10155781368      instructions:u            #    0.74  insn per cycle         
       13730693441      cycles:u                                                    

      47.999924582 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 110000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 110000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 110000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 110000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 110000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 110000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 110000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 110000 cpus 8
meanInterarrival 72
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2029449728
starting receive base loop
num_worker_connections 64
Creating worker on tid 1435693568
starting receive base loop
num_worker_connections 64
Creating worker on tid 842396160
starting receive base loop
num_worker_connections 64
Creating worker on tid 246477312
starting receive base loop
num_worker_connections 64
Creating worker on tid 3945525760
starting receive base loop
num_worker_connections 64
Creating worker on tid 3349606912
starting receive base loop
num_worker_connections 64
Creating worker on tid 2753688064
starting receive base loop
Created 512 connections total
Creating worker on tid 2157769216
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576099186.097610,       0.0,      274019,     246880,      27139,     161586,      85294,  99.723039, 227.300000, 290.700000, 1030.200000, 182.909314,   0.000000, 2094.136953, 468.684470
Outstanding requests per worker:
3373 3381 3467 3468 3346 3562 20781 27779 
count  382132
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79779.7,      398899,     358702,      40197,     262455,      96247, 1114.814660, 2223.700000, 3414.700000, 7000.000000, 1204.440320,  14.452000, 6779.307842, 553.643219
Outstanding requests per worker:
18237 18332 18454 18089 18361 18201 36986 53605 
count  372938
count  372938
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   81078.7,      405394,     365083,      40311,     280347,      84736, 2601.546885, 4608.800000, 6000.000000, 8000.000000, 1306.823021, 765.743971, 8515.917778, 593.691029
Outstanding requests per worker:
37658 37851 38055 37708 37741 37852 56743 92456 
count  330834
count  330834
count  330834
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79526.5,      397633,     357439,      40194,     282139,      75300, 3981.174059, 6000.000000, 7000.000000, 9000.000000, 1242.007922, 2090.220928, 9102.638245, 617.188393
Outstanding requests per worker:
57488 57505 57704 57443 57511 57541 76464 112396 
count  184599
count  184599
count  184599
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79177.3,      395887,     356491,      39396,     286603,      69888, 5522.556984, 9000.000000, 10000.000000, 11000.000000, 1473.778579, 3350.774050, 11445.235252, 633.247726
Outstanding requests per worker:
77434 77465 77626 77383 77641 77517 96515 132196 
count  641
count  641
count  641
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78853.1,      394266,     354986,      39280,     289611,      65375, 6964.487053, 10000.000000, 11000.000000, 12000.000000, 1496.985062, 4757.895947, 13026.851654, 646.710817
Outstanding requests per worker:
97483 97826 97791 97664 98051 97409 116493 152387 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78258.7,      391294,     352078,      39216,     290078,      62000, 8424.091924, 11000.000000, 12000.000000, 14000.000000, 1501.885212, 5981.575966, 14737.028122, 655.757207
Outstanding requests per worker:
117994 118545 118488 118306 118344 117837 136962 172954 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  20:53   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6272 pts/0    S+   20:53   0:00 /usr/lib/linux
memcache      7  142  0.0 248256 110848 pts/0   Sl+  20:53   1:08 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  20:54   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

       10153342910      instructions:u            #    0.76  insn per cycle         
       13438752286      cycles:u                                                    

      47.561292055 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 115000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 115000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 115000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 115000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 115000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 115000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 115000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 115000 cpus 8
meanInterarrival 69
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1924198912
starting receive base loop
num_worker_connections 64
Creating worker on tid 1328280064
starting receive base loop
num_worker_connections 64
Creating worker on tid 732361216
starting receive base loop
num_worker_connections 64
Creating worker on tid 136442368
starting receive base loop
num_worker_connections 64
Creating worker on tid 3835490816
starting receive base loop
num_worker_connections 64
Creating worker on tid 3239571968
starting receive base loop
num_worker_connections 64
Creating worker on tid 2646274560
starting receive base loop
Created 512 connections total
Creating worker on tid 2050355712
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576099238.097662,       0.0,      280901,     252715,      28186,     165683,      87032, 105.230114, 240.400000, 308.900000, 1089.900000, 185.832680,   0.000000, 2097.389936, 469.824387
Outstanding requests per worker:
3940 3763 3817 3930 3762 4564 24954 28986 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78197.1,      390986,     351975,      39011,     257589,      94386, 1035.069991, 1928.900000, 2915.700000, 4094.300000, 866.854747,  76.203004, 6750.912189, 554.111855
Outstanding requests per worker:
20563 20361 20189 20469 20145 20940 45540 54017 
count  359336
count  359336
count  359336
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   83287.7,      416439,     375267,      41172,     287880,      87387, 2972.257774, 6000.000000, 7000.000000, 8000.000000, 1574.832364, 897.946000, 8819.141388, 592.087626
Outstanding requests per worker:
43093 42950 42881 42833 42771 43357 67782 104150 
count  321217
count  321217
count  321217
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79828.7,      399144,     359324,      39820,     283943,      75381, 4275.338647, 7000.000000, 7000.000000, 8000.000000, 1171.691201, 2320.014000, 9277.297974, 617.006273
Outstanding requests per worker:
65960 65374 65460 65484 65341 65587 90567 126682 
count  92774
count  92774
count  92774
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78938.5,      394693,     355220,      39473,     285472,      69748, 6026.164721, 9000.000000, 10000.000000, 11000.000000, 1518.672719, 3732.798100, 11911.398888, 633.023132
Outstanding requests per worker:
89091 88547 88536 88665 88368 88630 113488 149548 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79120.7,      395604,     356086,      39518,     291044,      65042, 7645.920545, 11000.000000, 12000.000000, 13000.000000, 1580.352358, 5050.620079, 13790.511131, 648.030818
Outstanding requests per worker:
111899 111567 111571 111719 111409 111960 136550 173027 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   77706.7,      388534,     349978,      38556,     289104,      60874, 9263.886367, 13000.000000, 13000.000000, 15000.000000, 1597.031450, 6593.822002, 15571.181297, 657.884316
Outstanding requests per worker:
135762 135267 135277 135793 135609 135845 160619 196776 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:54   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   20:54   0:00 /usr/lib/linux
memcache      7  142  0.0 249280 115008 pts/0   Sl+  20:54   1:08 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  20:54   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

       10143144639      instructions:u            #    0.76  insn per cycle         
       13405341430      cycles:u                                                    

      48.211380821 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 12000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 12000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 12000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 12000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 12000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 12000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 12000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 12000 cpus 8
meanInterarrival 666
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2227958272
starting receive base loop
num_worker_connections 64
Creating worker on tid 1628959232
starting receive base loop
num_worker_connections 64
Creating worker on tid 1035661824
starting receive base loop
num_worker_connections 64
Creating worker on tid 439742976
starting receive base loop
num_worker_connections 64
Creating worker on tid 4138791424
starting receive base loop
num_worker_connections 64
Creating worker on tid 3542872576
starting receive base loop
num_worker_connections 64
Creating worker on tid 2946953728
starting receive base loop
Created 512 connections total
Creating worker on tid 2351034880
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576099289.097713,       0.0,       36848,      33168,       3680,      19001,      14167,   0.639877,   0.104100,   0.124100,   7.400000,   6.308946,   0.000000, 124.617003, 380.780753
Outstanding requests per worker:
0 0 0 0 0 1 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12012.6,       60063,      54032,       6031,      33975,      20057,   0.090265,   0.103100,   0.122100,   0.235100,   0.027873,   0.067000,   0.557000, 441.179634
Outstanding requests per worker:
0 0 0 0 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12012.8,       60064,      54059,       6005,      35804,      18255,   0.090668,   0.102100,   0.121100,   0.274100,   0.033258,   0.067000,   0.751000, 477.265210
Outstanding requests per worker:
0 0 0 0 0 0 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12012.8,       60064,      54120,       5944,      37033,      17087,   0.090567,   0.103100,   0.121100,   0.267100,   0.032363,   0.067000,   0.729000, 501.489763
Outstanding requests per worker:
0 0 0 0 0 1 0 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12013.6,       60068,      53930,       6138,      37709,      16221,   0.090891,   0.103100,   0.122100,   0.277100,   0.033387,   0.068000,   0.880000, 518.824606
Outstanding requests per worker:
0 0 1 0 0 0 0 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12012.4,       60062,      53988,       6074,      38247,      15741,   0.090691,   0.103100,   0.121100,   0.265100,   0.032903,   0.068000,   0.829000, 528.186227
Outstanding requests per worker:
0 0 0 1 1 0 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   12012.6,       60063,      54124,       5939,      38953,      15171,   0.090714,   0.102100,   0.121100,   0.274100,   0.032727,   0.068000,   0.641000, 540.042772
Outstanding requests per worker:
0 0 0 1 1 0 0 0 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:54   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   20:54   0:00 /usr/lib/linux
memcache      7 35.8  0.0 182720 31680 pts/0    Sl+  20:54   0:16 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  20:55   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        1530320800      instructions:u            #    0.46  insn per cycle         
        3347119630      cycles:u                                                    

      47.619907236 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 125000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 125000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 125000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 125000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 125000 cpus 8
meanInterarrival 64
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1966338560
starting receive base loop
num_worker_connections 64
Creating worker on tid 1371206144
starting receive base loop
num_worker_connections 64
Creating worker on tid 775287296
starting receive base loop
num_worker_connections 64
Creating worker on tid 179368448
starting receive base loop
num_worker_connections 64
Creating worker on tid 3878416896
starting receive base loop
num_worker_connections 64
Creating worker on tid 3282498048
starting receive base loop
num_worker_connections 64
Creating worker on tid 2686579200
starting receive base loop
Created 512 connections total
Creating worker on tid 2090660352
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576099341.097765,       0.0,      281146,     253088,      28058,     165111,      87977, 121.810260, 269.300000, 469.800000, 1152.800000, 208.783166,   0.000000, 2052.793026, 467.762826
Outstanding requests per worker:
3761 3795 3773 3719 4687 14858 32669 31250 
count  389950
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79453.1,      397266,     357651,      39615,     262402,      95249, 1200.334040, 2740.400000, 4356.800000, 6000.000000, 1153.808606,   6.252000, 5871.208191, 555.680610
Outstanding requests per worker:
22477 22408 22470 22417 23389 33684 70200 53809 
count  333951
count  333951
count  333951
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80464.9,      402325,     361835,      40490,     278342,      83493, 3396.922558, 8000.000000, 9000.000000, 10000.000000, 2087.510062, 1039.077044, 10276.616096, 595.283441
Outstanding requests per worker:
50472 50273 50399 50417 51218 61532 98092 96435 
count  260905
count  260905
count  260905
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   76574.5,      382873,     344358,      38515,     272179,      72179, 4844.981627, 7000.000000, 8000.000000, 10000.000000, 1371.809725, 2536.283970, 11045.983315, 618.849427
Outstanding requests per worker:
80525 80328 80392 80493 80932 91354 120626 165239 
count  7559
count  7559
count  7559
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   76710.5,      383553,     345360,      38193,     278126,      67234, 6884.966938, 10000.000000, 10000.000000, 11000.000000, 1453.826992, 4347.362995, 11829.475403, 634.438013
Outstanding requests per worker:
109964 110094 109944 110231 110640 121318 157121 176358 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   76758.3,      383792,     345519,      38273,     282439,      63080, 9011.287154, 12000.000000, 13000.000000, 14000.000000, 1707.416736, 6243.328094, 14365.531921, 647.855171
Outstanding requests per worker:
140207 140210 140679 141072 140824 151802 187838 218581 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75659.9,      378300,     340322,      37978,     280689,      59633, 11159.357046, 15000.000000, 16000.000000, 18000.000000, 2077.205572, 8131.529808, 17849.626541, 656.973663
Outstanding requests per worker:
171782 171615 172101 172096 172046 182924 219052 221359 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:55   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6208 pts/0    S+   20:55   0:00 /usr/lib/linux
memcache      8  141  0.0 248256 113024 pts/0   Sl+  20:55   1:08 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:56   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        9971520443      instructions:u            #    0.74  insn per cycle         
       13509327012      cycles:u                                                    

      47.699640184 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 130000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 130000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 130000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 130000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 130000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 130000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 130000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 130000 cpus 8
meanInterarrival 61
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2213605888
starting receive base loop
num_worker_connections 64
Creating worker on tid 1620898304
starting receive base loop
num_worker_connections 64
Creating worker on tid 1024979456
starting receive base loop
num_worker_connections 64
Creating worker on tid 431682048
starting receive base loop
num_worker_connections 64
Creating worker on tid 4130730496
starting receive base loop
num_worker_connections 64
Creating worker on tid 3534811648
starting receive base loop
num_worker_connections 64
Creating worker on tid 2938892800
starting receive base loop
Created 512 connections total
Creating worker on tid 2342973952
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576099393.097817,       0.0,      287033,     258094,      28939,     169461,      88633, 147.213612, 322.500000, 651.400000, 1191.700000, 236.111342,   0.000000, 2085.134029, 471.943180
Outstanding requests per worker:
4803 4726 4413 4635 7093 20039 34790 32788 
count  388703
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80646.9,      403235,     363020,      40215,     266938,      96082, 1344.655369, 2944.500000, 4788.000000, 6000.000000, 1233.052111,  86.052001, 6093.978882, 557.499518
Outstanding requests per worker:
25926 25958 25563 26013 27758 41168 78720 54320 
count  330981
count  330981
count  330981
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79977.7,      399889,     359768,      40121,     276961,      82807, 3586.589482, 9000.000000, 9000.000000, 10000.000000, 2060.197318, 1145.002961, 10631.445885, 595.122932
Outstanding requests per worker:
57126 57380 57006 57105 59360 72739 109777 88358 
count  208332
count  208332
count  208332
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   77962.3,      389812,     350852,      38960,     277236,      73616, 5214.136007, 8000.000000, 9000.000000, 11000.000000, 1436.217575, 2840.743065, 11907.060623, 618.157975
Outstanding requests per worker:
90818 90878 90520 91090 93102 106279 143443 152940 
count  67
count  67
count  67
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75414.1,      377071,     339159,      37912,     273056,      66103, 7347.074927, 10000.000000, 11000.000000, 12000.000000, 1408.282844, 4883.621216, 12441.193581, 633.582220
Outstanding requests per worker:
124776 123166 124317 123729 126312 140045 177166 180875 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75920.3,      379602,     341429,      38173,     278656,      62773, 9561.762634, 12000.000000, 13000.000000, 14000.000000, 1504.211646, 6972.815037, 14671.415329, 646.426053
Outstanding requests per worker:
159471 159388 158146 159291 161204 174867 212092 215183 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   73442.3,      367212,     330269,      36943,     272321,      57948, 11878.638531, 15000.000000, 16000.000000, 17000.000000, 1789.735551, 8925.173759, 17502.393723, 655.172508
Outstanding requests per worker:
193150 194253 191663 193825 196444 210059 226053 224537 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:56   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   20:56   0:00 /usr/lib/linux
memcache      7  141  0.0 247232 109056 pts/0   Sl+  20:56   1:08 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  20:57   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        9971058943      instructions:u            #    0.75  insn per cycle         
       13352616470      cycles:u                                                    

      48.260141009 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 135000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 135000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 135000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 135000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 135000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 135000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 135000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 135000 cpus 8
meanInterarrival 59
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1774187008
starting receive base loop
num_worker_connections 64
Creating worker on tid 1177940480
starting receive base loop
num_worker_connections 64
Creating worker on tid 582021632
starting receive base loop
num_worker_connections 64
Creating worker on tid 4281070080
starting receive base loop
num_worker_connections 64
Creating worker on tid 3685151232
starting receive base loop
num_worker_connections 64
Creating worker on tid 3089232384
starting receive base loop
num_worker_connections 64
Creating worker on tid 2493313536
starting receive base loop
Created 512 connections total
Creating worker on tid 1897394688
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576099444.097868,       0.0,      291883,     262708,      29175,     172977,      89731, 174.402533, 402.000000, 784.600000, 1323.500000, 269.257929,   0.000000, 2095.366001, 473.082182
Outstanding requests per worker:
5384 5227 5375 5286 10179 24570 36476 33900 
count  380836
count  380836
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80858.1,      404291,     363927,      40364,     267634,      96293, 1458.274520, 3061.500000, 6000.000000, 6000.000000, 1297.205711, 138.863996, 6454.408169, 557.873203
Outstanding requests per worker:
28043 28052 28376 28288 33114 48552 67164 52694 
count  323360
count  323360
count  323360
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79368.5,      396843,     357267,      39576,     275036,      82231, 3808.226582, 9000.000000, 9000.000000, 10000.000000, 2090.058132, 1206.359029, 10866.489410, 596.427498
Outstanding requests per worker:
62407 62410 62835 63025 67588 82929 121488 86568 
count  165112
count  165112
count  165112
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75793.5,      378968,     341010,      37958,     269597,      71413, 5373.861649, 8000.000000, 8000.000000, 11000.000000, 1334.829764, 2627.990007, 12380.139351, 618.523838
Outstanding requests per worker:
98771 99064 99205 99359 103923 118658 152881 139913 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75526.7,      377634,     339698,      37936,     273638,      66060, 7741.808257, 10000.000000, 11000.000000, 12000.000000, 1379.693654, 5198.823929, 13019.152641, 635.155632
Outstanding requests per worker:
135883 135365 136153 135065 137680 156100 195009 145048 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   73436.7,      367184,     330490,      36694,     269455,      61035, 9941.901866, 12000.000000, 13000.000000, 14000.000000, 1318.529623, 7258.135796, 14547.543526, 645.438119
Outstanding requests per worker:
173970 174237 174240 174430 178870 194429 224300 189166 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   77079.7,      385399,     346773,      38626,     286139,      60634, 12440.591082, 15000.000000, 16000.000000, 17000.000000, 1560.660460, 9529.051781, 17234.140396, 655.797825
Outstanding requests per worker:
212284 212359 212489 212542 216862 231882 236940 211723 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:57   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6208 pts/0    S+   20:57   0:00 /usr/lib/linux
memcache      8  142  0.0 248256 111040 pts/0   Sl+  20:57   1:08 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  20:58   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        9974634287      instructions:u            #    0.74  insn per cycle         
       13536593275      cycles:u                                                    

      47.920546024 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 140000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 140000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 140000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 140000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 140000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 140000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 140000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 140000 cpus 8
meanInterarrival 57
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2660299264
starting receive base loop
num_worker_connections 64
Creating worker on tid 2066477568
starting receive base loop
num_worker_connections 64
Creating worker on tid 1470558720
starting receive base loop
num_worker_connections 64
Creating worker on tid 874639872
starting receive base loop
num_worker_connections 64
Creating worker on tid 278721024
starting receive base loop
num_worker_connections 64
Creating worker on tid 3977769472
starting receive base loop
num_worker_connections 64
Creating worker on tid 3384472064
starting receive base loop
Created 512 connections total
Creating worker on tid 2788553216
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576099496.097920,       0.0,      300775,     270997,      29778,     178768,      92229, 195.593822, 455.800000, 904.100000, 1458.400000, 296.353850,   0.000000, 2124.497890, 473.948745
Outstanding requests per worker:
6064 6226 6264 6081 13067 27767 37932 35089 
count  379143
count  379143
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   81342.5,      406713,     366230,      40483,     270367,      95863, 1559.697444, 3156.100000, 6000.000000, 6000.000000, 1307.981699, 146.365002, 6305.021763, 560.556912
Outstanding requests per worker:
31174 31690 31352 31245 38243 54226 66349 52813 
count  323364
count  323364
count  323364
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78112.3,      390562,     351015,      39547,     270313,      80702, 3870.063899, 8000.000000, 9000.000000, 10000.000000, 1968.882031, 1354.882002, 10696.057320, 595.762378
Outstanding requests per worker:
67934 68611 68257 68304 75505 91043 127035 86738 
count  132992
count  132992
count  132992
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78903.5,      394518,     354917,      39601,     279888,      75029, 5694.508987, 8000.000000, 9000.000000, 11000.000000, 1433.969070, 2674.962997, 12311.297417, 616.238428
Outstanding requests per worker:
107296 107853 107636 107609 113887 126342 167978 162676 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   73754.7,      368774,     332080,      36694,     267389,      64691, 7981.514070, 10000.000000, 11000.000000, 12000.000000, 1188.475402, 5513.483047, 12382.732391, 634.942460
Outstanding requests per worker:
142181 144848 147612 147891 154269 169725 202918 171670 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75683.1,      378416,     340424,      37992,     277378,      63046, 10491.955439, 13000.000000, 14000.000000, 15000.000000, 1408.616093, 7707.564831, 15222.807884, 645.841979
Outstanding requests per worker:
188138 189318 185537 185266 195932 211759 244553 196409 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   71969.3,      359847,     323699,      36148,     266847,      56852, 12867.203483, 16000.000000, 17000.000000, 18000.000000, 1546.323212, 9825.744629, 17982.246399, 656.627435
Outstanding requests per worker:
228996 230712 230103 230203 235601 252361 247775 229316 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:58   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6272 pts/0    S+   20:58   0:00 /usr/lib/linux
memcache      7  142  0.0 248256 113344 pts/0   Sl+  20:58   1:08 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  20:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        9985728671      instructions:u            #    0.76  insn per cycle         
       13194934561      cycles:u                                                    

      48.150285657 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 145000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 145000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 145000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 145000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 145000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 145000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 145000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 145000 cpus 8
meanInterarrival 55
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2539123200
starting receive base loop
num_worker_connections 64
Creating worker on tid 1940320768
starting receive base loop
num_worker_connections 64
Creating worker on tid 1344401920
starting receive base loop
num_worker_connections 64
Creating worker on tid 748483072
starting receive base loop
num_worker_connections 64
Creating worker on tid 152564224
starting receive base loop
num_worker_connections 64
Creating worker on tid 3854234112
starting receive base loop
num_worker_connections 64
Creating worker on tid 3258315264
starting receive base loop
Created 512 connections total
Creating worker on tid 2662396416
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576099547.097971,       0.0,      294067,     264725,      29342,     173530,      91195, 211.963625, 485.400000, 1053.400000, 1619.100000, 332.790456,   0.000000, 2089.970112, 470.257667
Outstanding requests per worker:
6671 6652 6464 6624 17411 31722 38580 36364 
count  380303
count  380303
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   81195.9,      405980,     365188,      40792,     268160,      97028, 1630.459803, 3206.000000, 6000.000000, 7000.000000, 1330.013126, 200.452000, 6662.664890, 556.209421
Outstanding requests per worker:
33865 33826 33818 33864 44420 62106 58863 51782 
count  308114
count  308114
count  308114
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   78218.9,      391095,     351988,      39107,     270687,      81301, 4079.508689, 8000.000000, 10000.000000, 10000.000000, 2036.617757, 1483.381033, 10624.615669, 594.257554
Outstanding requests per worker:
74368 73960 73988 74000 84630 102229 132856 87570 
count  110501
count  110501
count  110501
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   74504.9,      372525,     335444,      37081,     265084,      70360, 5816.448168, 8000.000000, 9000.000000, 12000.000000, 1456.176199, 2426.726103, 12620.479584, 618.381781
Outstanding requests per worker:
117015 116862 116762 115004 127667 136304 174482 149155 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   76019.7,      380099,     341895,      38204,     274623,      67272, 8392.898613, 11000.000000, 12000.000000, 13000.000000, 1366.889700, 5813.695908, 13038.106918, 633.389757
Outstanding requests per worker:
150621 158977 155106 158519 170246 184807 203785 171541 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75873.9,      379370,     341623,      37747,     278349,      63274, 10955.256978, 14000.000000, 14000.000000, 15000.000000, 1438.040086, 8165.913582, 15946.640015, 645.703916
Outstanding requests per worker:
193487 204863 200010 202113 209972 233392 241105 209600 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68755.3,      343777,     309455,      34322,     254851,      54604, 13502.731444, 16000.000000, 17000.000000, 18000.000000, 1479.028957, 10423.575401, 18085.613251, 655.771679
Outstanding requests per worker:
250812 250164 248374 219429 258374 278494 263344 212432 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:59   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   20:59   0:00 /usr/lib/linux
memcache      7  141  0.0 247232 108928 pts/0   Sl+  20:59   1:08 memcached -t 2
memcache     16  0.0  0.0   6656  4416 pts/1    Rs+  21:00   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        9898400038      instructions:u            #    0.73  insn per cycle         
       13475211993      cycles:u                                                    

      47.960302247 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 150000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 150000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 150000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 150000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 150000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 150000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 150000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 150000 cpus 8
meanInterarrival 53
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1992159744
starting receive base loop
num_worker_connections 64
Creating worker on tid 1395388928
starting receive base loop
num_worker_connections 64
Creating worker on tid 799470080
starting receive base loop
num_worker_connections 64
Creating worker on tid 203551232
starting receive base loop
num_worker_connections 64
Creating worker on tid 3902599680
starting receive base loop
num_worker_connections 64
Creating worker on tid 3306680832
starting receive base loop
num_worker_connections 64
Creating worker on tid 2713383424
starting receive base loop
Created 512 connections total
Creating worker on tid 2117464576
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576099599.098023,       0.0,      298647,     268862,      29785,     177148,      91714, 232.616790, 514.000000, 1176.400000, 1800.300000, 368.889671,   0.000000, 2193.556070, 472.740354
Outstanding requests per worker:
7158 7301 7225 7146 22398 35516 40232 37737 
count  383216
count  383216
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80714.7,      403574,     363660,      39914,     267311,      96349, 1705.330068, 3203.500000, 6000.000000, 7000.000000, 1327.242565, 119.806997, 6730.967999, 557.368223
Outstanding requests per worker:
36822 36909 37029 36884 52213 69873 55916 50276 
count  299058
count  299058
count  299058
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79798.7,      398994,     359117,      39877,     276127,      82990, 4317.876619, 8000.000000, 10000.000000, 10000.000000, 2062.603118, 1505.736947, 10863.623619, 595.197086
Outstanding requests per worker:
80355 80310 80282 80110 95250 113248 123465 85880 
count  84098
count  84098
count  84098
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   71087.9,      355440,     320028,      35412,     252603,      67425, 6085.255222, 8000.000000, 10000.000000, 12000.000000, 1560.110705, 2105.798960, 12915.673256, 617.003225
Outstanding requests per worker:
124767 122026 123451 125549 135644 147369 179328 141196 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   74738.9,      373695,     336145,      37550,     270234,      65911, 8603.083049, 11000.000000, 11000.000000, 12000.000000, 1182.079670, 6190.861225, 12374.244690, 633.752274
Outstanding requests per worker:
169304 165720 166845 162386 179539 185432 223121 155988 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   73855.5,      369278,     332323,      36955,     271101,      61222, 11288.941510, 14000.000000, 14000.000000, 15000.000000, 1235.837038, 8599.265099, 15088.651657, 645.904172
Outstanding requests per worker:
221095 203210 216092 212989 219265 215679 261517 207808 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68390.9,      341955,     307695,      34260,     253586,      54109, 13787.157985, 16000.000000, 17000.000000, 19000.000000, 1376.948223, 11053.271294, 19082.546234, 655.100171
Outstanding requests per worker:
274787 255145 274325 274701 287420 282385 265660 242953 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:00   0:00 bash docker-en
memcache      6  0.0  0.0  62208  6208 pts/0    S+   21:00   0:00 /usr/lib/linux
memcache      7  144  0.0 248256 110080 pts/0   Sl+  21:00   1:08 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  21:00   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        9775659507      instructions:u            #    0.75  insn per cycle         
       13117745085      cycles:u                                                    

      47.881406415 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 155000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 155000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 155000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 155000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 155000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 155000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 155000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 155000 cpus 8
meanInterarrival 51
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 1699475968
starting receive base loop
num_worker_connections 64
Creating worker on tid 1102770688
starting receive base loop
num_worker_connections 64
Creating worker on tid 506851840
starting receive base loop
num_worker_connections 64
Creating worker on tid 4205900288
starting receive base loop
num_worker_connections 64
Creating worker on tid 3609981440
starting receive base loop
num_worker_connections 64
Creating worker on tid 3014062592
starting receive base loop
num_worker_connections 64
Creating worker on tid 2418143744
starting receive base loop
Created 512 connections total
Creating worker on tid 1822224896
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576099650.098074,       0.0,      305440,     274524,      30916,     181128,      93396, 255.064668, 574.900000, 1280.000000, 1906.500000, 394.943866,   0.000000, 2382.432938, 475.497395
Outstanding requests per worker:
8642 8695 8405 8646 27184 38270 42001 39216 
count  385040
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80241.5,      401208,     361168,      40040,     266333,      94835, 1800.896661, 3314.900000, 4190.100000, 7000.000000, 1291.640545, 153.905004, 6936.900139, 560.056295
Outstanding requests per worker:
41454 41114 41537 41859 60196 76934 52690 51947 
count  296285
count  296285
count  296285
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   79422.3,      397112,     357376,      39736,     275533,      81843, 4493.086883, 8000.000000, 10000.000000, 11000.000000, 2114.146207, 1650.557041, 11172.245979, 596.620478
Outstanding requests per worker:
88171 88186 88526 88908 106773 110919 109400 88231 
count  58098
count  58098
count  58098
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   72349.5,      361748,     325648,      36100,     257130,      68518, 6381.530429, 9000.000000, 10000.000000, 12000.000000, 1513.185943, 2712.100983, 13888.216972, 617.450268
Outstanding requests per worker:
129641 131366 132633 137835 148353 160302 150772 150136 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   72367.7,      361839,     325585,      36254,     262040,      63545, 8965.402831, 11000.000000, 12000.000000, 13000.000000, 1239.327287, 5742.379189, 12901.656151, 633.878806
Outstanding requests per worker:
173759 176781 173301 181921 189970 203743 184365 168880 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   73255.7,      366279,     329531,      36748,     268599,      60932, 11586.150129, 13000.000000, 14000.000000, 15000.000000, 1095.388371, 8748.626709, 15145.639420, 645.493195
Outstanding requests per worker:
215100 230107 225928 237931 258905 218884 246028 191076 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65917.1,      329586,     296557,      33029,     244428,      52129, 14142.899781, 16000.000000, 17000.000000, 18000.000000, 1083.554669, 11512.157440, 17866.041183, 655.517081
Outstanding requests per worker:
298509 295183 280754 297312 315673 218611 277199 214937 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:00   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6272 pts/0    S+   21:00   0:00 /usr/lib/linux
memcache      8  142  0.0 247232 110208 pts/0   Sl+  21:00   1:08 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:01   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        9791209408      instructions:u            #    0.75  insn per cycle         
       13123500276      cycles:u                                                    

      48.261959171 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 65536 keys, 512 conns, 8 threads, 160000 rps'
==> Bench: 65536 keys, 512 conns, 8 threads, 160000 rps
++ echo '512 + 128'
++ bc
+ max_conns=640
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 160000 -k 65536 -c 512 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 640'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id f67ee34de96c76fd953a808a0318976b8f5336fe8e3fdcf7484a8b149a17d162 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640'
Starting server with perf args -e instructions,cycles server args -t 2 -m 4096 -n 550 -c 640
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 640
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e instructions,cycles memcached -t 2 -m 4096 -n 550 -c 640
+ echo 'Starting client with -r 160000 -k 65536 -c 512 -f 512 -w 8'
Starting client with -r 160000 -k 65536 -c 512 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 160000 -k 65536 -c 512 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 160000 -k 65536 -c 512 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.208.2
Loading key value file...created uniform distribution 65536
rps 160000 cpus 8
meanInterarrival 50
num_worker_connections 64
num_worker_connections 64
Creating worker on tid 2426860032
starting receive base loop
num_worker_connections 64
Creating worker on tid 1830285824
starting receive base loop
num_worker_connections 64
Creating worker on tid 1236988416
starting receive base loop
num_worker_connections 64
Creating worker on tid 641069568
starting receive base loop
num_worker_connections 64
Creating worker on tid 45150720
starting receive base loop
num_worker_connections 64
Creating worker on tid 3744199168
starting receive base loop
num_worker_connections 64
Creating worker on tid 3148280320
starting receive base loop
Created 512 connections total
Creating worker on tid 2552361472
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576099702.098126,       0.0,      302181,     271601,      30580,     179248,      92353, 252.911937, 544.500000, 1246.100000, 1907.800000, 394.780433,   0.000000, 2518.065929, 474.606831
Outstanding requests per worker:
8493 8704 8559 8912 28707 39294 42241 40000 
count  386898
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   80110.5,      400553,     360630,      39923,     266199,      94431, 1786.286693, 3337.800000, 4019.500000, 7000.000000, 1247.948680, 219.880000, 6909.690857, 560.567615
Outstanding requests per worker:
42425 42667 42838 42948 63136 78103 53728 52916 
count  294598
count  294598
count  294598
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   81611.1,      408056,     367591,      40465,     282934,      84657, 4577.246865, 9000.000000, 11000.000000, 11000.000000, 2156.757760, 1384.456038, 11108.147621, 595.050464
Outstanding requests per worker:
90604 90887 90736 90695 111143 125518 101255 77888 
count  59927
count  59927
count  59927
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   75312.3,      376562,     338976,      37586,     268278,      70698, 6496.052796, 9000.000000, 10000.000000, 12000.000000, 1620.623299, 1964.135051, 13478.274345, 618.893945
Outstanding requests per worker:
134791 136294 136699 134596 151830 166850 136633 122632 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   71326.9,      356635,     321003,      35632,     258378,      62625, 8834.799082, 11000.000000, 11000.000000, 12000.000000, 1181.735019, 5278.812885, 12913.374901, 635.301116
Outstanding requests per worker:
177830 177478 186352 197118 209425 210597 182292 181853 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   73775.3,      368877,     331898,      36979,     270565,      61333, 11560.701309, 14000.000000, 14000.000000, 15000.000000, 1201.450706, 8059.543610, 16147.407532, 645.770008
Outstanding requests per worker:
251799 244571 252024 251703 268265 231148 254330 231138 
count  0
count  0
count  0
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   74442.3,      372212,     335145,      37067,     276493,      58652, 14074.583158, 16000.000000, 17000.000000, 17000.000000, 1117.438174, 10951.888084, 18170.955658, 656.885655
Outstanding requests per worker:
305855 306307 306063 305843 326974 239121 260717 274500 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:01   0:00 bash docker-en
memcache      7  0.0  0.0  62208  6208 pts/0    S+   21:01   0:00 /usr/lib/linux
memcache      8  142  0.0 248256 110336 pts/0   Sl+  21:01   1:08 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:02   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 640':

        9891934067      instructions:u            #    0.76  insn per cycle         
       13042883771      cycles:u                                                    

      47.860705782 seconds time elapsed

